"use strict";(self.webpackChunkchat_angular=self.webpackChunkchat_angular||[]).push([[179],{2011:(Zt,Je,W)=>{W.d(Je,{Dh:()=>Ve,GT:()=>Le,cc:()=>mt,hO:()=>Tt,on:()=>me,pX:()=>Pe,xv:()=>We});var v=W(4650),x=W(127),q=W(5813);Zt=W.hmd(Zt);const De=["ngOnDestroy"],Pe=(Ye,Bt,jt,Ct={})=>new Proxy(Ye,{get:(bt,at)=>jt.runOutsideAngular(()=>{var rt;if(Ye[at])return!(null===(rt=Ct?.spy)||void 0===rt)&&rt.get&&Ct.spy.get(at,Ye[at]),Ye[at];if(De.indexOf(at)>-1)return()=>{};const Fe=Bt.toPromise().then(je=>{const Ze=je&&je[at];return"function"==typeof Ze?Ze.bind(je):Ze&&Ze.then?Ze.then(ke=>jt.run(()=>ke)):jt.run(()=>Ze)});return new Proxy(()=>{},{get:(je,Ze)=>Fe[Ze],apply:(je,Ze,ke)=>Fe.then(Oe=>{var qe;const He=Oe&&Oe(...ke);return!(null===(qe=Ct?.spy)||void 0===qe)&&qe.apply&&Ct.spy.apply(at,ke,He),He})})})}),Le=(Ye,Bt)=>{Bt.forEach(jt=>{Object.getOwnPropertyNames(jt.prototype||jt).forEach(Ct=>{Object.defineProperty(Ye.prototype,Ct,Object.getOwnPropertyDescriptor(jt.prototype||jt,Ct))})})};class Ue{constructor(Bt){return Bt}}const Ve=new v.OlP("angularfire2.app.options"),We=new v.OlP("angularfire2.app.name");function me(Ye,Bt,jt){const bt="object"==typeof jt&&jt||{};bt.name=bt.name||"string"==typeof jt&&jt||"[DEFAULT]";const rt=x.Z.apps.filter(Fe=>Fe&&Fe.name===bt.name)[0]||Bt.runOutsideAngular(()=>x.Z.initializeApp(Ye,bt));try{JSON.stringify(Ye)!==JSON.stringify(rt.options)&&ge("error",`${rt.name} Firebase App already initialized with different options${Zt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ue(rt)}const ge=(Ye,...Bt)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Ye](...Bt)},Re={provide:Ue,useFactory:me,deps:[Ve,v.R0b,[new v.FiY,We]]};let Tt=(()=>{class Ye{constructor(jt){x.Z.registerVersion("angularfire",q.q4.full,"core"),x.Z.registerVersion("angularfire",q.q4.full,"app-compat"),x.Z.registerVersion("angular",v.q4F.full,jt.toString())}static initializeApp(jt,Ct){return{ngModule:Ye,providers:[{provide:Ve,useValue:jt},{provide:We,useValue:Ct}]}}}return Ye.\u0275fac=function(jt){return new(jt||Ye)(v.LFG(v.Lbi))},Ye.\u0275mod=v.oAB({type:Ye}),Ye.\u0275inj=v.cJS({providers:[Re]}),Ye})();function mt(Ye,Bt,jt,Ct,bt){const[,at,rt]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Ye)||[];if(at)return function Xe(Ye,Bt){try{return Ye.toString()===Bt.toString()}catch{return Ye===Bt}}(bt,rt)||(ot("error",`${Bt} was already initialized on the ${jt} Firebase App with different settings.${Ut?" You may need to reload as Firebase is not HMR aware.":""}`),ot("warn",{is:bt,was:rt})),at;{const Fe=Ct();return globalThis.\u0275AngularfireInstanceCache.push([Ye,Fe,bt]),Fe}}const Ut=!!Zt.hot,ot=(Ye,...Bt)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Ye](...Bt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Zt,Je,W)=>{W.d(Je,{q4:()=>N,iC:()=>ui,fc:()=>F1,HU:()=>sl,vb:()=>Js,JM:()=>vo});var v=W(4650),x=W(5867),q=W(5861),De=W(9681),Pe=W(2090),Le=W(4859),Ue=W(1877),Ve=W(8766);const We="@firebase/installations",me="0.5.12",Re=`w:${me}`,Tt="FIS_v2",Bt=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function jt(R){return R instanceof Pe.ZR&&R.code.includes("request-failed")}function Ct({projectId:R}){return`https://firebaseinstallations.googleapis.com/v1/projects/${R}/installations`}function bt(R){return{token:R.token,requestStatus:2,expiresIn:Oe(R.expiresIn),creationTime:Date.now()}}function at(R,U){return rt.apply(this,arguments)}function rt(){return(rt=(0,q.Z)(function*(R,U){const fe=(yield U.json()).error;return Bt.create("request-failed",{requestName:R,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Fe({apiKey:R}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R})}function je(R,{refreshToken:U}){const Y=Fe(R);return Y.append("Authorization",function qe(R){return`${Tt} ${R}`}(U)),Y}function Ze(R){return ke.apply(this,arguments)}function ke(){return(ke=(0,q.Z)(function*(R){const U=yield R();return U.status>=500&&U.status<600?R():U})).apply(this,arguments)}function Oe(R){return Number(R.replace("s","000"))}function He(R,U){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,q.Z)(function*({appConfig:R,heartbeatServiceProvider:U},{fid:Y}){const fe=Ct(R),ze=Fe(R),et=U.getImmediate({optional:!0});if(et){const Wn=yield et.getHeartbeatsHeader();Wn&&ze.append("x-firebase-client",Wn)}const Wt={method:"POST",headers:ze,body:JSON.stringify({fid:Y,authVersion:Tt,appId:R.appId,sdkVersion:Re})},Nn=yield Ze(()=>fetch(fe,Wt));if(Nn.ok){const Wn=yield Nn.json();return{fid:Wn.fid||Y,registrationStatus:2,refreshToken:Wn.refreshToken,authToken:bt(Wn.authToken)}}throw yield at("Create Installation",Nn)})).apply(this,arguments)}function xt(R){return new Promise(U=>{setTimeout(U,R)})}const Hn=/^[cdef][\w-]{21}$/;function Pt(){try{const R=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(R),R[0]=112+R[0]%16;const Y=function ln(R){return function en(R){return btoa(String.fromCharCode(...R)).replace(/\+/g,"-").replace(/\//g,"_")}(R).substr(0,22)}(R);return Hn.test(Y)?Y:""}catch{return""}}function er(R){return`${R.appName}!${R.appId}`}const $n=new Map;function Qn(R,U){const Y=er(R);Tr(Y,U),function mr(R,U){const Y=function fr(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=R=>{Tr(R.data.key,R.data.fid)}),Lr}();Y&&Y.postMessage({key:R,fid:U}),function ei(){0===$n.size&&Lr&&(Lr.close(),Lr=null)}()}(Y,U)}function Tr(R,U){const Y=$n.get(R);if(Y)for(const fe of Y)fe(U)}let Lr=null;const yr="firebase-installations-store";let Fr=null;function tn(){return Fr||(Fr=(0,Ve.X3)("firebase-installations-database",1,{upgrade:(R,U)=>{0===U&&R.createObjectStore(yr)}})),Fr}function or(R,U){return pr.apply(this,arguments)}function pr(){return(pr=(0,q.Z)(function*(R,U){const Y=er(R),ze=(yield tn()).transaction(yr,"readwrite"),et=ze.objectStore(yr),At=yield et.get(Y);return yield et.put(U,Y),yield ze.done,(!At||At.fid!==U.fid)&&Qn(R,U.fid),U})).apply(this,arguments)}function xn(R){return dr.apply(this,arguments)}function dr(){return(dr=(0,q.Z)(function*(R){const U=er(R),fe=(yield tn()).transaction(yr,"readwrite");yield fe.objectStore(yr).delete(U),yield fe.done})).apply(this,arguments)}function $r(R,U){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,q.Z)(function*(R,U){const Y=er(R),ze=(yield tn()).transaction(yr,"readwrite"),et=ze.objectStore(yr),At=yield et.get(Y),Wt=U(At);return void 0===Wt?yield et.delete(Y):yield et.put(Wt,Y),yield ze.done,Wt&&(!At||At.fid!==Wt.fid)&&Qn(R,Wt.fid),Wt})).apply(this,arguments)}function kn(R){return dt.apply(this,arguments)}function dt(){return(dt=(0,q.Z)(function*(R){let U;const Y=yield $r(R.appConfig,fe=>{const ze=ye(fe),et=le(R,ze);return U=et.registrationPromise,et.installationEntry});return""===Y.fid?{installationEntry:yield U}:{installationEntry:Y,registrationPromise:U}})).apply(this,arguments)}function ye(R){return dn(R||{fid:Pt(),registrationStatus:0})}function le(R,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(Bt.create("app-offline"))};const Y={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},fe=function $e(R,U){return vt.apply(this,arguments)}(R,Y);return{installationEntry:Y,registrationPromise:fe}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:nn(R)}:{installationEntry:U}}function vt(){return(vt=(0,q.Z)(function*(R,U){try{const Y=yield He(R,U);return or(R.appConfig,Y)}catch(Y){throw jt(Y)&&409===Y.customData.serverCode?yield xn(R.appConfig):yield or(R.appConfig,{fid:U.fid,registrationStatus:0}),Y}})).apply(this,arguments)}function nn(R){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,q.Z)(function*(R){let U=yield Qt(R.appConfig);for(;1===U.registrationStatus;)yield xt(100),U=yield Qt(R.appConfig);if(0===U.registrationStatus){const{installationEntry:Y,registrationPromise:fe}=yield kn(R);return fe||Y}return U})).apply(this,arguments)}function Qt(R){return $r(R,U=>{if(!U)throw Bt.create("installation-not-found");return dn(U)})}function dn(R){return function cr(R){return 1===R.registrationStatus&&R.registrationTime+1e4<Date.now()}(R)?{fid:R.fid,registrationStatus:0}:R}function En(R,U){return xr.apply(this,arguments)}function xr(){return(xr=(0,q.Z)(function*({appConfig:R,heartbeatServiceProvider:U},Y){const fe=on(R,Y),ze=je(R,Y),et=U.getImmediate({optional:!0});if(et){const Wn=yield et.getHeartbeatsHeader();Wn&&ze.append("x-firebase-client",Wn)}const Wt={method:"POST",headers:ze,body:JSON.stringify({installation:{sdkVersion:Re,appId:R.appId}})},Nn=yield Ze(()=>fetch(fe,Wt));if(Nn.ok)return bt(yield Nn.json());throw yield at("Generate Auth Token",Nn)})).apply(this,arguments)}function on(R,{fid:U}){return`${Ct(R)}/${U}/authTokens:generate`}function ue(R){return pe.apply(this,arguments)}function pe(){return(pe=(0,q.Z)(function*(R,U=!1){let Y;const fe=yield $r(R.appConfig,et=>{if(!hn(et))throw Bt.create("not-registered");const At=et.authToken;if(!U&&Gn(At))return et;if(1===At.requestStatus)return Y=he(R,U),et;{if(!navigator.onLine)throw Bt.create("app-offline");const Wt=Ar(et);return Y=gt(R,Wt),Wt}});return Y?yield Y:fe.authToken})).apply(this,arguments)}function he(R,U){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,q.Z)(function*(R,U){let Y=yield _e(R.appConfig);for(;1===Y.authToken.requestStatus;)yield xt(100),Y=yield _e(R.appConfig);const fe=Y.authToken;return 0===fe.requestStatus?ue(R,U):fe})).apply(this,arguments)}function _e(R){return $r(R,U=>{if(!hn(U))throw Bt.create("not-registered");return function xe(R){return 1===R.requestStatus&&R.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function gt(R,U){return kt.apply(this,arguments)}function kt(){return(kt=(0,q.Z)(function*(R,U){try{const Y=yield En(R,U),fe=Object.assign(Object.assign({},U),{authToken:Y});return yield or(R.appConfig,fe),Y}catch(Y){if(!jt(Y)||401!==Y.customData.serverCode&&404!==Y.customData.serverCode){const fe=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield or(R.appConfig,fe)}else yield xn(R.appConfig);throw Y}})).apply(this,arguments)}function hn(R){return void 0!==R&&2===R.registrationStatus}function Gn(R){return 2===R.requestStatus&&!function Un(R){const U=Date.now();return U<R.creationTime||R.creationTime+R.expiresIn<U+36e5}(R)}function Ar(R){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},R),{authToken:U})}function ve(){return(ve=(0,q.Z)(function*(R){const U=R,{installationEntry:Y,registrationPromise:fe}=yield kn(U);return fe?fe.catch(console.error):ue(U).catch(console.error),Y.fid})).apply(this,arguments)}function Rt(){return(Rt=(0,q.Z)(function*(R,U=!1){const Y=R;return yield _t(Y),(yield ue(Y,U)).token})).apply(this,arguments)}function _t(R){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,q.Z)(function*(R){const{registrationPromise:U}=yield kn(R);U&&(yield U)})).apply(this,arguments)}function cn(R){return Bt.create("missing-app-config-values",{valueName:R})}const zr="installations",_i=R=>{const U=R.getProvider("app").getImmediate(),Y=function Rn(R){if(!R||!R.options)throw cn("App Configuration");if(!R.name)throw cn("App Name");const U=["projectId","apiKey","appId"];for(const Y of U)if(!R.options[Y])throw cn(Y);return{appName:R.name,projectId:R.options.projectId,apiKey:R.options.apiKey,appId:R.options.appId}}(U);return{app:U,appConfig:Y,heartbeatServiceProvider:(0,De._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},$i=R=>{const U=R.getProvider("app").getImmediate(),Y=(0,De._getProvider)(U,zr).getImmediate();return{getId:()=>function Ee(R){return ve.apply(this,arguments)}(Y),getToken:ze=>function ft(R){return Rt.apply(this,arguments)}(Y,ze)}};(function ci(){(0,De._registerComponent)(new Le.wA(zr,_i,"PUBLIC")),(0,De._registerComponent)(new Le.wA("installations-internal",$i,"PRIVATE"))})(),(0,De.registerVersion)(We,me),(0,De.registerVersion)(We,me,"esm2017");const js="@firebase/remote-config",On=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ga{constructor(U,Y,fe,ze){this.client=U,this.storage=Y,this.storageCache=fe,this.logger=ze}isCachedDataFresh(U,Y){if(!Y)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-Y,ze=fe<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${ze}.`),ze}fetch(U){var Y=this;return(0,q.Z)(function*(){const[fe,ze]=yield Promise.all([Y.storage.getLastSuccessfulFetchTimestampMillis(),Y.storage.getLastSuccessfulFetchResponse()]);if(ze&&Y.isCachedDataFresh(U.cacheMaxAgeMillis,fe))return ze;U.eTag=ze&&ze.eTag;const et=yield Y.client.fetch(U),At=[Y.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===et.status&&At.push(Y.storage.setLastSuccessfulFetchResponse(et)),yield Promise.all(At),et})()}}function Ca(R=navigator){return R.languages&&R.languages[0]||R.language}class ao{constructor(U,Y,fe,ze,et,At){this.firebaseInstallations=U,this.sdkVersion=Y,this.namespace=fe,this.projectId=ze,this.apiKey=et,this.appId=At}fetch(U){var Y=this;return(0,q.Z)(function*(){var fe,ze,et;const[At,Wt]=yield Promise.all([Y.firebaseInstallations.getId(),Y.firebaseInstallations.getToken()]),Wn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Y.projectId}/namespaces/${Y.namespace}:fetch?key=${Y.apiKey}`,Yn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},An={sdk_version:Y.sdkVersion,app_instance_id:At,app_instance_id_token:Wt,app_id:Y.appId,language_code:Ca()},ss={method:"POST",headers:Yn,body:JSON.stringify(An)},Os=fetch(Wn,ss),al=new Promise((z1,cl)=>{U.signal.addEventListener(()=>{const Gl=new Error("The operation was aborted.");Gl.name="AbortError",cl(Gl)})});let zo;try{yield Promise.race([Os,al]),zo=yield Os}catch(z1){let cl="fetch-client-network";throw"AbortError"===(null===(fe=z1)||void 0===fe?void 0:fe.name)&&(cl="fetch-timeout"),On.create(cl,{originalErrorMessage:null===(ze=z1)||void 0===ze?void 0:ze.message})}let oa=zo.status;const U2=zo.headers.get("ETag")||void 0;let $l,bc;if(200===zo.status){let z1;try{z1=yield zo.json()}catch(cl){throw On.create("fetch-client-parse",{originalErrorMessage:null===(et=cl)||void 0===et?void 0:et.message})}$l=z1.entries,bc=z1.state}if("INSTANCE_STATE_UNSPECIFIED"===bc?oa=500:"NO_CHANGE"===bc?oa=304:("NO_TEMPLATE"===bc||"EMPTY_CONFIG"===bc)&&($l={}),304!==oa&&200!==oa)throw On.create("fetch-status",{httpStatus:oa});return{status:oa,eTag:U2,config:$l}})()}}class ws{constructor(U,Y){this.client=U,this.storage=Y}fetch(U){var Y=this;return(0,q.Z)(function*(){const fe=(yield Y.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Y.attemptFetch(U,fe)})()}attemptFetch(U,{throttleEndTimeMillis:Y,backoffCount:fe}){var ze=this;return(0,q.Z)(function*(){yield function Wi(R,U){return new Promise((Y,fe)=>{const ze=Math.max(U-Date.now(),0),et=setTimeout(Y,ze);R.addEventListener(()=>{clearTimeout(et),fe(On.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,Y);try{const et=yield ze.client.fetch(U);return yield ze.storage.deleteThrottleMetadata(),et}catch(et){if(!function w1(R){if(!(R instanceof Pe.ZR&&R.customData))return!1;const U=Number(R.customData.httpStatus);return 429===U||500===U||503===U||504===U}(et))throw et;const At={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(fe),backoffCount:fe+1};return yield ze.storage.setThrottleMetadata(At),ze.attemptFetch(U,At)}})()}}class Wa{constructor(U,Y,fe,ze,et){this.app=U,this._client=Y,this._storageCache=fe,this._storage=ze,this._logger=et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Mo(R,U){var Y;const fe=R.target.error||void 0;return On.create(U,{originalErrorMessage:fe&&(null===(Y=fe)||void 0===Y?void 0:Y.message)})}const Gs="app_namespace_store";class No{constructor(U,Y,fe,ze=function I1(){return new Promise((R,U)=>{var Y;try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=ze=>{U(Mo(ze,"storage-open"))},fe.onsuccess=ze=>{R(ze.target.result)},fe.onupgradeneeded=ze=>{0===ze.oldVersion&&ze.target.result.createObjectStore(Gs,{keyPath:"compositeKey"})}}catch(fe){U(On.create("storage-open",{originalErrorMessage:null===(Y=fe)||void 0===Y?void 0:Y.message}))}})}()){this.appId=U,this.appName=Y,this.namespace=fe,this.openDbPromise=ze}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var Y=this;return(0,q.Z)(function*(){const fe=yield Y.openDbPromise;return new Promise((ze,et)=>{var At;const Nn=fe.transaction([Gs],"readonly").objectStore(Gs),Wn=Y.createCompositeKey(U);try{const Yn=Nn.get(Wn);Yn.onerror=An=>{et(Mo(An,"storage-get"))},Yn.onsuccess=An=>{const ss=An.target.result;ze(ss?ss.value:void 0)}}catch(Yn){et(On.create("storage-get",{originalErrorMessage:null===(At=Yn)||void 0===At?void 0:At.message}))}})})()}set(U,Y){var fe=this;return(0,q.Z)(function*(){const ze=yield fe.openDbPromise;return new Promise((et,At)=>{var Wt;const Wn=ze.transaction([Gs],"readwrite").objectStore(Gs),Yn=fe.createCompositeKey(U);try{const An=Wn.put({compositeKey:Yn,value:Y});An.onerror=ss=>{At(Mo(ss,"storage-set"))},An.onsuccess=()=>{et()}}catch(An){At(On.create("storage-set",{originalErrorMessage:null===(Wt=An)||void 0===Wt?void 0:Wt.message}))}})})()}delete(U){var Y=this;return(0,q.Z)(function*(){const fe=yield Y.openDbPromise;return new Promise((ze,et)=>{var At;const Nn=fe.transaction([Gs],"readwrite").objectStore(Gs),Wn=Y.createCompositeKey(U);try{const Yn=Nn.delete(Wn);Yn.onerror=An=>{et(Mo(An,"storage-delete"))},Yn.onsuccess=()=>{ze()}}catch(Yn){et(On.create("storage-delete",{originalErrorMessage:null===(At=Yn)||void 0===At?void 0:At.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class qi{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,q.Z)(function*(){const Y=U.storage.getLastFetchStatus(),fe=U.storage.getLastSuccessfulFetchTimestampMillis(),ze=U.storage.getActiveConfig(),et=yield Y;et&&(U.lastFetchStatus=et);const At=yield fe;At&&(U.lastSuccessfulFetchTimestampMillis=At);const Wt=yield ze;Wt&&(U.activeConfig=Wt)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function Ws(){return qs.apply(this,arguments)}function qs(){return(qs=(0,q.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}!function qa(){(0,De._registerComponent)(new Le.wA("remote-config",function R(U,{instanceIdentifier:Y}){const fe=U.getProvider("app").getImmediate(),ze=U.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw On.create("registration-window");if(!(0,Pe.hl)())throw On.create("indexed-db-unavailable");const{projectId:et,apiKey:At,appId:Wt}=fe.options;if(!et)throw On.create("registration-project-id");if(!At)throw On.create("registration-api-key");if(!Wt)throw On.create("registration-app-id");const Nn=new No(Wt,fe.name,Y=Y||"firebase"),Wn=new qi(Nn),Yn=new Ue.Yd(js);Yn.logLevel=Ue.in.ERROR;const An=new ao(ze,De.SDK_VERSION,Y,et,At,Wt),ss=new ws(An,Nn),Os=new Ga(ss,Nn,Wn,Yn),al=new Wa(fe,Os,Wn,Nn,Yn);return function Br(R){const U=(0,Pe.m9)(R);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(al),al},"PUBLIC").setMultipleInstances(!0)),(0,De.registerVersion)(js,"0.3.11"),(0,De.registerVersion)(js,"0.3.11","esm2017")}();const Zi="/firebase-messaging-sw.js",fi="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",As="google.c.a.c_id",Ks="google.c.a.c_l",Jo="google.c.a.ts",Ms="google.c.a.e";var Vr=(()=>{return(R=Vr||(Vr={})).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",Vr;var R})();function Ki(R){const U=new Uint8Array(R);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function co(R){const Y=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(Y),ze=new Uint8Array(fe.length);for(let et=0;et<fe.length;++et)ze[et]=fe.charCodeAt(et);return ze}const Es="fcm_token_details_db",ea="fcm_token_object_Store";function Gr(R){return ko.apply(this,arguments)}function ko(){return ko=(0,q.Z)(function*(R){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(et=>et.name).includes(Es))return null;let U=null;return(yield(0,Ve.X3)(Es,5,{upgrade:(fe=(0,q.Z)(function*(ze,et,At,Wt){var Nn;if(et<2||!ze.objectStoreNames.contains(ea))return;const Wn=Wt.objectStore(ea),Yn=yield Wn.index("fcmSenderId").get(R);if(yield Wn.clear(),Yn)if(2===et){const An=Yn;if(!An.auth||!An.p256dh||!An.endpoint)return;U={token:An.fcmToken,createTime:null!==(Nn=An.createTime)&&void 0!==Nn?Nn:Date.now(),subscriptionOptions:{auth:An.auth,p256dh:An.p256dh,endpoint:An.endpoint,swScope:An.swScope,vapidKey:"string"==typeof An.vapidKey?An.vapidKey:Ki(An.vapidKey)}}}else if(3===et){const An=Yn;U={token:An.fcmToken,createTime:An.createTime,subscriptionOptions:{auth:Ki(An.auth),p256dh:Ki(An.p256dh),endpoint:An.endpoint,swScope:An.swScope,vapidKey:Ki(An.vapidKey)}}}else if(4===et){const An=Yn;U={token:An.fcmToken,createTime:An.createTime,subscriptionOptions:{auth:Ki(An.auth),p256dh:Ki(An.p256dh),endpoint:An.endpoint,swScope:An.swScope,vapidKey:Ki(An.vapidKey)}}}}),function(et,At,Wt,Nn){return fe.apply(this,arguments)})})).close(),yield(0,Ve.Lj)(Es),yield(0,Ve.Lj)("fcm_vapid_details_db"),yield(0,Ve.Lj)("undefined"),Za(U)?U:null;var fe}),ko.apply(this,arguments)}function Za(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:U}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const Fi="firebase-messaging-store";let Yi=null;function si(){return Yi||(Yi=(0,Ve.X3)("firebase-messaging-database",1,{upgrade:(R,U)=>{0===U&&R.createObjectStore(Fi)}})),Yi}function li(R){return z.apply(this,arguments)}function z(){return(z=(0,q.Z)(function*(R){const U=ct(R),fe=yield(yield si()).transaction(Fi).objectStore(Fi).get(U);if(fe)return fe;{const ze=yield Gr(R.appConfig.senderId);if(ze)return yield J(R,ze),ze}})).apply(this,arguments)}function J(R,U){return V.apply(this,arguments)}function V(){return(V=(0,q.Z)(function*(R,U){const Y=ct(R),ze=(yield si()).transaction(Fi,"readwrite");return yield ze.objectStore(Fi).put(U,Y),yield ze.done,U})).apply(this,arguments)}function te(R){return Se.apply(this,arguments)}function Se(){return(Se=(0,q.Z)(function*(R){const U=ct(R),fe=(yield si()).transaction(Fi,"readwrite");yield fe.objectStore(Fi).delete(U),yield fe.done})).apply(this,arguments)}function ct({appConfig:R}){return R.appId}const Gt=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nr(R,U){return gr.apply(this,arguments)}function gr(){return(gr=(0,q.Z)(function*(R,U){var Y;const fe=yield wt(R),ze=ks(U),et={method:"POST",headers:fe,body:JSON.stringify(ze)};let At;try{At=yield(yield fetch(qr(R.appConfig),et)).json()}catch(Wt){throw Gt.create("token-subscribe-failed",{errorInfo:null===(Y=Wt)||void 0===Y?void 0:Y.toString()})}if(At.error)throw Gt.create("token-subscribe-failed",{errorInfo:At.error.message});if(!At.token)throw Gt.create("token-subscribe-no-token");return At.token})).apply(this,arguments)}function Er(R,U){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,q.Z)(function*(R,U){var Y;const fe=yield wt(R),ze=ks(U.subscriptionOptions),et={method:"PATCH",headers:fe,body:JSON.stringify(ze)};let At;try{At=yield(yield fetch(`${qr(R.appConfig)}/${U.token}`,et)).json()}catch(Wt){throw Gt.create("token-update-failed",{errorInfo:null===(Y=Wt)||void 0===Y?void 0:Y.toString()})}if(At.error)throw Gt.create("token-update-failed",{errorInfo:At.error.message});if(!At.token)throw Gt.create("token-update-no-token");return At.token})).apply(this,arguments)}function hr(R,U){return vr.apply(this,arguments)}function vr(){return(vr=(0,q.Z)(function*(R,U){var Y;const ze={method:"DELETE",headers:yield wt(R)};try{const At=yield(yield fetch(`${qr(R.appConfig)}/${U}`,ze)).json();if(At.error)throw Gt.create("token-unsubscribe-failed",{errorInfo:At.error.message})}catch(et){throw Gt.create("token-unsubscribe-failed",{errorInfo:null===(Y=et)||void 0===Y?void 0:Y.toString()})}})).apply(this,arguments)}function qr({projectId:R}){return`https://fcmregistrations.googleapis.com/v1/projects/${R}/registrations`}function wt(R){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,q.Z)(function*({appConfig:R,installations:U}){const Y=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R.apiKey,"x-goog-firebase-installations-auth":`FIS ${Y}`})})).apply(this,arguments)}function ks({p256dh:R,auth:U,endpoint:Y,vapidKey:fe}){const ze={web:{endpoint:Y,auth:U,p256dh:R}};return fe!==Zs&&(ze.web.applicationPubKey=fe),ze}const bi=6048e5;function Zr(R){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,q.Z)(function*(R){const U=yield yu(R.swRegistration,R.vapidKey),Y={vapidKey:R.vapidKey,swScope:R.swRegistration.scope,endpoint:U.endpoint,auth:Ki(U.getKey("auth")),p256dh:Ki(U.getKey("p256dh"))},fe=yield li(R.firebaseDependencies);if(fe){if(H(fe.subscriptionOptions,Y))return Date.now()>=fe.createTime+bi?cc(R,{token:fe.token,createTime:Date.now(),subscriptionOptions:Y}):fe.token;try{yield hr(R.firebaseDependencies,fe.token)}catch(ze){console.warn(ze)}return Ea(R.firebaseDependencies,Y)}return Ea(R.firebaseDependencies,Y)})).apply(this,arguments)}function fs(R){return pi.apply(this,arguments)}function pi(){return(pi=(0,q.Z)(function*(R){const U=yield li(R.firebaseDependencies);U&&(yield hr(R.firebaseDependencies,U.token),yield te(R.firebaseDependencies));const Y=yield R.swRegistration.pushManager.getSubscription();return!Y||Y.unsubscribe()})).apply(this,arguments)}function cc(R,U){return ta.apply(this,arguments)}function ta(){return(ta=(0,q.Z)(function*(R,U){try{const Y=yield Er(R.firebaseDependencies,U),fe=Object.assign(Object.assign({},U),{token:Y,createTime:Date.now()});return yield J(R.firebaseDependencies,fe),Y}catch(Y){throw yield fs(R),Y}})).apply(this,arguments)}function Ea(R,U){return lo.apply(this,arguments)}function lo(){return(lo=(0,q.Z)(function*(R,U){const fe={token:yield Nr(R,U),createTime:Date.now(),subscriptionOptions:U};return yield J(R,fe),fe.token})).apply(this,arguments)}function yu(R,U){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,q.Z)(function*(R,U){return(yield R.pushManager.getSubscription())||R.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:co(U)})})).apply(this,arguments)}function H(R,U){return U.vapidKey===R.vapidKey&&U.endpoint===R.endpoint&&U.auth===R.auth&&U.p256dh===R.p256dh}function L(R){const U={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function P(R,U){if(!U.notification)return;R.notification={};const Y=U.notification.title;Y&&(R.notification.title=Y);const fe=U.notification.body;fe&&(R.notification.body=fe);const ze=U.notification.image;ze&&(R.notification.image=ze)}(U,R),function X(R,U){!U.data||(R.data=U.data)}(U,R),function nt(R,U){var Y,fe,ze,et,At;if(!(U.fcmOptions||null!==(Y=U.notification)&&void 0!==Y&&Y.click_action))return;R.fcmOptions={};const Wt=null!==(ze=null===(fe=U.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==ze?ze:null===(et=U.notification)||void 0===et?void 0:et.click_action;Wt&&(R.fcmOptions.link=Wt);const Nn=null===(At=U.fcmOptions)||void 0===At?void 0:At.analytics_label;Nn&&(R.fcmOptions.analyticsLabel=Nn)}(U,R),U}function vn(R){return"object"==typeof R&&!!R&&As in R}function Pr(R,U){const Y=[];for(let fe=0;fe<R.length;fe++)Y.push(R.charAt(fe)),fe<U.length&&Y.push(U.charAt(fe));return Y.join("")}function Qi(R){return Gt.create("missing-app-config-values",{valueName:R})}Pr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Pr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ps{constructor(U,Y,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ze=function wi(R){if(!R||!R.options)throw Qi("App Configuration Object");if(!R.name)throw Qi("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:Y}=R;for(const fe of U)if(!Y[fe])throw Qi(fe);return{appName:R.name,projectId:Y.projectId,apiKey:Y.apiKey,appId:Y.appId,senderId:Y.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:ze,installations:Y,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function uo(R){return ho.apply(this,arguments)}function ho(){return(ho=(0,q.Z)(function*(R){var U;try{R.swRegistration=yield navigator.serviceWorker.register(Zi,{scope:fi}),R.swRegistration.update().catch(()=>{})}catch(Y){throw Gt.create("failed-service-worker-registration",{browserErrorMessage:null===(U=Y)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function D1(R,U){return S1.apply(this,arguments)}function S1(){return(S1=(0,q.Z)(function*(R,U){if(!U&&!R.swRegistration&&(yield uo(R)),U||!R.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw Gt.create("invalid-sw-registration");R.swRegistration=U}})).apply(this,arguments)}function Pl(R,U){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,q.Z)(function*(R,U){U?R.vapidKey=U:R.vapidKey||(R.vapidKey=Zs)})).apply(this,arguments)}function Ka(){return(Ka=(0,q.Z)(function*(R,U){if(!navigator)throw Gt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gt.create("permission-blocked");return yield Pl(R,U?.vapidKey),yield D1(R,U?.serviceWorkerRegistration),Zr(R)})).apply(this,arguments)}function Gc(R,U,Y){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,q.Z)(function*(R,U,Y){const fe=T1(U);(yield R.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:Y[As],message_name:Y[Ks],message_time:Y[Jo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function T1(R){switch(R){case Vr.NOTIFICATION_CLICKED:return"notification_open";case Vr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qa(){return(Qa=(0,q.Z)(function*(R,U){const Y=U.data;if(!Y.isFirebaseMessaging)return;R.onMessageHandler&&Y.messageType===Vr.PUSH_RECEIVED&&("function"==typeof R.onMessageHandler?R.onMessageHandler(L(Y)):R.onMessageHandler.next(L(Y)));const fe=Y.data;vn(fe)&&"1"===fe[Ms]&&(yield Gc(R,Y.messageType,fe))})).apply(this,arguments)}const oi="@firebase/messaging",Hr=R=>{const U=new Ps(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Y=>function Ol(R,U){return Qa.apply(this,arguments)}(U,Y)),U},Ll=R=>{const U=R.getProvider("messaging").getImmediate();return{getToken:fe=>function $c(R,U){return Ka.apply(this,arguments)}(U,fe)}};function x1(){return lc.apply(this,arguments)}function lc(){return(lc=(0,q.Z)(function*(){try{yield(0,Pe.eu)()}catch{return!1}return typeof window<"u"&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _u(){(0,De._registerComponent)(new Le.wA("messaging",Hr,"PUBLIC")),(0,De._registerComponent)(new Le.wA("messaging-internal",Ll,"PRIVATE")),(0,De.registerVersion)(oi,"0.9.16"),(0,De.registerVersion)(oi,"0.9.16","esm2017")}();const fo="analytics",uc="firebase_id",Sa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dc="https://www.googletagmanager.com/gtag/js",zi=new Ue.Yd("@firebase/analytics");function zl(R){return Promise.all(R.map(U=>U.catch(Y=>Y)))}function M2(R,U){const Y=document.createElement("script");Y.src=`${dc}?l=${R}&id=${U}`,Y.async=!0,document.head.appendChild(Y)}function e1(R,U,Y,fe,ze,et){return M1.apply(this,arguments)}function M1(){return(M1=(0,q.Z)(function*(R,U,Y,fe,ze,et){const At=fe[ze];try{if(At)yield U[At];else{const Nn=(yield zl(Y)).find(Wn=>Wn.measurementId===ze);Nn&&(yield U[Nn.appId])}}catch(Wt){zi.error(Wt)}R("config",ze,et)})).apply(this,arguments)}function N1(R,U,Y,fe,ze){return na.apply(this,arguments)}function na(){return(na=(0,q.Z)(function*(R,U,Y,fe,ze){try{let et=[];if(ze&&ze.send_to){let At=ze.send_to;Array.isArray(At)||(At=[At]);const Wt=yield zl(Y);for(const Nn of At){const Wn=Wt.find(An=>An.measurementId===Nn),Yn=Wn&&U[Wn.appId];if(!Yn){et=[];break}et.push(Yn)}}0===et.length&&(et=Object.values(U)),yield Promise.all(et),R("event",fe,ze||{})}catch(et){zi.error(et)}})).apply(this,arguments)}function Ta(){const R=window.document.getElementsByTagName("script");for(const U of Object.values(R))if(U.src&&U.src.includes(dc))return U;return null}const mi=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Yc=new class N2{constructor(U={},Y=1e3){this.throttleMetadata=U,this.intervalMillis=Y}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,Y){this.throttleMetadata[U]=Y}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function n1(R){return new Headers({Accept:"application/json","x-goog-api-key":R})}function bu(R){return _r.apply(this,arguments)}function _r(){return(_r=(0,q.Z)(function*(R){var U;const{appId:Y,apiKey:fe}=R,ze={method:"GET",headers:n1(fe)},et=Sa.replace("{app-id}",Y),At=yield fetch(et,ze);if(200!==At.status&&304!==At.status){let Wt="";try{const Nn=yield At.json();null!==(U=Nn.error)&&void 0!==U&&U.message&&(Wt=Nn.error.message)}catch{}throw mi.create("config-fetch-failed",{httpStatus:At.status,responseMessage:Wt})}return At.json()})).apply(this,arguments)}function Qc(R){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,q.Z)(function*(R,U=Yc,Y){const{appId:fe,apiKey:ze,measurementId:et}=R.options;if(!fe)throw mi.create("no-app-id");if(!ze){if(et)return{measurementId:et,appId:fe};throw mi.create("no-api-key")}const At=U.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Wt=new Hl;return setTimeout((0,q.Z)(function*(){Wt.abort()}),void 0!==Y?Y:6e4),k1({appId:fe,apiKey:ze,measurementId:et},At,Wt,U)})).apply(this,arguments)}function k1(R,U,Y){return r1.apply(this,arguments)}function r1(){return(r1=(0,q.Z)(function*(R,{throttleEndTimeMillis:U,backoffCount:Y},fe,ze=Yc){var et,At;const{appId:Wt,measurementId:Nn}=R;try{yield fc(fe,U)}catch(Wn){if(Nn)return zi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Nn} provided in the "measurementId" field in the local Firebase config. [${null===(et=Wn)||void 0===et?void 0:et.message}]`),{appId:Wt,measurementId:Nn};throw Wn}try{const Wn=yield bu(R);return ze.deleteThrottleMetadata(Wt),Wn}catch(Wn){const Yn=Wn;if(!pc(Yn)){if(ze.deleteThrottleMetadata(Wt),Nn)return zi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Nn} provided in the "measurementId" field in the local Firebase config. [${Yn?.message}]`),{appId:Wt,measurementId:Nn};throw Wn}const An=503===Number(null===(At=Yn?.customData)||void 0===At?void 0:At.httpStatus)?(0,Pe.$s)(Y,ze.intervalMillis,30):(0,Pe.$s)(Y,ze.intervalMillis),ss={throttleEndTimeMillis:Date.now()+An,backoffCount:Y+1};return ze.setThrottleMetadata(Wt,ss),zi.debug(`Calling attemptFetch again in ${An} millis`),k1(R,ss,fe,ze)}})).apply(this,arguments)}function fc(R,U){return new Promise((Y,fe)=>{const ze=Math.max(U-Date.now(),0),et=setTimeout(Y,ze);R.addEventListener(()=>{clearTimeout(et),fe(mi.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function pc(R){if(!(R instanceof Pe.ZR&&R.customData))return!1;const U=Number(R.customData.httpStatus);return 429===U||500===U||503===U||504===U}class Hl{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let mc,vc;function i1(){return(i1=(0,q.Z)(function*(R,U,Y,fe,ze){if(ze&&ze.global)R("event",Y,fe);else{const et=yield U;R("event",Y,Object.assign(Object.assign({},fe),{send_to:et}))}})).apply(this,arguments)}function Jc(R){vc=R}function R1(R){mc=R}function is(){return P1.apply(this,arguments)}function P1(){return(P1=(0,q.Z)(function*(){var R;if(!(0,Pe.hl)())return zi.warn(mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(U){return zi.warn(mi.create("indexeddb-unavailable",{errorInfo:null===(R=U)||void 0===R?void 0:R.toString()}).message),!1}return!0})).apply(this,arguments)}function Qs(){return(Qs=(0,q.Z)(function*(R,U,Y,fe,ze,et,At){var Wt;const Nn=Qc(R);Nn.then(Os=>{Y[Os.measurementId]=Os.appId,R.options.measurementId&&Os.measurementId!==R.options.measurementId&&zi.warn(`The measurement ID in the local Firebase config (${R.options.measurementId}) does not match the measurement ID fetched from the server (${Os.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Os=>zi.error(Os)),U.push(Nn);const Wn=is().then(Os=>{if(Os)return fe.getId()}),[Yn,An]=yield Promise.all([Nn,Wn]);Ta()||M2(et,Yn.measurementId),vc&&(ze("consent","default",vc),Jc(void 0)),ze("js",new Date);const ss=null!==(Wt=At?.config)&&void 0!==Wt?Wt:{};return ss.origin="firebase",ss.update=!0,null!=An&&(ss[uc]=An),ze("config",Yn.measurementId,ss),mc&&(ze("set",mc),R1(void 0)),Yn.measurementId})).apply(this,arguments)}class sa{constructor(U){this.app=U}_delete(){return delete Ji[this.app.options.appId],Promise.resolve()}}let Ji={},Xc=[];const a1={};let el,tr,Lo="dataLayer",Bl=!1;function tl(R,U,Y){!function pd(){const R=[];if((0,Pe.ru)()&&R.push("This is a browser extension environment."),(0,Pe.zI)()||R.push("Cookies are not available."),R.length>0){const U=R.map((fe,ze)=>`(${ze+1}) ${fe}`).join(" "),Y=mi.create("invalid-analytics-context",{errorInfo:U});zi.warn(Y.message)}}();const fe=R.options.appId;if(!fe)throw mi.create("no-app-id");if(!R.options.apiKey){if(!R.options.measurementId)throw mi.create("no-api-key");zi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${R.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ji[fe])throw mi.create("already-exists",{id:fe});if(!Bl){!function Vl(R){let U=[];Array.isArray(window[R])?U=window[R]:window[R]=U}(Lo);const{wrappedGtag:et,gtagCore:At}=function Kc(R,U,Y,fe,ze){let et=function(...At){window[fe].push(arguments)};return window[ze]&&"function"==typeof window[ze]&&(et=window[ze]),window[ze]=function Zc(R,U,Y,fe){function et(){return(et=(0,q.Z)(function*(At,Wt,Nn){try{"event"===At?yield N1(R,U,Y,Wt,Nn):"config"===At?yield e1(R,U,Y,fe,Wt,Nn):"consent"===At?R("consent","update",Nn):R("set",Wt)}catch(Wn){zi.error(Wn)}})).apply(this,arguments)}return function ze(At,Wt,Nn){return et.apply(this,arguments)}}(et,R,U,Y),{gtagCore:et,wrappedGtag:window[ze]}}(Ji,Xc,a1,Lo,"gtag");tr=et,el=At,Bl=!0}return Ji[fe]=function yc(R,U,Y,fe,ze,et,At){return Qs.apply(this,arguments)}(R,Xc,a1,U,el,Lo,Y),new sa(R)}function O2(){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,q.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}const Ii="@firebase/analytics";!function Cc(){(0,De._registerComponent)(new Le.wA(fo,(U,{options:Y})=>tl(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),Y),"PUBLIC")),(0,De._registerComponent)(new Le.wA("analytics-internal",function R(U){try{const Y=U.getProvider(fo).getImmediate();return{logEvent:(fe,ze,et)=>function rl(R,U,Y,fe){R=(0,Pe.m9)(R),function xa(R,U,Y,fe,ze){return i1.apply(this,arguments)}(tr,Ji[R.app.options.appId],U,Y,fe).catch(ze=>zi.error(ze))}(Y,fe,ze,et)}}catch(Y){throw mi.create("interop-component-reg-failed",{reason:Y})}},"PRIVATE")),(0,De.registerVersion)(Ii,"0.8.0"),(0,De.registerVersion)(Ii,"0.8.0","esm2017")}();var O1=W(4408),Na=W(7565);const wu=new class il extends Na.v{}(class Ma extends O1.o{constructor(U,Y){super(U,Y),this.scheduler=U,this.work=Y}schedule(U,Y=0){return Y>0?super.schedule(U,Y):(this.delay=Y,this.state=U,this.scheduler.flush(this),this)}execute(U,Y){return Y>0||this.closed?super.execute(U,Y):this._execute(U,Y)}requestAsyncId(U,Y,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId(U,Y,fe):U.flush(this)}});var z2=W(4986),b=W(8505),E=W(5363),C=W(9468);const N=new v.GfV("7.4.1"),F="__angularfire_symbol__analyticsIsSupportedValue",K="__angularfire_symbol__analyticsIsSupported",ce="__angularfire_symbol__remoteConfigIsSupportedValue",we="__angularfire_symbol__remoteConfigIsSupported",lt="__angularfire_symbol__messagingIsSupportedValue",$t="__angularfire_symbol__messagingIsSupported";function vo(R,U,Y){if(U){if(1===U.length)return U[0];const et=U.filter(At=>At.app===Y);if(1===et.length)return et[0]}return Y.container.getProvider(R).getImmediate({optional:!0})}globalThis[K]||(globalThis[K]=O2().then(R=>globalThis[F]=R).catch(()=>globalThis[F]=!1)),globalThis[$t]||(globalThis[$t]=x1().then(R=>globalThis[lt]=R).catch(()=>globalThis[lt]=!1)),globalThis[we]||(globalThis[we]=Ws().then(R=>globalThis[ce]=R).catch(()=>globalThis[ce]=!1));const Js=(R,U)=>{const Y=U?[U]:(0,x.C6)(),fe=[];return Y.forEach(ze=>{ze.container.getProvider(R).instances.forEach(At=>{fe.includes(At)||fe.push(At)})}),fe};function ti(){}class l1{constructor(U,Y=wu){this.zone=U,this.delegate=Y}now(){return this.delegate.now()}schedule(U,Y,fe){const ze=this.zone;return this.delegate.schedule(function(At){ze.runGuarded(()=>{U.apply(this,[At])})},Y,fe)}}class L1{constructor(U){this.zone=U,this.task=null}call(U,Y){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ti,{},ti,ti)),Y.pipe((0,b.b)({next:fe,complete:fe,error:fe})).subscribe(U).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sl=(()=>{class R{constructor(Y){this.ngZone=Y,this.outsideAngular=Y.runOutsideAngular(()=>new l1(Zone.current)),this.insideAngular=Y.run(()=>new l1(Zone.current,z2.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(Y){return new(Y||R)(v.LFG(v.R0b))},R.\u0275prov=v.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function ka(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function F1(R){return R.pipe((0,E.Q)(ka().outsideAngular))}function ui(R){return ka(),function V2(R){return function(Y){return(Y=Y.lift(new L1(R.ngZone))).pipe((0,C.R)(R.outsideAngular),(0,E.Q)(R.insideAngular))}}(ka())(R)}},8554:(Zt,Je,W)=>{W.d(Je,{$:()=>qr,A:()=>ge,B:()=>mt,G:()=>$i,H:()=>Jr,J:()=>ws,L:()=>Gn,M:()=>qs,N:()=>wa,P:()=>z2,Q:()=>As,R:()=>nl,T:()=>Ks,U:()=>Zs,V:()=>Vr,W:()=>Ki,X:()=>Gr,Y:()=>Qe,Z:()=>Nr,_:()=>Er,a:()=>t1,a0:()=>Zr,a1:()=>fs,a2:()=>cc,a3:()=>Ea,a4:()=>yu,a5:()=>H,a6:()=>P,a7:()=>X,a8:()=>vn,a9:()=>Pr,aA:()=>Os,aB:()=>Nn,aC:()=>F1,aD:()=>Fo,aE:()=>Mr,aI:()=>n1,aL:()=>Ms,aa:()=>uo,ab:()=>D1,ac:()=>Pl,af:()=>Gc,ag:()=>T1,ah:()=>Ol,ak:()=>Fi,al:()=>Ja,an:()=>dc,ao:()=>M1,ap:()=>be,aq:()=>Ze,ar:()=>Me,as:()=>_t,at:()=>jt,au:()=>G2,av:()=>U2,aw:()=>Ct,ax:()=>Fe,ay:()=>Oe,az:()=>Un,b:()=>mi,c:()=>lt,d:()=>Ir,e:()=>Kn,f:()=>V2,g:()=>fe,h:()=>R,i:()=>P1,j:()=>At,k:()=>vh,l:()=>go,m:()=>_5,o:()=>Ve,r:()=>O1,s:()=>F2,u:()=>wu});var v=W(5861),x=W(2090),q=W(9681),De=W(655),Pe=W(1877),Le=W(4859);const Ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ge={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const mt=function Re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ut=new x.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new Pe.Yd("@firebase/auth");function Bt(S,...p){Ye.logLevel<=Pe.in.ERROR&&Ye.error(`Auth (${q.SDK_VERSION}): ${S}`,...p)}function jt(S,...p){throw rt(S,...p)}function Ct(S,...p){return rt(S,...p)}function bt(S,p,g){const A=Object.assign(Object.assign({},Xe()),{[p]:g});return new x.LL("auth","Firebase",A).create(p,{appName:S.name})}function at(S,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&jt(S,"argument-error"),bt(S,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(S,...p){if("string"!=typeof S){const g=p[0],A=[...p.slice(1)];return A[0]&&(A[0].appName=S.name),S._errorFactory.create(g,...A)}return Ut.create(S,...p)}function Fe(S,p,...g){if(!S)throw rt(p,...g)}function je(S){const p="INTERNAL ASSERTION FAILED: "+S;throw Bt(p),new Error(p)}function Ze(S,p){S||je(p)}const ke=new Map;function Oe(S){Ze(S instanceof Function,"Expected a class definition");let p=ke.get(S);return p?(Ze(p instanceof S,"Instance stored in cache mismatched with class"),p):(p=new S,ke.set(S,p),p)}function Dt(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.href)||""}function xt(){return"http:"===en()||"https:"===en()}function en(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.protocol)||null}class Pt{constructor(p,g){this.shortDelay=p,this.longDelay=g,Ze(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,x.uI)()||(0,x.b$)()}get(){return function Hn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xt()||(0,x.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(S,p){Ze(S.emulator,"Emulator should always be set here");const{url:g}=S.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class er{static initialize(p,g,A){this.fetchImpl=p,g&&(this.headersImpl=g),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $n={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qn=new Pt(3e4,6e4);function wn(S,p){return S.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:S.tenantId}):p}function Dn(S,p,g,A){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,v.Z)(function*(S,p,g,A,Z={}){return mr(S,Z,(0,v.Z)(function*(){let se={},Be={};A&&("GET"===p?Be=A:se={body:JSON.stringify(A)});const St=(0,x.xO)(Object.assign({key:S.config.apiKey},Be)).slice(1),Kt=yield S._getAdditionalHeaders();return Kt["Content-Type"]="application/json",S.languageCode&&(Kt["X-Firebase-Locale"]=S.languageCode),er.fetch()(Yr(S,S.config.apiHost,g,St),Object.assign({method:p,headers:Kt,referrerPolicy:"no-referrer"},se))}))})).apply(this,arguments)}function mr(S,p,g){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,v.Z)(function*(S,p,g){S._canInitEmulator=!1;const A=Object.assign(Object.assign({},$n),p);try{const Z=new fn(S),se=yield Promise.race([g(),Z.promise]);Z.clearNetworkTimeout();const Be=yield se.json();if("needConfirmation"in Be)throw yr(S,"account-exists-with-different-credential",Be);if(se.ok&&!("errorMessage"in Be))return Be;{const St=se.ok?Be.errorMessage:Be.error.message,[Kt,Tn]=St.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Kt)throw yr(S,"credential-already-in-use",Be);if("EMAIL_EXISTS"===Kt)throw yr(S,"email-already-in-use",Be);if("USER_DISABLED"===Kt)throw yr(S,"user-disabled",Be);const ar=A[Kt]||Kt.toLowerCase().replace(/[_\s]+/g,"-");if(Tn)throw bt(S,ar,Tn);jt(S,ar)}}catch(Z){if(Z instanceof x.ZR)throw Z;jt(S,"network-request-failed")}})).apply(this,arguments)}function fr(S,p,g,A){return ei.apply(this,arguments)}function ei(){return(ei=(0,v.Z)(function*(S,p,g,A,Z={}){const se=yield Dn(S,p,g,A,Z);return"mfaPendingCredential"in se&&jt(S,"multi-factor-auth-required",{_serverResponse:se}),se})).apply(this,arguments)}function Yr(S,p,g,A){const Z=`${p}${g}?${A}`;return S.config.emulator?ln(S.config,Z):`${S.config.apiScheme}://${Z}`}class fn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,A)=>{this.timer=setTimeout(()=>A(Ct(this.auth,"network-request-failed")),Qn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yr(S,p,g){const A={appName:S.name};g.email&&(A.email=g.email),g.phoneNumber&&(A.phoneNumber=g.phoneNumber);const Z=Ct(S,p,A);return Z.customData._tokenResponse=g,Z}function tn(){return(tn=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function or(S,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xn(S,p){return dr.apply(this,arguments)}function dr(){return(dr=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function $r(S){if(S)try{const p=new Date(Number(S));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function dt(){return(dt=(0,v.Z)(function*(S,p=!1){const g=(0,x.m9)(S),A=yield g.getIdToken(p),Z=le(A);Fe(Z&&Z.exp&&Z.auth_time&&Z.iat,g.auth,"internal-error");const se="object"==typeof Z.firebase?Z.firebase:void 0,Be=se?.sign_in_provider;return{claims:Z,token:A,authTime:$r(ye(Z.auth_time)),issuedAtTime:$r(ye(Z.iat)),expirationTime:$r(ye(Z.exp)),signInProvider:Be||null,signInSecondFactor:se?.sign_in_second_factor||null}})).apply(this,arguments)}function ye(S){return 1e3*Number(S)}function le(S){var p;const[g,A,Z]=S.split(".");if(void 0===g||void 0===A||void 0===Z)return Bt("JWT malformed, contained fewer than 3 sections"),null;try{const se=(0,x.tV)(A);return se?JSON.parse(se):(Bt("Failed to decode base64 JWT payload"),null)}catch(se){return Bt("Caught error parsing JWT payload as JSON",null===(p=se)||void 0===p?void 0:p.toString()),null}}function vt(S,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,v.Z)(function*(S,p,g=!1){if(g)return p;try{return yield p}catch(A){throw A instanceof x.ZR&&Sn(A)&&S.auth.currentUser===S&&(yield S.auth.signOut()),A}})).apply(this,arguments)}function Sn({code:S}){return"auth/user-disabled"===S||"auth/user-token-expired"===S}class Qt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const Z=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const A=this.getInterval(p);this.timerId=setTimeout((0,v.Z)(function*(){yield g.iteration()}),A)}iteration(){var p=this;return(0,v.Z)(function*(){var g;try{yield p.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===(null===(g=A)||void 0===g?void 0:g.code)&&p.schedule(!0))}p.schedule()})()}}class dn{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=$r(this.lastLoginAt),this.creationTime=$r(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(S){return En.apply(this,arguments)}function En(){return(En=(0,v.Z)(function*(S){var p;const g=S.auth,A=yield S.getIdToken(),Z=yield vt(S,xn(g,{idToken:A}));Fe(Z?.users.length,g,"internal-error");const se=Z.users[0];S._notifyReloadListener(se);const Be=null!==(p=se.providerUserInfo)&&void 0!==p&&p.length?pe(se.providerUserInfo):[],St=ue(S.providerData,Be),ar=!!S.isAnonymous&&!(S.email&&se.passwordHash||St?.length),ai={uid:se.localId,displayName:se.displayName||null,photoURL:se.photoUrl||null,email:se.email||null,emailVerified:se.emailVerified||!1,phoneNumber:se.phoneNumber||null,tenantId:se.tenantId||null,providerData:St,metadata:new dn(se.createdAt,se.lastLoginAt),isAnonymous:ar};Object.assign(S,ai)})).apply(this,arguments)}function on(){return(on=(0,v.Z)(function*(S){const p=(0,x.m9)(S);yield cr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ue(S,p){return[...S.filter(A=>!p.some(Z=>Z.providerId===A.providerId)),...p]}function pe(S){return S.map(p=>{var{providerId:g}=p,A=(0,De._T)(p,["providerId"]);return{providerId:g,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function Ce(){return(Ce=(0,v.Z)(function*(S,p){const g=yield mr(S,{},(0,v.Z)(function*(){const A=(0,x.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:Z,apiKey:se}=S.config,Be=Yr(S,Z,"/v1/token",`key=${se}`),St=yield S._getAdditionalHeaders();return St["Content-Type"]="application/x-www-form-urlencoded",er.fetch()(Be,{method:"POST",headers:St,body:A})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class _e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Fe(p.idToken,"internal-error"),Fe(typeof p.idToken<"u","internal-error"),Fe(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function $e(S){const p=le(S);return Fe(p,"internal-error"),Fe(typeof p.exp<"u","internal-error"),Fe(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var A=this;return(0,v.Z)(function*(){return Fe(!A.accessToken||A.refreshToken,p,"user-token-expired"),g||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(p,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var A=this;return(0,v.Z)(function*(){const{accessToken:Z,refreshToken:se,expiresIn:Be}=yield function he(S,p){return Ce.apply(this,arguments)}(p,g);A.updateTokensAndExpiration(Z,se,Number(Be))})()}updateTokensAndExpiration(p,g,A){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(p,g){const{refreshToken:A,accessToken:Z,expirationTime:se}=g,Be=new _e;return A&&(Fe("string"==typeof A,"internal-error",{appName:p}),Be.refreshToken=A),Z&&(Fe("string"==typeof Z,"internal-error",{appName:p}),Be.accessToken=Z),se&&(Fe("number"==typeof se,"internal-error",{appName:p}),Be.expirationTime=se),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new _e,this.toJSON())}_performRefresh(){return je("not implemented")}}function gt(S,p){Fe("string"==typeof S||typeof S>"u","internal-error",{appName:p})}class kt{constructor(p){var{uid:g,auth:A,stsTokenManager:Z}=p,se=(0,De._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=A,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=se.displayName||null,this.email=se.email||null,this.emailVerified=se.emailVerified||!1,this.phoneNumber=se.phoneNumber||null,this.photoURL=se.photoURL||null,this.isAnonymous=se.isAnonymous||!1,this.tenantId=se.tenantId||null,this.providerData=se.providerData?[...se.providerData]:[],this.metadata=new dn(se.createdAt||void 0,se.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,v.Z)(function*(){const A=yield vt(g,g.stsTokenManager.getToken(g.auth,p));return Fe(A,g.auth,"internal-error"),g.accessToken!==A&&(g.accessToken=A,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),A})()}getIdTokenResult(p){return function kn(S){return dt.apply(this,arguments)}(this,p)}reload(){return function xr(S){return on.apply(this,arguments)}(this)}_assign(p){this!==p&&(Fe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new kt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var A=this;return(0,v.Z)(function*(){let Z=!1;p.idToken&&p.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(p),Z=!0),g&&(yield cr(A)),yield A.auth._persistUserIfCurrent(A),Z&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var p=this;return(0,v.Z)(function*(){const g=yield p.getIdToken();return yield vt(p,function Fr(S,p){return tn.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var A,Z,se,Be,St,Kt,Tn,ar;const ai=null!==(A=g.displayName)&&void 0!==A?A:void 0,Ra=null!==(Z=g.email)&&void 0!==Z?Z:void 0,ul=null!==(se=g.phoneNumber)&&void 0!==se?se:void 0,Cd=null!==(Be=g.photoURL)&&void 0!==Be?Be:void 0,w5=null!==(St=g.tenantId)&&void 0!==St?St:void 0,Tu=null!==(Kt=g._redirectEventId)&&void 0!==Kt?Kt:void 0,W2=null!==(Tn=g.createdAt)&&void 0!==Tn?Tn:void 0,q2=null!==(ar=g.lastLoginAt)&&void 0!==ar?ar:void 0,{uid:wh,emailVerified:E5,isAnonymous:bd,providerData:wd,stsTokenManager:Eh}=g;Fe(wh&&Eh,p,"internal-error");const Ih=_e.fromJSON(this.name,Eh);Fe("string"==typeof wh,p,"internal-error"),gt(ai,p.name),gt(Ra,p.name),Fe("boolean"==typeof E5,p,"internal-error"),Fe("boolean"==typeof bd,p,"internal-error"),gt(ul,p.name),gt(Cd,p.name),gt(w5,p.name),gt(Tu,p.name),gt(W2,p.name),gt(q2,p.name);const Ed=new kt({uid:wh,auth:p,email:Ra,emailVerified:E5,displayName:ai,isAnonymous:bd,photoURL:Cd,phoneNumber:ul,tenantId:w5,stsTokenManager:Ih,createdAt:W2,lastLoginAt:q2});return wd&&Array.isArray(wd)&&(Ed.providerData=wd.map(Dh=>Object.assign({},Dh))),Tu&&(Ed._redirectEventId=Tu),Ed}static _fromIdTokenResponse(p,g,A=!1){return(0,v.Z)(function*(){const Z=new _e;Z.updateFromServerResponse(g);const se=new kt({uid:g.localId,auth:p,stsTokenManager:Z,isAnonymous:A});return yield cr(se),se})()}}const Gn=(()=>{class S{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(g,A){var Z=this;return(0,v.Z)(function*(){Z.storage[g]=A})()}_get(g){var A=this;return(0,v.Z)(function*(){const Z=A.storage[g];return void 0===Z?null:Z})()}_remove(g){var A=this;return(0,v.Z)(function*(){delete A.storage[g]})()}_addListener(g,A){}_removeListener(g,A){}}return S.type="NONE",S})();function Un(S,p,g){return`firebase:${S}:${p}:${g}`}class Ar{constructor(p,g,A){this.persistence=p,this.auth=g,this.userKey=A;const{config:Z,name:se}=this.auth;this.fullUserKey=Un(this.userKey,Z.apiKey,se),this.fullPersistenceKey=Un("persistence",Z.apiKey,se),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,v.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?kt._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,v.Z)(function*(){if(g.persistence===p)return;const A=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,A?g.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,A="authUser"){return(0,v.Z)(function*(){if(!g.length)return new Ar(Oe(Gn),p,A);const Z=(yield Promise.all(g.map(function(){var Tn=(0,v.Z)(function*(ar){if(yield ar._isAvailable())return ar});return function(ar){return Tn.apply(this,arguments)}}()))).filter(Tn=>Tn);let se=Z[0]||Oe(Gn);const Be=Un(A,p.config.apiKey,p.name);let St=null;for(const Tn of g)try{const ar=yield Tn._get(Be);if(ar){const ai=kt._fromJSON(p,ar);Tn!==se&&(St=ai),se=Tn;break}}catch{}const Kt=Z.filter(Tn=>Tn._shouldAllowMigration);return se._shouldAllowMigration&&Kt.length?(se=Kt[0],St&&(yield se._set(Be,St.toJSON())),yield Promise.all(g.map(function(){var Tn=(0,v.Z)(function*(ar){if(ar!==se)try{yield ar._remove(Be)}catch{}});return function(ar){return Tn.apply(this,arguments)}}())),new Ar(se,p,A)):new Ar(se,p,A)})()}}function xe(S){const p=S.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Rt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ee(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Vt(p))return"Blackberry";if(pn(p))return"Webos";if(ve(p))return"Safari";if((p.includes("chrome/")||ft(p))&&!p.includes("edge/"))return"Chrome";if(_t(p))return"Android";{const A=S.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===A?.length)return A[1]}return"Other"}function Ee(S=(0,x.z$)()){return/firefox\//i.test(S)}function ve(S=(0,x.z$)()){const p=S.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ft(S=(0,x.z$)()){return/crios\//i.test(S)}function Rt(S=(0,x.z$)()){return/iemobile/i.test(S)}function _t(S=(0,x.z$)()){return/android/i.test(S)}function Vt(S=(0,x.z$)()){return/blackberry/i.test(S)}function pn(S=(0,x.z$)()){return/webos/i.test(S)}function Me(S=(0,x.z$)()){return/iphone|ipad|ipod/i.test(S)||/macintosh/i.test(S)&&/mobile/i.test(S)}function be(S=(0,x.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(S)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(S)}function ht(S=(0,x.z$)()){return Me(S)||_t(S)||pn(S)||Vt(S)||/windows phone/i.test(S)||Rt(S)}function Rn(S,p=[]){let g;switch(S){case"Browser":g=xe((0,x.z$)());break;case"Worker":g=`${xe((0,x.z$)())}-${S}`;break;default:g=S}const A=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${q.SDK_VERSION}/${A}`}class cn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const A=se=>new Promise((Be,St)=>{try{Be(p(se))}catch(Kt){St(Kt)}});A.onAbort=g,this.queue.push(A);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,v.Z)(function*(){var A;if(g.auth.currentUser===p)return;const Z=[];try{for(const se of g.queue)yield se(p),se.onAbort&&Z.push(se.onAbort)}catch(se){Z.reverse();for(const Be of Z)try{Be()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(A=se)||void 0===A?void 0:A.message})}})()}}class zr{constructor(p,g,A){this.app=p,this.heartbeatServiceProvider=g,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _i(this),this.idTokenSubscription=new _i(this),this.beforeStateQueue=new cn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ut,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,g){var A=this;return g&&(this._popupRedirectResolver=Oe(g)),this._initializationPromise=this.queue((0,v.Z)(function*(){var Z,se;if(!A._deleted&&(A.persistenceManager=yield Ar.create(A,p),!A._deleted)){if(null!==(Z=A._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(g),A.lastNotifiedUid=(null===(se=A.currentUser)||void 0===se?void 0:se.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,v.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,v.Z)(function*(){var A;const Z=yield g.assertedPersistence.getCurrentUser();let se=Z,Be=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const St=null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId,Kt=se?._redirectEventId,Tn=yield g.tryRedirectSignIn(p);(!St||St===Kt)&&Tn?.user&&(se=Tn.user,Be=!0)}if(!se)return g.directlySetCurrentUser(null);if(!se._redirectEventId){if(Be)try{yield g.beforeStateQueue.runMiddleware(se)}catch(St){se=Z,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(St))}return se?g.reloadAndSetCurrentUserOrClear(se):g.directlySetCurrentUser(null)}return Fe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===se._redirectEventId?g.directlySetCurrentUser(se):g.reloadAndSetCurrentUserOrClear(se)})()}tryRedirectSignIn(p){var g=this;return(0,v.Z)(function*(){let A=null;try{A=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,v.Z)(function*(){var A;try{yield cr(p)}catch(Z){if("auth/network-request-failed"!==(null===(A=Z)||void 0===A?void 0:A.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function zn(){if(typeof navigator>"u")return null;const S=navigator;return S.languages&&S.languages[0]||S.language||null}()}_delete(){var p=this;return(0,v.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,v.Z)(function*(){const A=p?(0,x.m9)(p):null;return A&&Fe(A.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(A&&A._clone(g))})()}_updateCurrentUser(p,g=!1){var A=this;return(0,v.Z)(function*(){if(!A._deleted)return p&&Fe(A.tenantId===p.tenantId,A,"tenant-id-mismatch"),g||(yield A.beforeStateQueue.runMiddleware(p)),A.queue((0,v.Z)(function*(){yield A.directlySetCurrentUser(p),A.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,v.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,v.Z)(function*(){yield g.assertedPersistence.setPersistence(Oe(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new x.LL("auth","Firebase",p())}onAuthStateChanged(p,g,A){return this.registerStateListener(this.authStateSubscription,p,g,A)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,A){return this.registerStateListener(this.idTokenSubscription,p,g,A)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var A=this;return(0,v.Z)(function*(){const Z=yield A.getOrInitRedirectPersistenceManager(g);return null===p?Z.removeCurrentUser():Z.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,v.Z)(function*(){if(!g.redirectPersistenceManager){const A=p&&Oe(p)||g._popupRedirectResolver;Fe(A,g,"argument-error"),g.redirectPersistenceManager=yield Ar.create(g,[Oe(A._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,v.Z)(function*(){var A,Z;return g._isInitialized&&(yield g.queue((0,v.Z)(function*(){}))),(null===(A=g._currentUser)||void 0===A?void 0:A._redirectEventId)===p?g._currentUser:(null===(Z=g.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,v.Z)(function*(){if(p===g.currentUser)return g.queue((0,v.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,A,Z){if(this._deleted)return()=>{};const se="function"==typeof g?g:g.next.bind(g),Be=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(Be,this,"internal-error"),Be.then(()=>se(this.currentUser)),"function"==typeof g?p.addObserver(g,A,Z):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,v.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Rn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,v.Z)(function*(){var g;const A={"X-Client-Version":p.clientVersion};p.app.options.appId&&(A["X-Firebase-gmpid"]=p.app.options.appId);const Z=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return Z&&(A["X-Firebase-Client"]=Z),A})()}}function Mr(S){return(0,x.m9)(S)}class _i{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,x.ne)(g=>this.observer=g)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $i(S,p,g){const A=Mr(S);Fe(A._canInitEmulator,A,"emulator-config-failed"),Fe(/^https?:\/\//.test(p),A,"invalid-emulator-scheme");const Z=!!g?.disableWarnings,se=ci(p),{host:Be,port:St}=function js(S){const p=ci(S),g=/(\/\/)?([^?#/]+)/.exec(S.substr(p.length));if(!g)return{host:"",port:null};const A=g[2].split("@").pop()||"",Z=/^(\[[^\]]+\])(:|$)/.exec(A);if(Z){const se=Z[1];return{host:se,port:ns(A.substr(se.length+1))}}{const[se,Be]=A.split(":");return{host:se,port:ns(Be)}}}(p);A.config.emulator={url:`${se}//${Be}${null===St?"":`:${St}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Be,port:St,protocol:se.replace(":",""),options:Object.freeze({disableWarnings:Z})}),Z||function ki(){function S(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",S):S())}()}function ci(S){const p=S.indexOf(":");return p<0?"":S.substr(0,p+1)}function ns(S){if(!S)return null;const p=Number(S);return isNaN(p)?null:p}class Jr{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return je("not implemented")}_getIdTokenResponse(p){return je("not implemented")}_linkToIdToken(p,g){return je("not implemented")}_getReauthenticationResolver(p){return je("not implemented")}}function $s(S,p){return On.apply(this,arguments)}function On(){return(On=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:resetPassword",wn(S,p))})).apply(this,arguments)}function ya(S,p){return io.apply(this,arguments)}function io(){return(io=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Zo(S,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:update",wn(S,p))})).apply(this,arguments)}function _s(){return(_s=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signInWithPassword",wn(S,p))})).apply(this,arguments)}function Ri(S,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:sendOobCode",wn(S,p))})).apply(this,arguments)}function Ko(S,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,v.Z)(function*(S,p){return Ri(S,p)})).apply(this,arguments)}function hi(S,p){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,v.Z)(function*(S,p){return Ri(S,p)})).apply(this,arguments)}function oo(S,p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,v.Z)(function*(S,p){return Ri(S,p)})).apply(this,arguments)}function Pi(S,p){return bs.apply(this,arguments)}function bs(){return(bs=(0,v.Z)(function*(S,p){return Ri(S,p)})).apply(this,arguments)}function hs(){return(hs=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signInWithEmailLink",wn(S,p))})).apply(this,arguments)}function Ga(){return(Ga=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signInWithEmailLink",wn(S,p))})).apply(this,arguments)}class Ca extends Jr{constructor(p,g,A,Z=null){super("password",A),this._email=p,this._password=g,this._tenantId=Z}static _fromEmailAndPassword(p,g){return new Ca(p,g,"password")}static _fromEmailAndCode(p,g,A=null){return new Ca(p,g,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,v.Z)(function*(){switch(g.signInMethod){case"password":return function so(S,p){return _s.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Yo(S,p){return hs.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:jt(p,"internal-error")}})()}_linkToIdToken(p,g){var A=this;return(0,v.Z)(function*(){switch(A.signInMethod){case"password":return ya(p,{idToken:g,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function _a(S,p){return Ga.apply(this,arguments)}(p,{idToken:g,email:A._email,oobCode:A._password});default:jt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ao(S,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signInWithIdp",wn(S,p))})).apply(this,arguments)}class ws extends Jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new ws(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):jt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:Z}=g,se=(0,De._T)(g,["providerId","signInMethod"]);if(!A||!Z)return null;const Be=new ws(A,Z);return Be.idToken=se.idToken||void 0,Be.accessToken=se.accessToken||void 0,Be.secret=se.secret,Be.nonce=se.nonce,Be.pendingToken=se.pendingToken||null,Be}_getIdTokenResponse(p){return ao(p,this.buildRequest())}_linkToIdToken(p,g){const A=this.buildRequest();return A.idToken=g,ao(p,A)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,ao(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,x.xO)(g)}return p}}function E1(S,p){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:sendVerificationCode",wn(S,p))})).apply(this,arguments)}function Mo(){return(Mo=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signInWithPhoneNumber",wn(S,p))})).apply(this,arguments)}function ba(){return(ba=(0,v.Z)(function*(S,p){const g=yield fr(S,"POST","/v1/accounts:signInWithPhoneNumber",wn(S,p));if(g.temporaryProof)throw yr(S,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ac={USER_NOT_FOUND:"user-not-found"};function No(){return(No=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signInWithPhoneNumber",wn(S,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ac)})).apply(this,arguments)}class qi extends Jr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new qi({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new qi({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Wa(S,p){return Mo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function Gs(S,p){return ba.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function I1(S,p){return No.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:A,verificationCode:Z}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:A,code:Z}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:A,phoneNumber:Z,temporaryProof:se}=p;return A||g||Z||se?new qi({verificationId:g,verificationCode:A,phoneNumber:Z,temporaryProof:se}):null}}class Oi{constructor(p){var g,A,Z,se,Be,St;const Kt=(0,x.zd)((0,x.pd)(p)),Tn=null!==(g=Kt.apiKey)&&void 0!==g?g:null,ar=null!==(A=Kt.oobCode)&&void 0!==A?A:null,ai=function qa(S){switch(S){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Z=Kt.mode)&&void 0!==Z?Z:null);Fe(Tn&&ar&&ai,"argument-error"),this.apiKey=Tn,this.operation=ai,this.code=ar,this.continueUrl=null!==(se=Kt.continueUrl)&&void 0!==se?se:null,this.languageCode=null!==(Be=Kt.languageCode)&&void 0!==Be?Be:null,this.tenantId=null!==(St=Kt.tenantId)&&void 0!==St?St:null}static parseLink(p){const g=function xs(S){const p=(0,x.zd)((0,x.pd)(S)).link,g=p?(0,x.zd)((0,x.pd)(p)).deep_link_id:null,A=(0,x.zd)((0,x.pd)(S)).deep_link_id;return(A?(0,x.zd)((0,x.pd)(A)).link:null)||A||g||p||S}(p);try{return new Oi(g)}catch{return null}}}let qs=(()=>{class S{constructor(){this.providerId=S.PROVIDER_ID}static credential(g,A){return Ca._fromEmailAndPassword(g,A)}static credentialWithLink(g,A){const Z=Oi.parseLink(A);return Fe(Z,"argument-error"),Ca._fromEmailAndCode(g,Z.code,Z.tenantId)}}return S.PROVIDER_ID="password",S.EMAIL_PASSWORD_SIGN_IN_METHOD="password",S.EMAIL_LINK_SIGN_IN_METHOD="emailLink",S})();class Zi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class fi extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Zs extends fi{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return Fe("providerId"in g&&"signInMethod"in g,"argument-error"),ws._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Fe(p.idToken||p.accessToken,"argument-error"),ws._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Zs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Zs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:A,oauthTokenSecret:Z,pendingToken:se,nonce:Be,providerId:St}=p;if(!A&&!Z&&!g&&!se||!St)return null;try{return new Zs(St)._credential({idToken:g,accessToken:A,nonce:Be,pendingToken:se})}catch{return null}}}let wa=(()=>{class S extends fi{constructor(){super("facebook.com")}static credential(g){return ws._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return S.credentialFromTaggedObject(g)}static credentialFromError(g){return S.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return S.credential(g.oauthAccessToken)}catch{return null}}}return S.FACEBOOK_SIGN_IN_METHOD="facebook.com",S.PROVIDER_ID="facebook.com",S})(),As=(()=>{class S extends fi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,A){return ws._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:A})}static credentialFromResult(g){return S.credentialFromTaggedObject(g)}static credentialFromError(g){return S.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:A,oauthAccessToken:Z}=g;if(!A&&!Z)return null;try{return S.credential(A,Z)}catch{return null}}}return S.GOOGLE_SIGN_IN_METHOD="google.com",S.PROVIDER_ID="google.com",S})(),Ks=(()=>{class S extends fi{constructor(){super("github.com")}static credential(g){return ws._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return S.credentialFromTaggedObject(g)}static credentialFromError(g){return S.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return S.credential(g.oauthAccessToken)}catch{return null}}}return S.GITHUB_SIGN_IN_METHOD="github.com",S.PROVIDER_ID="github.com",S})();class Ms extends Jr{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return ao(p,this.buildRequest())}_linkToIdToken(p,g){const A=this.buildRequest();return A.idToken=g,ao(p,A)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,ao(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:Z,pendingToken:se}=g;return A&&Z&&se&&A===Z?new Ms(A,se):null}static _create(p,g){return new Ms(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vr extends Zi{constructor(p){Fe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Vr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Vr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Ms.fromJSON(p);return Fe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:A}=p;if(!g||!A)return null;try{return Ms._create(A,g)}catch{return null}}}let Ki=(()=>{class S extends fi{constructor(){super("twitter.com")}static credential(g,A){return ws._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:A})}static credentialFromResult(g){return S.credentialFromTaggedObject(g)}static credentialFromError(g){return S.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:A,oauthTokenSecret:Z}=g;if(!A||!Z)return null;try{return S.credential(A,Z)}catch{return null}}}return S.TWITTER_SIGN_IN_METHOD="twitter.com",S.PROVIDER_ID="twitter.com",S})();function co(S,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signUp",wn(S,p))})).apply(this,arguments)}class rs{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,A,Z=!1){return(0,v.Z)(function*(){const se=yield kt._fromIdTokenResponse(p,A,Z),Be=ea(A);return new rs({user:se,providerId:Be,_tokenResponse:A,operationType:g})})()}static _forOperation(p,g,A){return(0,v.Z)(function*(){yield p._updateTokensIfNecessary(A,!0);const Z=ea(A);return new rs({user:p,providerId:Z,_tokenResponse:A,operationType:g})})()}}function ea(S){return S.providerId?S.providerId:"phoneNumber"in S?"phone":null}function Gr(S){return ko.apply(this,arguments)}function ko(){return(ko=(0,v.Z)(function*(S){var p;const g=Mr(S);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new rs({user:g.currentUser,providerId:null,operationType:"signIn"});const A=yield co(g,{returnSecureToken:!0}),Z=yield rs._fromIdTokenResponse(g,"signIn",A,!0);return yield g._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Za extends x.ZR{constructor(p,g,A,Z){var se;super(g.code,g.message),this.operationType=A,this.user=Z,Object.setPrototypeOf(this,Za.prototype),this.customData={appName:p.name,tenantId:null!==(se=p.tenantId)&&void 0!==se?se:void 0,_serverResponse:g.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(p,g,A,Z){return new Za(p,g,A,Z)}}function Ns(S,p,g,A){return("reauthenticate"===p?g._getReauthenticationResolver(S):g._getIdTokenResponse(S)).catch(se=>{throw"auth/multi-factor-auth-required"===se.code?Za._fromErrorAndOperation(S,se,p,A):se})}function Li(S){return new Set(S.map(({providerId:p})=>p).filter(p=>!!p))}function Fi(S,p){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,v.Z)(function*(S,p){const g=(0,x.m9)(S);yield z(!0,g,p);const{providerUserInfo:A}=yield or(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),Z=Li(A||[]);return g.providerData=g.providerData.filter(se=>Z.has(se.providerId)),Z.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function si(S,p){return li.apply(this,arguments)}function li(){return(li=(0,v.Z)(function*(S,p,g=!1){const A=yield vt(S,p._linkToIdToken(S.auth,yield S.getIdToken()),g);return rs._forOperation(S,"link",A)})).apply(this,arguments)}function z(S,p,g){return J.apply(this,arguments)}function J(){return(J=(0,v.Z)(function*(S,p,g){yield cr(p);const Z=!1===S?"provider-already-linked":"no-such-provider";Fe(Li(p.providerData).has(g)===S,p.auth,Z)})).apply(this,arguments)}function V(S,p){return te.apply(this,arguments)}function te(){return(te=(0,v.Z)(function*(S,p,g=!1){var A;const{auth:Z}=S,se="reauthenticate";try{const Be=yield vt(S,Ns(Z,se,p,S),g);Fe(Be.idToken,Z,"internal-error");const St=le(Be.idToken);Fe(St,Z,"internal-error");const{sub:Kt}=St;return Fe(S.uid===Kt,Z,"user-mismatch"),rs._forOperation(S,se,Be)}catch(Be){throw"auth/user-not-found"===(null===(A=Be)||void 0===A?void 0:A.code)&&jt(Z,"user-mismatch"),Be}})).apply(this,arguments)}function Se(S,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,v.Z)(function*(S,p,g=!1){const A="signIn",Z=yield Ns(S,A,p),se=yield rs._fromIdTokenResponse(S,A,Z);return g||(yield S._updateCurrentUser(se.user)),se})).apply(this,arguments)}function Qe(S,p){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,v.Z)(function*(S,p){return Se(Mr(S),p)})).apply(this,arguments)}function Nr(S,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,v.Z)(function*(S,p){const g=(0,x.m9)(S);return yield z(!1,g,p.providerId),si(g,p)})).apply(this,arguments)}function Er(S,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,v.Z)(function*(S,p){return V((0,x.m9)(S),p)})).apply(this,arguments)}function hr(S,p){return vr.apply(this,arguments)}function vr(){return(vr=(0,v.Z)(function*(S,p){return fr(S,"POST","/v1/accounts:signInWithCustomToken",wn(S,p))})).apply(this,arguments)}function qr(S,p){return wt.apply(this,arguments)}function wt(){return(wt=(0,v.Z)(function*(S,p){const g=Mr(S),A=yield hr(g,{token:p,returnSecureToken:!0}),Z=yield rs._fromIdTokenResponse(g,"signIn",A);return yield g._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Ln{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?ks._fromServerResponse(p,g):jt(p,"internal-error")}}class ks extends Ln{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new ks(g)}}function bi(S,p,g){var A;Fe((null===(A=g.url)||void 0===A?void 0:A.length)>0,S,"invalid-continue-uri"),Fe(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,S,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Fe(g.iOS.bundleId.length>0,S,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(Fe(g.android.packageName.length>0,S,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function Zr(S,p,g){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S),Z={requestType:"PASSWORD_RESET",email:p};g&&bi(A,Z,g),yield hi(A,Z)})).apply(this,arguments)}function fs(S,p,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,v.Z)(function*(S,p,g){yield $s((0,x.m9)(S),{oobCode:p,newPassword:g})})).apply(this,arguments)}function cc(S,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,v.Z)(function*(S,p){yield Zo((0,x.m9)(S),{oobCode:p})})).apply(this,arguments)}function Ea(S,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,v.Z)(function*(S,p){const g=(0,x.m9)(S),A=yield $s(g,{oobCode:p}),Z=A.requestType;switch(Fe(Z,g,"internal-error"),Z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(A.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(A.mfaInfo,g,"internal-error");default:Fe(A.email,g,"internal-error")}let se=null;return A.mfaInfo&&(se=Ln._fromServerResponse(Mr(g),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:se},operation:Z}})).apply(this,arguments)}function yu(S,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,v.Z)(function*(S,p){const{data:g}=yield Ea((0,x.m9)(S),p);return g.email})).apply(this,arguments)}function H(S,p,g){return L.apply(this,arguments)}function L(){return(L=(0,v.Z)(function*(S,p,g){const A=Mr(S),Z=yield co(A,{returnSecureToken:!0,email:p,password:g}),se=yield rs._fromIdTokenResponse(A,"signIn",Z);return yield A._updateCurrentUser(se.user),se})).apply(this,arguments)}function P(S,p,g){return Qe((0,x.m9)(S),qs.credential(p,g))}function X(S,p,g){return nt.apply(this,arguments)}function nt(){return(nt=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S),Z={requestType:"EMAIL_SIGNIN",email:p};Fe(g.handleCodeInApp,A,"argument-error"),g&&bi(A,Z,g),yield oo(A,Z)})).apply(this,arguments)}function vn(S,p){return"EMAIL_SIGNIN"===Oi.parseLink(p)?.operation}function Pr(S,p,g){return wi.apply(this,arguments)}function wi(){return(wi=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S),Z=qs.credentialWithLink(p,g||Dt());return Fe(Z._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Qe(A,Z)})).apply(this,arguments)}function Qi(S,p){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:createAuthUri",wn(S,p))})).apply(this,arguments)}function uo(S,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,v.Z)(function*(S,p){const A={identifier:p,continueUri:xt()?Dt():"http://localhost"},{signinMethods:Z}=yield Qi((0,x.m9)(S),A);return Z||[]})).apply(this,arguments)}function D1(S,p){return S1.apply(this,arguments)}function S1(){return(S1=(0,v.Z)(function*(S,p){const g=(0,x.m9)(S),Z={requestType:"VERIFY_EMAIL",idToken:yield S.getIdToken()};p&&bi(g.auth,Z,p);const{email:se}=yield Ko(g.auth,Z);se!==S.email&&(yield S.reload())})).apply(this,arguments)}function Pl(S,p,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S),se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield S.getIdToken(),newEmail:p};g&&bi(A.auth,se,g);const{email:Be}=yield Pi(A.auth,se);Be!==S.email&&(yield S.reload())})).apply(this,arguments)}function $c(S,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,v.Z)(function*(S,p){return Dn(S,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Gc(S,p){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,v.Z)(function*(S,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const A=(0,x.m9)(S),se={idToken:yield A.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},Be=yield vt(A,$c(A.auth,se));A.displayName=Be.displayName||null,A.photoURL=Be.photoUrl||null;const St=A.providerData.find(({providerId:Kt})=>"password"===Kt);St&&(St.displayName=A.displayName,St.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Be)})).apply(this,arguments)}function T1(S,p){return Qa((0,x.m9)(S),p,null)}function Ol(S,p){return Qa((0,x.m9)(S),null,p)}function Qa(S,p,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,v.Z)(function*(S,p,g){const{auth:A}=S,se={idToken:yield S.getIdToken(),returnSecureToken:!0};p&&(se.email=p),g&&(se.password=g);const Be=yield vt(S,ya(A,se));yield S._updateTokensIfNecessary(Be,!0)})).apply(this,arguments)}class Hr{constructor(p,g,A={}){this.isNewUser=p,this.providerId=g,this.profile=A}}class Ll extends Hr{constructor(p,g,A,Z){super(p,g,A),this.username=Z}}class _u extends Hr{constructor(p,g){super(p,"facebook.com",g)}}class x1 extends Ll{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class lc extends Hr{constructor(p,g){super(p,"google.com",g)}}class Fl extends Ll{constructor(p,g,A){super(p,"twitter.com",g,A)}}function Ja(S){const{user:p,_tokenResponse:g}=S;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Po(S){var p,g;if(!S)return null;const{providerId:A}=S,Z=S.rawUserInfo?JSON.parse(S.rawUserInfo):{},se=S.isNewUser||"identitytoolkit#SignupNewUserResponse"===S.kind;if(!A&&S?.idToken){const Be=null===(g=null===(p=le(S.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(Be)return new Hr(se,"anonymous"!==Be&&"custom"!==Be?Be:null)}if(!A)return null;switch(A){case"facebook.com":return new _u(se,Z);case"github.com":return new x1(se,Z);case"google.com":return new lc(se,Z);case"twitter.com":return new Fl(se,Z,S.screenName||null);case"custom":case"anonymous":return new Hr(se,null);default:return new Hr(se,A,Z)}}(g)}class po{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new po("enroll",p)}static _fromMfaPendingCredential(p){return new po("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,A;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return po._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(A=p.multiFactorSession)&&void 0!==A&&A.idToken)return po._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Sa{constructor(p,g,A){this.session=p,this.hints=g,this.signInResolver=A}static _fromError(p,g){const A=Mr(p),Z=g.customData._serverResponse,se=(Z.mfaInfo||[]).map(St=>Ln._fromServerResponse(A,St));Fe(Z.mfaPendingCredential,A,"internal-error");const Be=po._fromMfaPendingCredential(Z.mfaPendingCredential);return new Sa(Be,se,function(){var St=(0,v.Z)(function*(Kt){const Tn=yield Kt._process(A,Be);delete Z.mfaInfo,delete Z.mfaPendingCredential;const ar=Object.assign(Object.assign({},Z),{idToken:Tn.idToken,refreshToken:Tn.refreshToken});switch(g.operationType){case"signIn":const ai=yield rs._fromIdTokenResponse(A,g.operationType,ar);return yield A._updateCurrentUser(ai.user),ai;case"reauthenticate":return Fe(g.user,A,"internal-error"),rs._forOperation(g.user,g.operationType,ar);default:jt(A,"internal-error")}});return function(Kt){return St.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,v.Z)(function*(){return g.signInResolver(p)})()}}function dc(S,p){var g;const A=(0,x.m9)(S),Z=p;return Fe(p.customData.operationType,A,"argument-error"),Fe(null===(g=Z.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,A,"argument-error"),Sa._fromError(A,Z)}function zi(S,p){return Dn(S,"POST","/v2/accounts/mfaEnrollment:start",wn(S,p))}class Vl{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(A=>Ln._fromServerResponse(p.auth,A)))})}static _fromUser(p){return new Vl(p)}getSession(){var p=this;return(0,v.Z)(function*(){return po._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var A=this;return(0,v.Z)(function*(){const Z=p,se=yield A.getSession(),Be=yield vt(A.user,Z._process(A.user.auth,se,g));return yield A.user._updateTokensIfNecessary(Be),A.user.reload()})()}unenroll(p){var g=this;return(0,v.Z)(function*(){var A;const Z="string"==typeof p?p:p.uid,se=yield g.user.getIdToken(),Be=yield vt(g.user,function M2(S,p){return Dn(S,"POST","/v2/accounts/mfaEnrollment:withdraw",wn(S,p))}(g.user.auth,{idToken:se,mfaEnrollmentId:Z}));g.enrolledFactors=g.enrolledFactors.filter(({uid:St})=>St!==Z),yield g.user._updateTokensIfNecessary(Be);try{yield g.user.reload()}catch(St){if("auth/user-token-expired"!==(null===(A=St)||void 0===A?void 0:A.code))throw St}})()}}const e1=new WeakMap;function M1(S){const p=(0,x.m9)(S);return e1.has(p)||e1.set(p,Vl._fromUser(p)),e1.get(p)}const N1="__sak";class na{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(N1,"1"),this.storage.removeItem(N1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const mi=(()=>{class S extends na{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,A)=>this.onStorageEvent(g,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Zc(){const S=(0,x.z$)();return ve(S)||Me(S)}()&&function gn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ht(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const A of Object.keys(this.listeners)){const Z=this.storage.getItem(A),se=this.localCache[A];Z!==se&&g(A,se,Z)}}onStorageEvent(g,A=!1){if(!g.key)return void this.forAllChangedKeys((St,Kt,Tn)=>{this.notifyListeners(St,Tn)});const Z=g.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const St=this.storage.getItem(Z);if(g.newValue!==St)null!==g.newValue?this.storage.setItem(Z,g.newValue):this.storage.removeItem(Z);else if(this.localCache[Z]===g.newValue&&!A)return}const se=()=>{const St=this.storage.getItem(Z);!A&&this.localCache[Z]===St||this.notifyListeners(Z,St)},Be=this.storage.getItem(Z);!function Ae(){return(0,x.w1)()&&10===document.documentMode}()||Be===g.newValue||g.newValue===g.oldValue?se():setTimeout(se,10)}notifyListeners(g,A){this.localCache[g]=A;const Z=this.listeners[g];if(Z)for(const se of Array.from(Z))se(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,A,Z)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:A,newValue:Z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(A)}_removeListener(g,A){this.listeners[g]&&(this.listeners[g].delete(A),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,A){var Z=()=>super._set,se=this;return(0,v.Z)(function*(){yield Z().call(se,g,A),se.localCache[g]=JSON.stringify(A)})()}_get(g){var A=()=>super._get,Z=this;return(0,v.Z)(function*(){const se=yield A().call(Z,g);return Z.localCache[g]=JSON.stringify(se),se})()}_remove(g){var A=()=>super._remove,Z=this;return(0,v.Z)(function*(){yield A().call(Z,g),delete Z.localCache[g]})()}}return S.type="LOCAL",S})(),t1=(()=>{class S extends na{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,A){}_removeListener(g,A){}}return S.type="SESSION",S})();let Yc=(()=>{class S{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const A=this.receivers.find(se=>se.isListeningto(g));if(A)return A;const Z=new S(g);return this.receivers.push(Z),Z}isListeningto(g){return this.eventTarget===g}handleEvent(g){var A=this;return(0,v.Z)(function*(){const Z=g,{eventId:se,eventType:Be,data:St}=Z.data,Kt=A.handlersMap[Be];if(!Kt?.size)return;Z.ports[0].postMessage({status:"ack",eventId:se,eventType:Be});const Tn=Array.from(Kt).map(function(){var ai=(0,v.Z)(function*(Ra){return Ra(Z.origin,St)});return function(Ra){return ai.apply(this,arguments)}}()),ar=yield function N2(S){return Promise.all(S.map(function(){var p=(0,v.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(A){return{fulfilled:!1,reason:A}}});return function(g){return p.apply(this,arguments)}}()))}(Tn);Z.ports[0].postMessage({status:"done",eventId:se,eventType:Be,response:ar})})()}_subscribe(g,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(A)}_unsubscribe(g,A){this.handlersMap[g]&&A&&this.handlersMap[g].delete(A),(!A||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return S.receivers=[],S})();function n1(S="",p=10){let g="";for(let A=0;A<p;A++)g+=Math.floor(10*Math.random());return S+g}class bu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,A=50){var Z=this;return(0,v.Z)(function*(){const se=typeof MessageChannel<"u"?new MessageChannel:null;if(!se)throw new Error("connection_unavailable");let Be,St;return new Promise((Kt,Tn)=>{const ar=n1("",20);se.port1.start();const ai=setTimeout(()=>{Tn(new Error("unsupported_event"))},A);St={messageChannel:se,onMessage(Ra){const ul=Ra;if(ul.data.eventId===ar)switch(ul.data.status){case"ack":clearTimeout(ai),Be=setTimeout(()=>{Tn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Be),Kt(ul.data.response);break;default:clearTimeout(ai),clearTimeout(Be),Tn(new Error("invalid_response"))}}},Z.handlers.add(St),se.port1.addEventListener("message",St.onMessage),Z.target.postMessage({eventType:p,eventId:ar,data:g},[se.port2])}).finally(()=>{St&&Z.removeMessageHandler(St)})})()}}function _r(){return window}function Ys(){return typeof _r().WorkerGlobalScope<"u"&&"function"==typeof _r().importScripts}function r1(){return(r1=(0,v.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hl="firebaseLocalStorageDb",xa="firebaseLocalStorage",i1="fbase_key";class ra{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ia(S,p){return S.transaction([xa],p?"readwrite":"readonly").objectStore(xa)}function Oo(){const S=indexedDB.open(Hl,1);return new Promise((p,g)=>{S.addEventListener("error",()=>{g(S.error)}),S.addEventListener("upgradeneeded",()=>{const A=S.result;try{A.createObjectStore(xa,{keyPath:i1})}catch(Z){g(Z)}}),S.addEventListener("success",(0,v.Z)(function*(){const A=S.result;A.objectStoreNames.contains(xa)?p(A):(A.close(),yield function gc(){const S=indexedDB.deleteDatabase(Hl);return new ra(S).toPromise()}(),p(yield Oo()))}))})}function s1(S,p,g){return o1.apply(this,arguments)}function o1(){return(o1=(0,v.Z)(function*(S,p,g){const A=ia(S,!0).put({[i1]:p,value:g});return new ra(A).toPromise()})).apply(this,arguments)}function mo(){return(mo=(0,v.Z)(function*(S,p){const g=ia(S,!1).get(p),A=yield new ra(g).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function vc(S,p){const g=ia(S,!0).delete(p);return new ra(g).toPromise()}const P1=(()=>{class S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,v.Z)(function*(){return g.db||(g.db=yield Oo()),g.db})()}_withRetries(g){var A=this;return(0,v.Z)(function*(){let Z=0;for(;;)try{const se=yield A._openDb();return yield g(se)}catch(se){if(Z++>3)throw se;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,v.Z)(function*(){return Ys()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,v.Z)(function*(){g.receiver=Yc._getInstance(function pc(){return Ys()?self:null}()),g.receiver._subscribe("keyChanged",function(){var A=(0,v.Z)(function*(Z,se){return{keyProcessed:(yield g._poll()).includes(se.key)}});return function(Z,se){return A.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var A=(0,v.Z)(function*(Z,se){return["keyChanged"]});return function(Z,se){return A.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,v.Z)(function*(){var A,Z;if(g.activeServiceWorker=yield function k1(){return r1.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new bu(g.activeServiceWorker);const se=yield g.sender._send("ping",{},800);!se||(null===(A=se[0])||void 0===A?void 0:A.fulfilled)&&(null===(Z=se[0])||void 0===Z?void 0:Z.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var A=this;return(0,v.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function fc(){var S;return(null===(S=navigator?.serviceWorker)||void 0===S?void 0:S.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:g},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Oo();return yield s1(g,N1,"1"),yield vc(g,N1),!0}catch{}return!1})()}_withPendingWrite(g){var A=this;return(0,v.Z)(function*(){A.pendingWrites++;try{yield g()}finally{A.pendingWrites--}})()}_set(g,A){var Z=this;return(0,v.Z)(function*(){return Z._withPendingWrite((0,v.Z)(function*(){return yield Z._withRetries(se=>s1(se,g,A)),Z.localCache[g]=A,Z.notifyServiceWorker(g)}))})()}_get(g){var A=this;return(0,v.Z)(function*(){const Z=yield A._withRetries(se=>function Ul(S,p){return mo.apply(this,arguments)}(se,g));return A.localCache[g]=Z,Z})()}_remove(g){var A=this;return(0,v.Z)(function*(){return A._withPendingWrite((0,v.Z)(function*(){return yield A._withRetries(Z=>vc(Z,g)),delete A.localCache[g],A.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,v.Z)(function*(){const A=yield g._withRetries(Be=>{const St=ia(Be,!1).getAll();return new ra(St).toPromise()});if(!A)return[];if(0!==g.pendingWrites)return[];const Z=[],se=new Set;for(const{fbase_key:Be,value:St}of A)se.add(Be),JSON.stringify(g.localCache[Be])!==JSON.stringify(St)&&(g.notifyListeners(Be,St),Z.push(Be));for(const Be of Object.keys(g.localCache))g.localCache[Be]&&!se.has(Be)&&(g.notifyListeners(Be,null),Z.push(Be));return Z})()}notifyListeners(g,A){this.localCache[g]=A;const Z=this.listeners[g];if(Z)for(const se of Array.from(Z))se(A)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(A)}_removeListener(g,A){this.listeners[g]&&(this.listeners[g].delete(A),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return S.type="LOCAL",S})();function yc(S,p){return Dn(S,"POST","/v2/accounts/mfaSignIn:start",wn(S,p))}function Ji(){return(Ji=(0,v.Z)(function*(S){return(yield Dn(S,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function a1(S){return new Promise((p,g)=>{const A=document.createElement("script");A.setAttribute("src",S),A.onload=p,A.onerror=Z=>{const se=Ct("internal-error");se.customData=Z,g(se)},A.type="text/javascript",A.charset="UTF-8",function Xc(){var S,p;return null!==(p=null===(S=document.getElementsByTagName("head"))||void 0===S?void 0:S[0])&&void 0!==p?p:document}().appendChild(A)})}function Lo(S){return`__${S}${Math.floor(1e6*Math.random())}`}const tr=1e12;class Bl{constructor(p){this.auth=p,this.counter=tr,this._widgets=new Map}render(p,g){const A=this.counter;return this._widgets.set(A,new c1(p,this.auth.name,g||{})),this.counter++,A}reset(p){var g;const A=p||tr;null===(g=this._widgets.get(A))||void 0===g||g.delete(),this._widgets.delete(A)}getResponse(p){var g;return(null===(g=this._widgets.get(p||tr))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,v.Z)(function*(){var A;return null===(A=g._widgets.get(p||tr))||void 0===A||A.execute(),""})()}}class c1{constructor(p,g,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Z="string"==typeof p?document.getElementById(p):p;Fe(Z,"argument-error",{appName:g}),this.container=Z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pd(S){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<S;A++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const tl=Lo("rcb"),R2=new Pt(3e4,6e4);class O2{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=_r().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return Fe(function Aa(S){return S.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(S)}(g),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(_r().grecaptcha):new Promise((A,Z)=>{const se=_r().setTimeout(()=>{Z(Ct(p,"network-request-failed"))},R2.get());_r()[tl]=()=>{_r().clearTimeout(se),delete _r()[tl];const St=_r().grecaptcha;if(!St)return void Z(Ct(p,"internal-error"));const Kt=St.render;St.render=(Tn,ar)=>{const ai=Kt(Tn,ar);return this.counter++,ai},this.hostLanguage=g,A(St)},a1(`https://www.google.com/recaptcha/api.js??${(0,x.xO)({onload:tl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(se),Z(Ct(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=_r().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class md{load(p){return(0,v.Z)(function*(){return new Bl(p)})()}clearedOneInstance(){}}const L2="recaptcha",Ei={theme:"light",type:"image"};class nl{constructor(p,g=Object.assign({},Ei),A){this.parameters=g,this.type=L2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mr(A),this.isInvisible="invisible"===this.parameters.size,Fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Z="string"==typeof p?document.getElementById(p):p;Fe(Z,this.auth,"argument-error"),this.container=Z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new md:new O2,this.validateStartingState()}verify(){var p=this;return(0,v.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),A=p.getAssertedRecaptcha();return A.getResponse(g)||new Promise(se=>{const Be=St=>{!St||(p.tokenChangeListeners.delete(Be),se(St))};p.tokenChangeListeners.add(Be),p.isInvisible&&A.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Fe(!this.parameters.sitekey,this.auth,"argument-error"),Fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(A=>A(g)),"function"==typeof p)p(g);else if("string"==typeof p){const A=_r()[p];"function"==typeof A&&A(g)}}}assertNotDestroyed(){Fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,v.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const A=document.createElement("div");g.appendChild(A),g=A}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,v.Z)(function*(){Fe(xt()&&!Ys(),p.auth,"internal-error"),yield function _c(){let S=null;return new Promise(p=>{"complete"!==document.readyState?(S=()=>p(),window.addEventListener("load",S)):p()}).catch(p=>{throw S&&window.removeEventListener("load",S),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function sa(S){return Ji.apply(this,arguments)}(p.auth);Fe(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return Fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rl{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=qi._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function F2(S,p,g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,v.Z)(function*(S,p,g){const A=Mr(S),Z=yield Na(A,p,(0,x.m9)(g));return new rl(Z,se=>Qe(A,se))})).apply(this,arguments)}function go(S,p,g){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S);yield z(!1,A,"phone");const Z=yield Na(A.auth,p,(0,x.m9)(g));return new rl(Z,se=>Nr(A,se))})).apply(this,arguments)}function O1(S,p,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S),Z=yield Na(A.auth,p,(0,x.m9)(g));return new rl(Z,se=>Er(A,se))})).apply(this,arguments)}function Na(S,p,g){return il.apply(this,arguments)}function il(){return(il=(0,v.Z)(function*(S,p,g){var A;const Z=yield g.verify();try{let se;if(Fe("string"==typeof Z,S,"argument-error"),Fe(g.type===L2,S,"argument-error"),se="string"==typeof p?{phoneNumber:p}:p,"session"in se){const Be=se.session;if("phoneNumber"in se)return Fe("enroll"===Be.type,S,"internal-error"),(yield zi(S,{idToken:Be.credential,phoneEnrollmentInfo:{phoneNumber:se.phoneNumber,recaptchaToken:Z}})).phoneSessionInfo.sessionInfo;{Fe("signin"===Be.type,S,"internal-error");const St=(null===(A=se.multiFactorHint)||void 0===A?void 0:A.uid)||se.multiFactorUid;return Fe(St,S,"missing-multi-factor-info"),(yield yc(S,{mfaPendingCredential:Be.credential,mfaEnrollmentId:St,phoneSignInInfo:{recaptchaToken:Z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Be}=yield E1(S,{phoneNumber:se.phoneNumber,recaptchaToken:Z});return Be}}finally{g._reset()}})).apply(this,arguments)}function wu(S,p){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,v.Z)(function*(S,p){yield si((0,x.m9)(S),p)})).apply(this,arguments)}let z2=(()=>{class S{constructor(g){this.providerId=S.PROVIDER_ID,this.auth=Mr(g)}verifyPhoneNumber(g,A){return Na(this.auth,g,(0,x.m9)(A))}static credential(g,A){return qi._fromVerification(g,A)}static credentialFromResult(g){return S.credentialFromTaggedObject(g)}static credentialFromError(g){return S.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:A,temporaryProof:Z}=g;return A&&Z?qi._fromTokenResponse(A,Z):null}}return S.PROVIDER_ID="phone",S.PHONE_SIGN_IN_METHOD="phone",S})();function b(S,p){return p?Oe(p):(Fe(S._popupRedirectResolver,S,"argument-error"),S._popupRedirectResolver)}class E extends Jr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ao(p,this._buildIdpRequest())}_linkToIdToken(p,g){return ao(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return ao(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function C(S){return Se(S.auth,new E(S),S.bypassAuthState)}function N(S){const{auth:p,user:g}=S;return Fe(g,p,"internal-error"),V(g,new E(S),S.bypassAuthState)}function F(S){return K.apply(this,arguments)}function K(){return(K=(0,v.Z)(function*(S){const{auth:p,user:g}=S;return Fe(g,p,"internal-error"),si(g,new E(S),S.bypassAuthState)})).apply(this,arguments)}class ce{constructor(p,g,A,Z,se=!1){this.auth=p,this.resolver=A,this.user=Z,this.bypassAuthState=se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,v.Z)(function*(A,Z){p.pendingPromise={resolve:A,reject:Z};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(se){p.reject(se)}});return function(A,Z){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,v.Z)(function*(){const{urlResponse:A,sessionId:Z,postBody:se,tenantId:Be,error:St,type:Kt}=p;if(St)return void g.reject(St);const Tn={auth:g.auth,requestUri:A,sessionId:Z,tenantId:Be||void 0,postBody:se||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Kt)(Tn))}catch(ar){g.reject(ar)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return C;case"linkViaPopup":case"linkViaRedirect":return F;case"reauthViaPopup":case"reauthViaRedirect":return N;default:jt(this.auth,"internal-error")}}resolve(p){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const we=new Pt(2e3,1e4);function lt(S,p,g){return $t.apply(this,arguments)}function $t(){return($t=(0,v.Z)(function*(S,p,g){const A=Mr(S);at(S,p,Zi);const Z=b(A,g);return new vo(A,"signInViaPopup",p,Z).executeNotNull()})).apply(this,arguments)}function Kn(S,p,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S);at(A.auth,p,Zi);const Z=b(A.auth,g);return new vo(A.auth,"reauthViaPopup",p,Z,A).executeNotNull()})).apply(this,arguments)}function Ir(S,p,g){return Di.apply(this,arguments)}function Di(){return(Di=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S);at(A.auth,p,Zi);const Z=b(A.auth,g);return new vo(A.auth,"linkViaPopup",p,Z,A).executeNotNull()})).apply(this,arguments)}let vo=(()=>{class S extends ce{constructor(g,A,Z,se,Be){super(g,A,se,Be),this.provider=Z,this.authWindow=null,this.pollId=null,S.currentPopupAction&&S.currentPopupAction.cancel(),S.currentPopupAction=this}executeNotNull(){var g=this;return(0,v.Z)(function*(){const A=yield g.execute();return Fe(A,g.auth,"internal-error"),A})()}onExecution(){var g=this;return(0,v.Z)(function*(){Ze(1===g.filter.length,"Popup operations only handle one event");const A=n1();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],A),g.authWindow.associatedEvent=A,g.resolver._originValidation(g.auth).catch(Z=>{g.reject(Z)}),g.resolver._isIframeWebStorageSupported(g.auth,Z=>{Z||g.reject(Ct(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,S.currentPopupAction=null}pollUserCancellation(){const g=()=>{var A,Z;this.pollId=null!==(Z=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==Z&&Z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ct(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,we.get())};g()}}return S.currentPopupAction=null,S})();const ti=new Map;class l1 extends ce{constructor(p,g,A=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,A),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,v.Z)(function*(){let A=ti.get(g.auth._key());if(!A){try{const se=(yield function L1(S,p){return sl.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;A=()=>Promise.resolve(se)}catch(Z){A=()=>Promise.reject(Z)}ti.set(g.auth._key(),A)}return g.bypassAuthState||ti.set(g.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,A=this;return(0,v.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(A,p);if("unknown"!==p.type){if(p.eventId){const Z=yield A.auth._redirectUserForId(p.eventId);if(Z)return A.user=Z,g().call(A,p);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function sl(){return(sl=(0,v.Z)(function*(S,p){const g=ui(p),A=gd(S);if(!(yield A._isAvailable()))return!1;const Z="true"===(yield A._get(g));return yield A._remove(g),Z})).apply(this,arguments)}function ka(S,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,v.Z)(function*(S,p){return gd(S)._set(ui(p),"true")})).apply(this,arguments)}function Fo(){ti.clear()}function F1(S,p){ti.set(S._key(),p)}function gd(S){return Oe(S._redirectPersistence)}function ui(S){return Un("pendingRedirect",S.config.apiKey,S.name)}function V2(S,p,g){return function H2(S,p,g){return jl.apply(this,arguments)}(S,p,g)}function jl(){return(jl=(0,v.Z)(function*(S,p,g){const A=Mr(S);at(S,p,Zi);const Z=b(A,g);return yield ka(Z,A),Z._openRedirect(A,p,"signInViaRedirect")})).apply(this,arguments)}function R(S,p,g){return function U(S,p,g){return Y.apply(this,arguments)}(S,p,g)}function Y(){return(Y=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S);at(A.auth,p,Zi);const Z=b(A.auth,g);yield ka(Z,A.auth);const se=yield Yn(A);return Z._openRedirect(A.auth,p,"reauthViaRedirect",se)})).apply(this,arguments)}function fe(S,p,g){return function ze(S,p,g){return et.apply(this,arguments)}(S,p,g)}function et(){return(et=(0,v.Z)(function*(S,p,g){const A=(0,x.m9)(S);at(A.auth,p,Zi);const Z=b(A.auth,g);yield z(!1,A,p.providerId),yield ka(Z,A.auth);const se=yield Yn(A);return Z._openRedirect(A.auth,p,"linkViaRedirect",se)})).apply(this,arguments)}function At(S,p){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,v.Z)(function*(S,p){return yield Mr(S)._initializationPromise,Nn(S,p,!1)})).apply(this,arguments)}function Nn(S,p){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,v.Z)(function*(S,p,g=!1){const A=Mr(S),Z=b(A,p),Be=yield new l1(A,Z,g).execute();return Be&&!g&&(delete Be.user._redirectEventId,yield A._persistUserIfCurrent(Be.user),yield A._setRedirectUser(null,p)),Be})).apply(this,arguments)}function Yn(S){return An.apply(this,arguments)}function An(){return(An=(0,v.Z)(function*(S){const p=n1(`${S.uid}:::`);return S._redirectEventId=p,yield S.auth._setRedirectUser(S),yield S.auth._persistUserIfCurrent(S),p})).apply(this,arguments)}class Os{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(p,A)&&(g=!0,this.sendToConsumer(p,A),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function oa(S){switch(S.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zo(S);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var A;if(p.error&&!zo(p)){const Z=(null===(A=p.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";g.onError(Ct(this.auth,Z))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const A=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&A}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(al(p))}saveEventToCache(p){this.cachedEventUids.add(al(p)),this.lastProcessedEventTime=Date.now()}}function al(S){return[S.type,S.eventId,S.sessionId,S.tenantId].filter(p=>p).join("-")}function zo({type:S,error:p}){return"unknown"===S&&"auth/no-auth-event"===p?.code}function U2(S){return $l.apply(this,arguments)}function $l(){return($l=(0,v.Z)(function*(S,p={}){return Dn(S,"GET","/v1/projects",p)})).apply(this,arguments)}const bc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z1=/^https?/;function Gl(){return(Gl=(0,v.Z)(function*(S){if(S.config.emulator)return;const{authorizedDomains:p}=yield U2(S);for(const g of p)try{if(h5(g))return}catch{}jt(S,"unauthorized-domain")})).apply(this,arguments)}function h5(S){const p=Dt(),{protocol:g,hostname:A}=new URL(p);if(S.startsWith("chrome-extension://")){const Be=new URL(S);return""===Be.hostname&&""===A?"chrome-extension:"===g&&S.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&Be.hostname===A}if(!z1.test(g))return!1;if(bc.test(S))return A===S;const Z=S.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Z+"|"+Z+")$","i").test(A)}const f5=new Pt(3e4,6e4);function Iu(){const S=_r().___jsl;if(S?.H)for(const p of Object.keys(S.H))if(S.H[p].r=S.H[p].r||[],S.H[p].L=S.H[p].L||[],S.H[p].r=[...S.H[p].L],S.CP)for(let g=0;g<S.CP.length;g++)S.CP[g]=null}let B2=null;function hh(S){return B2=B2||function dh(S){return new Promise((p,g)=>{var A,Z,se;function Be(){Iu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Iu(),g(Ct(S,"network-request-failed"))},timeout:f5.get()})}if(null!==(Z=null===(A=_r().gapi)||void 0===A?void 0:A.iframes)&&void 0!==Z&&Z.Iframe)p(gapi.iframes.getContext());else{if(null===(se=_r().gapi)||void 0===se||!se.load){const St=Lo("iframefcb");return _r()[St]=()=>{gapi.load?Be():g(Ct(S,"network-request-failed"))},a1(`https://apis.google.com/js/api.js?onload=${St}`).catch(Kt=>g(Kt))}Be()}}).catch(p=>{throw B2=null,p})}(S),B2}const Rp=new Pt(5e3,15e3),yd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fh(S){const p=S.config;Fe(p.authDomain,S,"auth-domain-config-required");const g=p.emulator?ln(p,"emulator/auth/iframe"):`https://${S.config.authDomain}/__/auth/iframe`,A={apiKey:p.apiKey,appName:S.name,v:q.SDK_VERSION},Z=p5.get(S.config.apiHost);Z&&(A.eid=Z);const se=S._getFrameworks();return se.length&&(A.fw=se.join(",")),`${g}?${(0,x.xO)(A).slice(1)}`}function Du(){return Du=(0,v.Z)(function*(S){const p=yield hh(S),g=_r().gapi;return Fe(g,S,"internal-error"),p.open({where:document.body,url:fh(S),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yd,dontclear:!0},A=>new Promise(function(){var Z=(0,v.Z)(function*(se,Be){yield A.restyle({setHideOnLeave:!1});const St=Ct(S,"network-request-failed"),Kt=_r().setTimeout(()=>{Be(St)},Rp.get());function Tn(){_r().clearTimeout(Kt),se(A)}A.ping(Tn).then(Tn,()=>{Be(St)})});return function(se,Be){return Z.apply(this,arguments)}}()))}),Du.apply(this,arguments)}const Wl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Su{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G2(S,p,g,A,Z,se){Fe(S.config.authDomain,S,"auth-domain-config-required"),Fe(S.config.apiKey,S,"invalid-api-key");const Be={apiKey:S.config.apiKey,appName:S.name,authType:g,redirectUrl:A,v:q.SDK_VERSION,eventId:Z};if(p instanceof Zi){p.setDefaultLanguage(S.languageCode),Be.providerId=p.providerId||"",(0,x.xb)(p.getCustomParameters())||(Be.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Kt,Tn]of Object.entries(se||{}))Be[Kt]=Tn}if(p instanceof fi){const Kt=p.getScopes().filter(Tn=>""!==Tn);Kt.length>0&&(Be.scopes=Kt.join(","))}S.tenantId&&(Be.tid=S.tenantId);const St=Be;for(const Kt of Object.keys(St))void 0===St[Kt]&&delete St[Kt];return`${function v5({config:S}){return S.emulator?ln(S,"emulator/auth/handler"):`https://${S.authDomain}/__/auth/handler`}(S)}?${(0,x.xO)(St).slice(1)}`}const _d="webStorageSupport",vh=class y5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t1,this._completeRedirectFn=Nn,this._overrideRedirectResult=F1}_openPopup(p,g,A,Z){var se=this;return(0,v.Z)(function*(){var Be;Ze(null===(Be=se.eventManagers[p._key()])||void 0===Be?void 0:Be.manager,"_initialize() not called before _openPopup()");const St=G2(p,g,A,Dt(),Z);return function ph(S,p,g,A=500,Z=600){const se=Math.max((window.screen.availHeight-Z)/2,0).toString(),Be=Math.max((window.screen.availWidth-A)/2,0).toString();let St="";const Kt=Object.assign(Object.assign({},Wl),{width:A.toString(),height:Z.toString(),top:se,left:Be}),Tn=(0,x.z$)().toLowerCase();g&&(St=ft(Tn)?"_blank":g),Ee(Tn)&&(p=p||"http://localhost",Kt.scrollbars="yes");const ar=Object.entries(Kt).reduce((Ra,[ul,Cd])=>`${Ra}${ul}=${Cd},`,"");if(function ae(S=(0,x.z$)()){var p;return Me(S)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Tn)&&"_self"!==St)return function mh(S,p){const g=document.createElement("a");g.href=S,g.target=p;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(A)}(p||"",St),new Su(null);const ai=window.open(p||"",St,ar);Fe(ai,S,"popup-blocked");try{ai.focus()}catch{}return new Su(ai)}(p,St,n1())})()}_openRedirect(p,g,A,Z){var se=this;return(0,v.Z)(function*(){return yield se._originValidation(p),function Qc(S){_r().location.href=S}(G2(p,g,A,Dt(),Z)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:Z,promise:se}=this.eventManagers[g];return Z?Promise.resolve(Z):(Ze(se,"If manager is not set, promise should be"),se)}const A=this.initAndGetManager(p);return this.eventManagers[g]={promise:A},A.catch(()=>{delete this.eventManagers[g]}),A}initAndGetManager(p){var g=this;return(0,v.Z)(function*(){const A=yield function j2(S){return Du.apply(this,arguments)}(p),Z=new Os(p);return A.register("authEvent",se=>(Fe(se?.authEvent,p,"invalid-auth-event"),{status:Z.onEvent(se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:Z},g.iframes[p._key()]=A,Z})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(_d,{type:_d},Z=>{var se;const Be=null===(se=Z?.[0])||void 0===se?void 0:se[_d];void 0!==Be&&g(!!Be),jt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function cl(S){return Gl.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return ht()||ve()||Me()}};class wc extends class V1{constructor(p){this.factorId=p}_process(p,g,A){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,A);case"signin":return this._finalizeSignIn(p,g.credential);default:return je("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new wc(p)}_finalizeEnroll(p,g,A){return function zl(S,p){return Dn(S,"POST","/v2/accounts/mfaEnrollment:finalize",wn(S,p))}(p,{idToken:g,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Qs(S,p){return Dn(S,"POST","/v2/accounts/mfaSignIn:finalize",wn(S,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _5=(()=>{class S{constructor(){}static assertion(g){return wc._fromCredential(g)}}return S.FACTOR_ID="phone",S})();var yh="@firebase/auth";class C5{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,v.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(A=>{var Z;p((null===(Z=A)||void 0===Z?void 0:Z.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function b5(S){(0,q._registerComponent)(new Le.wA("auth",(p,{options:g})=>{const A=p.getProvider("app").getImmediate(),Z=p.getProvider("heartbeat"),{apiKey:se,authDomain:Be}=A.options;return((St,Kt)=>{Fe(se&&!se.includes(":"),"invalid-api-key",{appName:St.name}),Fe(!Be?.includes(":"),"argument-error",{appName:St.name});const Tn={apiKey:se,authDomain:Be,clientPlatform:S,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rn(S)},ar=new zr(St,Kt,Tn);return function He(S,p){const g=p?.persistence||[],A=(Array.isArray(g)?g:[g]).map(Oe);p?.errorMap&&S._updateErrorMap(p.errorMap),S._initializeWithPersistence(A,p?.popupRedirectResolver)}(ar,g),ar})(A,Z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,A)=>{p.getProvider("auth-internal").initialize()})),(0,q._registerComponent)(new Le.wA("auth-internal",p=>{const g=Mr(p.getProvider("auth").getImmediate());return new C5(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,q.registerVersion)(yh,"0.20.6",function Ch(S){switch(S){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(S)),(0,q.registerVersion)(yh,"0.20.6","esm2017")}("Browser")},2090:(Zt,Je,W)=>{W.d(Je,{$s:()=>cr,BH:()=>Tt,DV:()=>Dn,Dv:()=>$r,G6:()=>Fe,GJ:()=>Qn,L:()=>Ve,LL:()=>Dt,Mn:()=>at,Pz:()=>zn,Sg:()=>mt,UG:()=>ot,UI:()=>mr,US:()=>Le,Wj:()=>dt,Yr:()=>rt,ZB:()=>ge,ZR:()=>He,b$:()=>jt,cI:()=>Hn,d:()=>Ct,dS:()=>le,eu:()=>Ze,g5:()=>q,gK:()=>Qr,gQ:()=>Fr,h$:()=>Ue,hl:()=>je,hu:()=>x,jU:()=>Ye,lb:()=>ye,m9:()=>on,ne:()=>tn,p$:()=>me,pd:()=>yr,r3:()=>wn,ru:()=>Bt,tV:()=>We,uI:()=>Ut,ug:()=>$e,vZ:()=>Lr,w1:()=>bt,w9:()=>$n,xO:()=>Yr,xb:()=>Tr,z$:()=>Xe,zI:()=>ke,zd:()=>fn});const x=function(ue,pe){if(!ue)throw q(pe)},q=function(ue){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ue)},De=function(ue){const pe=[];let he=0;for(let Ce=0;Ce<ue.length;Ce++){let _e=ue.charCodeAt(Ce);_e<128?pe[he++]=_e:_e<2048?(pe[he++]=_e>>6|192,pe[he++]=63&_e|128):55296==(64512&_e)&&Ce+1<ue.length&&56320==(64512&ue.charCodeAt(Ce+1))?(_e=65536+((1023&_e)<<10)+(1023&ue.charCodeAt(++Ce)),pe[he++]=_e>>18|240,pe[he++]=_e>>12&63|128,pe[he++]=_e>>6&63|128,pe[he++]=63&_e|128):(pe[he++]=_e>>12|224,pe[he++]=_e>>6&63|128,pe[he++]=63&_e|128)}return pe},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ue,pe){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const he=pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let _e=0;_e<ue.length;_e+=3){const gt=ue[_e],kt=_e+1<ue.length,hn=kt?ue[_e+1]:0,Gn=_e+2<ue.length,Un=Gn?ue[_e+2]:0;let Ee=(15&hn)<<2|Un>>6,ve=63&Un;Gn||(ve=64,kt||(Ee=64)),Ce.push(he[gt>>2],he[(3&gt)<<4|hn>>4],he[Ee],he[ve])}return Ce.join("")},encodeString(ue,pe){return this.HAS_NATIVE_SUPPORT&&!pe?btoa(ue):this.encodeByteArray(De(ue),pe)},decodeString(ue,pe){return this.HAS_NATIVE_SUPPORT&&!pe?atob(ue):function(ue){const pe=[];let he=0,Ce=0;for(;he<ue.length;){const _e=ue[he++];if(_e<128)pe[Ce++]=String.fromCharCode(_e);else if(_e>191&&_e<224){const gt=ue[he++];pe[Ce++]=String.fromCharCode((31&_e)<<6|63&gt)}else if(_e>239&&_e<365){const Gn=((7&_e)<<18|(63&ue[he++])<<12|(63&ue[he++])<<6|63&ue[he++])-65536;pe[Ce++]=String.fromCharCode(55296+(Gn>>10)),pe[Ce++]=String.fromCharCode(56320+(1023&Gn))}else{const gt=ue[he++],kt=ue[he++];pe[Ce++]=String.fromCharCode((15&_e)<<12|(63&gt)<<6|63&kt)}}return pe.join("")}(this.decodeStringToByteArray(ue,pe))},decodeStringToByteArray(ue,pe){this.init_();const he=pe?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let _e=0;_e<ue.length;){const gt=he[ue.charAt(_e++)],hn=_e<ue.length?he[ue.charAt(_e)]:0;++_e;const Un=_e<ue.length?he[ue.charAt(_e)]:64;++_e;const xe=_e<ue.length?he[ue.charAt(_e)]:64;if(++_e,null==gt||null==hn||null==Un||null==xe)throw Error();Ce.push(gt<<2|hn>>4),64!==Un&&(Ce.push(hn<<4&240|Un>>2),64!==xe&&Ce.push(Un<<6&192|xe))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}},Ue=function(ue){const pe=De(ue);return Le.encodeByteArray(pe,!0)},Ve=function(ue){return Ue(ue).replace(/\./g,"")},We=function(ue){try{return Le.decodeString(ue,!0)}catch(pe){console.error("base64Decode failed: ",pe)}return null};function me(ue){return ge(void 0,ue)}function ge(ue,pe){if(!(pe instanceof Object))return pe;switch(pe.constructor){case Date:return new Date(pe.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return pe}for(const he in pe)!pe.hasOwnProperty(he)||!Re(he)||(ue[he]=ge(ue[he],pe[he]));return ue}function Re(ue){return"__proto__"!==ue}class Tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((pe,he)=>{this.resolve=pe,this.reject=he})}wrapCallback(pe){return(he,Ce)=>{he?this.reject(he):this.resolve(Ce),"function"==typeof pe&&(this.promise.catch(()=>{}),1===pe.length?pe(he):pe(he,Ce))}}}function mt(ue,pe){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=pe||"demo-project",_e=ue.iat||0,gt=ue.sub||ue.user_id;if(!gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const kt=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:_e,exp:_e+3600,auth_time:_e,sub:gt,user_id:gt,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(kt)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function ot(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ye(){return"object"==typeof self&&self.self===self}function Bt(){const ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ct(){return Xe().indexOf("Electron/")>=0}function bt(){const ue=Xe();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function at(){return Xe().indexOf("MSAppHost/")>=0}function rt(){return!1}function Fe(){return!ot()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){return"object"==typeof indexedDB}function Ze(){return new Promise((ue,pe)=>{try{let he=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",_e=self.indexedDB.open(Ce);_e.onsuccess=()=>{_e.result.close(),he||self.indexedDB.deleteDatabase(Ce),ue(!0)},_e.onupgradeneeded=()=>{he=!1},_e.onerror=()=>{var gt;pe((null===(gt=_e.error)||void 0===gt?void 0:gt.message)||"")}}catch(he){pe(he)}})}function ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class He extends Error{constructor(pe,he,Ce){super(he),this.code=pe,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dt.prototype.create)}}class Dt{constructor(pe,he,Ce){this.service=pe,this.serviceName=he,this.errors=Ce}create(pe,...he){const Ce=he[0]||{},_e=`${this.service}/${pe}`,gt=this.errors[pe],kt=gt?function xt(ue,pe){return ue.replace(en,(he,Ce)=>{const _e=pe[Ce];return null!=_e?String(_e):`<${Ce}?>`})}(gt,Ce):"Error";return new He(_e,`${this.serviceName}: ${kt} (${_e}).`,Ce)}}const en=/\{\$([^}]+)}/g;function Hn(ue){return JSON.parse(ue)}function zn(ue){return JSON.stringify(ue)}const Pt=function(ue){let pe={},he={},Ce={},_e="";try{const gt=ue.split(".");pe=Hn(We(gt[0])||""),he=Hn(We(gt[1])||""),_e=gt[2],Ce=he.d||{},delete he.d}catch{}return{header:pe,claims:he,data:Ce,signature:_e}},$n=function(ue){const he=Pt(ue).claims;return!!he&&"object"==typeof he&&he.hasOwnProperty("iat")},Qn=function(ue){const pe=Pt(ue).claims;return"object"==typeof pe&&!0===pe.admin};function wn(ue,pe){return Object.prototype.hasOwnProperty.call(ue,pe)}function Dn(ue,pe){if(Object.prototype.hasOwnProperty.call(ue,pe))return ue[pe]}function Tr(ue){for(const pe in ue)if(Object.prototype.hasOwnProperty.call(ue,pe))return!1;return!0}function mr(ue,pe,he){const Ce={};for(const _e in ue)Object.prototype.hasOwnProperty.call(ue,_e)&&(Ce[_e]=pe.call(he,ue[_e],_e,ue));return Ce}function Lr(ue,pe){if(ue===pe)return!0;const he=Object.keys(ue),Ce=Object.keys(pe);for(const _e of he){if(!Ce.includes(_e))return!1;const gt=ue[_e],kt=pe[_e];if(fr(gt)&&fr(kt)){if(!Lr(gt,kt))return!1}else if(gt!==kt)return!1}for(const _e of Ce)if(!he.includes(_e))return!1;return!0}function fr(ue){return null!==ue&&"object"==typeof ue}function Yr(ue){const pe=[];for(const[he,Ce]of Object.entries(ue))Array.isArray(Ce)?Ce.forEach(_e=>{pe.push(encodeURIComponent(he)+"="+encodeURIComponent(_e))}):pe.push(encodeURIComponent(he)+"="+encodeURIComponent(Ce));return pe.length?"&"+pe.join("&"):""}function fn(ue){const pe={};return ue.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[_e,gt]=Ce.split("=");pe[decodeURIComponent(_e)]=decodeURIComponent(gt)}}),pe}function yr(ue){const pe=ue.indexOf("?");if(!pe)return"";const he=ue.indexOf("#",pe);return ue.substring(pe,he>0?he:void 0)}class Fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let pe=1;pe<this.blockSize;++pe)this.pad_[pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(pe,he){he||(he=0);const Ce=this.W_;if("string"==typeof pe)for(let xe=0;xe<16;xe++)Ce[xe]=pe.charCodeAt(he)<<24|pe.charCodeAt(he+1)<<16|pe.charCodeAt(he+2)<<8|pe.charCodeAt(he+3),he+=4;else for(let xe=0;xe<16;xe++)Ce[xe]=pe[he]<<24|pe[he+1]<<16|pe[he+2]<<8|pe[he+3],he+=4;for(let xe=16;xe<80;xe++){const Ee=Ce[xe-3]^Ce[xe-8]^Ce[xe-14]^Ce[xe-16];Ce[xe]=4294967295&(Ee<<1|Ee>>>31)}let Un,Ar,_e=this.chain_[0],gt=this.chain_[1],kt=this.chain_[2],hn=this.chain_[3],Gn=this.chain_[4];for(let xe=0;xe<80;xe++){xe<40?xe<20?(Un=hn^gt&(kt^hn),Ar=1518500249):(Un=gt^kt^hn,Ar=1859775393):xe<60?(Un=gt&kt|hn&(gt|kt),Ar=2400959708):(Un=gt^kt^hn,Ar=3395469782);const Ee=(_e<<5|_e>>>27)+Un+Gn+Ar+Ce[xe]&4294967295;Gn=hn,hn=kt,kt=4294967295&(gt<<30|gt>>>2),gt=_e,_e=Ee}this.chain_[0]=this.chain_[0]+_e&4294967295,this.chain_[1]=this.chain_[1]+gt&4294967295,this.chain_[2]=this.chain_[2]+kt&4294967295,this.chain_[3]=this.chain_[3]+hn&4294967295,this.chain_[4]=this.chain_[4]+Gn&4294967295}update(pe,he){if(null==pe)return;void 0===he&&(he=pe.length);const Ce=he-this.blockSize;let _e=0;const gt=this.buf_;let kt=this.inbuf_;for(;_e<he;){if(0===kt)for(;_e<=Ce;)this.compress_(pe,_e),_e+=this.blockSize;if("string"==typeof pe){for(;_e<he;)if(gt[kt]=pe.charCodeAt(_e),++kt,++_e,kt===this.blockSize){this.compress_(gt),kt=0;break}}else for(;_e<he;)if(gt[kt]=pe[_e],++kt,++_e,kt===this.blockSize){this.compress_(gt),kt=0;break}}this.inbuf_=kt,this.total_+=he}digest(){const pe=[];let he=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let _e=this.blockSize-1;_e>=56;_e--)this.buf_[_e]=255&he,he/=256;this.compress_(this.buf_);let Ce=0;for(let _e=0;_e<5;_e++)for(let gt=24;gt>=0;gt-=8)pe[Ce]=this.chain_[_e]>>gt&255,++Ce;return pe}}function tn(ue,pe){const he=new or(ue,pe);return he.subscribe.bind(he)}class or{constructor(pe,he){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=he,this.task.then(()=>{pe(this)}).catch(Ce=>{this.error(Ce)})}next(pe){this.forEachObserver(he=>{he.next(pe)})}error(pe){this.forEachObserver(he=>{he.error(pe)}),this.close(pe)}complete(){this.forEachObserver(pe=>{pe.complete()}),this.close()}subscribe(pe,he,Ce){let _e;if(void 0===pe&&void 0===he&&void 0===Ce)throw new Error("Missing Observer.");_e=function xn(ue,pe){if("object"!=typeof ue||null===ue)return!1;for(const he of pe)if(he in ue&&"function"==typeof ue[he])return!0;return!1}(pe,["next","error","complete"])?pe:{next:pe,error:he,complete:Ce},void 0===_e.next&&(_e.next=dr),void 0===_e.error&&(_e.error=dr),void 0===_e.complete&&(_e.complete=dr);const gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?_e.error(this.finalError):_e.complete()}catch{}}),this.observers.push(_e),gt}unsubscribeOne(pe){void 0===this.observers||void 0===this.observers[pe]||(delete this.observers[pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(pe){if(!this.finalized)for(let he=0;he<this.observers.length;he++)this.sendOne(he,pe)}sendOne(pe,he){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[pe])try{he(this.observers[pe])}catch(Ce){typeof console<"u"&&console.error&&console.error(Ce)}})}close(pe){this.finalized||(this.finalized=!0,void 0!==pe&&(this.finalError=pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dr(){}const $r=function(ue,pe,he,Ce){let _e;if(Ce<pe?_e="at least "+pe:Ce>he&&(_e=0===he?"none":"no more than "+he),_e)throw new Error(ue+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+_e+".")};function Qr(ue,pe){return`${ue} failed: ${pe} argument `}function dt(ue,pe,he,Ce){if((!Ce||he)&&"function"!=typeof he)throw new Error(Qr(ue,pe)+"must be a valid function.")}function ye(ue,pe,he,Ce){if((!Ce||he)&&("object"!=typeof he||null===he))throw new Error(Qr(ue,pe)+"must be a valid context object.")}const le=function(ue){const pe=[];let he=0;for(let Ce=0;Ce<ue.length;Ce++){let _e=ue.charCodeAt(Ce);if(_e>=55296&&_e<=56319){const gt=_e-55296;Ce++,x(Ce<ue.length,"Surrogate pair missing trail surrogate."),_e=65536+(gt<<10)+(ue.charCodeAt(Ce)-56320)}_e<128?pe[he++]=_e:_e<2048?(pe[he++]=_e>>6|192,pe[he++]=63&_e|128):_e<65536?(pe[he++]=_e>>12|224,pe[he++]=_e>>6&63|128,pe[he++]=63&_e|128):(pe[he++]=_e>>18|240,pe[he++]=_e>>12&63|128,pe[he++]=_e>>6&63|128,pe[he++]=63&_e|128)}return pe},$e=function(ue){let pe=0;for(let he=0;he<ue.length;he++){const Ce=ue.charCodeAt(he);Ce<128?pe++:Ce<2048?pe+=2:Ce>=55296&&Ce<=56319?(pe+=4,he++):pe+=3}return pe};function cr(ue,pe=1e3,he=2){const Ce=pe*Math.pow(he,ue),_e=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+_e)}function on(ue){return ue&&ue._delegate?ue._delegate:ue}},3180:(Zt,Je,W)=>{var v=W(1481),x=W(4650),q=W(433),De=W(1202),gt={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},Un={prefix:"fab",iconName:"linkedin-in",icon:[448,512,[],"f0e1","M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"]},ol={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},Ih={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},w_=W(8554),re=W(2090),Vo=W(9681),u1=W(1877),d1=W(4859),Sd=W(4986),Td=W(9751),Ec=W(8996),H1=W(9646),Wr=W(5813),Kp=W(8675),Mu=W(4482),xd=W(5403);function Yp(){return(0,Mu.e)((n,e)=>{let t,r=!1;n.subscribe((0,xd.x)(e,s=>{const c=t;t=s,r&&e.next([c,s]),r=!0}))})}var Is=W(4004),Ah=W(5026),E_=W(4671);function Qp(n,e=E_.y){return n=n??Jp,(0,Mu.e)((t,r)=>{let s,c=!0;t.subscribe((0,xd.x)(r,u=>{const h=e(u);(c||!n(s,h))&&(c=!1,s=h,r.next(u))}))})}function Jp(n,e){return n===e}var yn,Ad=W(9300),ps=W(2011),Md=W(6895),Nd=(W(5881),W(3942)),yt=W(5861),O5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pa={},L5=L5||{},nr=O5||self;function kd(){}function F5(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Rd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var z5="closure_uid_"+(1e9*Math.random()>>>0),V5=0;function S_(n,e,t){return n.call.apply(n.bind,arguments)}function T_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Xs(n,e,t){return(Xs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S_:T_).apply(null,arguments)}function Pd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function eo(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,c){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[s].apply(r,u)}}function ql(){this.s=this.s,this.o=this.o}var H5={};ql.prototype.s=!1,ql.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function D_(n){return Object.prototype.hasOwnProperty.call(n,z5)&&n[z5]||(n[z5]=++V5)}(this);delete H5[n]}},ql.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const U5=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Mh=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in s&&e.call(t,s[c],c,n)};function Q2(n){return Array.prototype.concat.apply([],arguments)}function Od(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Nh(n){return/^[\s\xa0]*$/.test(n)}var Co,Xp=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _o(n,e){return-1!=n.indexOf(e)}function B5(n,e){return n<e?-1:n>e?1:0}e:{var e9=nr.navigator;if(e9){var j5=e9.userAgent;if(j5){Co=j5;break e}}Co=""}function $5(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function t9(n){const e={};for(const t in n)e[t]=n[t];return e}var n9="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function r9(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let c=0;c<n9.length;c++)t=n9[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function G5(n){return G5[" "](n),n}G5[" "]=kd;var Z5,n,J2=_o(Co,"Opera"),aa=_o(Co,"Trident")||_o(Co,"MSIE"),i9=_o(Co,"Edge"),W5=i9||aa,A_=_o(Co,"Gecko")&&!(_o(Co.toLowerCase(),"webkit")&&!_o(Co,"Edge"))&&!(_o(Co,"Trident")||_o(Co,"MSIE"))&&!_o(Co,"Edge"),qI=_o(Co.toLowerCase(),"webkit")&&!_o(Co,"Edge");function q5(){var n=nr.document;return n?n.documentMode:void 0}e:{var h1="",Ld=(n=Co,A_?/rv:([^\);]+)(\)|;)/.exec(n):i9?/Edge\/([\d\.]+)/.exec(n):aa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qI?/WebKit\/(\S+)/.exec(n):J2?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ld&&(h1=Ld?Ld[1]:""),aa){var Fd=q5();if(null!=Fd&&Fd>parseFloat(h1)){Z5=String(Fd);break e}}Z5=h1}var M_={};var N_=nr.document&&aa&&(q5()||parseInt(Z5,10))||void 0,o9=function(){if(!nr.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{nr.addEventListener("test",kd,e),nr.removeEventListener("test",kd,e)}catch{}return n}();function Ls(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Nu(n,e){if(Ls.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(A_){e:{try{G5(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:a9[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nu.Z.h.call(this)}}Ls.prototype.h=function(){this.defaultPrevented=!0},eo(Nu,Ls);var a9={2:"touch",3:"pen",4:"mouse"};Nu.prototype.h=function(){Nu.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var kh="closure_listenable_"+(1e6*Math.random()|0),e3=0;function Y5(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++e3,this.ca=this.fa=!1}function zd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Rh(n){this.src=n,this.g={},this.h=0}function Vd(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],s=U5(r,e);(c=0<=s)&&Array.prototype.splice.call(r,s,1),c&&(zd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Q5(n,e,t,r){for(var s=0;s<n.length;++s){var c=n[s];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return s}return-1}Rh.prototype.add=function(n,e,t,r,s){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var u=Q5(n,e,r,s);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new Y5(e,this.src,c,!!r,s)).fa=t,n.push(e)),e};var J5="closure_lm_"+(1e6*Math.random()|0),X5={};function c9(n,e,t,r,s){if(r&&r.once)return e6(n,e,t,r,s);if(Array.isArray(e)){for(var c=0;c<e.length;c++)c9(n,e[c],t,r,s);return null}return t=zh(t),n&&n[kh]?n.N(e,t,Rd(r)?!!r.capture:!!r,s):l9(n,e,t,!1,r,s)}function l9(n,e,t,r,s,c){if(!e)throw Error("Invalid event type");var u=Rd(s)?!!s.capture:!!s,h=t6(n);if(h||(n[J5]=h=new Rh(n)),(t=h.add(e,t,r,u,c)).proxy)return t;if(r=function k_(){var e=R_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)o9||(s=u),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Lh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function e6(n,e,t,r,s){if(Array.isArray(e)){for(var c=0;c<e.length;c++)e6(n,e[c],t,r,s);return null}return t=zh(t),n&&n[kh]?n.O(e,t,Rd(r)?!!r.capture:!!r,s):l9(n,e,t,!0,r,s)}function Ph(n,e,t,r,s){if(Array.isArray(e))for(var c=0;c<e.length;c++)Ph(n,e[c],t,r,s);else r=Rd(r)?!!r.capture:!!r,t=zh(t),n&&n[kh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Q5(c=n.g[e],t,r,s))&&(zd(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=t6(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Q5(e,t,r,s)),(t=-1<n?e[n]:null)&&Oh(t))}function Oh(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[kh])Vd(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Lh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=t6(e))?(Vd(t,n),0==t.h&&(t.src=null,e[J5]=null)):zd(n)}}}function Lh(n){return n in X5?X5[n]:X5[n]="on"+n}function R_(n,e){if(n.ca)n=!0;else{e=new Nu(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Oh(n),n=t.call(r,e)}return n}function t6(n){return(n=n[J5])instanceof Rh?n:null}var Fh="__closure_events_fn_"+(1e9*Math.random()>>>0);function zh(n){return"function"==typeof n?n:(n[Fh]||(n[Fh]=function(e){return n.handleEvent(e)}),n[Fh])}function Si(){ql.call(this),this.i=new Rh(this),this.P=this,this.I=null}function Fs(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ls(e,n);else if(e instanceof Ls)e.target=e.target||n;else{var s=e;r9(e=new Ls(r,n),s)}if(s=!0,t)for(var c=t.length-1;0<=c;c--){var u=e.g=t[c];s=Hd(u,r,!0,e)&&s}if(s=Hd(u=e.g=n,r,!0,e)&&s,s=Hd(u,r,!1,e)&&s,t)for(c=0;c<t.length;c++)s=Hd(u=e.g=t[c],r,!1,e)&&s}function Hd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,c=0;c<e.length;++c){var u=e[c];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&Vd(n.i,u),s=!1!==h.call(m,r)&&s}}return s&&!r.defaultPrevented}eo(Si,ql),Si.prototype[kh]=!0,Si.prototype.removeEventListener=function(n,e,t,r){Ph(this,n,e,t,r)},Si.prototype.M=function(){if(Si.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)zd(t[r]);delete n.g[e],n.h--}}this.I=null},Si.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Si.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var n6=nr.JSON.stringify;function ZI(){var n=Bd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ud,u9=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new d9,n=>n.reset());class d9{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function h9(n){nr.setTimeout(()=>{throw n},0)}function Hh(n,e){Ud||function f9(){var n=nr.Promise.resolve(void 0);Ud=function(){n.then(p9)}}(),t3||(Ud(),t3=!0),Bd.add(n,e)}var t3=!1,Bd=new class Vh{constructor(){this.h=this.g=null}add(e,t){const r=u9.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function p9(){for(var n;n=ZI();){try{n.h.call(n.g)}catch(t){h9(t)}var e=u9;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}t3=!1}function n3(n,e){Si.call(this),this.h=n||1,this.g=e||nr,this.j=Xs(this.kb,this),this.l=Date.now()}function Uh(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function jd(n,e,t){if("function"==typeof n)t&&(n=Xs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xs(n.handleEvent,n)}return 2147483647<Number(e)?-1:nr.setTimeout(n,e||0)}function r3(n){n.g=jd(()=>{n.g=null,n.i&&(n.i=!1,r3(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}eo(n3,Si),(yn=n3.prototype).da=!1,yn.S=null,yn.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Fs(this,"tick"),this.da&&(Uh(this),this.start()))}},yn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yn.M=function(){n3.Z.M.call(this),Uh(this),delete this.g};class P_ extends ql{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:r3(this)}M(){super.M(),this.g&&(nr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function i3(n){ql.call(this),this.h=n,this.g={}}eo(i3,ql);var m9=[];function g9(n,e,t,r){Array.isArray(t)||(t&&(m9[0]=t.toString()),t=m9);for(var s=0;s<t.length;s++){var c=c9(e,t[s],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function r6(n){$5(n.g,function(e,t){this.g.hasOwnProperty(t)&&Oh(e)},n),n.g={}}function s3(){this.g=!0}function ku(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function y9(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var c=s[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var u=1;u<s.length;u++)s[u]=""}}}return n6(t)}catch{return e}}(n,t)+(r?" "+r:"")})}i3.prototype.M=function(){i3.Z.M.call(this),r6(this)},i3.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},s3.prototype.Aa=function(){this.g=!1},s3.prototype.info=function(){};var Ru={},_9=null;function ca(){return _9=_9||new Si}function C9(n){Ls.call(this,Ru.Ma,n)}function o3(n){const e=ca();Fs(e,new C9(e,n))}function b9(n,e){Ls.call(this,Ru.STAT_EVENT,n),this.stat=e}function Uo(n){const e=ca();Fs(e,new b9(e,n))}function w9(n,e){Ls.call(this,Ru.Na,n),this.size=e}function $d(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return nr.setTimeout(function(){n()},e)}Ru.Ma="serverreachability",eo(C9,Ls),Ru.STAT_EVENT="statevent",eo(b9,Ls),Ru.Na="timingevent",eo(w9,Ls);var Gd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},E9={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function i6(){}function rr(){}i6.prototype.h=null;var s6,a3={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Bh(){Ls.call(this,"d")}function jh(){Ls.call(this,"c")}function $h(){}function c3(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new i3(this),this.P=S9,this.W=new n3(n=W5?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new D9}function D9(){this.i=null,this.g="",this.h=!1}eo(Bh,Ls),eo(jh,Ls),eo($h,i6),$h.prototype.g=function(){return new XMLHttpRequest},$h.prototype.i=function(){return{}},s6=new $h;var S9=45e3,o6={},Gh={};function T9(n,e,t){n.K=1,n.v=Jh(dl(e)),n.s=t,n.U=!0,a6(n,null)}function a6(n,e){n.F=Date.now(),Pu(n),n.A=dl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),h6(t.h,"t",r),n.C=0,t=n.l.H,n.h=new D9,n.g=z9(n.l,t?e:null,!n.s),0<n.O&&(n.L=new P_(Xs(n.Ia,n,n.g),n.O)),g9(n.V,n.g,"readystatechange",n.gb),e=n.H?t9(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),o3(1),function v9(n,e,t,r,s,c){n.info(function(){if(n.g)if(c)for(var u="",h=c.split("&"),m=0;m<h.length;m++){var w=h[m].split("=");if(1<w.length){var O=w[0];w=w[1];var $=O.split("_");u=2<=$.length&&"type"==$[1]?u+(O+"=")+w+"&":u+(O+"=redacted&")}}else u=null;else u=c;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function c6(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Zl(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=L_(n,t),s==Gh){4==e&&(n.o=4,Uo(14),r=!1),ku(n.j,n.m,null,"[Incomplete Response]");break}if(s==o6){n.o=4,Uo(15),ku(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ku(n.j,n.m,s,null),x9(n,s)}c6(n)&&s!=Gh&&s!=o6&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Uo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),E6(e),e.L=!0,Uo(11))):(ku(n.j,n.m,t,"[Invalid Chunked Response]"),l3(n),Zh(n))}function L_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Gh:(t=Number(e.substring(t,r)),isNaN(t)?o6:(r+=1)+t>e.length?Gh:(e=e.substr(r,t),n.C=r+t,e))}function Pu(n){n.Y=Date.now()+n.P,Wh(n,n.P)}function Wh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$d(Xs(n.eb,n),e)}function qh(n){n.B&&(nr.clearTimeout(n.B),n.B=null)}function Zh(n){0==n.l.G||n.I||Fu(n.l,n)}function l3(n){qh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Uh(n.W),r6(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function x9(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||tf(t.i,n)))if(t.I=n.N,!n.J&&tf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Lu(t),m3(t)}uf(t),Uo(18)}}else t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=$d(Xs(t.ab,t),6e3));if(1>=U_(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else m1(t,11)}else if((n.J||t.g==n)&&Lu(t),!Nh(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let w=s[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const O=w[3];null!=O&&(t.ma=O,t.h.info("VER="+t.ma));const $=w[4];null!=$&&(t.za=$,t.h.info("SVER="+t.za));const ee=w[5];null!=ee&&"number"==typeof ee&&0<ee&&(t.K=r=1.5*ee,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const de=n.g;if(de){const Te=de.g?de.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Te){var c=r.i;!c.g&&(_o(Te,"spdy")||_o(Te,"quic")||_o(Te,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(P9(c,c.h),c.h=null))}if(r.D){const st=de.g?de.g.getResponseHeader("X-HTTP-Session-Id"):null;st&&(r.sa=st,Ti(r.F,r.D,st))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=g3(r,r.H?r.la:null,r.W),u.J){Kd(r.i,u);var h=u,m=r.K;m&&h.setTimeout(m),h.B&&(qh(h),Pu(h)),r.g=u}else L9(r);0<t.l.length&&cf(t)}else"stop"!=w[0]&&"close"!=w[0]||m1(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?m1(t,7):af(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}o3(4)}catch{}}function Kh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(F5(n)||"string"==typeof n)Mh(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(F5(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function F_(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(F5(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var c=0;c<s;c++)e.call(void 0,r[c],t&&t[c],n)}}function Wd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Wd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function l6(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];f1(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)f1(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function f1(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(yn=c3.prototype).setTimeout=function(n){this.P=n},yn.gb=function(n){n=n.target;const e=this.L;e&&3==Kl(n)?e.l():this.Ia(n)},yn.Ia=function(n){try{if(n==this.g)e:{const O=Kl(this.g);var e=this.g.Da();const $=this.g.ba();if(!(3>O)&&(3!=O||W5||this.g&&(this.h.h||this.g.ga()||q_(this.g)))){this.I||4!=O||7==e||o3(8==e||0>=$?3:2),qh(this);var t=this.g.ba();this.N=t;t:if(c6(this)){var r=q_(this.g);n="";var s=r.length,c=4==Kl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){l3(this),Zh(this);var u="";break t}this.h.i=new nr.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function KI(n,e,t,r,s,c,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+c+" "+u})}(this.j,this.u,this.A,this.m,this.X,O,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nh(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Uo(12),l3(this),Zh(this);break e}ku(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,x9(this,t)}this.U?(Zl(this,O,u),W5&&this.i&&3==O&&(g9(this.V,this.W,"tick",this.fb),this.W.start())):(ku(this.j,this.m,u,null),x9(this,u)),4==O&&l3(this),this.i&&!this.I&&(4==O?Fu(this.l,this):(this.i=!1,Pu(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Uo(12)):(this.o=0,Uo(13)),l3(this),Zh(this)}}}catch{}},yn.fb=function(){if(this.g){var n=Kl(this.g),e=this.g.ga();this.C<e.length&&(qh(this),Zl(this,n,e),this.i&&4!=n&&Pu(this))}},yn.cancel=function(){this.I=!0,l3(this)},yn.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function O_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(o3(3),Uo(17)),l3(this),this.o=2,Zh(this)):Wh(this,this.Y-n)},(yn=Wd.prototype).R=function(){l6(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},yn.T=function(){return l6(this),this.g.concat()},yn.get=function(n,e){return f1(this.h,n)?this.h[n]:e},yn.set=function(n,e){f1(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},yn.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],c=this.get(s);n.call(e,c,s,this)}};var A9=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ic(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ic){this.g=void 0!==e?e:n.g,qd(this,n.j),this.s=n.s,Yh(this,n.i),Qh(this,n.m),this.l=n.l,e=n.h;var t=new f3;t.i=e.i,e.g&&(t.g=new Wd(e.g),t.h=e.h),N9(this,t),this.o=n.o}else n&&(t=String(n).match(A9))?(this.g=!!e,qd(this,t[1]||"",!0),this.s=u3(t[2]||""),Yh(this,t[3]||"",!0),Qh(this,t[4]),this.l=u3(t[5]||"",!0),N9(this,t[6]||"",!0),this.o=u3(t[7]||"")):(this.g=!!e,this.h=new f3(null,this.g))}function dl(n){return new Ic(n)}function qd(n,e,t){n.j=t?u3(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Yh(n,e,t){n.i=t?u3(e,!0):e}function Qh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function N9(n,e,t){e instanceof f3?(n.h=e,function f6(n,e){e&&!n.j&&(hl(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Zd(this,r),h6(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=d3(e,YI)),n.h=new f3(e,n.g))}function Ti(n,e,t){n.h.set(e,t)}function Jh(n){return Ti(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function u3(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function d3(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,u6),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function u6(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ic.prototype.toString=function(){var n=[],e=this.j;e&&n.push(d3(e,V_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(d3(e,V_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(d3(t,"/"==t.charAt(0)?H_:d6,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",d3(t,h3)),n.join("")};var V_=/[#\/\?@]/g,d6=/[#\?:]/g,H_=/[#\?]/g,YI=/[#\?@]/g,h3=/#/g;function f3(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function hl(n){n.g||(n.g=new Wd,n.h=0,n.i&&function M9(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var c=n[t].substring(0,r);s=n[t].substring(r+1)}else c=n[t];e(c,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zd(n,e){hl(n),e=p3(n,e),f1(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,f1((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&l6(n)))}function p1(n,e){return hl(n),e=p3(n,e),f1(n.g.h,e)}function h6(n,e,t){Zd(n,e),0<t.length&&(n.i=null,n.g.set(p3(n,e),Od(t)),n.h+=t.length)}function p3(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xh(n){this.l=n||R9,n=nr.PerformanceNavigationTiming?0<(n=nr.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(nr.g&&nr.g.Ea&&nr.g.Ea()&&nr.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yn=f3.prototype).add=function(n,e){hl(this),this.i=null,n=p3(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yn.forEach=function(n,e){hl(this),this.g.forEach(function(t,r){Mh(t,function(s){n.call(e,s,r,this)},this)},this)},yn.T=function(){hl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],c=0;c<s.length;c++)t.push(e[r]);return t},yn.R=function(n){hl(this);var e=[];if("string"==typeof n)p1(this,n)&&(e=Q2(e,this.g.get(p3(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Q2(e,n[t])}return e},yn.set=function(n,e){return hl(this),this.i=null,p1(this,n=p3(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yn.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},yn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var u=s;""!==r[c]&&(u+="="+encodeURIComponent(String(r[c]))),n.push(u)}}return this.i=n.join("&")};var R9=10;function ef(n){return!!n.h||!!n.g&&n.g.size>=n.j}function U_(n){return n.h?1:n.g?n.g.size:0}function tf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function P9(n,e){n.g?n.g.add(e):n.h=e}function Kd(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Yd(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Od(n.i)}function Qd(){}function p6(){this.g=new Qd}function m6(n,e,t){const r=t||"";try{Kh(n,function(s,c){let u=s;Rd(s)&&(u=n6(s)),e.push(r+c+"="+encodeURIComponent(u))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function nf(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Jd(n){this.l=n.$b||null,this.j=n.ib||!1}function rf(n,e){Si.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=g6,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xh.prototype.cancel=function(){if(this.i=Yd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Qd.prototype.stringify=function(n){return nr.JSON.stringify(n,void 0)},Qd.prototype.parse=function(n){return nr.JSON.parse(n,void 0)},eo(Jd,i6),Jd.prototype.g=function(){return new rf(this.l,this.j)},Jd.prototype.i=function(n){return function(){return n}}({}),eo(rf,Si);var g6=0;function v6(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function sf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xd(n)}function Xd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yn=rf.prototype).open=function(n,e){if(this.readyState!=g6)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Xd(this)},yn.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||nr).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},yn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sf(this)),this.readyState=g6},yn.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xd(this)),this.g&&(this.readyState=3,Xd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof nr.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;v6(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},yn.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sf(this):Xd(this),3==this.readyState&&v6(this)}},yn.Ua=function(n){this.g&&(this.response=this.responseText=n,sf(this))},yn.Ta=function(n){this.g&&(this.response=n,sf(this))},yn.ha=function(){this.g&&sf(this)},yn.setRequestHeader=function(n,e){this.v.append(n,e)},yn.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yn.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(rf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JI=nr.JSON.parse;function as(n){Si.call(this),this.headers=new Wd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=y6,this.K=this.L=!1}eo(as,Si);var y6="",B_=/^https?$/i,_6=["POST","PUT"];function eD(n){return"content-type"==n.toLowerCase()}function j_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$_(n),C6(n)}function $_(n){n.D||(n.D=!0,Fs(n,"complete"),Fs(n,"error"))}function G_(n){if(n.h&&typeof L5<"u"&&(!n.C[1]||4!=Kl(n)||2!=n.ba()))if(n.v&&4==Kl(n))jd(n.Fa,0,n);else if(Fs(n,"readystatechange"),4==Kl(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var s=String(n.H).match(A9)[1]||null;if(!s&&nr.self&&nr.self.location){var c=nr.self.location.protocol;s=c.substr(0,c.length-1)}r=!B_.test(s?s.toLowerCase():"")}t=r}if(t)Fs(n,"complete"),Fs(n,"success");else{n.m=6;try{var u=2<Kl(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",$_(n)}}finally{C6(n)}}}function C6(n,e){if(n.g){W_(n);const t=n.g,r=n.C[0]?kd:null;n.g=null,n.C=null,e||Fs(n,"ready");try{t.onreadystatechange=r}catch{}}}function W_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(nr.clearTimeout(n.A),n.A=null)}function Kl(n){return n.g?n.g.readyState:0}function q_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case y6:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Dc(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function tD(n){let e="";return $5(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ti(n,e,t))}function Ou(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function O9(n){this.za=0,this.l=[],this.h=new s3,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ou("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ou("baseRetryDelayMs",5e3,n),this.$a=Ou("retryDelaySeedMs",1e4,n),this.Ya=Ou("forwardChannelMaxRetries",2,n),this.ra=Ou("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Xh(n&&n.concurrentRequestLimit),this.Ca=new p6,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function af(n){if(b6(n),3==n.G){var e=n.V++,t=dl(n.F);Ti(t,"SID",n.J),Ti(t,"RID",e),Ti(t,"TYPE","terminate"),t4(n,t),(e=new c3(n,n.h,e,void 0)).K=2,e.v=Jh(dl(t)),t=!1,nr.navigator&&nr.navigator.sendBeacon&&(t=nr.navigator.sendBeacon(e.v.toString(),"")),!t&&nr.Image&&((new Image).src=e.v,t=!0),t||(e.g=z9(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pu(e)}n4(n)}function m3(n){n.g&&(E6(n),n.g.cancel(),n.g=null)}function b6(n){m3(n),n.u&&(nr.clearTimeout(n.u),n.u=null),Lu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&nr.clearTimeout(n.m),n.m=null)}function e4(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&cf(n)}function cf(n){ef(n.i)||n.m||(n.m=!0,Hh(n.Ha,n),n.C=0)}function w6(n,e){var t;t=e?e.m:n.V++;const r=dl(n.F);Ti(r,"SID",n.J),Ti(r,"RID",t),Ti(r,"AID",n.U),t4(n,r),n.o&&n.s&&Dc(r,n.o,n.s),t=new c3(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=lf(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),P9(n.i,t),T9(t,r,e)}function t4(n,e){n.j&&Kh({},function(t,r){Ti(e,r,t)})}function lf(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Xs(n.j.Oa,n.j,n):null;e:{var s=n.l;let c=-1;for(;;){const u=["count="+t];-1==c?0<t?(c=s[0].h,u.push("ofs="+c)):c=0:u.push("ofs="+c);let h=!0;for(let m=0;m<t;m++){let w=s[m].h;const O=s[m].g;if(w-=c,0>w)c=Math.max(0,s[m].h-100),h=!1;else try{m6(O,u,"req"+w+"_")}catch{r&&r(O)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function L9(n){n.g||n.u||(n.Y=1,Hh(n.Ga,n),n.A=0)}function uf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=$d(Xs(n.Ga,n),df(n,n.A)),n.A++,0))}function E6(n){null!=n.B&&(nr.clearTimeout(n.B),n.B=null)}function F9(n){n.g=new c3(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=dl(n.oa);Ti(e,"RID","rpc"),Ti(e,"SID",n.J),Ti(e,"CI",n.N?"0":"1"),Ti(e,"AID",n.U),t4(n,e),Ti(e,"TYPE","xmlhttp"),n.o&&n.s&&Dc(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Jh(dl(e)),t.s=null,t.U=!0,a6(t,n)}function Lu(n){null!=n.v&&(nr.clearTimeout(n.v),n.v=null)}function Fu(n,e){var t=null;if(n.g==e){Lu(n),E6(n),n.g=null;var r=2}else{if(!tf(n.i,e))return;t=e.D,Kd(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Fs(r=ca(),new w9(r,t,e,s)),cf(n)}else L9(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function Yl(n,e){return!(U_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=$d(Xs(n.Ha,n,e),df(n,n.C)),n.C++,0)))}(n,e)||2==r&&uf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:m1(n,5);break;case 4:m1(n,10);break;case 3:m1(n,6);break;default:m1(n,2)}}function df(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function m1(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Xs(n.jb,n);t||(t=new Ic("//www.google.com/images/cleardot.gif"),nr.location&&"http"==nr.location.protocol||qd(t,"https"),Jh(t)),function QI(n,e){const t=new s3;if(nr.Image){const r=new Image;r.onload=Pd(nf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Pd(nf,t,r,"TestLoadImage: error",!1,e),r.onabort=Pd(nf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pd(nf,t,r,"TestLoadImage: timeout",!1,e),nr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Uo(2);n.G=0,n.j&&n.j.va(e),n4(n),b6(n)}function n4(n){n.G=0,n.I=-1,n.j&&((0!=Yd(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Od(n.l),n.l.length=0),n.j.ua())}function g3(n,e,t){let r=function k9(n){return n instanceof Ic?dl(n):new Ic(n,void 0)}(t);if(""!=r.i)e&&Yh(r,e+"."+r.i),Qh(r,r.m);else{const s=nr.location;r=function z_(n,e,t,r){var s=new Ic(null,void 0);return n&&qd(s,n),e&&Yh(s,e),t&&Qh(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&$5(n.aa,function(s,c){Ti(r,c,s)}),t=n.sa,(e=n.D)&&t&&Ti(r,e,t),Ti(r,"VER",n.ma),t4(n,r),r}function z9(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new as(t&&n.Ba&&!n.qa?new Jd({ib:!0}):n.qa)).L=n.H,e}function I6(){}function r4(){if(aa&&!(10<=Number(N_)))throw Error("Environmental error: no available transport.")}function Bo(n,e){Si.call(this),this.g=new O9(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Nh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ql(this)}function hf(n){Bh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function D6(){jh.call(this),this.status=1}function Ql(n){this.g=n}(yn=as.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():s6.g(),this.C=function I9(n){return n.h||(n.h=n.i())}(this.u?this.u:s6),this.g.onreadystatechange=Xs(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void j_(this,c)}n=t||"";const s=new Wd(this.headers);r&&Kh(r,function(c,u){s.set(u,c)}),r=function yo(n){e:{var e=eD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=nr.FormData&&n instanceof nr.FormData,!(0<=U5(_6,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(c,u){this.g.setRequestHeader(u,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{W_(this),0<this.B&&((this.K=function XI(n){return aa&&function s9(){return function x_(n){var e=M_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Xp(String(Z5)).split("."),t=Xp("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var s=e[u]||"",c=t[u]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==s[0].length&&0==c[0].length)break;n=B5(0==s[1].length?0:parseInt(s[1],10),0==c[1].length?0:parseInt(c[1],10))||B5(0==s[2].length,0==c[2].length)||B5(s[2],c[2]),s=s[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xs(this.pa,this)):this.A=jd(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){j_(this,c)}},yn.pa=function(){typeof L5<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fs(this,"timeout"),this.abort(8))},yn.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fs(this,"complete"),Fs(this,"abort"),C6(this))},yn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),C6(this,!0)),as.Z.M.call(this)},yn.Fa=function(){this.s||(this.F||this.v||this.l?G_(this):this.cb())},yn.cb=function(){G_(this)},yn.ba=function(){try{return 2<Kl(this)?this.g.status:-1}catch{return-1}},yn.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},yn.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JI(e)}},yn.Da=function(){return this.m},yn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(yn=O9.prototype).ma=8,yn.G=1,yn.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},yn.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new c3(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=t9(c),r9(c,this.P)):c=this.P),null===this.o&&(s.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lf(this,s,e),Ti(t=dl(this.F),"RID",n),Ti(t,"CVER",22),this.D&&Ti(t,"X-HTTP-Session-Id",this.D),t4(this,t),this.o&&c&&Dc(t,this.o,c),P9(this.i,s),this.Ra&&Ti(t,"TYPE","init"),this.ja?(Ti(t,"$req",e),Ti(t,"SID","null"),s.$=!0,T9(s,t,null)):T9(s,t,e),this.G=2}}else 3==this.G&&(n?w6(this,n):0==this.l.length||ef(this.i)||w6(this))},yn.Ga=function(){if(this.u=null,F9(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=$d(Xs(this.bb,this),n)}},yn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Uo(10),m3(this),F9(this))},yn.ab=function(){null!=this.v&&(this.v=null,m3(this),uf(this),Uo(19))},yn.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Uo(2)):(this.h.info("Failed to ping google.com"),Uo(1))},(yn=I6.prototype).xa=function(){},yn.wa=function(){},yn.va=function(){},yn.ua=function(){},yn.Oa=function(){},r4.prototype.g=function(n,e){return new Bo(n,e)},eo(Bo,Si),Bo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Hh(Xs(n.hb,n,e))),Uo(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=g3(n,null,n.W),cf(n)},Bo.prototype.close=function(){af(this.g)},Bo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,e4(this.g,e)}else this.v?((e={}).__data__=n6(n),e4(this.g,e)):e4(this.g,n)},Bo.prototype.M=function(){this.g.j=null,delete this.j,af(this.g),delete this.g,Bo.Z.M.call(this)},eo(hf,Bh),eo(D6,jh),eo(Ql,I6),Ql.prototype.xa=function(){Fs(this.g,"a")},Ql.prototype.wa=function(n){Fs(this.g,new hf(n))},Ql.prototype.va=function(n){Fs(this.g,new D6(n))},Ql.prototype.ua=function(){Fs(this.g,"b")},r4.prototype.createWebChannel=r4.prototype.g,Bo.prototype.send=Bo.prototype.u,Bo.prototype.open=Bo.prototype.m,Bo.prototype.close=Bo.prototype.close,Gd.NO_ERROR=0,Gd.TIMEOUT=8,Gd.HTTP_ERROR=6,E9.COMPLETE="complete",rr.EventType=a3,a3.OPEN="a",a3.CLOSE="b",a3.ERROR="c",a3.MESSAGE="d",Si.prototype.listen=Si.prototype.N,as.prototype.listenOnce=as.prototype.O,as.prototype.getLastError=as.prototype.La,as.prototype.getLastErrorCode=as.prototype.Da,as.prototype.getStatus=as.prototype.ba,as.prototype.getResponseJson=as.prototype.Qa,as.prototype.getResponseText=as.prototype.ga,as.prototype.send=as.prototype.ea;var Z_=Pa.createWebChannelTransport=function(){return new r4},nD=Pa.getStatEventTarget=function(){return ca()},S6=Pa.ErrorCode=Gd,V9=Pa.EventType=E9,K_=Pa.Event=Ru,T6=Pa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},H9=Pa.FetchXmlHttpFactory=Jd,ff=Pa.WebChannel=rr,Oa=Pa.XhrIo=as;const x6="@firebase/firestore";class zs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zs.UNAUTHENTICATED=new zs(null),zs.GOOGLE_CREDENTIALS=new zs("google-credentials-uid"),zs.FIRST_PARTY=new zs("first-party-uid"),zs.MOCK_USER=new zs("mock-user");let i4="9.9.4";const Jl=new u1.Yd("@firebase/firestore");function s4(){return Jl.logLevel}function Ot(n,...e){if(Jl.logLevel<=u1.in.DEBUG){const t=e.map(pf);Jl.debug(`Firestore (${i4}): ${n}`,...t)}}function cs(n,...e){if(Jl.logLevel<=u1.in.ERROR){const t=e.map(pf);Jl.error(`Firestore (${i4}): ${n}`,...t)}}function zu(n,...e){if(Jl.logLevel<=u1.in.WARN){const t=e.map(pf);Jl.warn(`Firestore (${i4}): ${n}`,...t)}}function pf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _n(n="Unexpected state"){const e=`FIRESTORE (${i4}) INTERNAL ASSERTION FAILED: `+n;throw cs(e),new Error(e)}function qn(n,e){n||_n()}function Xt(n,e){return n}const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nt extends re.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class U1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zs.UNAUTHENTICATED))}shutdown(){}}class Q_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class J_{constructor(e){this.t=e,this.currentUser=zs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let u=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Vs,e.enqueueRetryable(()=>c(this.currentUser))};const h=()=>{const w=u;e.enqueueRetryable((0,yt.Z)(function*(){yield w.promise,yield c(r.currentUser)}))},m=w=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>m(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?m(w):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Vs)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qn("string"==typeof r.accessToken),new U1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qn(null===e||"string"==typeof e),new zs(e)}}class rD{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=zs.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(qn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class B9{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new rD(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(zs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X_{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=c=>{null!=c.error&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.A;return this.A=c.token,Ot("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const s=c=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>s(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?s(c):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qn("string"==typeof t.token),this.A=t.token,new j9(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function M6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $9{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=M6(40);for(let c=0;c<s.length;++c)r.length<20&&s[c]<t&&(r+=e.charAt(s[c]%e.length))}return r}}function ir(n,e){return n<e?-1:n>e?1:0}function pl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function mf(n){return n+"\0"}class xi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Nt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Nt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Nt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Nt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xi.fromMillis(Date.now())}static fromDate(e){return xi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ir(this.nanoseconds,e.nanoseconds):ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bn(e)}static min(){return new Bn(new xi(0,0))}static max(){return new Bn(new xi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vu{constructor(e,t,r){void 0===t?t=0:t>e.length&&_n(),void 0===r?r=e.length-t:r>e.length-t&&_n(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const c=e.get(s),u=t.get(s);if(c<u)return-1;if(c>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kr extends Vu{construct(e,t,r){return new kr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Nt(pt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new kr(t)}static emptyPath(){return new kr([])}}const sD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ls extends Vu{construct(e,t,r){return new ls(e,t,r)}static isValidIdentifier(e){return sD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ls.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ls(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const c=()=>{if(0===r.length)throw new Nt(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if("\\"===h){if(s+1===e.length)throw new Nt(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Nt(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,s+=2}else"`"===h?(u=!u,s++):"."!==h||u?(r+=h,s++):(c(),s++)}if(c(),u)throw new Nt(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ls(t)}static emptyPath(){return new ls([])}}class Yt{constructor(e){this.path=e}static fromPath(e){return new Yt(kr.fromString(e))}static fromName(e){return new Yt(kr.fromString(e).popFirst(5))}static empty(){return new Yt(kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yt(new kr(e.slice()))}}class N6{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function k6(n){return n.fields.find(e=>2===e.kind)}function Xl(n){return n.fields.filter(e=>2!==e.kind)}N6.UNKNOWN_ID=-1;class o4{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hu(0,bo.min())}}function Sc(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Bn.fromTimestamp(1e9===r?new xi(t+1,0):new xi(t,r));return new bo(s,Yt.empty(),e)}function a4(n){return new bo(n.readTime,n.key,-1)}class bo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bo(Bn.min(),Yt.empty(),-1)}static max(){return new bo(Bn.max(),Yt.empty(),-1)}}function Uu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Yt.comparator(n.documentKey,e.documentKey),0!==t?t:ir(n.largestBatchId,e.largestBatchId))}const q9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ml(n){return R6.apply(this,arguments)}function R6(){return R6=(0,yt.Z)(function*(n){if(n.code!==pt.FAILED_PRECONDITION||n.message!==q9)throw n;Ot("LocalStore","Unexpectedly lost primary lease")}),R6.apply(this,arguments)}class tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_n(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tt((r,s)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,s)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof tt?t:tt.resolve(t)}catch(t){return tt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.reject(t)}static resolve(e){return new tt((t,r)=>{t(e)})}static reject(e){return new tt((t,r)=>{r(e)})}static waitFor(e){return new tt((t,r)=>{let s=0,c=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++c,u&&c===s&&t()},m=>r(m))}),u=!0,c===s&&t()})}static or(e){let t=tt.resolve(!1);for(const r of e)t=t.next(s=>s?tt.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,c)=>{r.push(t.call(this,s,c))}),this.waitFor(r)}static mapArray(e,t){return new tt((r,s)=>{const c=e.length,u=new Array(c);let h=0;for(let m=0;m<c;m++){const w=m;t(e[w]).next(O=>{u[w]=O,++h,h===c&&r(u)},O=>s(O))}})}static doWhile(e,t){return new tt((r,s)=>{const c=()=>{!0===e()?t().next(()=>{c()},s):r()};c()})}}class eu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Vs,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new c4(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=P6(r.target.error);this.P.reject(new c4(e,s))}}static open(e,t,r,s){try{return new eu(t,e.transaction(s,r))}catch(c){throw new c4(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ot("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new eC(t)}}class B1{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===B1.D((0,re.z$)())&&cs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ot("SimpleDb","Removing database:",e),ju(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,re.hl)())return!1;if(B1.N())return!0;const e=(0,re.z$)(),t=B1.D(e),r=0<t&&t<10,s=B1.k(e),c=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,yt.Z)(function*(){return t.db||(Ot("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=u=>{r(u.target.result)},c.onblocked=()=>{s(new c4(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=u=>{const h=u.target.error;s("VersionError"===h.name?new Nt(pt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Nt(pt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new c4(e,h))},c.onupgradeneeded=u=>{Ot("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,c.transaction,u.oldVersion,t.version).next(()=>{Ot("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var c=this;return(0,yt.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{c.db=yield c.F(e);const m=eu.open(c.db,e,u?"readonly":"readwrite",r),w=s(m).next(O=>(m.V(),O)).catch(O=>(m.abort(O),tt.reject(O))).toPromise();return w.catch(()=>{}),yield m.v,w}catch(m){const w=m,O="FirebaseError"!==w.name&&h<3;if(Ot("SimpleDb","Transaction failed with error:",w.message,"Retrying:",O),c.close(),!O)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oD{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ju(this.U.delete())}}class c4 extends Nt{constructor(e,t){super(pt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bu(n){return"IndexedDbTransactionError"===n.name}class eC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ot("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ot("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ju(r)}add(e){return Ot("SimpleDb","ADD",this.store.name,e,e),ju(this.store.add(e))}get(e){return ju(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ot("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ot("SimpleDb","DELETE",this.store.name,e),ju(this.store.delete(e))}count(){return Ot("SimpleDb","COUNT",this.store.name),ju(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),c=[];return this.H(s,(u,h)=>{c.push(h)}).next(()=>c)}{const s=this.store.getAll(r.range);return new tt((c,u)=>{s.onerror=h=>{u(h.target.error)},s.onsuccess=h=>{c(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new tt((s,c)=>{r.onerror=u=>{c(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}Y(e,t){Ot("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(c,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new tt((r,s)=>{t.onerror=c=>{const u=P6(c.target.error);s(u)},t.onsuccess=c=>{const u=c.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}H(e,t){const r=[];return new tt((s,c)=>{e.onerror=u=>{c(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const m=new oD(h),w=t(h.primaryKey,h.value,m);if(w instanceof tt){const O=w.catch($=>(m.done(),tt.reject($)));r.push(O)}m.isDone?s():null===m.G?h.continue():h.continue(m.G)}}).next(()=>tt.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ju(n){return new tt((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=P6(r.target.error);t(s)}})}let Z9=!1;function P6(n){const e=B1.D((0,re.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Z9||(Z9=!0,setTimeout(()=>{throw r},0)),r}}return n}class aD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ot("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,yt.Z)(function*(){t.task=null;try{Ot("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Bu(r)?Ot("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ml(r)}yield t.nt(1)}))}}class K9{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,yt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,c=!0;return tt.doWhile(()=>!0===c&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ot("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,s).next(h=>{s-=h,r.add(u)});c=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(c=>{const u=c.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(s,c)).next(h=>(Ot("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,c)=>{const u=a4(c);Uu(u,r)>0&&(r=u)}),new bo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class wo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Y9(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Q9(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}wo.at=-1;class Xi{constructor(e,t){this.comparator=e,this.root=t||to.EMPTY}insert(e,t){return new Xi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,to.BLACK,null,null))}remove(e){return new Xi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,to.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vf(this.root,e,this.comparator,!0)}}class vf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&s&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class to{constructor(e,t,r,s,c){this.key=e,this.value=t,this.color=r??to.RED,this.left=s??to.EMPTY,this.right=c??to.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,c){return new to(e??this.key,t??this.value,r??this.color,s??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===c?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return to.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return to.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,to.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,to.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _n();const e=this.left.check();if(e!==this.right.check())throw _n();return e+(this.isRed()?0:1)}}to.EMPTY=null,to.RED=!0,to.BLACK=!1,to.EMPTY=new class{constructor(){this.size=0}get key(){throw _n()}get value(){throw _n()}get color(){throw _n()}get left(){throw _n()}get right(){throw _n()}copy(n,e,t,r,s){return this}insert(n,e,t){return new to(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ni{constructor(e){this.comparator=e,this.data=new Xi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J9(this.data.getIterator())}getIteratorFrom(e){return new J9(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ni)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(s,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ni(this.comparator);return t.data=e,t}}class J9{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vl(n){return n.hasNext()?n.getNext():void 0}class Ds{constructor(e){this.fields=e,e.sort(ls.comparator)}static empty(){return new Ds([])}unionWith(e){let t=new ni(ls.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vi(t)}static fromUint8Array(e){const t=function(r){let s="";for(let c=0;c<r.length;++c)s+=String.fromCharCode(r[c]);return s}(e);return new Vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const tC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tu(n){if(qn(!!n),"string"==typeof n){let e=0;const t=tC.exec(n);if(qn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ai(n.seconds),nanos:Ai(n.nanos)}}function Ai(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $u(n){return"string"==typeof n?Vi.fromBase64String(n):Vi.fromUint8Array(n)}function g1(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function v3(n){const e=n.mapValue.fields.__previous_value__;return g1(e)?v3(e):e}function ms(n){const e=tu(n.mapValue.fields.__local_write_time__.timestampValue);return new xi(e.seconds,e.nanos)}class Gu{constructor(e,t,r,s,c,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class j1{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new j1("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof j1&&e.projectId===this.projectId&&e.database===this.database}}function Eo(n){return null==n}function Wu(n){return 0===n&&1/n==-1/0}function qu(n){return"number"==typeof n&&Number.isInteger(n)&&!Wu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const La={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yl={nullValue:"NULL_VALUE"};function v1(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g1(n)?4:F6(n)?9007199254740991:10:_n()}function jo(n,e){if(n===e)return!0;const t=v1(n);if(t!==v1(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ms(n).isEqual(ms(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const c=tu(r.timestampValue),u=tu(s.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,$u(n.bytesValue).isEqual($u(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ai(r.geoPointValue.latitude)===Ai(s.geoPointValue.latitude)&&Ai(r.geoPointValue.longitude)===Ai(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ai(r.integerValue)===Ai(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const c=Ai(r.doubleValue),u=Ai(s.doubleValue);return c===u?Wu(c)===Wu(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return pl(n.arrayValue.values||[],e.arrayValue.values||[],jo);case 10:return function(r,s){const c=r.mapValue.fields||{},u=s.mapValue.fields||{};if(Y9(c)!==Y9(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(void 0===u[h]||!jo(c[h],u[h])))return!1;return!0}(n,e);default:return _n()}var s}function Tc(n,e){return void 0!==(n.values||[]).find(t=>jo(t,e))}function Fa(n,e){if(n===e)return 0;const t=v1(n),r=v1(e);if(t!==r)return ir(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ir(n.booleanValue,e.booleanValue);case 2:return function(s,c){const u=Ai(s.integerValue||s.doubleValue),h=Ai(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Zu(n.timestampValue,e.timestampValue);case 4:return Zu(ms(n),ms(e));case 5:return ir(n.stringValue,e.stringValue);case 6:return function(s,c){const u=$u(s),h=$u(c);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,c){const u=s.split("/"),h=c.split("/");for(let m=0;m<u.length&&m<h.length;m++){const w=ir(u[m],h[m]);if(0!==w)return w}return ir(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,c){const u=ir(Ai(s.latitude),Ai(c.latitude));return 0!==u?u:ir(Ai(s.longitude),Ai(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,c){const u=s.values||[],h=c.values||[];for(let m=0;m<u.length&&m<h.length;++m){const w=Fa(u[m],h[m]);if(w)return w}return ir(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,c){if(s===La.mapValue&&c===La.mapValue)return 0;if(s===La.mapValue)return 1;if(c===La.mapValue)return-1;const u=s.fields||{},h=Object.keys(u),m=c.fields||{},w=Object.keys(m);h.sort(),w.sort();for(let O=0;O<h.length&&O<w.length;++O){const $=ir(h[O],w[O]);if(0!==$)return $;const ee=Fa(u[h[O]],m[w[O]]);if(0!==ee)return ee}return ir(h.length,w.length)}(n.mapValue,e.mapValue);default:throw _n()}}function Zu(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ir(n,e);const t=tu(n),r=tu(e),s=ir(t.seconds,r.seconds);return 0!==s?s:ir(t.nanos,r.nanos)}function $1(n){return yf(n)}function yf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=tu(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$u(n.bytesValue).toBase64():"referenceValue"in n?Yt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",c=!0;for(const u of r.values||[])c?c=!1:s+=",",s+=yf(u);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let c="{",u=!0;for(const h of s)u?u=!1:c+=",",c+=`${h}:${yf(r.fields[h])}`;return c+"}"}(n.mapValue):_n();var e}function nu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _f(n){return!!n&&"integerValue"in n}function y3(n){return!!n&&"arrayValue"in n}function O6(n){return!!n&&"nullValue"in n}function L6(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function l4(n){return!!n&&"mapValue"in n}function _3(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_3(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_3(n.arrayValue.values[t]);return e}return Object.assign({},n)}function F6(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function nC(n){return"nullValue"in n?yl:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nu(j1.empty(),Yt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_n()}function rC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nu(j1.empty(),Yt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?La:_n()}function X9(n,e){const t=Fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function z6(n,e){const t=Fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class no{constructor(e){this.value=e}static empty(){return new no({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!l4(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_3(t)}setAll(e){let t=ls.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=_3(u):s.push(h.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,s)}delete(e){const t=this.field(e.popLast());l4(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];l4(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){gl(t,(s,c)=>e[s]=c);for(const s of r)delete e[s]}clone(){return new no(_3(this.value))}}function V6(n){const e=[];return gl(n.fields,(t,r)=>{const s=new ls([t]);if(l4(r)){const c=V6(r.mapValue).fields;if(0===c.length)e.push(s);else for(const u of c)e.push(s.child(u))}else e.push(s)}),new Ds(e)}class ri{constructor(e,t,r,s,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=c,this.documentState=u}static newInvalidDocument(e){return new ri(e,0,Bn.min(),Bn.min(),no.empty(),0)}static newFoundDocument(e,t,r){return new ri(e,1,t,Bn.min(),r,0)}static newNoDocument(e,t){return new ri(e,2,t,Bn.min(),no.empty(),0)}static newUnknownDocument(e,t){return new ri(e,3,t,Bn.min(),no.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=no.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=no.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class H6{constructor(e,t=null,r=[],s=[],c=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=c,this.startAt=u,this.endAt=h,this.ht=null}}function em(n,e=null,t=[],r=[],s=null,c=null,u=null){return new H6(n,e,t,r,s,c,u)}function xc(n){const e=Xt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+$1(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Eo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$1(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$1(r)).join(",")),e.ht=t}return e.ht}function Ku(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!sC(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!jo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$6(n.startAt,e.startAt)&&$6(n.endAt,e.endAt)}function bf(n){return Yt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function C3(n,e){return n.filters.filter(t=>t instanceof Hs&&t.field.isEqual(e))}function wf(n,e,t){let r=yl,s=!0;for(const c of C3(n,e)){let u=yl,h=!0;switch(c.op){case"<":case"<=":u=nC(c.value);break;case"==":case"in":case">=":u=c.value;break;case">":u=c.value,h=!1;break;case"!=":case"not-in":u=yl}X9({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];X9({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}function U6(n,e,t){let r=La,s=!0;for(const c of C3(n,e)){let u=La,h=!0;switch(c.op){case">=":case">":u=rC(c.value),h=!1;break;case"==":case"in":case"<=":u=c.value;break;case"<":u=c.value,h=!1;break;case"!=":case"not-in":u=La}z6({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];z6({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}class Hs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new B6(e,t,r):"array-contains"===t?new rm(e,r):"in"===t?new iC(e,r):"not-in"===t?new im(e,r):"array-contains-any"===t?new sm(e,r):new Hs(e,t,r)}static lt(e,t,r){return"in"===t?new tm(e,r):new nm(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Fa(t,this.value)):null!==t&&v1(this.value)===v1(t)&&this.ft(Fa(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _n()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class B6 extends Hs{constructor(e,t,r){super(e,t,r),this.key=Yt.fromName(r.referenceValue)}matches(e){const t=Yt.comparator(e.key,this.key);return this.ft(t)}}class tm extends Hs{constructor(e,t){super(e,"in",t),this.keys=Ef(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nm extends Hs{constructor(e,t){super(e,"not-in",t),this.keys=Ef(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ef(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Yt.fromName(r.referenceValue))}class rm extends Hs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return y3(t)&&Tc(t.arrayValue,this.value)}}class iC extends Hs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tc(this.value.arrayValue,t)}}class im extends Hs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tc(this.value.arrayValue,t)}}class sm extends Hs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!y3(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tc(this.value.arrayValue,r))}}class _l{constructor(e,t){this.position=e,this.inclusive=t}}class Yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function sC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function j6(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const c=e[s],u=n.position[s];if(r=c.field.isKeyField()?Yt.comparator(Yt.fromName(u.referenceValue),t.key):Fa(u,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function $6(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jo(n.position[t],e.position[t]))return!1;return!0}class G1{constructor(e,t=null,r=[],s=[],c=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=c,this.limitType=u,this.startAt=h,this.endAt=m,this._t=null,this.wt=null}}function If(n,e,t,r,s,c,u,h){return new G1(n,e,t,r,s,c,u,h)}function Qu(n){return new G1(n)}function G6(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Df(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Sf(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Tf(n){return null!==n.collectionGroup}function Ju(n){const e=Xt(n);if(null===e._t){e._t=[];const t=Sf(e),r=Df(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Yu(t)),e._t.push(new Yu(ls.keyField(),"asc"));else{let s=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(s=!0);if(!s){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Yu(ls.keyField(),c))}}}return e._t}function $o(n){const e=Xt(n);if(!e.wt)if("F"===e.limitType)e.wt=em(e.path,e.collectionGroup,Ju(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Ju(e))t.push(new Yu(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new _l(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new _l(e.startAt.position,e.startAt.inclusive):null;e.wt=em(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function u4(n,e,t){return new G1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xf(n,e){return Ku($o(n),$o(e))&&n.limitType===e.limitType}function om(n){return`${xc($o(n))}|lt:${n.limitType}`}function W6(n){return`Query(target=${function Cf(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${$1(r.value)}`;var r}).join(", ")}]`),Eo(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>$1(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>$1(t)).join(",")),`Target(${e})`}($o(n))}; limitType=${n.limitType})`}function Af(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Yt.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,c,u){const h=j6(s,c,u);return s.inclusive?h<=0:h<0}(t.startAt,Ju(t),r)||t.endAt&&!function(s,c,u){const h=j6(s,c,u);return s.inclusive?h>=0:h>0}(t.endAt,Ju(t),r)));var t,r}function am(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gs(n){return(e,t)=>{let r=!1;for(const s of Ju(n)){const c=cm(s,e,t);if(0!==c)return c;r=r||s.field.isKeyField()}return 0}}function cm(n,e,t){const r=n.field.isKeyField()?Yt.comparator(e.key,t.key):function(s,c,u){const h=c.data.field(s),m=u.data.field(s);return null!==h&&null!==m?Fa(h,m):_n()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _n()}}function lm(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function um(n){return{integerValue:""+n}}function q6(n,e){return qu(e)?um(e):lm(n,e)}class Mf{constructor(){this._=void 0}}function dm(n,e,t){return n instanceof b3?function(r,s){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(c.fields.__previous_value__=s),{mapValue:c}}(t,e):n instanceof e2?Z6(n,e):n instanceof t2?K6(n,e):function(r,s){const c=Xu(r,s),u=Y6(c)+Y6(r.yt);return _f(c)&&_f(r.yt)?um(u):lm(r.It,u)}(n,e)}function hm(n,e,t){return n instanceof e2?Z6(n,e):n instanceof t2?K6(n,e):t}function Xu(n,e){return n instanceof d4?_f(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class b3 extends Mf{}class e2 extends Mf{constructor(e){super(),this.elements=e}}function Z6(n,e){const t=Nf(e);for(const r of n.elements)t.some(s=>jo(s,r))||t.push(r);return{arrayValue:{values:t}}}class t2 extends Mf{constructor(e){super(),this.elements=e}}function K6(n,e){let t=Nf(e);for(const r of n.elements)t=t.filter(s=>!jo(s,r));return{arrayValue:{values:t}}}class d4 extends Mf{constructor(e,t){super(),this.It=e,this.yt=t}}function Y6(n){return Ai(n.integerValue||n.doubleValue)}function Nf(n){return y3(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class la{constructor(e,t){this.field=e,this.transform=t}}class aC{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ua(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class da{}function Q6(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new I3(n.key,Ur.none()):new w3(n.key,n.data,Ur.none());{const t=n.data,r=no.empty();let s=new ni(ls.comparator);for(let c of e.fields)if(!s.has(c)){let u=t.field(c);null===u&&c.length>1&&(c=c.popLast(),u=t.field(c)),null===u?r.delete(c):r.set(c,u),s=s.add(c)}return new W1(n.key,r,new Ds(s.toArray()),Ur.none())}}function fm(n,e,t){n instanceof w3?function(r,s,c){const u=r.value.clone(),h=mm(r.fieldTransforms,s,c.transformResults);u.setAll(h),s.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof W1?function(r,s,c){if(!ua(r.precondition,s))return void s.convertToUnknownDocument(c.version);const u=mm(r.fieldTransforms,s,c.transformResults),h=s.data;h.setAll(E3(r)),h.setAll(u),s.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function h4(n,e,t,r){return n instanceof w3?function(s,c,u,h){if(!ua(s.precondition,c))return u;const m=s.value.clone(),w=J6(s.fieldTransforms,h,c);return m.setAll(w),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof W1?function(s,c,u,h){if(!ua(s.precondition,c))return u;const m=J6(s.fieldTransforms,h,c),w=c.data;return w.setAll(E3(s)),w.setAll(m),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),null===u?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(O=>O.field))}(n,e,t,r):(u=t,ua(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u);var c,u}function cC(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),c=Xu(r.transform,s||null);null!=c&&(null===t&&(t=no.empty()),t.set(r.field,c))}return t||null}function pm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&pl(t,r,(s,c)=>function oC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof e2&&r instanceof e2||t instanceof t2&&r instanceof t2?pl(t.elements,r.elements,jo):t instanceof d4&&r instanceof d4?jo(t.yt,r.yt):t instanceof b3&&r instanceof b3);var t,r}(s,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class w3 extends da{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class W1 extends da{constructor(e,t,r,s,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function E3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mm(n,e,t){const r=new Map;qn(n.length===t.length);for(let s=0;s<t.length;s++){const c=n[s],u=c.transform,h=e.data.field(c.field);r.set(c.field,hm(u,h,t[s]))}return r}function J6(n,e,t){const r=new Map;for(const s of n){const c=s.transform,u=t.data.field(s.field);r.set(s.field,dm(c,u,e))}return r}class I3 extends da{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kf extends da{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gm{constructor(e){this.count=e}}var Hi,Or;function X6(n){switch(n){default:return _n();case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0}}function e8(n){if(void 0===n)return cs("GRPC error has no .code"),pt.UNKNOWN;switch(n){case Hi.OK:return pt.OK;case Hi.CANCELLED:return pt.CANCELLED;case Hi.UNKNOWN:return pt.UNKNOWN;case Hi.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case Hi.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case Hi.INTERNAL:return pt.INTERNAL;case Hi.UNAVAILABLE:return pt.UNAVAILABLE;case Hi.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case Hi.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case Hi.NOT_FOUND:return pt.NOT_FOUND;case Hi.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case Hi.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case Hi.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case Hi.ABORTED:return pt.ABORTED;case Hi.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case Hi.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case Hi.DATA_LOSS:return pt.DATA_LOSS;default:return _n()}}(Or=Hi||(Hi={}))[Or.OK=0]="OK",Or[Or.CANCELLED=1]="CANCELLED",Or[Or.UNKNOWN=2]="UNKNOWN",Or[Or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Or[Or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Or[Or.NOT_FOUND=5]="NOT_FOUND",Or[Or.ALREADY_EXISTS=6]="ALREADY_EXISTS",Or[Or.PERMISSION_DENIED=7]="PERMISSION_DENIED",Or[Or.UNAUTHENTICATED=16]="UNAUTHENTICATED",Or[Or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Or[Or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Or[Or.ABORTED=10]="ABORTED",Or[Or.OUT_OF_RANGE=11]="OUT_OF_RANGE",Or[Or.UNIMPLEMENTED=12]="UNIMPLEMENTED",Or[Or.INTERNAL=13]="INTERNAL",Or[Or.UNAVAILABLE=14]="UNAVAILABLE",Or[Or.DATA_LOSS=15]="DATA_LOSS";class Ac{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,c]of r)if(this.equalsFn(s,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return void(s[c]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gl(this.inner,(t,r)=>{for(const[s,c]of r)e(s,c)})}isEmpty(){return Q9(this.inner)}size(){return this.innerSize}}const Rf=new Xi(Yt.comparator);function Go(){return Rf}const t8=new Xi(Yt.comparator);function D3(...n){let e=t8;for(const t of n)e=e.insert(t.key,t);return e}function n8(n){let e=t8;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function q1(){return S3()}function r8(){return S3()}function S3(){return new Ac(n=>n.toString(),(n,e)=>n.isEqual(e))}const vm=new Xi(Yt.comparator),lC=new ni(Yt.comparator);function lr(...n){let e=lC;for(const t of n)e=e.add(t);return e}const uC=new ni(ir);function Pf(){return uC}class f4{constructor(e,t,r,s,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,p4.createSynthesizedTargetChangeForCurrentChange(e,t)),new f4(Bn.min(),r,Pf(),Go(),lr())}}class p4{constructor(e,t,r,s,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new p4(Vi.EMPTY_BYTE_STRING,t,lr(),lr(),lr())}}class Of{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class ym{constructor(e,t){this.targetId=e,this.At=t}}class _m{constructor(e,t,r=Vi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Cm{constructor(){this.Rt=0,this.bt=wm(),this.Pt=Vi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=lr(),t=lr(),r=lr();return this.bt.forEach((s,c)=>{switch(c){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:_n()}}),new p4(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=wm()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class dC{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Go(),this.qt=bm(),this.Kt=new ni(ir)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:_n()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const c=s.target;if(bf(c))if(0===r){const u=new Yt(c.path);this.jt(t,u,ri.newNoDocument(u,Bn.min()))}else qn(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,u)=>{const h=this.Xt(u);if(h){if(c.current&&bf(h.target)){const m=new Yt(h.target.path);null!==this.Ut.get(m)||this.ee(u,m)||this.jt(u,m,ri.newNoDocument(m,e))}c.Dt&&(t.set(u,c.xt()),c.Nt())}});let r=lr();this.qt.forEach((c,u)=>{let h=!0;u.forEachWhile(m=>{const w=this.Xt(m);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(c))}),this.Ut.forEach((c,u)=>u.setReadTime(e));const s=new f4(e,t,this.Kt,this.Ut,r);return this.Ut=Go(),this.qt=bm(),this.Kt=new ni(ir),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new Cm,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ni(ir),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ot("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Cm),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function bm(){return new Xi(Yt.comparator)}function wm(){return new Xi(Yt.comparator)}const hC={asc:"ASCENDING",desc:"DESCENDING"},fC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pC{constructor(e,t){this.databaseId=e,this.gt=t}}function m4(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Em(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Im(n,e){return m4(n,e.toTimestamp())}function Ss(n){return qn(!!n),Bn.fromTimestamp(function(e){const t=tu(e);return new xi(t.seconds,t.nanos)}(n))}function Lf(n,e){return(t=n,new kr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function i8(n){const e=kr.fromString(n);return qn(Ui(e)),e}function T3(n,e){return Lf(n.databaseId,e.path)}function Z1(n,e){const t=i8(e);if(t.get(1)!==n.databaseId.projectId)throw new Nt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Nt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Yt(zf(t))}function Ff(n,e){return Lf(n.databaseId,e)}function s8(n){const e=i8(n);return 4===e.length?kr.emptyPath():zf(e)}function x3(n){return new kr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zf(n){return qn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function o8(n,e,t){return{name:T3(n,e),fields:t.value.mapValue.fields}}function ru(n,e,t){const r=Z1(n,e.name),s=Ss(e.updateTime),c=new no({mapValue:{fields:e.fields}}),u=ri.newFoundDocument(r,s,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Mc(n,e){let t;if(e instanceof w3)t={update:o8(n,e.key,e.value)};else if(e instanceof I3)t={delete:T3(n,e.key)};else if(e instanceof W1)t={update:o8(n,e.key,e.data),updateMask:Hf(e.fieldMask)};else{if(!(e instanceof kf))return _n();t={verify:T3(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,c){const u=c.transform;if(u instanceof b3)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof e2)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof t2)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof d4)return{fieldPath:c.field.canonicalString(),increment:u.yt};throw _n()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Im(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:_n()),t;var s}function Dm(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Ur.updateTime(Ss(s.updateTime)):void 0!==s.exists?Ur.exists(s.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(c,u){let h=null;"setToServerValue"in u?(qn("REQUEST_TIME"===u.setToServerValue),h=new b3):"appendMissingElements"in u?h=new e2(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new t2(u.removeAllFromArray.values||[]):"increment"in u?h=new d4(c,u.increment):_n();const m=ls.fromServerFormat(u.fieldPath);return new la(m,h)}(n,s)):[];var s;if(e.update){const s=Z1(n,e.update.name),c=new no({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ds((e.updateMask.fieldPaths||[]).map(w=>ls.fromServerFormat(w)));return new W1(s,c,u,t,r)}return new w3(s,c,t,r)}if(e.delete){const s=Z1(n,e.delete);return new I3(s,t)}if(e.verify){const s=Z1(n,e.verify);return new kf(s,t)}return _n()}function vC(n,e){return{documents:[Ff(n,e.path)]}}function c8(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ff(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ff(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(m){if(0===m.length)return;const w=m.map(O=>function($){if("=="===$.op){if(L6($.value))return{unaryFilter:{field:A3($.field),op:"IS_NAN"}};if(O6($.value))return{unaryFilter:{field:A3($.field),op:"IS_NULL"}}}else if("!="===$.op){if(L6($.value))return{unaryFilter:{field:A3($.field),op:"IS_NOT_NAN"}};if(O6($.value))return{unaryFilter:{field:A3($.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:A3($.field),op:_C($.op),value:$.value}}}(O));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);s&&(t.structuredQuery.where=s);const c=function(m){if(0!==m.length)return m.map(w=>{return{field:A3((O=w).field),direction:yC(O.dir)};var O})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=(w=e.limit,n.gt||Eo(w)?w:{value:w});var w,h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function l8(n){let e=s8(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){qn(1===r);const O=t.from[0];O.allDescendants?s=O.collectionId:e=e.child(O.collectionId)}let c=[];t.where&&(c=Vn(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(O=>{return new Yu(K1(($=O).field),function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction));var $}));let h=null;t.limit&&(h=function(O){let $;return $="object"==typeof O?O.value:O,Eo($)?null:$}(t.limit));let m=null;var O;t.startAt&&(m=new _l((O=t.startAt).values||[],!!O.before));let w=null;return t.endAt&&(w=function(O){return new _l(O.values||[],!O.before)}(t.endAt)),If(e,s,u,c,h,"F",m,w)}function Vn(n){return n?void 0!==n.unaryFilter?[Vf(n)]:void 0!==n.fieldFilter?[CC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Vn(e)).reduce((e,t)=>e.concat(t)):_n():[]}function yC(n){return hC[n]}function _C(n){return fC[n]}function A3(n){return{fieldPath:n.canonicalString()}}function K1(n){return ls.fromServerFormat(n.fieldPath)}function CC(n){return Hs.create(K1(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _n()}}(n.fieldFilter.op),n.fieldFilter.value)}function Vf(n){switch(n.unaryFilter.op){case"IS_NAN":const e=K1(n.unaryFilter.field);return Hs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=K1(n.unaryFilter.field);return Hs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=K1(n.unaryFilter.field);return Hs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=K1(n.unaryFilter.field);return Hs.create(s,"!=",{nullValue:"NULL_VALUE"});default:return _n()}}function Hf(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ui(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ha(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=u8(e)),e=Sm(n.get(t),e);return u8(e)}function Sm(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const c=n.charAt(s);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function u8(n){return n+"\x01\x01"}function Nc(n){const e=n.length;if(qn(e>=2),2===e)return qn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),kr.emptyPath();const t=e-2,r=[];let s="";for(let c=0;c<e;){const u=n.indexOf("\x01",c);switch((u<0||u>t)&&_n(),n.charAt(u+1)){case"\x01":const h=n.substring(c,u);let m;0===s.length?m=h:(s+=h,m=s,s=""),r.push(m);break;case"\x10":s+=n.substring(c,u),s+="\0";break;case"\x11":s+=n.substring(c,u+1);break;default:_n()}c=u+2}return new kr(r)}const d8=["userId","batchId"];function g4(n,e){return[n,ha(e)]}function h8(n,e,t){return[n,ha(e),t]}const Tm={},bC=["prefixPath","collectionGroup","readTime","documentId"],wC=["prefixPath","collectionGroup","documentId"],EC=["collectionGroup","readTime","prefixPath","documentId"],v4=["canonicalId","targetId"],IC=["targetId","path"],DC=["path","targetId"],SC=["collectionId","parent"],Uf=["indexId","uid"],xm=["uid","sequenceNumber"],Am=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mm=["indexId","uid","orderedDocumentKey"],TC=["userId","collectionPath","documentId"],y4=["userId","collectionPath","largestBatchId"],_4=["userId","collectionGroup","largestBatchId"],Nm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xC=[...Nm,"documentOverlays"],km=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f8=km,Rm=[...f8,"indexConfiguration","indexState","indexEntries"];class Bf extends gf{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Us(n,e){const t=Xt(n);return B1.O(t.ie,e)}class jf{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const c=this.mutations[s];c.key.isEqual(e.key)&&fm(c,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=h4(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=h4(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=r8();return this.mutations.forEach(s=>{const c=e.get(s.key),u=c.overlayedDocument;let h=this.applyToLocalView(u,c.mutatedFields);h=t.has(s.key)?null:h;const m=Q6(u,h);null!==m&&r.set(s.key,m),u.isValidDocument()||u.convertToNoDocument(Bn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lr())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,(t,r)=>pm(t,r))&&pl(this.baseMutations,e.baseMutations,(t,r)=>pm(t,r))}}class p8{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){qn(e.mutations.length===r.length);let s=vm;const c=e.mutations;for(let u=0;u<c.length;u++)s=s.insert(c[u].key,r[u].version);return new p8(e,t,r,s)}}class m8{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class n2{constructor(e,t,r,s,c=Bn.min(),u=Bn.min(),h=Vi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new n2(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new n2(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new n2(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class AC{constructor(e){this.re=e}}function MC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:C4(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:T3(s=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:m4(s,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kc(e.version)};else{if(!e.isUnknownDocument())return _n();r.unknownDocument={path:t.path.toArray(),version:kc(e.version)}}var s,c;return r}function C4(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function r2(n){const e=new xi(n.seconds,n.nanoseconds);return Bn.fromTimestamp(e)}function s2(n,e){const t=(e.baseMutations||[]).map(c=>Dm(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const u=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(u.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>Dm(n.re,c)),s=xi.fromMillis(e.localWriteTimeMs);return new jf(e.batchId,s,t,r)}function M3(n){const e=r2(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?r2(n.lastLimboFreeSnapshotVersion):Bn.min();let r;var s;return void 0!==n.query.documents?(qn(1===(s=n.query).documents.length),r=$o(Qu(s8(s.documents[0])))):r=$o(l8(n.query)),new n2(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Vi.fromBase64String(n.resumeToken))}function N3(n,e){const t=kc(e.snapshotVersion),r=kc(e.lastLimboFreeSnapshotVersion);let s;s=bf(e.target)?vC(n.re,e.target):c8(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xc(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function g8(n){const e=l8({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?u4(e,e.limit,"L"):e}function v8(n,e){return new m8(e.largestBatchId,Dm(n.re,e.overlayMutation))}function Pm(n,e){const t=e.path.lastSegment();return[n,ha(e.path.popLast()),t]}function Om(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:kc(r.readTime),documentKey:ha(r.documentKey.path),largestBatchId:r.largestBatchId}}class NC{getBundleMetadata(e,t){return y8(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:r2(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return y8(e).put({bundleId:(r=t).id,createTime:kc(Ss(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Lm(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:g8(s.bundledQuery),readTime:r2(s.readTime)};var s})}saveNamedQuery(e,t){return Lm(e).put({name:(r=t).name,readTime:kc(Ss(r.readTime)),bundledQuery:r.bundledQuery});var r}}function y8(n){return Us(n,"bundles")}function Lm(n){return Us(n,"namedQueries")}class $f{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new $f(e,t.uid||"")}getOverlay(e,t){return Rc(e).get(Pm(this.userId,t)).next(r=>r?v8(this.It,r):null)}getOverlays(e,t){const r=q1();return tt.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((c,u)=>{const h=new m8(t,u);s.push(this.ue(e,h))}),tt.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(ha(u.getCollectionPath())));const c=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);c.push(Rc(e).Y("collectionPathOverlayIndex",h))}),tt.waitFor(c)}getOverlaysForCollection(e,t,r){const s=q1(),c=ha(t),u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Rc(e).W("collectionPathOverlayIndex",u).next(h=>{for(const m of h){const w=v8(this.It,m);s.set(w.getKey(),w)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const c=q1();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rc(e).Z({index:"collectionGroupOverlayIndex",range:h},(m,w,O)=>{const $=v8(this.It,w);c.size()<s||$.largestBatchId===u?(c.set($.getKey(),$),u=$.largestBatchId):O.done()}).next(()=>c)}ue(e,t){return Rc(e).put(function(r,s,c){const[u,h,m]=Pm(s,c.mutation.key);return{userId:s,collectionPath:h,documentId:m,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Mc(r.re,c.mutation)}}(this.It,this.userId,t))}}function Rc(n){return Us(n,"documentOverlays")}class o2{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Ai(e.integerValue));else if("doubleValue"in e){const r=Ai(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Wu(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me($u(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?F6(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):_n()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),Yt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Fm(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function zm(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const c=Fm(255&t[s]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}o2.Te=new o2;class Vm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=zm(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=zm(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,s,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class kC{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Hm{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class b4{constructor(){this.Be=new Vm,this.Le=new kC(this.Be),this.Ue=new Hm(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Cl{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cl(this.indexId,this.documentKey,this.arrayValue,r)}}function a2(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=_8(n.arrayValue,e.arrayValue),0!==t?t:(t=_8(n.directionalValue,e.directionalValue),0!==t?t:Yt.comparator(n.documentKey,e.documentKey)))}function _8(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Um{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=k6(e);if(void 0!==t&&!this.ze(t))return!1;const r=Xl(e);let s=0,c=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const u=r[s];if(!this.He(this.je,u)||!this.Je(this.Ge[c++],u))return!1;++s}for(;s<r.length;++s){const u=r[s];if(c>=this.Ge.length||!this.Je(this.Ge[c++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class RC{constructor(){this.Ye=new C8}addToCollectionParentIndex(e,t){return this.Ye.add(t),tt.resolve()}getCollectionParents(e,t){return tt.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return tt.resolve()}deleteFieldIndex(e,t){return tt.resolve()}getDocumentsMatchingTarget(e,t){return tt.resolve(null)}getIndexType(e,t){return tt.resolve(0)}getFieldIndexes(e,t){return tt.resolve([])}getNextCollectionGroupToUpdate(e){return tt.resolve(null)}getMinOffset(e,t){return tt.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return tt.resolve(bo.min())}updateCollectionGroup(e,t,r){return tt.resolve()}updateIndexEntries(e,t){return tt.resolve()}}class C8{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ni(kr.comparator),c=!s.has(r);return this.index[t]=s.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ni(kr.comparator)).toArray()}}const Gf=new Uint8Array(0);class b8{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new C8,this.Ze=new Ac(r=>xc(r),(r,s)=>Ku(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:r,parent:ha(s)};return Bm(e).put(c)}return tt.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[mf(t),""],!1,!0);return Bm(e).W(s).next(c=>{for(const u of c){if(u.collectionId!==t)break;r.push(Nc(u.parent))}return r})}addFieldIndex(e,t){const r=Wf(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete s.indexId;const c=r.add(s);if(t.indexState){const u=w4(e);return c.next(h=>{u.put(Om(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=Wf(e),s=w4(e),c=k3(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=k3(e);let s=!0;const c=new Map;return tt.forEach(this.tn(t),u=>this.en(e,u).next(h=>{s&&(s=!!h),c.set(u,h)})).next(()=>{if(s){let u=lr();const h=[];return tt.forEach(c,(m,w)=>{var O;Ot("IndexedDbIndexManager",`Using index ${O=m,`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(qt=>`${qt.fieldPath}:${qt.kind}`).join(",")}`} to execute ${xc(t)}`);const $=function(qt,sn){const In=k6(sn);if(void 0===In)return null;for(const Fn of C3(qt,In.fieldPath))switch(Fn.op){case"array-contains-any":return Fn.value.arrayValue.values||[];case"array-contains":return[Fn.value]}return null}(w,m),ee=function(qt,sn){const In=new Map;for(const Fn of Xl(sn))for(const jr of C3(qt,Fn.fieldPath))switch(jr.op){case"==":case"in":In.set(Fn.fieldPath.canonicalString(),jr.value);break;case"not-in":case"!=":return In.set(Fn.fieldPath.canonicalString(),jr.value),Array.from(In.values())}return null}(w,m),de=function(qt,sn){const In=[];let Fn=!0;for(const jr of Xl(sn)){const wr=0===jr.kind?wf(qt,jr.fieldPath,qt.startAt):U6(qt,jr.fieldPath,qt.startAt);In.push(wr.value),Fn&&(Fn=wr.inclusive)}return new _l(In,Fn)}(w,m),Te=function(qt,sn){const In=[];let Fn=!0;for(const jr of Xl(sn)){const wr=0===jr.kind?U6(qt,jr.fieldPath,qt.endAt):wf(qt,jr.fieldPath,qt.endAt);In.push(wr.value),Fn&&(Fn=wr.inclusive)}return new _l(In,Fn)}(w,m),st=this.nn(m,w,de),It=this.nn(m,w,Te),an=this.sn(m,w,ee),un=this.rn(m.indexId,$,st,de.inclusive,It,Te.inclusive,an);return tt.forEach(un,qt=>r.J(qt,t.limit).next(sn=>{sn.forEach(In=>{const Fn=Yt.fromSegments(In.documentKey);u.has(Fn)||(u=u.add(Fn),h.push(Fn))})}))}).next(()=>h)}return tt.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,c,u,h){const m=(null!=t?t.length:1)*Math.max(r.length,c.length),w=m/(null!=t?t.length:1),O=[];for(let $=0;$<m;++$){const ee=t?this.on(t[$/w]):Gf,de=this.un(e,ee,r[$%w],s),Te=this.cn(e,ee,c[$%w],u),st=h.map(It=>this.un(e,ee,It,!0));O.push(...this.createRange(de,Te,st))}return O}un(e,t,r,s){const c=new Cl(e,Yt.empty(),t,r);return s?c:c.Ke()}cn(e,t,r,s){const c=new Cl(e,Yt.empty(),t,r);return s?c.Ke():c}en(e,t){const r=new Um(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(c=>{let u=null;for(const h of c)r.We(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return tt.forEach(this.tn(t),s=>this.en(e,s).next(c=>{c?0!==r&&c.fields.length<function(u){let h=new ni(ls.comparator),m=!1;for(const w of u.filters){const O=w;O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?m=!0:h=h.add(O.field))}for(const w of u.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(m?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new b4;for(const s of Xl(e)){const c=t.data.field(s.fieldPath);if(null==c)return null;const u=r.qe(s.kind);o2.Te.ce(c,u)}return r.$e()}on(e){const t=new b4;return o2.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new b4;return o2.Te.ce(nu(this.databaseId,t),r.qe(function(s){const c=Xl(s);return 0===c.length?0:c[c.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new b4);let c=0;for(const u of Xl(e)){const h=r[c++];for(const m of s)if(this.ln(t,u.fieldPath)&&y3(h))s=this.fn(s,u,h);else{const w=m.qe(u.kind);o2.Te.ce(h,w)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],c=[];for(const u of r.arrayValue.values||[])for(const h of s){const m=new b4;m.seed(h.$e()),o2.Te.ce(u,m.qe(t.kind)),c.push(m)}return c}ln(e,t){return!!e.filters.find(r=>r instanceof Hs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wf(e),s=w4(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const u=[];return tt.forEach(c,h=>s.get([h.indexId,this.uid]).next(m=>{u.push(function(w,O){const $=O?new Hu(O.sequenceNumber,new bo(r2(O.readTime),new Yt(Nc(O.documentKey)),O.largestBatchId)):Hu.empty(),ee=w.fields.map(([de,Te])=>new o4(ls.fromServerFormat(de),Te));return new N6(w.indexId,w.collectionGroup,ee,$)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const c=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==c?c:ir(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Wf(e),c=w4(e);return this._n(e).next(u=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>tt.forEach(h,m=>c.put(Om(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return tt.forEach(t,(s,c)=>{const u=r.get(s.collectionGroup);return(u?tt.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(r.set(s.collectionGroup,h),tt.forEach(h,m=>this.wn(e,s,m).next(w=>{const O=this.mn(c,m);return w.isEqual(O)?tt.resolve():this.gn(e,c,m,w,O)}))))})}yn(e,t,r,s){return k3(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return k3(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=k3(e);let c=new ni(a2);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,h)=>{c=c.add(new Cl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>c)}mn(e,t){let r=new ni(a2);const s=this.an(t,e);if(null==s)return r;const c=k6(t);if(null!=c){const u=e.data.field(c.fieldPath);if(y3(u))for(const h of u.arrayValue.values||[])r=r.add(new Cl(t.indexId,e.key,this.on(h),s))}else r=r.add(new Cl(t.indexId,e.key,Gf,s));return r}gn(e,t,r,s,c){Ot("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,w,O,$){const ee=h.getIterator(),de=m.getIterator();let Te=vl(ee),st=vl(de);for(;Te||st;){let It=!1,an=!1;if(Te&&st){const un=w(Te,st);un<0?an=!0:un>0&&(It=!0)}else null!=Te?an=!0:It=!0;It?(O(st),st=vl(de)):an?($(Te),Te=vl(ee)):(Te=vl(ee),st=vl(de))}}(s,c,a2,h=>{u.push(this.yn(e,t,r,h))},h=>{u.push(this.pn(e,t,r,h))}),tt.waitFor(u)}_n(e){let t=1;return w4(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,c)=>{c.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>a2(u,h)).filter((u,h,m)=>!h||0!==a2(u,m[h-1]));const s=[];s.push(e);for(const u of r){const h=a2(u,e),m=a2(u,t);if(0===h)s[0]=e.Ke();else if(h>0&&m<0)s.push(u),s.push(u.Ke());else if(m>0)break}s.push(t);const c=[];for(let u=0;u<s.length;u+=2)c.push(IDBKeyRange.bound([s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,Gf,[]],[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,Gf,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jm)}getMinOffset(e,t){return tt.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||_n())).next(jm)}}function Bm(n){return Us(n,"collectionParents")}function k3(n){return Us(n,"indexEntries")}function Wf(n){return Us(n,"indexConfiguration")}function w4(n){return Us(n,"indexState")}function jm(n){qn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Uu(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new bo(e.readTime,e.documentKey,t)}const $m={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fa{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fa(e,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gm(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),c=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.Z({range:u},(O,$,ee)=>(h++,ee.delete()));c.push(m.next(()=>{qn(1===h)}));const w=[];for(const O of t.mutations){const $=h8(e,O.key.path,t.batchId);c.push(s.delete($)),w.push(O.key)}return tt.waitFor(c).next(()=>w)}function qf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _n();e=n.noDocument}return JSON.stringify(e).length}fa.DEFAULT_COLLECTION_PERCENTILE=10,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fa.DEFAULT=new fa(41943040,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fa.DISABLED=new fa(-1,0,0);class Zf{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){qn(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Zf(c,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).Z({index:"userMutationsIndex",range:r},(s,c,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const c=R3(e),u=bl(e);return u.add({}).next(h=>{qn("number"==typeof h);const m=new jf(h,t,r,s),w=function(ee,de,Te){const st=Te.baseMutations.map(an=>Mc(ee.re,an)),It=Te.mutations.map(an=>Mc(ee.re,an));return{userId:de,batchId:Te.batchId,localWriteTimeMs:Te.localWriteTime.toMillis(),baseMutations:st,mutations:It}}(this.It,this.userId,m),O=[];let $=new ni((ee,de)=>ir(ee.canonicalString(),de.canonicalString()));for(const ee of s){const de=h8(this.userId,ee.key.path,h);$=$.add(ee.key.path.popLast()),O.push(u.put(w)),O.push(c.put(de,Tm))}return $.forEach(ee=>{O.push(this.indexManager.addToCollectionParentIndex(e,ee))}),e.addOnCommittedListener(()=>{this.In[h]=m.keys()}),tt.waitFor(O).next(()=>m)})}lookupMutationBatch(e,t){return bl(e).get(t).next(r=>r?(qn(r.userId===this.userId),s2(this.It,r)):null)}Tn(e,t){return this.In[t]?tt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return bl(e).Z({index:"userMutationsIndex",range:s},(u,h,m)=>{h.userId===this.userId&&(qn(h.batchId>=r),c=s2(this.It,h)),m.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,c,u)=>{r=c.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).W("userMutationsIndex",t).next(r=>r.map(s=>s2(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=g4(this.userId,t.path),s=IDBKeyRange.lowerBound(r),c=[];return R3(e).Z({range:s},(u,h,m)=>{const[w,O,$]=u,ee=Nc(O);if(w===this.userId&&t.path.isEqual(ee))return bl(e).get($).next(de=>{if(!de)throw _n();qn(de.userId===this.userId),c.push(s2(this.It,de))});m.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ni(ir);const s=[];return t.forEach(c=>{const u=g4(this.userId,c.path),h=IDBKeyRange.lowerBound(u),m=R3(e).Z({range:h},(w,O,$)=>{const[ee,de,Te]=w,st=Nc(de);ee===this.userId&&c.path.isEqual(st)?r=r.add(Te):$.done()});s.push(m)}),tt.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,c=g4(this.userId,r),u=IDBKeyRange.lowerBound(c);let h=new ni(ir);return R3(e).Z({range:u},(m,w,O)=>{const[$,ee,de]=m,Te=Nc(ee);$===this.userId&&r.isPrefixOf(Te)?Te.length===s&&(h=h.add(de)):O.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],s=[];return t.forEach(c=>{s.push(bl(e).get(c).next(u=>{if(null===u)throw _n();qn(u.userId===this.userId),r.push(s2(this.It,u))}))}),tt.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Gm(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),tt.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return tt.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return R3(e).Z({range:r},(c,u,h)=>{if(c[0]===this.userId){const m=Nc(c[1]);s.push(m)}else h.done()}).next(()=>{qn(0===s.length)})})}containsKey(e,t){return w8(e,this.userId,t)}Rn(e){return Wm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function w8(n,e,t){const r=g4(e,t.path),s=r[1],c=IDBKeyRange.lowerBound(r);let u=!1;return R3(n).Z({range:c,X:!0},(h,m,w)=>{const[O,$,ee]=h;O===e&&$===s&&(u=!0),w.done()}).next(()=>u)}function bl(n){return Us(n,"mutations")}function R3(n){return Us(n,"documentMutations")}function Wm(n){return Us(n,"mutationQueues")}class iu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new iu(0)}static vn(){return new iu(-1)}}class PC{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new iu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Bn.fromTimestamp(new xi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>P3(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(qn(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const c=[];return P3(e).Z((u,h)=>{const m=M3(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(s++,c.push(this.removeTargetData(e,m)))}).next(()=>tt.waitFor(c)).next(()=>s)}forEachTarget(e,t){return P3(e).Z((r,s)=>{const c=M3(s);t(c)})}Vn(e){return qm(e).get("targetGlobalKey").next(t=>(qn(null!==t),t))}Sn(e,t){return qm(e).put("targetGlobalKey",t)}Dn(e,t){return P3(e).put(N3(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xc(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return P3(e).Z({range:s,index:"queryTargetsIndex"},(u,h,m)=>{const w=M3(h);Ku(t,w.target)&&(c=w,m.done())}).next(()=>c)}addMatchingKeys(e,t,r){const s=[],c=Pc(e);return t.forEach(u=>{const h=ha(u.path);s.push(c.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))}),tt.waitFor(s)}removeMatchingKeys(e,t,r){const s=Pc(e);return tt.forEach(t,c=>{const u=ha(c.path);return tt.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Pc(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Pc(e);let c=lr();return s.Z({range:r,X:!0},(u,h,m)=>{const w=Nc(u[1]),O=new Yt(w);c=c.add(O)}).next(()=>c)}containsKey(e,t){const r=ha(t.path),s=IDBKeyRange.bound([r],[mf(r)],!1,!0);let c=0;return Pc(e).Z({index:"documentTargetsIndex",X:!0,range:s},([u,h],m,w)=>{0!==u&&(c++,w.done())}).next(()=>c>0)}se(e,t){return P3(e).get(t).next(r=>r?M3(r):null)}}function P3(n){return Us(n,"targets")}function qm(n){return Us(n,"targetGlobal")}function Pc(n){return Us(n,"targetDocuments")}function Kf([n,e],[t,r]){const s=ir(n,t);return 0===s?ir(e,r):s}class Zm{constructor(e){this.xn=e,this.buffer=new ni(Kf),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kf(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E8{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Ot("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,yt.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Bu(r)?Ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ml(r)}yield t.Fn(3e5)}))}}class OC{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return tt.resolve(wo.at);const r=new Zm(t);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve($m)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$m):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,c,u,h,m,w;const O=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next($=>($>this.params.maximumSequenceNumbersToCollect?(Ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${$}`),s=this.params.maximumSequenceNumbersToCollect):s=$,u=Date.now(),this.nthSequenceNumber(e,s))).next($=>(r=$,h=Date.now(),this.removeTargets(e,r,t))).next($=>(c=$,m=Date.now(),this.removeOrphanedDocuments(e,r))).next($=>(w=Date.now(),s4()<=u1.in.DEBUG&&Ot("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-O}ms\n\tDetermined least recently used ${s} in `+(h-u)+`ms\n\tRemoved ${c} targets in `+(m-h)+`ms\n\tRemoved ${$} documents in `+(w-m)+`ms\nTotal Duration: ${w-O}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:c,documentsRemoved:$})))}}class LC{constructor(e,t){this.db=e,this.garbageCollector=new OC(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return O3(e,r)}removeReference(e,t,r){return O3(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return O3(e,t)}Gn(e,t){return function(r,s){let c=!1;return Wm(r).tt(u=>w8(r,u,s).next(h=>(h&&(c=!0),tt.resolve(!h)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let c=0;return this.Kn(e,(u,h)=>{if(h<=t){const m=this.Gn(e,u).next(w=>{if(!w)return c++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Bn.min()),Pc(e).delete([0,ha(u.path)])))});s.push(m)}}).next(()=>tt.waitFor(s)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return O3(e,t)}Kn(e,t){const r=Pc(e);let s,c=wo.at;return r.Z({index:"documentTargetsIndex"},([u,h],{path:m,sequenceNumber:w})=>{0===u?(c!==wo.at&&t(new Yt(Nc(s)),c),c=w,s=m):c=wo.at}).next(()=>{c!==wo.at&&t(new Yt(Nc(s)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function O3(n,e){return Pc(n).put((r=n.currentSequenceNumber,{targetId:0,path:ha(e.path),sequenceNumber:r}));var r}class Km{constructor(){this.changes=new Ac(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?tt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ym{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return L3(e).put(r)}removeEntry(e,t,r){return L3(e).delete(function(s,c){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],C4(c),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=ri.newInvalidDocument(t);return L3(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(F3(t))},(s,c)=>{r=this.jn(t,c)}).next(()=>r)}Wn(e,t){let r={size:0,document:ri.newInvalidDocument(t)};return L3(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(F3(t))},(s,c)=>{r={document:this.jn(t,c),size:qf(c)}}).next(()=>r)}getEntries(e,t){let r=Go();return this.zn(e,t,(s,c)=>{const u=this.jn(s,c);r=r.insert(s,u)}).next(()=>r)}Hn(e,t){let r=Go(),s=new Xi(Yt.comparator);return this.zn(e,t,(c,u)=>{const h=this.jn(c,u);r=r.insert(c,h),s=s.insert(c,qf(u))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return tt.resolve();let s=new ni(Xm);t.forEach(m=>s=s.add(m));const c=IDBKeyRange.bound(F3(s.first()),F3(s.last())),u=s.getIterator();let h=u.getNext();return L3(e).Z({index:"documentKeyIndex",range:c},(m,w,O)=>{const $=Yt.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&Xm(h,$)<0;)r(h,null),h=u.getNext();h&&h.isEqual($)&&(r(h,w),h=u.hasNext()?u.getNext():null),h?O.j(F3(h)):O.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),C4(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return L3(e).W(IDBKeyRange.bound(s,c,!0)).next(u=>{let h=Go();for(const m of u){const w=this.jn(Yt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,s){let c=Go();const u=Yf(t,r),h=Yf(t,bo.max());return L3(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(m,w,O)=>{const $=this.jn(Yt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);c=c.insert($.key,$),c.size===s&&O.done()}).next(()=>c)}newChangeBuffer(e){return new Qm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Jm(e).get("remoteDocumentGlobalKey").next(t=>(qn(!!t),t))}Qn(e,t){return Jm(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function uD(n,e){let t;if(e.document)t=ru(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Yt.fromSegments(e.noDocument.path),s=r2(e.noDocument.readTime);t=ri.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _n();{const r=Yt.fromSegments(e.unknownDocument.path),s=r2(e.unknownDocument.version);t=ri.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new xi(r[0],r[1]);return Bn.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Bn.min()))return r}return ri.newInvalidDocument(e)}}function c2(n){return new Ym(n)}class Qm extends Km{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ac(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new ni((c,u)=>ir(c.canonicalString(),u.canonicalString()));return this.changes.forEach((c,u)=>{const h=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,h.readTime)),u.isValidDocument()){const m=MC(this.Yn.It,u);s=s.add(c.path.popLast()),r+=qf(m)-h.size,t.push(this.Yn.addEntry(e,c,m))}else if(r-=h.size,this.trackRemovals){const m=MC(this.Yn.It,u.convertToNoDocument(Bn.min()));t.push(this.Yn.addEntry(e,c,m))}}),s.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,r)),tt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((c,u)=>{this.Xn.set(c,{size:u,readTime:r.get(c).readTime})}),r))}}function Jm(n){return Us(n,"remoteDocumentGlobal")}function L3(n){return Us(n,"remoteDocumentsV14")}function F3(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yf(n,e){const t=e.documentKey.path.toArray();return[n,C4(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xm(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(s=ir(t[c],r[c]),s)return s;return s=ir(t.length,r.length),s||(s=ir(t[t.length-2],r[r.length-2]),s||ir(t[t.length-1],r[r.length-1]))}class I8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eg{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&h4(r.mutation,s,Ds.empty(),xi.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,lr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=lr()){const s=q1();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(c=>{let u=D3();return c.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=q1();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,lr()))}populateOverlays(e,t,r){const s=[];return r.forEach(c=>{t.has(c)||s.push(c)}),this.documentOverlayCache.getOverlays(e,s).next(c=>{c.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let c=Go();const u=S3(),h=S3();return t.forEach((m,w)=>{const O=r.get(w.key);s.has(w.key)&&(void 0===O||O.mutation instanceof W1)?c=c.insert(w.key,w):void 0!==O&&(u.set(w.key,O.mutation.getFieldMask()),h4(O.mutation,w,O.mutation.getFieldMask(),xi.now()))}),this.recalculateAndSaveOverlays(e,c).next(m=>(m.forEach((w,O)=>u.set(w,O)),t.forEach((w,O)=>{var $;return h.set(w,new I8(O,null!==($=u.get(w))&&void 0!==$?$:null))}),h))}recalculateAndSaveOverlays(e,t){const r=S3();let s=new Xi((u,h)=>u-h),c=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(m=>{const w=t.get(m);if(null===w)return;let O=r.get(m)||Ds.empty();O=h.applyToLocalView(w,O),r.set(m,O);const $=(s.get(h.batchId)||lr()).add(m);s=s.insert(h.batchId,$)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),w=m.key,O=m.value,$=r8();O.forEach(ee=>{if(!c.has(ee)){const de=Q6(t.get(ee),r.get(ee));null!==de&&$.set(ee,de),c=c.add(ee)}}),u.push(this.documentOverlayCache.saveOverlays(e,w,$))}return tt.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Yt.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Tf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(c=>{const u=s-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-c.size):tt.resolve(q1());let h=-1,m=c;return u.next(w=>tt.forEach(w,(O,$)=>(h<$.largestBatchId&&(h=$.largestBatchId),c.get(O)?tt.resolve():this.getBaseDocument(e,O,$).next(ee=>{m=m.insert(O,ee)}))).next(()=>this.populateOverlays(e,w,c)).next(()=>this.computeViews(e,m,w,lr())).next(O=>({batchId:h,changes:n8(O)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yt(t)).next(r=>{let s=D3();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let c=D3();return this.indexManager.getCollectionParents(e,s).next(u=>tt.forEach(u,h=>{const m=(w=t,O=h.child(s),new G1(O,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,O;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(w=>{w.forEach((O,$)=>{c=c.insert(O,$)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(c=>(s=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(c=>{c.forEach((h,m)=>{const w=m.getKey();null===s.get(w)&&(s=s.insert(w,ri.newInvalidDocument(w)))});let u=D3();return s.forEach((h,m)=>{const w=c.get(h);void 0!==w&&h4(w.mutation,m,Ds.empty(),xi.now()),Af(t,m)&&(u=u.insert(h,m))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):tt.resolve(ri.newInvalidDocument(t))}}class FC{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return tt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ss(r.createTime)}),tt.resolve()}getNamedQuery(e,t){return tt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:g8(r.bundledQuery),readTime:Ss(r.readTime)}),tt.resolve();var r}}class D8{constructor(){this.overlays=new Xi(Yt.comparator),this.es=new Map}getOverlay(e,t){return tt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=q1();return tt.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,c)=>{this.ue(e,t,c)}),tt.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(r)),tt.resolve()}getOverlaysForCollection(e,t,r){const s=q1(),c=t.length+1,u=new Yt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,w=m.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===c&&m.largestBatchId>r&&s.set(m.getKey(),m)}return tt.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let c=new Xi((w,O)=>w-O);const u=this.overlays.getIterator();for(;u.hasNext();){const w=u.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let O=c.get(w.largestBatchId);null===O&&(O=q1(),c=c.insert(w.largestBatchId,O)),O.set(w.getKey(),w)}}const h=q1(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((w,O)=>h.set(w,O)),!(h.size()>=s)););return tt.resolve(h)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const u=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new m8(t,r));let c=this.es.get(t);void 0===c&&(c=lr(),this.es.set(t,c)),this.es.set(t,c.add(r.key))}}class Qf{constructor(){this.ns=new ni(Ts.ss),this.rs=new ni(Ts.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ts(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ts(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Yt(new kr([])),r=new Ts(t,e),s=new Ts(t,e+1),c=[];return this.rs.forEachInRange([r,s],u=>{this.cs(u),c.push(u.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Yt(new kr([])),r=new Ts(t,e),s=new Ts(t,e+1);let c=lr();return this.rs.forEachInRange([r,s],u=>{c=c.add(u.key)}),c}containsKey(e){const t=new Ts(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ts{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Yt.comparator(e.key,t.key)||ir(e._s,t._s)}static os(e,t){return ir(e._s,t._s)||Yt.comparator(e.key,t.key)}}class tg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ni(Ts.ss)}checkEmpty(e){return tt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const c=this.ws;this.ws++;const u=new jf(c,t,r,s);this.mutationQueue.push(u);for(const h of s)this.gs=this.gs.add(new Ts(h.key,c)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return tt.resolve(u)}lookupMutationBatch(e,t){return tt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),c=s<0?0:s;return tt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ts(t,0),s=new Ts(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([r,s],u=>{const h=this.ys(u._s);c.push(h)}),tt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ni(ir);return t.forEach(s=>{const c=new Ts(s,0),u=new Ts(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,u],h=>{r=r.add(h._s)})}),tt.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let c=r;Yt.isDocumentKey(c)||(c=c.child(""));const u=new Ts(new Yt(c),0);let h=new ni(ir);return this.gs.forEachWhile(m=>{const w=m.key.path;return!!r.isPrefixOf(w)&&(w.length===s&&(h=h.add(m._s)),!0)},u),tt.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){qn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return tt.forEach(t.mutations,s=>{const c=new Ts(s.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ts(t,0),s=this.gs.firstAfterOrEqual(r);return tt.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return tt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ng{constructor(e){this.Es=e,this.docs=new Xi(Yt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),c=s?s.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return tt.resolve(r?r.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let r=Go();return t.forEach(s=>{const c=this.docs.get(s);r=r.insert(s,c?c.document.mutableCopy():ri.newInvalidDocument(s))}),tt.resolve(r)}getAllFromCollection(e,t,r){let s=Go();const c=new Yt(t.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||Uu(a4(m),r)<=0||(s=s.insert(m.key,m.mutableCopy()))}return tt.resolve(s)}getAllFromCollectionGroup(e,t,r,s){_n()}As(e,t){return tt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zC(this)}getSize(e){return tt.resolve(this.size)}}class zC extends Km{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),tt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class VC{constructor(e){this.persistence=e,this.Rs=new Ac(t=>xc(t),Ku),this.lastRemoteSnapshotVersion=Bn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Qf,this.targetCount=0,this.vs=iu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),tt.resolve()}getLastRemoteSnapshotVersion(e){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),tt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new iu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,tt.resolve()}updateTargetData(e,t){return this.Dn(t),tt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,tt.resolve()}removeTargets(e,t,r){let s=0;const c=[];return this.Rs.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(u),c.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),tt.waitFor(c).next(()=>s)}getTargetCount(e){return tt.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return tt.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),tt.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,c=[];return s&&t.forEach(u=>{c.push(s.markPotentiallyOrphaned(e,u))}),tt.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),tt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return tt.resolve(r)}containsKey(e,t){return tt.resolve(this.Ps.containsKey(t))}}class rg{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new wo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new VC(this),this.indexManager=new RC,this.remoteDocumentCache=new ng(r=>this.referenceDelegate.xs(r)),this.It=new AC(t),this.Ns=new FC(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new tg(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ot("MemoryPersistence","Starting transaction:",e);const s=new HC(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(c=>this.referenceDelegate.Ms(s).next(()=>c)).toPromise().then(c=>(s.raiseOnCommittedEvent(),c))}Os(e,t){return tt.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class HC extends gf{constructor(e){super(),this.currentSequenceNumber=e}}class E4{constructor(e){this.persistence=e,this.Fs=new Qf,this.$s=null}static Bs(e){return new E4(e)}get Ls(){if(this.$s)return this.$s;throw _n()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),tt.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),tt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),tt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(c=>this.Ls.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.Ls,r=>{const s=Yt.fromPath(r);return this.Us(e,s).next(c=>{c||t.removeEntry(s,Bn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return tt.or([()=>tt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class dD{constructor(e){this.It=e}$(e,t,r,s){const c=new eu("createOrUpgrade",t);var h;r<1&&s>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d8,{unique:!0}),h.createObjectStore("documentMutations"),S8(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=tt.resolve();return r<3&&s>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),S8(e)),u=u.next(()=>function(h){const m=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bn.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",w)}(c))),r<4&&s>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d8,{unique:!0});const O=m.store("mutations"),$=w.map(ee=>O.put(ee));return tt.waitFor($)})}(e,c))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(u=u.next(()=>this.qs(c))),r<6&&s>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),r<7&&s>=7&&(u=u.next(()=>this.Gs(c))),r<8&&s>=8&&(u=u.next(()=>this.Qs(e,c))),r<9&&s>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(u=u.next(()=>this.js(c))),r<11&&s>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:TC});m.createIndex("collectionPathOverlayIndex",y4,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",_4,{unique:!1})}(e)})),r<13&&s>=13&&(u=u.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:bC});m.createIndex("documentKeyIndex",wC),m.createIndex("collectionGroupIndex",EC)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(u=u.next(()=>this.zs(e,c))),r<15&&s>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Uf}).createIndex("sequenceNumberIndex",xm,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Am}).createIndex("documentKeyIndex",Mm,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=qf(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>tt.forEach(s,c=>{const u=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(h=>tt.forEach(h,m=>{qn(m.userId===c.userId);const w=s2(this.It,m);return Gm(e,c.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const c=[];return r.Z((u,h)=>{const m=new kr(u),w=[0,ha(m)];c.push(t.get(w).next(O=>O?tt.resolve():t.put({targetId:0,path:ha(m),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>tt.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:SC});const r=t.store("collectionParents"),s=new C8,c=u=>{if(s.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:ha(m)})}};return t.store("remoteDocuments").Z({X:!0},(u,h)=>{const m=new kr(u);return c(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,h,m],w)=>{const O=Nc(h);return c(O.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const c=M3(s),u=N3(this.It,c);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((c,u)=>{const h=t.store("remoteDocumentsV14"),m=(w=u,w.document?new Yt(kr.fromString(w.document.name).popFirst(5)):w.noDocument?Yt.fromSegments(w.noDocument.path):w.unknownDocument?Yt.fromSegments(w.unknownDocument.path):_n()).path.toArray();var w;const O={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(O))}).next(()=>tt.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=c2(this.It),c=new rg(E4.Bs,this.It.re);return r.W().next(u=>{const h=new Map;return u.forEach(m=>{var w;let O=null!==(w=h.get(m.userId))&&void 0!==w?w:lr();s2(this.It,m).keys().forEach($=>O=O.add($)),h.set(m.userId,O)}),tt.forEach(h,(m,w)=>{const O=new zs(w),$=$f.oe(this.It,O),ee=c.getIndexManager(O),de=Zf.oe(O,this.It,ee,c.referenceDelegate);return new eg(s,de,$,ee).recalculateAndSaveOverlaysForDocumentKeys(new Bf(t,wo.at),m).next()})})}}function S8(n){n.createObjectStore("targetDocuments",{keyPath:IC}).createIndex("documentTargetsIndex",DC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",v4,{unique:!0}),n.createObjectStore("targetGlobal")}const T8="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class x8{constructor(e,t,r,s,c,u,h,m,w,O,$=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=c,this.window=u,this.document=h,this.Js=w,this.Ys=O,this.Xs=$,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=ee=>Promise.resolve(),!x8.C())throw new Nt(pt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LC(this,s),this.ii=t+"main",this.It=new AC(m),this.ri=new B1(this.ii,this.Xs,new dD(this.It)),this.Cs=new PC(this.referenceDelegate,this.It),this.remoteDocumentCache=c2(this.It),this.Ns=new NC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===O&&cs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Nt(pt.FAILED_PRECONDITION,T8);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new wo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,yt.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,yt.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,yt.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>A8(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Bu(e))return Ot("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ot("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Jf(e).get("owner").next(t=>tt.resolve(this.mi(t)))}gi(e){return A8(e).delete(this.clientId)}yi(){var e=this;return(0,yt.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Us(r,"clientMetadata");return s.W().next(c=>{const u=e.Ii(c,18e5),h=c.filter(m=>-1===u.indexOf(m));return tt.forEach(h,m=>s.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?tt.resolve(!0):Jf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Nt(pt.FAILED_PRECONDITION,T8);return!1}}return!(!this.networkEnabled||!this.inForeground)||A8(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ot("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,yt.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Bf(t,wo.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>A8(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Zf.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new b8(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return $f.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ot("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",c=15===(u=this.Xs)?Rm:14===u?f8:13===u?km:12===u?xC:11===u?Nm:void _n();var u;let h;return this.ri.runTransaction(e,s,c,m=>(h=new Bf(m,this.Ss?this.Ss.next():wo.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw cs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Nt(pt.FAILED_PRECONDITION,q9);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Vi(e){return Jf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Nt(pt.FAILED_PRECONDITION,T8)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jf(e).put("owner",t)}static C(){return B1.C()}_i(e){const t=Jf(e);return t.get("owner").next(r=>this.mi(r)?(Ot("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):tt.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(cs(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,re.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ot("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cs("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){cs("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jf(n){return Us(n,"owner")}function A8(n){return Us(n,"clientMetadata")}function M8(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class N8{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=lr(),s=lr();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:s=s.add(c.doc.key)}return new N8(e,t.fromCache,r,s)}}class ig{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(c=>c||this.Mi(e,t,s,r)).next(c=>c||this.Oi(e,t))}ki(e,t){if(G6(t))return tt.resolve(null);let r=$o(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=u4(t,null,"F"),r=$o(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const u=lr(...c);return this.Ni.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const w=this.Fi(t,h);return this.$i(t,w,u,m.readTime)?this.ki(e,u4(t,null,"F")):this.Bi(e,w,t,m)}))})))}Mi(e,t,r,s){return G6(t)||s.isEqual(Bn.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(c=>{const u=this.Fi(t,c);return this.$i(t,u,r,s)?this.Oi(e,t):(s4()<=u1.in.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),W6(t)),this.Bi(e,u,t,Sc(s,-1)))})}Fi(e,t){let r=new ni(gs(e));return t.forEach((s,c)=>{Af(e,c)&&(r=r.add(c))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(s)>0)}Oi(e,t){return s4()<=u1.in.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",W6(t)),this.Ni.getDocumentsMatchingQuery(e,t,bo.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(c=>(t.forEach(u=>{c=c.insert(u.key,u)}),c))}}class sg{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new Xi(ir),this.qi=new Ac(c=>xc(c),Ku),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eg(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function og(n,e,t,r){return new sg(n,e,t,r)}function ag(n,e){return k8.apply(this,arguments)}function k8(){return k8=(0,yt.Z)(function*(n,e){const t=Xt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(c=>(s=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const u=[],h=[];let m=lr();for(const w of s){u.push(w.batchId);for(const O of w.mutations)m=m.add(O.key)}for(const w of c){h.push(w.batchId);for(const O of w.mutations)m=m.add(O.key)}return t.localDocuments.getDocuments(r,m).next(w=>({ji:w,removedBatchIds:u,addedBatchIds:h}))})})}),k8.apply(this,arguments)}function UC(n,e){const t=Xt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,h,m,w){const O=m.batch,$=O.keys();let ee=tt.resolve();return $.forEach(de=>{ee=ee.next(()=>w.getEntry(h,de)).next(Te=>{const st=m.docVersions.get(de);qn(null!==st),Te.version.compareTo(st)<0&&(O.applyToRemoteDocument(Te,m),Te.isValidDocument()&&(Te.setReadTime(m.commitVersion),w.addEntry(Te)))})}),ee.next(()=>u.mutationQueue.removeMutationBatch(h,O))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=lr();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function cg(n){const e=Xt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function BC(n,e){const t=Xt(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const h=[];e.targetChanges.forEach((O,$)=>{const ee=s.get($);if(!ee)return;h.push(t.Cs.removeMatchingKeys(c,O.removedDocuments,$).next(()=>t.Cs.addMatchingKeys(c,O.addedDocuments,$)));let de=ee.withSequenceNumber(c.currentSequenceNumber);var Te,st,It;e.targetMismatches.has($)?de=de.withResumeToken(Vi.EMPTY_BYTE_STRING,Bn.min()).withLastLimboFreeSnapshotVersion(Bn.min()):O.resumeToken.approximateByteSize()>0&&(de=de.withResumeToken(O.resumeToken,r)),s=s.insert($,de),st=de,It=O,(0===(Te=ee).resumeToken.approximateByteSize()||st.snapshotVersion.toMicroseconds()-Te.snapshotVersion.toMicroseconds()>=3e8||It.addedDocuments.size+It.modifiedDocuments.size+It.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(c,de))});let m=Go(),w=lr();if(e.documentUpdates.forEach(O=>{e.resolvedLimboDocuments.has(O)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(c,O))}),h.push(lg(c,u,e.documentUpdates).next(O=>{m=O.Wi,w=O.zi})),!r.isEqual(Bn.min())){const O=t.Cs.getLastRemoteSnapshotVersion(c).next($=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,r));h.push(O)}return tt.waitFor(h).next(()=>u.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,m,w)).next(()=>m)}).then(c=>(t.Ui=s,c))}function lg(n,e,t){let r=lr(),s=lr();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let u=Go();return t.forEach((h,m)=>{const w=c.get(h);m.isFoundDocument()!==w.isFoundDocument()&&(s=s.add(h)),m.isNoDocument()&&m.version.isEqual(Bn.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Ot("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),{Wi:u,zi:s}})}function jC(n,e){const t=Xt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oc(n,e){const t=Xt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(c=>c?(s=c,tt.resolve(s)):t.Cs.allocateTargetId(r).next(u=>(s=new n2(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function l2(n,e,t){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,yt.Z)(function*(n,e,t){const r=Xt(n),s=r.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Bu(u))throw u;Ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),Xf.apply(this,arguments)}function I4(n,e,t){const r=Xt(n);let s=Bn.min(),c=lr();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,w){const O=Xt(h),$=O.qi.get(w);return void 0!==$?tt.resolve(O.Ui.get($)):O.Cs.getTargetData(m,w)}(r,u,$o(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{c=m})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?s:Bn.min(),t?c:lr())).next(h=>(O8(r,am(e),h),{documents:h,Hi:c})))}function R8(n,e){const t=Xt(n),r=Xt(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",c=>r.se(c,e).next(u=>u?u.target:null))}function P8(n,e){const t=Xt(n),r=t.Ki.get(e)||Bn.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Sc(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(O8(t,e,s),s))}function O8(n,e,t){let r=Bn.min();t.forEach((s,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Ki.set(e,r)}function ug(){return ug=(0,yt.Z)(function*(n,e,t,r){const s=Xt(n);let c=lr(),u=Go();for(const w of t){const O=e.Ji(w.metadata.name);w.document&&(c=c.add(O));const $=e.Yi(w);$.setReadTime(e.Xi(w.metadata.readTime)),u=u.insert(O,$)}const h=s.Gi.newChangeBuffer({trackRemovals:!0}),m=yield Oc(s,(w=r,$o(Qu(kr.fromString(`__bundle__/docs/${w}`)))));var w;return s.persistence.runTransaction("Apply bundle documents","readwrite",w=>lg(w,h,u).next(O=>(h.apply(w),O)).next(O=>s.Cs.removeMatchingKeysForTargetId(w,m.targetId).next(()=>s.Cs.addMatchingKeys(w,c,m.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(w,O.Wi,O.zi)).next(()=>O.Wi)))}),ug.apply(this,arguments)}function GC(n,e){return e0.apply(this,arguments)}function e0(){return e0=(0,yt.Z)(function*(n,e,t=lr()){const r=yield Oc(n,$o(g8(e.bundledQuery))),s=Xt(n);return s.persistence.runTransaction("Save named query","readwrite",c=>{const u=Ss(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.Ns.saveNamedQuery(c,e);const h=r.withResumeToken(Vi.EMPTY_BYTE_STRING,u);return s.Ui=s.Ui.insert(h.targetId,h),s.Cs.updateTargetData(c,h).next(()=>s.Cs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>s.Cs.addMatchingKeys(c,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(c,e))})}),e0.apply(this,arguments)}function dg(n,e){return`firestore_clients_${n}_${e}`}function hg(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function L8(n,e){return`firestore_targets_${n}_${e}`}class su{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let c,u="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return u&&s.error&&(u="string"==typeof s.error.message&&"string"==typeof s.error.code,u&&(c=new Nt(s.error.code,s.error.message))),u?new su(e,t,s.state,c):(cs("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class D4{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Nt(r.error.code,r.error.message))),c?new D4(e,r.state,s):(cs("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class z3{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,c=Pf();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=qu(r.activeTargetIds[u]),c=c.add(r.activeTargetIds[u]);return s?new z3(e,c):(cs("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class y1{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new y1(t.clientId,t.onlineState):(cs("SharedClientState",`Failed to parse online state: ${e}`),null)}}class F8{constructor(){this.activeTargetIds=Pf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S4{constructor(e,t,r,s,c){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Xi(ir),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=dg(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new F8),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,yt.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const c=e.getItem(dg(e.persistenceKey,s));if(c){const u=z3.Zi(s,c);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(L8(this.persistenceKey,e));if(r){const s=D4.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(L8(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ot("SharedClientState","READ",e,t),t}setItem(e,t){Ot("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ot("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ot("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void cs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,yt.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(c){let u=wo.at;if(null!=c)try{const h=JSON.parse(c);qn("number"==typeof h),u=h}catch(h){cs("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);s!==wo.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Mr(r.newValue);yield Promise.all(s.map(c=>t.syncEngine.Or(c)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new su(this.currentUser,e,t,r),c=hg(this.persistenceKey,this.currentUser,e);this.setItem(c,s.tr())}Er(e){const t=hg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=L8(this.persistenceKey,e),c=new D4(e,t,r);this.setItem(s,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return z3.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return su.Zi(new zs(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return D4.Zi(s,t)}yr(e){return y1.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,yt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ot("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),c=this.Ir(r),u=[],h=[];return c.forEach(m=>{s.has(m)||u.push(m)}),s.forEach(m=>{c.has(m)||h.push(m)}),this.syncEngine.Br(u,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Pf();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class V3{constructor(){this.Lr=new F8,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new F8,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WC{qr(e){}shutdown(){}}class fg{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const qC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class t0{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class n0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,c){const u=this.ao(e,t);Ot("RestConnection","Sending: ",u,r);const h={};return this.ho(h,s,c),this.lo(e,u,h,r).then(m=>(Ot("RestConnection","Received: ",m),m),m=>{throw zu("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}fo(e,t,r,s,c,u){return this.co(e,t,r,s,c)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+i4,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,c)=>e[c]=s),r&&r.headers.forEach((s,c)=>e[c]=s)}ao(e,t){return`${this.oo}/v1/${t}:${qC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,s){return new Promise((c,u)=>{const h=new Oa;h.listenOnce(V9.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case S6.NO_ERROR:const w=h.getResponseJson();Ot("Connection","XHR received:",JSON.stringify(w)),c(w);break;case S6.TIMEOUT:Ot("Connection",'RPC "'+e+'" timed out'),u(new Nt(pt.DEADLINE_EXCEEDED,"Request time out"));break;case S6.HTTP_ERROR:const O=h.getStatus();if(Ot("Connection",'RPC "'+e+'" failed with status:',O,"response text:",h.getResponseText()),O>0){const $=h.getResponseJson().error;if($&&$.status&&$.message){const ee=function(de){const Te=de.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(Te)>=0?Te:pt.UNKNOWN}($.status);u(new Nt(ee,$.message))}else u(new Nt(pt.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Nt(pt.UNAVAILABLE,"Connection failed."));break;default:_n()}}finally{Ot("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(s);h.send(t,"POST",m,r,15)})}_o(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Z_(),u=nD(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new H9({})),this.ho(h.initMessageHeaders,t,r),(0,re.uI)()||(0,re.b$)()||(0,re.d)()||(0,re.w1)()||(0,re.Mn)()||(0,re.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=s.join("");Ot("Connection","Creating WebChannel: "+m,h);const w=c.createWebChannel(m,h);let O=!1,$=!1;const ee=new t0({Hr:Te=>{$?Ot("Connection","Not sending because WebChannel is closed:",Te):(O||(Ot("Connection","Opening WebChannel transport."),w.open(),O=!0),Ot("Connection","WebChannel sending:",Te),w.send(Te))},Jr:()=>w.close()}),de=(Te,st,It)=>{Te.listen(st,an=>{try{It(an)}catch(un){setTimeout(()=>{throw un},0)}})};return de(w,ff.EventType.OPEN,()=>{$||Ot("Connection","WebChannel transport opened.")}),de(w,ff.EventType.CLOSE,()=>{$||($=!0,Ot("Connection","WebChannel transport closed"),ee.io())}),de(w,ff.EventType.ERROR,Te=>{$||($=!0,zu("Connection","WebChannel transport errored:",Te),ee.io(new Nt(pt.UNAVAILABLE,"The operation could not be completed")))}),de(w,ff.EventType.MESSAGE,Te=>{var st;if(!$){const It=Te.data[0];qn(!!It);const an=It,un=an.error||(null===(st=an[0])||void 0===st?void 0:st.error);if(un){Ot("Connection","WebChannel received error:",un);const qt=un.status;let sn=function(Fn){const jr=Hi[Fn];if(void 0!==jr)return e8(jr)}(qt),In=un.message;void 0===sn&&(sn=pt.INTERNAL,In="Unknown error status: "+qt+" with message "+un.message),$=!0,ee.io(new Nt(sn,In)),w.close()}else Ot("Connection","WebChannel received:",It),ee.ro(It)}}),de(u,K_.STAT_EVENT,Te=>{Te.stat===T6.PROXY?Ot("Connection","Detected buffering proxy"):Te.stat===T6.NOPROXY&&Ot("Connection","Detected no buffering proxy")}),setTimeout(()=>{ee.so()},0),ee}}function pg(){return typeof window<"u"?window:null}function r0(){return typeof document<"u"?document:null}function H3(n){return new pC(n,!0)}class s0{constructor(e,t,r=1e3,s=1.5,c=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=s,this.yo=c,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,t-r);s>0&&Ot("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class o0{constructor(e,t,r,s,c,u,h,m){this.Hs=e,this.Po=r,this.vo=s,this.Vo=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new s0(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,yt.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,yt.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,yt.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pt.RESOURCE_EXHAUSTED?(cs(t.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===pt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Nt(pt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,yt.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mg extends o0{constructor(e,t,r,s,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.It=c}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function gC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:_n(),s=e.targetChange.targetIds||[],c=function(m,w){return m.gt?(qn(void 0===w||"string"==typeof w),Vi.fromBase64String(w||"")):(qn(void 0===w||w instanceof Uint8Array),Vi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const w=void 0===m.code?pt.UNKNOWN:e8(m.code);return new Nt(w,m.message||"")}(u);t=new _m(r,s,c,h||null)}else if("documentChange"in e){const r=e.documentChange,s=Z1(n,r.document.name),c=Ss(r.document.updateTime),u=new no({mapValue:{fields:r.document.fields}}),h=ri.newFoundDocument(s,c,u);t=new Of(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,s=Z1(n,r.document),c=r.readTime?Ss(r.readTime):Bn.min(),u=ri.newNoDocument(s,c);t=new Of([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,s=Z1(n,r.document);t=new Of([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return _n();{const r=e.filter,c=new gm(r.count||0);t=new ym(r.targetId,c)}}var m;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return Bn.min();const c=s.targetChange;return c.targetIds&&c.targetIds.length?Bn.min():c.readTime?Ss(c.readTime):Bn.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=x3(this.It),t.addTarget=function(s,c){let u;const h=c.target;return u=bf(h)?{documents:vC(s,h)}:{query:c8(s,h)},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?u.resumeToken=Em(s,c.resumeToken):c.snapshotVersion.compareTo(Bn.min())>0&&(u.readTime=m4(s,c.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function lD(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _n()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=x3(this.It),t.removeTarget=e,this.Bo(t)}}class ZC extends o0{constructor(e,t,r,s,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.It=c,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(qn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function a8(n,e){return n&&n.length>0?(qn(void 0!==e),n.map(t=>function(r,s){let c=Ss(r.updateTime?r.updateTime:s);return c.isEqual(Bn.min())&&(c=Ss(s)),new aC(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ss(e.commitTime);return this.listener.Zo(r,t)}return qn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=x3(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Mc(this.It,r))};this.Bo(t)}}class KC extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Nt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.Vo.co(e,t,r,s,c)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Nt(pt.UNKNOWN,s.toString())})}fo(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.Vo.fo(e,t,r,c,u,s)).catch(c=>{throw"FirebaseError"===c.name?(c.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Nt(pt.UNKNOWN,c.toString())})}terminate(){this.nu=!0}}class hD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(cs(t),this.ou=!1):Ot("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class z8{constructor(e,t,r,s,c){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=c,this.mu.qr(h=>{r.enqueueAndForget((0,yt.Z)(function*(){var m;wl(u)&&(Ot("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,yt.Z)(function*(w){const O=Xt(w);O._u.add(4),yield ou(O),O.gu.set("Unknown"),O._u.delete(4),yield u2(O)}),function(w){return m.apply(this,arguments)})(u))}))}),this.gu=new hD(r,s)}}function u2(n){return a0.apply(this,arguments)}function a0(){return a0=(0,yt.Z)(function*(n){if(wl(n))for(const e of n.wu)yield e(!0)}),a0.apply(this,arguments)}function ou(n){return T4.apply(this,arguments)}function T4(){return T4=(0,yt.Z)(function*(n){for(const e of n.wu)yield e(!1)}),T4.apply(this,arguments)}function c0(n,e){const t=Xt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),A4(t)?l0(t):f2(t).ko()&&V8(t,e))}function x4(n,e){const t=Xt(n),r=f2(t);t.du.delete(e),r.ko()&&gg(t,e),0===t.du.size&&(r.ko()?r.Fo():wl(t)&&t.gu.set("Unknown"))}function V8(n,e){n.yu.Ot(e.targetId),f2(n).zo(e)}function gg(n,e){n.yu.Ot(e),f2(n).Ho(e)}function l0(n){n.yu=new dC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),f2(n).start(),n.gu.uu()}function A4(n){return wl(n)&&!f2(n).No()&&n.du.size>0}function wl(n){return 0===Xt(n)._u.size}function vg(n){n.yu=void 0}function yg(n){return u0.apply(this,arguments)}function u0(){return u0=(0,yt.Z)(function*(n){n.du.forEach((e,t)=>{V8(n,e)})}),u0.apply(this,arguments)}function YC(n,e){return d0.apply(this,arguments)}function d0(){return d0=(0,yt.Z)(function*(n,e){vg(n),A4(n)?(n.gu.hu(e),l0(n)):n.gu.set("Unknown")}),d0.apply(this,arguments)}function _g(n,e,t){return H8.apply(this,arguments)}function H8(){return H8=(0,yt.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof _m&&2===e.state&&e.cause)try{yield(r=(0,yt.Z)(function*(s,c){const u=c.cause;for(const h of c.targetIds)s.du.has(h)&&(yield s.remoteSyncer.rejectListen(h,u),s.du.delete(h),s.yu.removeTarget(h))}),function(s,c){return r.apply(this,arguments)})(n,e)}catch(r){Ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield M4(n,r)}else if(e instanceof Of?n.yu.Gt(e):e instanceof ym?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Bn.min()))try{const r=yield cg(n.localStore);t.compareTo(r)>=0&&(yield function(s,c){const u=s.yu.te(c);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const w=s.du.get(m);w&&s.du.set(m,w.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach(h=>{const m=s.du.get(h);if(!m)return;s.du.set(h,m.withResumeToken(Vi.EMPTY_BYTE_STRING,m.snapshotVersion)),gg(s,h);const w=new n2(m.target,h,1,m.sequenceNumber);V8(s,w)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ot("RemoteStore","Failed to raise snapshot:",r),yield M4(n,r)}var r}),H8.apply(this,arguments)}function M4(n,e,t){return U8.apply(this,arguments)}function U8(){return U8=(0,yt.Z)(function*(n,e,t){if(!Bu(e))throw e;n._u.add(1),yield ou(n),n.gu.set("Offline"),t||(t=()=>cg(n.localStore)),n.asyncQueue.enqueueRetryable((0,yt.Z)(function*(){Ot("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield u2(n)}))}),U8.apply(this,arguments)}function Io(n,e){return e().catch(t=>M4(n,t,e))}function Y1(n){return B8.apply(this,arguments)}function B8(){return B8=(0,yt.Z)(function*(n){const e=Xt(n),t=Q1(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;QC(e);)try{const s=yield jC(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,fD(e,s)}catch(s){yield M4(e,s)}JC(e)&&j8(e)}),B8.apply(this,arguments)}function QC(n){return wl(n)&&n.fu.length<10}function fD(n,e){n.fu.push(e);const t=Q1(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function JC(n){return wl(n)&&!Q1(n).No()&&n.fu.length>0}function j8(n){Q1(n).start()}function Cg(n){return d2.apply(this,arguments)}function d2(){return d2=(0,yt.Z)(function*(n){Q1(n).eu()}),d2.apply(this,arguments)}function XC(n){return N4.apply(this,arguments)}function N4(){return N4=(0,yt.Z)(function*(n){const e=Q1(n);for(const t of n.fu)e.Xo(t.mutations)}),N4.apply(this,arguments)}function eb(n,e,t){return h0.apply(this,arguments)}function h0(){return h0=(0,yt.Z)(function*(n,e,t){const r=n.fu.shift(),s=p8.from(r,e,t);yield Io(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Y1(n)}),h0.apply(this,arguments)}function tb(n,e){return $8.apply(this,arguments)}function $8(){return $8=(0,yt.Z)(function*(n,e){var t;e&&Q1(n).Yo&&(yield(t=(0,yt.Z)(function*(r,s){if(X6(c=s.code)&&c!==pt.ABORTED){const u=r.fu.shift();Q1(r).Oo(),yield Io(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,s)),yield Y1(r)}var c}),function(r,s){return t.apply(this,arguments)})(n,e)),JC(n)&&j8(n)}),$8.apply(this,arguments)}function h2(n,e){return G8.apply(this,arguments)}function G8(){return G8=(0,yt.Z)(function*(n,e){const t=Xt(n);t.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const r=wl(t);t._u.add(3),yield ou(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield u2(t)}),G8.apply(this,arguments)}function k4(n,e){return f0.apply(this,arguments)}function f0(){return f0=(0,yt.Z)(function*(n,e){const t=Xt(n);e?(t._u.delete(2),yield u2(t)):e||(t._u.add(2),yield ou(t),t.gu.set("Unknown"))}),f0.apply(this,arguments)}function f2(n){return n.pu||(n.pu=function(e,t,r){const s=Xt(e);return s.su(),new mg(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:yg.bind(null,n),Zr:YC.bind(null,n),Wo:_g.bind(null,n)}),n.wu.push(function(){var e=(0,yt.Z)(function*(t){t?(n.pu.Oo(),A4(n)?l0(n):n.gu.set("Unknown")):(yield n.pu.stop(),vg(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Q1(n){return n.Iu||(n.Iu=function(e,t,r){const s=Xt(e);return s.su(),new ZC(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:Cg.bind(null,n),Zr:tb.bind(null,n),tu:XC.bind(null,n),Zo:eb.bind(null,n)}),n.wu.push(function(){var e=(0,yt.Z)(function*(t){t?(n.Iu.Oo(),yield Y1(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ot("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class R4{constructor(e,t,r,s,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=c,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,s,c){const u=Date.now()+r,h=new R4(e,t,u,s,c);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function P4(n,e){if(cs("AsyncQueue",`${e}: ${n}`),Bu(n))return new Nt(pt.UNAVAILABLE,`${e}: ${n}`);throw n}class p2{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Yt.comparator(t.key,r.key):(t,r)=>Yt.comparator(t.key,r.key),this.keyedMap=D3(),this.sortedSet=new Xi(this.comparator)}static emptySet(e){return new p2(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof p2)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(!s.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new p2;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bg{constructor(){this.Tu=new Xi(Yt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):_n():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class m2{constructor(e,t,r,s,c,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,s){const c=[];return t.forEach(u=>{c.push({type:0,doc:u})}),new m2(e,t,p2.emptySet(t),c,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class U3{constructor(){this.Au=void 0,this.listeners=[]}}class nb{constructor(){this.queries=new Ac(e=>om(e),xf),this.onlineState="Unknown",this.Ru=new Set}}function p0(n,e){return O4.apply(this,arguments)}function O4(){return O4=(0,yt.Z)(function*(n,e){const t=Xt(n),r=e.query;let s=!1,c=t.queries.get(r);if(c||(s=!0,c=new U3),s)try{c.Au=yield t.onListen(r)}catch(u){const h=P4(u,`Initialization of query '${W6(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,c),c.listeners.push(e),e.bu(t.onlineState),c.Au&&e.Pu(c.Au)&&q8(t)}),O4.apply(this,arguments)}function wg(n,e){return W8.apply(this,arguments)}function W8(){return W8=(0,yt.Z)(function*(n,e){const t=Xt(n),r=e.query;let s=!1;const c=t.queries.get(r);if(c){const u=c.listeners.indexOf(e);u>=0&&(c.listeners.splice(u,1),s=0===c.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),W8.apply(this,arguments)}function pD(n,e){const t=Xt(n);let r=!1;for(const s of e){const u=t.queries.get(s.query);if(u){for(const h of u.listeners)h.Pu(s)&&(r=!0);u.Au=s}}r&&q8(t)}function rb(n,e,t){const r=Xt(n),s=r.queries.get(e);if(s)for(const c of s.listeners)c.onError(t);r.queries.delete(e)}function q8(n){n.Ru.forEach(e=>{e.next()})}class Z8{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new m2(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=m2.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class Eg{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class K8{constructor(e){this.It=e}Ji(e){return Z1(this.It,e)}Yi(e){return e.metadata.exists?ru(this.It,e.document,!1):ri.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ss(e)}}class ib{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Y8(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=kr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new K8(this.It);for(const s of e)if(s.metadata.queries){const c=r.Ji(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||lr()).add(c);t.set(u,h)}}return t}complete(){var e=this;return(0,yt.Z)(function*(){const t=yield function $C(n,e,t,r){return ug.apply(this,arguments)}(e.localStore,new K8(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const s of e.queries)yield GC(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Y8(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Q8{constructor(e){this.key=e}}class Ig{constructor(e){this.key=e}}class Dg{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=lr(),this.mutatedKeys=lr(),this.Ku=gs(e),this.Gu=new p2(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new bg,s=t?t.Gu:this.Gu;let c=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const m="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,w="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((O,$)=>{const ee=s.get(O),de=Af(this.query,$)?$:null,Te=!!ee&&this.mutatedKeys.has(ee.key),st=!!de&&(de.hasLocalMutations||this.mutatedKeys.has(de.key)&&de.hasCommittedMutations);let It=!1;ee&&de?ee.data.isEqual(de.data)?Te!==st&&(r.track({type:3,doc:de}),It=!0):this.zu(ee,de)||(r.track({type:2,doc:de}),It=!0,(m&&this.Ku(de,m)>0||w&&this.Ku(de,w)<0)&&(h=!0)):!ee&&de?(r.track({type:0,doc:de}),It=!0):ee&&!de&&(r.track({type:1,doc:ee}),It=!0,(m||w)&&(h=!0)),It&&(de?(u=u.add(de),c=st?c.add(O):c.delete(O)):(u=u.delete(O),c=c.delete(O)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const O="F"===this.query.limitType?u.last():u.first();u=u.delete(O.key),c=c.delete(O.key),r.track({type:1,doc:O})}return{Gu:u,Wu:r,$i:h,mutatedKeys:c}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const c=e.Wu.Eu();c.sort((w,O)=>function($,ee){const de=Te=>{switch(Te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _n()}};return de($)-de(ee)}(w.type,O.type)||this.Ku(w.doc,O.doc)),this.Hu(r);const u=t?this.Ju():[],h=0===this.qu.size&&this.current?1:0,m=h!==this.Uu;return this.Uu=h,0!==c.length||m?{snapshot:new m2(this.query,e.Gu,s,c,e.mutatedKeys,0===h,m,!1),Yu:u}:{Yu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new bg,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=lr(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new Ig(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new Q8(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=lr();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return m2.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Sg{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sb{constructor(e){this.key=e,this.ec=!1}}class Tg{constructor(e,t,r,s,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new Ac(h=>om(h),xf),this.ic=new Map,this.rc=new Set,this.oc=new Xi(Yt.comparator),this.uc=new Map,this.cc=new Qf,this.ac={},this.hc=new Map,this.lc=iu.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function xg(n,e){return m0.apply(this,arguments)}function m0(){return m0=(0,yt.Z)(function*(n,e){const t=Wo(n);let r,s;const c=t.sc.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),s=c.view.tc();else{const u=yield Oc(t.localStore,$o(e));t.isPrimaryClient&&c0(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,s=yield g0(t,e,r,"current"===h)}return s}),m0.apply(this,arguments)}function g0(n,e,t,r){return J8.apply(this,arguments)}function J8(){return J8=(0,yt.Z)(function*(n,e,t,r){n.dc=(O,$,ee)=>{return(de=(0,yt.Z)(function*(Te,st,It,an){let un=st.view.ju(It);un.$i&&(un=yield I4(Te.localStore,st.query,!1).then(({documents:In})=>st.view.ju(In,un)));const qt=an&&an.targetChanges.get(st.targetId),sn=st.view.applyChanges(un,Te.isPrimaryClient,qt);return b0(Te,st.targetId,sn.Yu),sn.snapshot}),function(Te,st,It,an){return de.apply(this,arguments)})(n,O,$,ee);var de};const s=yield I4(n.localStore,e,!0),c=new Dg(e,s.Hi),u=c.ju(s.documents),h=p4.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=c.applyChanges(u,n.isPrimaryClient,h);b0(n,t,m.Yu);const w=new Sg(e,t,c);return n.sc.set(e,w),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),m.snapshot}),J8.apply(this,arguments)}function ob(n,e){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,yt.Z)(function*(n,e){const t=Xt(n),r=t.sc.get(e),s=t.ic.get(r.targetId);if(s.length>1)return t.ic.set(r.targetId,s.filter(c=>!xf(c,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield l2(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),x4(t.remoteStore,r.targetId),L4(t,r.targetId)}).catch(ml))):(L4(t,r.targetId),yield l2(t.localStore,r.targetId,!0))}),Ag.apply(this,arguments)}function Ng(){return Ng=(0,yt.Z)(function*(n,e,t){const r=s7(n);try{const s=yield function(c,u){const h=Xt(c),m=xi.now(),w=u.reduce((ee,de)=>ee.add(de.key),lr());let O,$;return h.persistence.runTransaction("Locally write mutations","readwrite",ee=>{let de=Go(),Te=lr();return h.Gi.getEntries(ee,w).next(st=>{de=st,de.forEach((It,an)=>{an.isValidDocument()||(Te=Te.add(It))})}).next(()=>h.localDocuments.getOverlayedDocuments(ee,de)).next(st=>{O=st;const It=[];for(const an of u){const un=cC(an,O.get(an.key).overlayedDocument);null!=un&&It.push(new W1(an.key,un,V6(un.value.mapValue),Ur.exists(!0)))}return h.mutationQueue.addMutationBatch(ee,m,It,u)}).next(st=>{$=st;const It=st.applyToLocalDocumentSet(O,Te);return h.documentOverlayCache.saveOverlays(ee,st.batchId,It)})}).then(()=>({batchId:$.batchId,changes:n8(O)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let m=c.ac[c.currentUser.toKey()];m||(m=new Xi(ir)),m=m.insert(u,h),c.ac[c.currentUser.toKey()]=m}(r,s.batchId,t),yield au(r,s.changes),yield Y1(r.remoteStore)}catch(s){const c=P4(s,"Failed to persist write");t.reject(c)}}),Ng.apply(this,arguments)}function ab(n,e){return kg.apply(this,arguments)}function kg(){return kg=(0,yt.Z)(function*(n,e){const t=Xt(n);try{const r=yield BC(t.localStore,e);e.targetChanges.forEach((s,c)=>{const u=t.uc.get(c);u&&(qn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.ec=!0:s.modifiedDocuments.size>0?qn(u.ec):s.removedDocuments.size>0&&(qn(u.ec),u.ec=!1))}),yield au(t,r,e)}catch(r){yield ml(r)}}),kg.apply(this,arguments)}function cb(n,e,t){const r=Xt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.sc.forEach((c,u)=>{const h=u.view.bu(e);h.snapshot&&s.push(h.snapshot)}),function(c,u){const h=Xt(c);h.onlineState=u;let m=!1;h.queries.forEach((w,O)=>{for(const $ of O.listeners)$.bu(u)&&(m=!0)}),m&&q8(h)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mD(n,e,t){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,yt.Z)(function*(n,e,t){const r=Xt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.uc.get(e),c=s&&s.key;if(c){let u=new Xi(Yt.comparator);u=u.insert(c,ri.newNoDocument(c,Bn.min()));const h=lr().add(c),m=new f4(Bn.min(),new Map,new ni(ir),u,h);yield ab(r,m),r.oc=r.oc.remove(c),r.uc.delete(e),w0(r)}else yield l2(r.localStore,e,!1).then(()=>L4(r,e,t)).catch(ml)}),Rg.apply(this,arguments)}function gD(n,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,yt.Z)(function*(n,e){const t=Xt(n),r=e.batch.batchId;try{const s=yield UC(t.localStore,e);_0(t,r,null),y0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield au(t,s)}catch(s){yield ml(s)}}),Pg.apply(this,arguments)}function v0(n,e,t){return Og.apply(this,arguments)}function Og(){return Og=(0,yt.Z)(function*(n,e,t){const r=Xt(n);try{const s=yield function(c,u){const h=Xt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return h.mutationQueue.lookupMutationBatch(m,u).next(O=>(qn(null!==O),w=O.keys(),h.mutationQueue.removeMutationBatch(m,O))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,w,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>h.localDocuments.getDocuments(m,w))})}(r.localStore,e);_0(r,e,t),y0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield au(r,s)}catch(s){yield ml(s)}}),Og.apply(this,arguments)}function B3(){return B3=(0,yt.Z)(function*(n,e){const t=Xt(n);wl(t.remoteStore)||Ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const u=Xt(c);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const s=t.hc.get(r)||[];s.push(e),t.hc.set(r,s)}catch(r){const s=P4(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),B3.apply(this,arguments)}function y0(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function _0(n,e,t){const r=Xt(n);let s=r.ac[r.currentUser.toKey()];if(s){const c=s.get(e);c&&(t?c.reject(t):c.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function L4(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||C0(n,r)})}function C0(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(x4(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),w0(n))}function b0(n,e,t){for(const r of t)r instanceof Q8?(n.cc.addReference(r.key,e),lb(n,r)):r instanceof Ig?(Ot("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||C0(n,r.key)):_n()}function lb(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Ot("SyncEngine","New document in limbo: "+t),n.rc.add(r),w0(n))}function w0(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Yt(kr.fromString(e)),r=n.lc.next();n.uc.set(r,new sb(t)),n.oc=n.oc.insert(t,r),c0(n.remoteStore,new n2($o(Qu(t.path)),r,2,wo.at))}}function au(n,e,t){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,yt.Z)(function*(n,e,t){const r=Xt(n),s=[],c=[],u=[];var h;r.sc.isEmpty()||(r.sc.forEach((h,m)=>{u.push(r.dc(m,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,w.fromCache?"not-current":"current"),s.push(w);const O=N8.Ci(m.targetId,w);c.push(O)}}))}),yield Promise.all(u),r.nc.Wo(s),yield(h=(0,yt.Z)(function*(m,w){const O=Xt(m);try{yield O.persistence.runTransaction("notifyLocalViewChanges","readwrite",$=>tt.forEach(w,ee=>tt.forEach(ee.Si,de=>O.persistence.referenceDelegate.addReference($,ee.targetId,de)).next(()=>tt.forEach(ee.Di,de=>O.persistence.referenceDelegate.removeReference($,ee.targetId,de)))))}catch($){if(!Bu($))throw $;Ot("LocalStore","Failed to update sequence numbers: "+$)}for(const $ of w){const ee=$.targetId;if(!$.fromCache){const de=O.Ui.get(ee),st=de.withLastLimboFreeSnapshotVersion(de.snapshotVersion);O.Ui=O.Ui.insert(ee,st)}}}),function(m,w){return h.apply(this,arguments)})(r.localStore,c))}),Fg.apply(this,arguments)}function ub(n,e){return X8.apply(this,arguments)}function X8(){return X8=(0,yt.Z)(function*(n,e){const t=Xt(n);if(!t.currentUser.isEqual(e)){Ot("SyncEngine","User change. New user:",e.toKey());const r=yield ag(t.localStore,e);t.currentUser=e,(s=t).hc.forEach(u=>{u.forEach(h=>{h.reject(new Nt(pt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield au(t,r.ji)}var s}),X8.apply(this,arguments)}function E0(n,e){const t=Xt(n),r=t.uc.get(e);if(r&&r.ec)return lr().add(r.key);{let s=lr();const c=t.ic.get(e);if(!c)return s;for(const u of c){const h=t.sc.get(u);s=s.unionWith(h.view.Qu)}return s}}function db(n,e){return zg.apply(this,arguments)}function zg(){return zg=(0,yt.Z)(function*(n,e){const t=Xt(n),r=yield I4(t.localStore,e.query,!0),s=e.view.Zu(r);return t.isPrimaryClient&&b0(t,e.targetId,s.Yu),s}),zg.apply(this,arguments)}function vD(n,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,yt.Z)(function*(n,e){const t=Xt(n);return P8(t.localStore,e).then(r=>au(t,r))}),Vg.apply(this,arguments)}function hb(n,e,t,r){return e7.apply(this,arguments)}function e7(){return e7=(0,yt.Z)(function*(n,e,t,r){const s=Xt(n),c=yield function(u,h){const m=Xt(u),w=Xt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",O=>w.Tn(O,h).next($=>$?m.localDocuments.getDocuments(O,$):tt.resolve(null)))}(s.localStore,e);var h;null!==c?("pending"===t?yield Y1(s.remoteStore):"acknowledged"===t||"rejected"===t?(_0(s,e,r||null),y0(s,e),h=e,Xt(Xt(s.localStore).mutationQueue).An(h)):_n(),yield au(s,c)):Ot("SyncEngine","Cannot apply mutation batch with id: "+e)}),e7.apply(this,arguments)}function Hg(){return Hg=(0,yt.Z)(function*(n,e){const t=Xt(n);if(Wo(t),s7(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield Ug(t,r.toArray());t.fc=!0,yield k4(t.remoteStore,!0);for(const c of s)c0(t.remoteStore,c)}else if(!1===e&&!1!==t.fc){const r=[];let s=Promise.resolve();t.ic.forEach((c,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(L4(t,u),l2(t.localStore,u,!0))),x4(t.remoteStore,u)}),yield s,yield Ug(t,r),function(c){const u=Xt(c);u.uc.forEach((h,m)=>{x4(u.remoteStore,m)}),u.cc.fs(),u.uc=new Map,u.oc=new Xi(Yt.comparator)}(t),t.fc=!1,yield k4(t.remoteStore,!1)}}),Hg.apply(this,arguments)}function Ug(n,e,t){return I0.apply(this,arguments)}function I0(){return I0=(0,yt.Z)(function*(n,e,t){const r=Xt(n),s=[],c=[];for(const u of e){let h;const m=r.ic.get(u);if(m&&0!==m.length){h=yield Oc(r.localStore,$o(m[0]));for(const w of m){const O=r.sc.get(w),$=yield db(r,O);$.snapshot&&c.push($.snapshot)}}else{const w=yield R8(r.localStore,u);h=yield Oc(r.localStore,w),yield g0(r,t7(w),u,!1)}s.push(h)}return r.nc.Wo(c),s}),I0.apply(this,arguments)}function t7(n){return If(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yD(n){const e=Xt(n);return Xt(Xt(e.localStore).persistence).vi()}function J1(n,e,t,r){return n7.apply(this,arguments)}function n7(){return n7=(0,yt.Z)(function*(n,e,t,r){const s=Xt(n);if(s.fc)return void Ot("SyncEngine","Ignoring unexpected query state notification.");const c=s.ic.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const u=yield P8(s.localStore,am(c[0])),h=f4.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield au(s,u,h);break}case"rejected":yield l2(s.localStore,e,!0),L4(s,e,r);break;default:_n()}}),n7.apply(this,arguments)}function r7(n,e,t){return i7.apply(this,arguments)}function i7(){return i7=(0,yt.Z)(function*(n,e,t){const r=Wo(n);if(r.fc){for(const s of e){if(r.ic.has(s)){Ot("SyncEngine","Adding an already active target "+s);continue}const c=yield R8(r.localStore,s),u=yield Oc(r.localStore,c);yield g0(r,t7(c),u.targetId,!1),c0(r.remoteStore,u)}for(const s of t)r.ic.has(s)&&(yield l2(r.localStore,s,!1).then(()=>{x4(r.remoteStore,s),L4(r,s)}).catch(ml))}}),i7.apply(this,arguments)}function Wo(n){const e=Xt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ab.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mD.bind(null,e),e.nc.Wo=pD.bind(null,e.eventManager),e.nc._c=rb.bind(null,e.eventManager),e}function s7(n){const e=Xt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v0.bind(null,e),e}class Bg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,yt.Z)(function*(){t.It=H3(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return og(this.persistence,new ig,e.initialUser,this.It)}gc(e){return new rg(E4.Bs,this.It)}mc(e){return new V3}terminate(){var e=this;return(0,yt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jg extends Bg{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,yt.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield s7(r.Ec.syncEngine),yield Y1(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return og(this.persistence,new ig,e.initialUser,this.It)}Ic(e,t){return new E8(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new K9(t,this.persistence);return new aD(e.asyncQueue,r)}gc(e){const t=M8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fa.withCacheSize(this.cacheSizeBytes):fa.DEFAULT;return new x8(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pg(),r0(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new V3}}class a7 extends jg{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,yt.Z)(function*(){yield t().call(r,e);const s=r.Ec.syncEngine;r.sharedClientState instanceof S4&&(r.sharedClientState.syncEngine={Fr:hb.bind(null,s),$r:J1.bind(null,s),Br:r7.bind(null,s),vi:yD.bind(null,s),Or:vD.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var c=(0,yt.Z)(function*(u){yield function fb(n,e){return Hg.apply(this,arguments)}(r.Ec.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return c.apply(this,arguments)}}())})()}mc(e){const t=pg();if(!S4.C(t))throw new Nt(pt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=M8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new S4(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class D0{initialize(e,t){var r=this;return(0,yt.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>cb(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=ub.bind(null,r.syncEngine),yield k4(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new nb}createDatastore(e){const t=H3(e.databaseInfo.databaseId),r=new n0(e.databaseInfo);return new KC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,c=h=>cb(this.syncEngine,h,0),u=fg.C()?new fg:new WC,new z8(t,r,s,c,u);var t,r,s,c,u}createSyncEngine(e,t){return function(r,s,c,u,h,m,w){const O=new Tg(r,s,c,u,h,m);return w&&(O.fc=!0),O}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,yt.Z)(function*(t){const r=Xt(t);Ot("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield ou(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function c7(n,e=10240){let t=0;return{read:()=>(0,yt.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,yt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class S0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $g{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Vs,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,yt.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,yt.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,yt.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),s=Number(r);isNaN(s)&&e.Sc(`length string (${r}) is not valid number`);const c=yield e.Dc(s);return new Eg(JSON.parse(c),t.length+s)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,yt.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,yt.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,yt.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Gg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,yt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Nt(pt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,yt.Z)(function*(c,u){const h=Xt(c),m=x3(h.It)+"/documents",w={documents:u.map(de=>T3(h.It,de))},O=yield h.fo("BatchGetDocuments",m,w,u.length),$=new Map;O.forEach(de=>{const Te=function mC(n,e){return"found"in e?function(t,r){qn(!!r.found);const s=Z1(t,r.found.name),c=Ss(r.found.updateTime),u=new no({mapValue:{fields:r.found.fields}});return ri.newFoundDocument(s,c,u)}(n,e):"missing"in e?function(t,r){qn(!!r.missing),qn(!!r.readTime);const s=Z1(t,r.missing),c=Ss(r.readTime);return ri.newNoDocument(s,c)}(n,e):_n()}(h.It,de);$.set(Te.key.toString(),Te)});const ee=[];return u.forEach(de=>{const Te=$.get(de.toString());qn(!!Te),ee.push(Te)}),ee}),function(c,u){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new I3(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,yt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const c=Yt.fromPath(s);e.mutations.push(new kf(c,e.precondition(c)))}),yield(r=(0,yt.Z)(function*(s,c){const u=Xt(s),h=x3(u.It)+"/documents",m={writes:c.map(w=>Mc(u.It,w))};yield u.co("Commit",h,m)}),function(s,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _n();t=Bn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Nt(pt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Bn.min())?Ur.exists(!1):Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bn.min()))throw new Nt(pt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pb{constructor(e,t,r,s,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=c,this.Nc=r.maxAttempts,this.xo=new s0(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,yt.Z)(function*(){const t=new Gg(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(c=>{e.Oc(c)}))}).catch(s=>{e.Oc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Eo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!X6(t)}return!1}}class Wg{constructor(e,t,r,s){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=zs.UNAUTHENTICATED,this.clientId=$9.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,yt.Z)(function*(h){Ot("FirestoreClient","Received user=",h.uid),yield c.authCredentialListener(h),c.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ot("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,yt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Nt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,yt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=P4(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function qg(n,e){return F4.apply(this,arguments)}function F4(){return F4=(0,yt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,yt.Z)(function*(c){r.isEqual(c)||(yield ag(e.localStore,c),r=c)});return function(c){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),F4.apply(this,arguments)}function El(n,e){return T0.apply(this,arguments)}function T0(){return T0=(0,yt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield z4(n);Ot("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>h2(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,c)=>h2(e.remoteStore,c)),n.onlineComponents=e}),T0.apply(this,arguments)}function z4(n){return X1.apply(this,arguments)}function X1(){return X1=(0,yt.Z)(function*(n){return n.offlineComponents||(Ot("FirestoreClient","Using default OfflineComponentProvider"),yield qg(n,new Bg)),n.offlineComponents}),X1.apply(this,arguments)}function x0(n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,yt.Z)(function*(n){return n.onlineComponents||(Ot("FirestoreClient","Using default OnlineComponentProvider"),yield El(n,new D0)),n.onlineComponents}),Zg.apply(this,arguments)}function Kg(n){return z4(n).then(e=>e.persistence)}function A0(n){return z4(n).then(e=>e.localStore)}function Yg(n){return x0(n).then(e=>e.remoteStore)}function l7(n){return x0(n).then(e=>e.syncEngine)}function g2(n){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,yt.Z)(function*(n){const e=yield x0(n),t=e.eventManager;return t.onListen=xg.bind(null,e.syncEngine),t.onUnlisten=ob.bind(null,e.syncEngine),t}),Qg.apply(this,arguments)}function gb(n,e,t={}){const r=new Vs;return n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return function(s,c,u,h,m){const w=new S0({next:$=>{c.enqueueAndForget(()=>wg(s,O));const ee=$.docs.has(u);!ee&&$.fromCache?m.reject(new Nt(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):ee&&$.fromCache&&h&&"server"===h.source?m.reject(new Nt(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve($)},error:$=>m.reject($)}),O=new Z8(Qu(u.path),w,{includeMetadataChanges:!0,Nu:!0});return p0(s,O)}(yield g2(n),n.asyncQueue,e,t,r)})),r.promise}function d7(n,e,t={}){const r=new Vs;return n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return function(s,c,u,h,m){const w=new S0({next:$=>{c.enqueueAndForget(()=>wg(s,O)),$.fromCache&&"server"===h.source?m.reject(new Nt(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve($)},error:$=>m.reject($)}),O=new Z8(u,w,{includeMetadataChanges:!0,Nu:!0});return p0(s,O)}(yield g2(n),n.asyncQueue,e,t,r)})),r.promise}const V4=new Map;function j3(n,e,t){if(!t)throw new Nt(pt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function h7(n,e,t,r){if(!0===e&&!0===r)throw new Nt(pt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rv(n){if(!Yt.isDocumentKey(n))throw new Nt(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f7(n){if(Yt.isDocumentKey(n))throw new Nt(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function H4(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_n()}function Rr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Nt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=H4(n);throw new Nt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function iv(n,e){if(e<=0)throw new Nt(pt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Nt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Nt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,h7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class M0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Nt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Nt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new A6;switch(t.type){case"gapi":return new B9(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Nt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=V4.get(e);t&&(Ot("ComponentProvider","Removing Datastore"),V4.delete(e),t.terminate())}(this),Promise.resolve()}}class gi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gi(this.firestore,e,this._key)}}class Do{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Do(this.firestore,e,this._query)}}class Lc extends Do{constructor(e,t,r){super(e,t,Qu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gi(this.firestore,null,new Yt(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function _b(n,e,...t){if(n=(0,re.m9)(n),j3("collection","path",e),n instanceof M0){const r=kr.fromString(e,...t);return f7(r),new Lc(n,null,r)}{if(!(n instanceof gi||n instanceof Lc))throw new Nt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kr.fromString(e,...t));return f7(r),new Lc(n.firestore,null,r)}}function p7(n,e,...t){if(n=(0,re.m9)(n),1===arguments.length&&(e=$9.R()),j3("doc","path",e),n instanceof M0){const r=kr.fromString(e,...t);return rv(r),new gi(n,null,new Yt(r))}{if(!(n instanceof gi||n instanceof Lc))throw new Nt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kr.fromString(e,...t));return rv(r),new gi(n.firestore,n instanceof Lc?n.converter:null,new Yt(r))}}function Cb(n,e){return n=(0,re.m9)(n),e=(0,re.m9)(e),(n instanceof gi||n instanceof Lc)&&(e instanceof gi||e instanceof Lc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bb(n,e){return n=(0,re.m9)(n),e=(0,re.m9)(e),n instanceof Do&&e instanceof Do&&n.firestore===e.firestore&&xf(n._query,e._query)&&n.converter===e.converter}class wb{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new s0(this,"async_queue_retry"),this.jc=()=>{const t=r0();t&&Ot("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=r0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=r0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Vs;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,yt.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Bu(t))throw t;Ot("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,cs("INTERNAL UNHANDLED ERROR: ",function(c){let u=c.message||"";return c.stack&&(u=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),u}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const s=R4.createAndSchedule(this,e,t,r,c=>this.Jc(c));return this.Uc.push(s),s}Wc(){this.qc&&_n()}verifyOperationInProgress(){}Yc(){var e=this;return(0,yt.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function $3(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Eb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vi extends M0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new wb,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||N0(this),this._firestoreClient.terminate()}}function es(n){return n._firestoreClient||N0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function N0(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Gu(n._databaseId,c,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var c,h;n._firestoreClient=new Wg(n._authCredentials,n._appCheckCredentials,n._queue,r)}function k0(n,e,t){const r=new Vs;return n.asyncQueue.enqueue((0,yt.Z)(function*(){try{yield qg(n,t),yield El(n,e),r.resolve()}catch(s){const c=s;if(!("FirebaseError"===(u=c).name?u.code===pt.FAILED_PRECONDITION||u.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw c;zu("Error enabling offline persistence. Falling back to persistence disabled: "+c),r.reject(c)}var u})).then(()=>r.promise)}function av(n){if(n._initialized||n._terminated)throw new Nt(pt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Il{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Nt(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ec(Vi.fromBase64String(e))}catch(t){throw new Nt(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ec(Vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cu{constructor(e){this._methodName=e}}class U4{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Nt(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Nt(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ir(this._lat,e._lat)||ir(this._long,e._long)}}const xb=/^__.*__$/;class Ab{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new W1(e,this.data,this.fieldMask,t,this.fieldTransforms):new w3(e,this.data,t,this.fieldTransforms)}}class g7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new W1(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _n()}}class v7{constructor(e,t,r,s,c,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===c&&this.ea(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new v7(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return _7(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(P0(this.na)&&xb.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class cv{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||H3(e)}fa(e,t,r,s=!1){return new v7({na:e,methodName:t,la:r,path:ls.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Dl(n){const e=n._freezeSettings(),t=H3(n._databaseId);return new cv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function O0(n,e,t,r,s,c={}){const u=n.fa(c.merge||c.mergeFields?2:0,e,t,s);fv("Data must be an object, but it was:",u,r);const h=Ob(r,u);let m,w;if(c.merge)m=new Ds(u.fieldMask),w=u.fieldTransforms;else if(c.mergeFields){const O=[];for(const $ of c.mergeFields){const ee=pv(e,$,t);if(!u.contains(ee))throw new Nt(pt.INVALID_ARGUMENT,`Field '${ee}' is specified in your field mask but missing from your input data.`);Lb(O,ee)||O.push(ee)}m=new Ds(O),w=u.fieldTransforms.filter($=>m.covers($.field))}else m=null,w=u.fieldTransforms;return new Ab(new no(h),m,w)}class B4 extends cu{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof B4}}function Mb(n,e,t){return new v7({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class lv extends cu{_toFieldTransform(e){return new la(e.path,new b3)}isEqual(e){return e instanceof lv}}class Nb extends cu{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Mb(this,e,!0),r=this.da.map(c=>W3(c,t)),s=new e2(r);return new la(e.path,s)}isEqual(e){return this===e}}class kb extends cu{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Mb(this,e,!0),r=this.da.map(c=>W3(c,t)),s=new t2(r);return new la(e.path,s)}isEqual(e){return this===e}}class Rb extends cu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new d4(e.It,q6(e.It,this._a));return new la(e.path,t)}isEqual(e){return this===e}}function uv(n,e,t,r){const s=n.fa(1,e,t);fv("Data must be an object, but it was:",s,r);const c=[],u=no.empty();gl(r,(m,w)=>{const O=y7(e,m,t);w=(0,re.m9)(w);const $=s.ua(O);if(w instanceof B4)c.push(O);else{const ee=W3(w,$);null!=ee&&(c.push(O),u.set(O,ee))}});const h=new Ds(c);return new g7(u,h,s.fieldTransforms)}function dv(n,e,t,r,s,c){const u=n.fa(1,e,t),h=[pv(e,r,t)],m=[s];if(c.length%2!=0)throw new Nt(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ee=0;ee<c.length;ee+=2)h.push(pv(e,c[ee])),m.push(c[ee+1]);const w=[],O=no.empty();for(let ee=h.length-1;ee>=0;--ee)if(!Lb(w,h[ee])){const de=h[ee];let Te=m[ee];Te=(0,re.m9)(Te);const st=u.ua(de);if(Te instanceof B4)w.push(de);else{const It=W3(Te,st);null!=It&&(w.push(de),O.set(de,It))}}const $=new Ds(w);return new g7(O,$,u.fieldTransforms)}function Pb(n,e,t,r=!1){return W3(t,n.fa(r?4:3,e))}function W3(n,e){if(hv(n=(0,re.m9)(n)))return fv("Unsupported field value:",e,n),Ob(n,e);if(n instanceof cu)return function(t,r){if(!P0(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const s=[];let c=0;for(const u of t){let h=W3(u,r.ca(c));null==h&&(h={nullValue:"NULL_VALUE"}),s.push(h),c++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,re.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return q6(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=xi.fromDate(t);return{timestampValue:m4(r.It,s)}}if(t instanceof xi){const s=new xi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:m4(r.It,s)}}if(t instanceof U4)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ec)return{bytesValue:Em(r.It,t._byteString)};if(t instanceof gi){const s=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(s))throw r.aa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lf(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${H4(t)}`)}(n,e)}function Ob(n,e){const t={};return Q9(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gl(n,(r,s)=>{const c=W3(s,e.ia(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function hv(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof xi||n instanceof U4||n instanceof ec||n instanceof gi||n instanceof cu)}function fv(n,e,t){if(!hv(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=H4(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function pv(n,e,t){if((e=(0,re.m9)(e))instanceof Il)return e._internalPath;if("string"==typeof e)return y7(n,e);throw _7("Field path arguments must be of type string or ",n,!1,void 0,t)}const ID=new RegExp("[~\\*/\\[\\]]");function y7(n,e,t){if(e.search(ID)>=0)throw _7(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Il(...e.split("."))._internalPath}catch{throw _7(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _7(n,e,t,r,s){const c=r&&!r.isEmpty(),u=void 0!==s;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${r}`),u&&(m+=` in document ${s}`),m+=")"),new Nt(pt.INVALID_ARGUMENT,h+n+m)}function Lb(n,e){return n.some(t=>t.isEqual(e))}class i{constructor(e,t,r,s,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new o(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(a("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class o extends i{data(){return super.data()}}function a(n,e){return"string"==typeof e?y7(n,e):e instanceof Il?e._internalPath:e._delegate._internalPath}class l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class d extends i{constructor(e,t,r,s,c,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(a("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class f extends d{data(e={}){return super.data(e)}}class _{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new l(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new f(this._firestore,this._userDataWriter,r.key,r,new l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Nt(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new f(r._firestore,r._userDataWriter,u.doc.key,u.doc,new l(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>s||3!==u.type).map(u=>{const h=new f(r._firestore,r._userDataWriter,u.doc.key,u.doc,new l(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,w=-1;return 0!==u.type&&(m=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),1!==u.type&&(c=c.add(u.doc),w=c.indexOf(u.doc.key)),{type:T(u.type),doc:h,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function T(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _n()}}function M(n,e){return n instanceof d&&e instanceof d?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _&&e instanceof _&&n._firestore===e._firestore&&bb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function j(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Nt(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q{}function oe(n,...e){for(const t of e)n=t._apply(n);return n}class Ne extends Q{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Dl(e.firestore),r=function(s,c,u,h,m,w,O){let $;if(m.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Nt(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){z0(O,w);const de=[];for(const Te of O)de.push(F0(h,s,Te));$={arrayValue:{values:de}}}else $=F0(h,s,O)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||z0(O,w),$=Pb(u,"where",O,"in"===w||"not-in"===w);const ee=Hs.create(m,w,$);return function(de,Te){if(Te.dt()){const It=Sf(de);if(null!==It&&!It.isEqual(Te.field))throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${It.toString()}' and '${Te.field.toString()}'`);const an=Df(de);null!==an&&V0(0,Te.field,an)}const st=function(It,an){for(const un of It.filters)if(an.indexOf(un.op)>=0)return un.op;return null}(de,function(It){switch(It){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Te.op));if(null!==st)throw new Nt(pt.INVALID_ARGUMENT,st===Te.op?`Invalid query. You cannot use more than one '${Te.op.toString()}' filter.`:`Invalid query. You cannot use '${Te.op.toString()}' filters with '${st.toString()}' filters.`)}(s,ee),ee}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Do(e.firestore,e.converter,function(s,c){const u=s.filters.concat([c]);return new G1(s.path,s.collectionGroup,s.explicitOrderBy.slice(),u,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class Et extends Q{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,s,c){if(null!==r.startAt)throw new Nt(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Nt(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Yu(s,c);return function(h,m){if(null===Df(h)){const w=Sf(h);null!==w&&V0(0,w,m.field)}}(r,u),u}(e._query,this.wa,this.ya);return new Do(e.firestore,e.converter,function(r,s){const c=r.explicitOrderBy.concat([s]);return new G1(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Jt extends Q{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Do(e.firestore,e.converter,u4(e._query,this.pa,this.Ia))}}class Mt extends Q{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=L0(e,this.type,this.Ta,this.Ea);return new Do(e.firestore,e.converter,(s=t,new G1((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class di extends Q{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=L0(e,this.type,this.Ta,this.Ea);return new Do(e.firestore,e.converter,(s=t,new G1((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function L0(n,e,t,r){if(t[0]=(0,re.m9)(t[0]),t[0]instanceof i)return function(s,c,u,h,m){if(!h)throw new Nt(pt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const w=[];for(const O of Ju(s))if(O.field.isKeyField())w.push(nu(c,h.key));else{const $=h.data.field(O.field);if(g1($))throw new Nt(pt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+O.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===$){const ee=O.field.canonicalString();throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ee}' (used as the orderBy) does not exist.`)}w.push($)}return new _l(w,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Dl(n.firestore);return function(c,u,h,m,w,O){const $=c.explicitOrderBy;if(w.length>$.length)throw new Nt(pt.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ee=[];for(let de=0;de<w.length;de++){const Te=w[de];if($[de].field.isKeyField()){if("string"!=typeof Te)throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Te}`);if(!Tf(c)&&-1!==Te.indexOf("/"))throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Te}' contains a slash.`);const st=c.path.child(kr.fromString(Te));if(!Yt.isDocumentKey(st))throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${st}' is not because it contains an odd number of segments.`);const It=new Yt(st);ee.push(nu(u,It))}else{const st=Pb(h,m,Te);ee.push(st)}}return new _l(ee,O)}(n._query,n.firestore._databaseId,s,e,t,r)}}function F0(n,e,t){if("string"==typeof(t=(0,re.m9)(t))){if(""===t)throw new Nt(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tf(e)&&-1!==t.indexOf("/"))throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kr.fromString(t));if(!Yt.isDocumentKey(r))throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nu(n,new Yt(r))}if(t instanceof gi)return nu(n,t._key);throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H4(t)}.`)}function z0(n,e){if(!Array.isArray(n)||0===n.length)throw new Nt(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Nt(pt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function V0(n,e,t){if(!t.isEqual(e))throw new Nt(pt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const b7={maxAttempts:5};class j4{convertValue(e,t="none"){switch(v1(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _n()}}convertObject(e,t){const r={};return gl(e.fields,(s,c)=>{r[s]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new U4(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=v3(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ms(e));default:return null}}convertTimestamp(e){const t=tu(e);return new xi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kr.fromString(e);qn(Ui(r));const s=new j1(r.get(1),r.get(3)),c=new Yt(r.popFirst(5));return s.isEqual(t)||cs(`Document ${c} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function q3(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class w7 extends j4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,t)}}class DD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dl(e)}set(e,t,r){this._verifyNotCommitted();const s=Z3(e,this._firestore),c=q3(s.converter,t,r),u=O0(this._dataReader,"WriteBatch.set",s._key,c,null!==s.converter,r);return this._mutations.push(u.toMutation(s._key,Ur.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const c=Z3(e,this._firestore);let u;return u="string"==typeof(t=(0,re.m9)(t))||t instanceof Il?dv(this._dataReader,"WriteBatch.update",c._key,t,r,s):uv(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(u.toMutation(c._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Z3(e,this._firestore);return this._mutations=this._mutations.concat(new I3(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Nt(pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Z3(n,e){if((n=(0,re.m9)(n)).firestore!==e)throw new Nt(pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $4 extends j4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,t)}}function SD(n,e,t){n=Rr(n,gi);const r=Rr(n.firestore,vi),s=q3(n.converter,e,t);return H0(r,[O0(Dl(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Ur.none())])}function TD(n,e,t,...r){n=Rr(n,gi);const s=Rr(n.firestore,vi),c=Dl(s);let u;return u="string"==typeof(e=(0,re.m9)(e))||e instanceof Il?dv(c,"updateDoc",n._key,e,t,r):uv(c,"updateDoc",n._key,e),H0(s,[u.toMutation(n._key,Ur.exists(!0))])}function xD(n,...e){var t,r,s;n=(0,re.m9)(n);let c={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||$3(e[u])||(c=e[u],u++);const h={includeMetadataChanges:c.includeMetadataChanges};if($3(e[u])){const $=e[u];e[u]=null===(t=$.next)||void 0===t?void 0:t.bind($),e[u+1]=null===(r=$.error)||void 0===r?void 0:r.bind($),e[u+2]=null===(s=$.complete)||void 0===s?void 0:s.bind($)}let m,w,O;if(n instanceof gi)w=Rr(n.firestore,vi),O=Qu(n._key.path),m={next:$=>{e[u]&&e[u](Fb(w,n,$))},error:e[u+1],complete:e[u+2]};else{const $=Rr(n,Do);w=Rr($.firestore,vi),O=$._query;const ee=new $4(w);m={next:de=>{e[u]&&e[u](new _(w,ee,$,de))},error:e[u+1],complete:e[u+2]},j(n._query)}return function($,ee,de,Te){const st=new S0(Te),It=new Z8(ee,st,de);return $.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return p0(yield g2($),It)})),()=>{st.Rc(),$.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return wg(yield g2($),It)}))}}(es(w),O,h,m)}function H0(n,e){return function(t,r){const s=new Vs;return t.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return function Mg(n,e,t){return Ng.apply(this,arguments)}(yield l7(t),r,s)})),s.promise}(es(n),e)}function Fb(n,e,t){const r=t.docs.get(e._key),s=new $4(n);return new d(n,s,e._key,r,new l(t.hasPendingWrites,t.fromCache),e.converter)}class FN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dl(e)}get(e){const t=Z3(e,this._firestore),r=new w7(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return _n();const c=s[0];if(c.isFoundDocument())return new i(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new i(this._firestore,r,t._key,null,t.converter);throw _n()})}set(e,t,r){const s=Z3(e,this._firestore),c=q3(s.converter,t,r),u=O0(this._dataReader,"Transaction.set",s._key,c,null!==s.converter,r);return this._transaction.set(s._key,u),this}update(e,t,r,...s){const c=Z3(e,this._firestore);let u;return u="string"==typeof(t=(0,re.m9)(t))||t instanceof Il?dv(this._dataReader,"Transaction.update",c._key,t,r,s):uv(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=Z3(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Z3(e,this._firestore),r=new $4(this._firestore);return super.get(e).then(s=>new d(this._firestore,r,t._key,s._document,new l(!1,!1),t.converter))}}function zb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Nt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function MD(){if(typeof Uint8Array>"u")throw new Nt("unimplemented","Uint8Arrays are not available in this environment.")}function ND(){if(!function cD(){return typeof atob<"u"}())throw new Nt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){i4=Vo.SDK_VERSION,(0,Vo._registerComponent)(new d1.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const c=t.getProvider("app").getImmediate(),u=new vi(new J_(t.getProvider("auth-internal")),new X_(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Nt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new j1(h.options.projectId,m)}(c,r),c);return s=Object.assign({useFetchStreams:e},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),(0,Vo.registerVersion)(x6,"3.4.15",n),(0,Vo.registerVersion)(x6,"3.4.15","esm2017")}();class E7{constructor(e){this._delegate=e}static fromBase64String(e){return ND(),new E7(ec.fromBase64String(e))}static fromUint8Array(e){return MD(),new E7(ec.fromUint8Array(e))}toBase64(){return ND(),this._delegate.toBase64()}toUint8Array(){return MD(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Vb(n){return function WN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class qN{enableIndexedDbPersistence(e,t){return function Sb(n,e){av(n=Rr(n,vi));const t=es(n),r=n._freezeSettings(),s=new D0;return k0(t,s,new jg(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function m7(n){av(n=Rr(n,vi));const e=es(n),t=n._freezeSettings(),r=new D0;return k0(e,r,new a7(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function R0(n){if(n._initialized&&!n._terminated)throw new Nt(pt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,yt.Z)(function*(){try{yield(t=(0,yt.Z)(function*(r){if(!B1.C())return Promise.resolve();const s=r+"main";yield B1.delete(s)}),function(r){return t.apply(this,arguments)})(M8(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class kD{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof j1||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function sv(n,e,t,r={}){var s;const c=(n=Rr(n,M0))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&zu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=zs.MOCK_USER;else{u=(0,re.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Nt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new zs(m)}n._authCredentials=new Q_(new U1(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function bD(n){return function Jg(n){return n.asyncQueue.enqueue((0,yt.Z)(function*(){const e=yield Kg(n),t=yield Yg(n);return e.setNetworkEnabled(!0),function(r){const s=Xt(r);return s._u.delete(0),u2(s)}(t)}))}(es(n=Rr(n,vi)))}(this._delegate)}disableNetwork(){return function wD(n){return function mb(n){return n.asyncQueue.enqueue((0,yt.Z)(function*(){const e=yield Kg(n),t=yield Yg(n);return e.setNetworkEnabled(!1),(r=(0,yt.Z)(function*(s){const c=Xt(s);c._u.add(0),yield ou(c),c.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(es(n=Rr(n,vi)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,h7("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function CD(n){return function(e){const t=new Vs;return e.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return function Lg(n,e){return B3.apply(this,arguments)}(yield l7(e),t)})),t.promise}(es(n=Rr(n,vi)))}(this._delegate)}onSnapshotsInSync(e){return function LN(n,e){return function ev(n,e){const t=new S0(e);return n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return r=yield g2(n),s=t,Xt(r).Ru.add(s),void s.next();var r,s})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return r=yield g2(n),s=t,void Xt(r).Ru.delete(s);var r,s}))}}(es(n=Rr(n,vi)),$3(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Nt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new U0(this,_b(this._delegate,e))}catch(t){throw za(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fc(this,p7(this._delegate,e))}catch(t){throw za(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Va(this,function _D(n,e){if(n=Rr(n,M0),j3("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Nt(pt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Do(n,null,(t=e,new G1(kr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw za(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function zN(n,e,t){n=Rr(n,vi);const r=Object.assign(Object.assign({},b7),t);return function(s){if(s.maxAttempts<1)throw new Nt(pt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function vb(n,e,t){const r=new Vs;return n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){const s=yield(c=n,x0(c).then(u=>u.datastore));var c;new pb(n.asyncQueue,s,t,e,r).run()})),r.promise}(es(n),s=>e(new FN(n,s)),r)}(this._delegate,t=>e(new RD(this,t)))}batch(){return es(this._delegate),new PD(new DD(this._delegate,e=>H0(this._delegate,e)))}loadBundle(e){return function ov(n,e){const t=es(n=Rr(n,vi)),r=new Eb;return function tv(n,e,t,r){const s=function(c,u){let h;return h="string"==typeof c?(new TextEncoder).encode(c):c,m=function(m,w){if(m instanceof Uint8Array)return c7(m,w);if(m instanceof ArrayBuffer)return c7(new Uint8Array(m),w);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new $g(m,u);var m}(t,H3(e));n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){!function o7(n,e,t){const r=Xt(n);var s;(s=(0,yt.Z)(function*(c,u,h){try{const m=yield u.getMetadata();if(yield function(ee,de){const Te=Xt(ee),st=Ss(de.createTime);return Te.persistence.runTransaction("hasNewerBundle","readonly",It=>Te.Ns.getBundleMetadata(It,de.id)).then(It=>!!It&&It.createTime.compareTo(st)>=0)}(c.localStore,m))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(ee=m).totalDocuments,bytesLoaded:ee.totalBytes,totalDocuments:ee.totalDocuments,totalBytes:ee.totalBytes}),Promise.resolve(new Set);h._updateProgress(Y8(m));const w=new ib(m,c.localStore,u.It);let O=yield u.wc();for(;O;){const ee=yield w.Ou(O);ee&&h._updateProgress(ee),O=yield u.wc()}const $=yield w.complete();return yield au(c,$.Bu,void 0),yield function(ee,de){const Te=Xt(ee);return Te.persistence.runTransaction("Save bundle","readwrite",st=>Te.Ns.saveBundleMetadata(st,de))}(c.localStore,m),h._completeWith($.progress),Promise.resolve($.$u)}catch(m){return zu("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var ee}),function(c,u,h){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield l7(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Tb(n,e){return function nv(n,e){return n.asyncQueue.enqueue((0,yt.Z)(function*(){return function(t,r){const s=Xt(t);return s.persistence.runTransaction("Get named query","readonly",c=>s.Ns.getNamedQuery(c,r))}(yield A0(n),e)}))}(es(n=Rr(n,vi)),e).then(t=>t?new Do(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Va(this,t):null)}}class mv extends j4{constructor(e){super(),this.firestore=e}convertBytes(e){return new E7(new ec(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fc.forKey(t,this.firestore,null)}}class RD{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mv(e)}get(e){const t=W4(e);return this._delegate.get(t).then(r=>new I7(this._firestore,new d(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=W4(e);return r?(zb("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=W4(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=W4(e);return this._delegate.delete(t),this}}class PD{constructor(e){this._delegate=e}set(e,t,r){const s=W4(e);return r?(zb("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=W4(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=W4(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class G4{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new f(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new D7(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=G4.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let c=s.get(t);return c||(c=new G4(e,new mv(e),t),s.set(t,c)),c}}G4.INSTANCES=new WeakMap;class Fc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Nt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fc(t,new gi(t._delegate,r,new Yt(e)))}static forKey(e,t,r){return new Fc(t,new gi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new U0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new U0(this.firestore,_b(this._delegate,e))}catch(t){throw za(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,re.m9)(e))instanceof gi&&Cb(this._delegate,e)}set(e,t){t=zb("DocumentReference.set",t);try{return t?SD(this._delegate,e,t):SD(this._delegate,e)}catch(r){throw za(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?TD(this._delegate,e):TD(this._delegate,e,t,...r)}catch(s){throw za(s,"updateDoc()","DocumentReference.update()")}}delete(){return function PN(n){return H0(Rr(n.firestore,vi),[new I3(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=OD(e),r=LD(e,s=>new I7(this.firestore,new d(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return xD(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function AN(n){n=Rr(n,gi);const e=Rr(n.firestore,vi),t=es(e),r=new $4(e);return function Xg(n,e){const t=new Vs;return n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return(r=(0,yt.Z)(function*(s,c,u){try{const h=yield function(m,w){const O=Xt(m);return O.persistence.runTransaction("read document","readonly",$=>O.localDocuments.getDocument($,w))}(s,c);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Nt(pt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=P4(h,`Failed to get document '${c} from cache`);u.reject(m)}}),function(s,c,u){return r.apply(this,arguments)})(yield A0(n),e,t);var r})),t.promise}(t,n._key).then(s=>new d(e,r,n._key,s,new l(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function MN(n){n=Rr(n,gi);const e=Rr(n.firestore,vi);return gb(es(e),n._key,{source:"server"}).then(t=>Fb(e,n,t))}(this._delegate):function xN(n){n=Rr(n,gi);const e=Rr(n.firestore,vi);return gb(es(e),n._key).then(t=>Fb(e,n,t))}(this._delegate),t.then(r=>new I7(this.firestore,new d(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fc(this.firestore,this._delegate.withConverter(e?G4.getInstance(this.firestore,e):null))}}function za(n,e,t){return n.message=n.message.replace(e,t),n}function OD(n){for(const e of n)if("object"==typeof e&&!Vb(e))return e;return{}}function LD(n,e){var t,r;let s;return s=Vb(n[0])?n[0]:Vb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{s.next&&s.next(e(c))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class I7{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return M(this._delegate,e._delegate)}}class D7 extends I7{data(e){const t=this._delegate.data(e);return function Y_(n,e){n||_n()}(void 0!==t),t}}class Va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mv(e)}where(e,t,r){try{return new Va(this.firestore,oe(this._delegate,function Ge(n,e,t){const r=e,s=a("where",n);return new Ne(s,r,t)}(e,t,r)))}catch(s){throw za(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Va(this.firestore,oe(this._delegate,function Lt(n,e="asc"){const t=e,r=a("orderBy",n);return new Et(r,t)}(e,t)))}catch(r){throw za(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Va(this.firestore,oe(this._delegate,function mn(n){return iv("limit",n),new Jt("limit",n,"F")}(e)))}catch(t){throw za(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Va(this.firestore,oe(this._delegate,function jn(n){return iv("limitToLast",n),new Jt("limitToLast",n,"L")}(e)))}catch(t){throw za(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Va(this.firestore,oe(this._delegate,function Pn(...n){return new Mt("startAt",n,!0)}(...e)))}catch(t){throw za(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Va(this.firestore,oe(this._delegate,function Dr(...n){return new Mt("startAfter",n,!1)}(...e)))}catch(t){throw za(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Va(this.firestore,oe(this._delegate,function v2(...n){return new di("endBefore",n,!1)}(...e)))}catch(t){throw za(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Va(this.firestore,oe(this._delegate,function C7(...n){return new di("endAt",n,!0)}(...e)))}catch(t){throw za(t,"endAt()","Query.endAt()")}}isEqual(e){return bb(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function kN(n){n=Rr(n,Do);const e=Rr(n.firestore,vi),t=es(e),r=new $4(e);return function u7(n,e){const t=new Vs;return n.asyncQueue.enqueueAndForget((0,yt.Z)(function*(){return(r=(0,yt.Z)(function*(s,c,u){try{const h=yield I4(s,c,!0),m=new Dg(c,h.Hi),w=m.ju(h.documents),O=m.applyChanges(w,!1);u.resolve(O.snapshot)}catch(h){const m=P4(h,`Failed to execute query '${c} against cache`);u.reject(m)}}),function(s,c,u){return r.apply(this,arguments)})(yield A0(n),e,t);var r})),t.promise}(t,n._query).then(s=>new _(e,r,n,s))}(this._delegate):"server"===e?.source?function RN(n){n=Rr(n,Do);const e=Rr(n.firestore,vi),t=es(e),r=new $4(e);return d7(t,n._query,{source:"server"}).then(s=>new _(e,r,n,s))}(this._delegate):function NN(n){n=Rr(n,Do);const e=Rr(n.firestore,vi),t=es(e),r=new $4(e);return j(n._query),d7(t,n._query).then(s=>new _(e,r,n,s))}(this._delegate),t.then(r=>new Hb(this.firestore,new _(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OD(e),r=LD(e,s=>new Hb(this.firestore,new _(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return xD(this._delegate,t,r)}withConverter(e){return new Va(this.firestore,this._delegate.withConverter(e?G4.getInstance(this.firestore,e):null))}}class KN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new D7(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Va(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new D7(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new KN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new D7(this._firestore,r))})}isEqual(e){return M(this._delegate,e._delegate)}}class U0 extends Va{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fc(this.firestore,e):null}doc(e){try{return new Fc(this.firestore,void 0===e?p7(this._delegate):p7(this._delegate,e))}catch(t){throw za(t,"doc()","CollectionReference.doc()")}}add(e){return function ON(n,e){const t=Rr(n.firestore,vi),r=p7(n),s=q3(n.converter,e);return H0(t,[O0(Dl(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fc(this.firestore,t))}isEqual(e){return Cb(this._delegate,e._delegate)}withConverter(e){return new U0(this.firestore,this._delegate.withConverter(e?G4.getInstance(this.firestore,e):null))}}function W4(n){return Rr(n,gi)}class Ub{constructor(...e){this._delegate=new Il(...e)}static documentId(){return new Ub(ls.keyField().canonicalString())}isEqual(e){return(e=(0,re.m9)(e))instanceof Il&&this._delegate._internalPath.isEqual(e._internalPath)}}class q4{constructor(e){this._delegate=e}static serverTimestamp(){const e=function HN(){return new lv("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new q4(e)}static delete(){const e=function VN(){return new B4("deleteField")}();return e._methodName="FieldValue.delete",new q4(e)}static arrayUnion(...e){const t=function UN(...n){return new Nb("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new q4(t)}static arrayRemove(...e){const t=function BN(...n){return new kb("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new q4(t)}static increment(e){const t=function jN(n){return new Rb("increment",n)}(e);return t._methodName="FieldValue.increment",new q4(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const YN={Firestore:kD,GeoPoint:U4,Timestamp:xi,Blob:E7,Transaction:RD,WriteBatch:PD,DocumentReference:Fc,DocumentSnapshot:I7,Query:Va,QueryDocumentSnapshot:D7,QuerySnapshot:Hb,CollectionReference:U0,FieldPath:Ub,FieldValue:q4,setLogLevel:function ZN(n){!function U9(n){Jl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function JN(n){(function QN(n,e){n.INTERNAL.registerComponent(new d1.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},YN)))})(n,(e,t)=>new kD(e,t,new qN)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(Nd.Z);var FD=W(7579),Bb=W(6451),gv=W(5363),Sl=W(3900),XN=W(6063);class ek extends FD.x{constructor(e=1/0,t=1/0,r=XN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:c,_windowTime:u}=this;t||(r.push(e),!s&&r.push(c.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,c=s.slice();for(let u=0;u<c.length&&!e.closed;u+=r?1:2)e.next(c[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,c=(s?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!s){const u=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)h=m;h&&r.splice(0,h+1)}}}var zD=W(3099);function VD(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,zD.B)({connector:()=>new ek(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}var tk=W(590),nk=W(576);function HD(n,e){return(0,nk.m)(e)?(0,Sl.w)(()=>n,e):(0,Sl.w)(()=>n)}var jb=W(9468);W(5867);const BD=new Map,ak={activated:!1,tokenObservers:[]},ck={initialized:!1,enabled:!1};function So(n){return BD.get(n)||ak}function Tl(n,e){BD.set(n,e)}function yv(){return ck}class fk{constructor(e,t,r,s,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=s,s>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,yt.Z)(function*(){t.stop();try{t.pending=new re.BH,yield function pk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new re.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ha=new re.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $D(n){if(!So(n).activated)throw Ha.create("use-before-activation",{appName:n.name})}function qb(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,yt.Z)(function*({url:n,body:e},t){var r,s;const c={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const de=yield u.getHeartbeatsHeader();de&&(c["X-Firebase-Client"]=de)}const h={method:"POST",body:JSON.stringify(e),headers:c};let m,w;try{m=yield fetch(n,h)}catch(de){throw Ha.create("fetch-network-error",{originalErrorMessage:null===(r=de)||void 0===r?void 0:r.message})}if(200!==m.status)throw Ha.create("fetch-status-error",{httpStatus:m.status});try{w=yield m.json()}catch(de){throw Ha.create("fetch-parse-error",{originalErrorMessage:null===(s=de)||void 0===s?void 0:s.message})}const O=w.ttl.match(/^([\d.]+)(s)$/);if(!O||!O[2]||isNaN(Number(O[1])))throw Ha.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const $=1e3*Number(O[1]),ee=Date.now();return{token:w.token,expireTimeMillis:ee+$,issuedAtTimeMillis:ee}}),Zb.apply(this,arguments)}function yk(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const S7="firebase-app-check-store";let bv=null;function WD(){return bv||(bv=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var c;e(Ha.create("storage-open",{originalErrorMessage:null===(c=s.target.error)||void 0===c?void 0:c.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(S7,{keyPath:"compositeKey"})}}catch(r){e(Ha.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),bv)}function Kb(){return Kb=(0,yt.Z)(function*(n,e){const r=(yield WD()).transaction(S7,"readwrite"),c=r.objectStore(S7).put({compositeKey:n,value:e});return new Promise((u,h)=>{c.onsuccess=m=>{u()},r.onerror=m=>{var w;h(Ha.create("storage-set",{originalErrorMessage:null===(w=m.target.error)||void 0===w?void 0:w.message}))}})}),Kb.apply(this,arguments)}const T7=new u1.Yd("@firebase/app-check");function YD(n,e){return(0,re.hl)()?function wk(n,e){return function qD(n,e){return Kb.apply(this,arguments)}(function KD(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{T7.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QD(){return yv().enabled}function JD(){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,yt.Z)(function*(){const n=yv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Xb.apply(this,arguments)}const xk={error:"UNKNOWN_ERROR"};function Ak(n){return re.US.encodeString(JSON.stringify(n),!1)}function wv(n){return ew.apply(this,arguments)}function ew(){return ew=(0,yt.Z)(function*(n,e=!1){const t=n.app;$D(t);const r=So(t);let c,s=r.token;if(!s){const m=yield r.cachedTokenPromise;m&&Ev(m)&&(s=m)}if(!e&&s&&Ev(s))return{token:s.token};let h,u=!1;if(QD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qb(yk(t,yield JD()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),u=!0);const m=yield r.exchangeTokenPromise;return yield YD(t,m),Tl(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),s=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?T7.warn(m.message):T7.error(m),c=m}return s?(h={token:s.token},Tl(t,Object.assign(Object.assign({},r),{token:s})),yield YD(t,s)):h=Nk(c),u&&eS(t,h),h}),ew.apply(this,arguments)}function nw(n,e){const t=So(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Tl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function XD(n){const{app:e}=n,t=So(e);let r=t.tokenRefresher;r||(r=function Mk(n){const{app:e}=n;return new fk((0,yt.Z)(function*(){let r;if(r=So(e).token?yield wv(n,!0):yield wv(n),r.error)throw r.error}),()=>!0,()=>{const t=So(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Tl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function eS(n,e){const t=So(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ev(n){return n.expireTimeMillis-Date.now()>0}function Nk(n){return{token:Ak(xk),error:n}}class kk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=So(this.app);for(const t of e)nw(this.app,t.next);return Promise.resolve()}}const cS="app-check-internal";!function Wk(){(0,Vo._registerComponent)(new d1.wA("app-check",n=>function Rk(n,e){return new kk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cS).initialize()})),(0,Vo._registerComponent)(new d1.wA(cS,n=>function Pk(n){return{getToken:e=>wv(n,e),addTokenListener:e=>function tw(n,e,t,r){const{app:s}=n,c=So(s),u={next:t,error:r,type:e};if(Tl(s,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,u]})),c.token&&Ev(c.token)){const h=c.token;Promise.resolve().then(()=>{t({token:h.token}),XD(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>XD(n))}(n,"INTERNAL",e),removeTokenListener:e=>nw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vo.registerVersion)("@firebase/app-check","0.5.12")}();class x7{constructor(){return(0,Wr.vb)("app-check")}}typeof window<"u"&&window;var Dv=W(127);const aw=new x.OlP("angularfire2.auth.use-emulator"),cw=new x.OlP("angularfire2.auth.settings"),lw=new x.OlP("angularfire2.auth.tenant-id"),uw=new x.OlP("angularfire2.auth.langugage-code"),dw=new x.OlP("angularfire2.auth.use-device-language"),hw=new x.OlP("angularfire.auth.persistence"),fw=(n,e,t,r,s,c,u,h)=>(0,ps.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=s,c&&m.useDeviceLanguage(),u)for(const[w,O]of Object.entries(u))m.settings[w]=O;return h&&m.setPersistence(h),m},[t,r,s,c,u,h]);let A7=(()=>{class n{constructor(t,r,s,c,u,h,m,w,O,$,ee,de){const Te=new FD.x,st=(0,H1.of)(void 0).pipe((0,gv.Q)(u.outsideAngular),(0,Sl.w)(()=>c.runOutsideAngular(()=>Promise.resolve().then(W.bind(W,5881)))),(0,Is.U)(()=>(0,ps.on)(t,c,r)),(0,Is.U)(It=>fw(It,c,h,w,O,$,m,ee)),VD({bufferSize:1,refCount:!1}));if((0,Md.PM)(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,H1.of)(null);else{st.pipe((0,tk.P)()).subscribe();const an=st.pipe((0,Sl.w)(sn=>sn.getRedirectResult().then(In=>In,()=>null)),Wr.iC,VD({bufferSize:1,refCount:!1})),un=st.pipe((0,Sl.w)(sn=>new Td.y(In=>({unsubscribe:c.runOutsideAngular(()=>sn.onAuthStateChanged(Fn=>In.next(Fn),Fn=>In.error(Fn),()=>In.complete()))})))),qt=st.pipe((0,Sl.w)(sn=>new Td.y(In=>({unsubscribe:c.runOutsideAngular(()=>sn.onIdTokenChanged(Fn=>In.next(Fn),Fn=>In.error(Fn),()=>In.complete()))}))));this.authState=an.pipe(HD(un),(0,jb.R)(u.outsideAngular),(0,gv.Q)(u.insideAngular)),this.user=an.pipe(HD(qt),(0,jb.R)(u.outsideAngular),(0,gv.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,Sl.w)(sn=>sn?(0,Ec.D)(sn.getIdToken()):(0,H1.of)(null))),this.idTokenResult=this.user.pipe((0,Sl.w)(sn=>sn?(0,Ec.D)(sn.getIdTokenResult()):(0,H1.of)(null))),this.credential=(0,Bb.T)(an,Te,this.authState.pipe((0,Ad.h)(sn=>!sn))).pipe((0,Is.U)(sn=>sn?.user?sn:null),(0,jb.R)(u.outsideAngular),(0,gv.Q)(u.insideAngular))}return(0,ps.pX)(this,st,c,{spy:{apply:(It,an,un)=>{(It.startsWith("signIn")||It.startsWith("createUser"))&&un.then(qt=>Te.next(qt))}}})}}return n.\u0275fac=function(t){return new(t||n)(x.LFG(ps.Dh),x.LFG(ps.xv,8),x.LFG(x.Lbi),x.LFG(x.R0b),x.LFG(Wr.HU),x.LFG(aw,8),x.LFG(cw,8),x.LFG(lw,8),x.LFG(uw,8),x.LFG(dw,8),x.LFG(hw,8),x.LFG(x7,8))},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Jk=(()=>{class n{constructor(){Dv.Z.registerVersion("angularfire",Wr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n}),n.\u0275inj=x.cJS({providers:[A7]}),n})();function uS(n,e){return function Xk(n,e=Sd.z){return new Td.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function pw(n,e){return uS(n,e).pipe((0,Is.U)(t=>({payload:t,type:"query"})))}function Sv(n,e){return pw(n,e).pipe((0,Kp.O)(void 0),Yp(),(0,Is.U)(([t,r])=>{const s=r.payload.docChanges(),c=s.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=s.find(O=>O.doc.ref.isEqual(u.ref)),w=t?.payload.docs.find(O=>O.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&w&&JSON.stringify(w.metadata)===JSON.stringify(u.metadata)||c.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),c}))}function dS(n,e,t){return Sv(n,t).pipe((0,Ah.R)((r,s)=>function tR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function nR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mw(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mw(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mw(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(c=>c.payload),e),[]),Qp(),(0,Is.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function mw(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function hS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class fS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Sv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Is.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe((0,Kp.O)(void 0),Yp(),(0,Ad.h)(([r,s])=>s.length>0||!r),(0,Is.U)(([r,s])=>s),Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ah.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hS(e);return dS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return pw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Is.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Wr.iC)}get(e){return(0,Ec.D)(this.query.get(e)).pipe(Wr.iC)}add(e){return this.ref.add(e)}doc(e){return new pS(this.ref.doc(e),this.afs)}}class pS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:c}=vS(r,t);return new fS(s,c,this.afs)}snapshotChanges(){return function eR(n,e){return uS(n,e).pipe((0,Kp.O)(void 0),Yp(),(0,Is.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Is.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ec.D)(this.ref.get(e)).pipe(Wr.iC)}}class rR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Sv(this.query,this.afs.schedulers.outsideAngular).pipe((0,Is.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,Ad.h)(t=>t.length>0),Wr.iC):Sv(this.query,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ah.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hS(e);return dS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return pw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Is.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Wr.iC)}get(e){return(0,Ec.D)(this.query.get(e)).pipe(Wr.iC)}}const mS=new x.OlP("angularfire2.enableFirestorePersistence"),gS=new x.OlP("angularfire2.firestore.persistenceSettings"),iR=new x.OlP("angularfire2.firestore.settings"),sR=new x.OlP("angularfire2.firestore.use-emulator");function vS(n,e=(t=>t)){return{query:e(n),ref:n}}let yS=(()=>{class n{constructor(t,r,s,c,u,h,m,w,O,$,ee,de,Te,st,It,an,un){this.schedulers=m;const qt=(0,ps.on)(t,h,r),sn=O;$&&fw(qt,h,ee,Te,st,It,de,an),[this.firestore,this.persistenceEnabled$]=(0,ps.cc)(`${qt.name}.firestore`,"AngularFirestore",qt.name,()=>{const In=h.runOutsideAngular(()=>qt.firestore());if(c&&In.settings(c),sn&&In.useEmulator(...sn),s&&!(0,Md.PM)(u)){const Fn=()=>{try{return(0,Ec.D)(In.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(jr){return typeof console<"u"&&console.warn(jr),(0,H1.of)(!1)}};return[In,h.runOutsideAngular(Fn)]}return[In,(0,H1.of)(!1)]},[c,sn,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:u}=vS(s,r),h=this.schedulers.ngZone.run(()=>c);return new fS(h,u,this)}collectionGroup(t,r){const s=r||(u=>u),c=this.firestore.collectionGroup(t);return new rR(s(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new pS(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(x.LFG(ps.Dh),x.LFG(ps.xv,8),x.LFG(mS,8),x.LFG(iR,8),x.LFG(x.Lbi),x.LFG(x.R0b),x.LFG(Wr.HU),x.LFG(gS,8),x.LFG(sR,8),x.LFG(A7,8),x.LFG(aw,8),x.LFG(cw,8),x.LFG(lw,8),x.LFG(uw,8),x.LFG(dw,8),x.LFG(hw,8),x.LFG(x7,8))},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oR=(()=>{class n{constructor(){Dv.Z.registerVersion("angularfire",Wr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mS,useValue:!0},{provide:gS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n}),n.\u0275inj=x.cJS({providers:[yS]}),n})(),M7=(()=>{class n{constructor(t,r,s,c){this.afs=t,this.afAuth=r,this.router=s,this.ngZone=c,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(s=>{this.setUserData(s.user),this.afAuth.authState.subscribe(c=>{c&&this.router.navigate(["main"])})}).catch(s=>{window.alert(s.message)})}signUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(s=>{this.sendVerificationMail(),this.setUserData(s.user)}).catch(s=>{window.alert(s.message)})}sendVerificationMail(){return this.afAuth.currentUser.then(t=>{t.sendEmailVerification()}).then(()=>{this.router.navigate(["verify-email"])})}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}googleAuth(){return this.authLogin(new w_.Q).then(t=>{this.router.navigate(["main"])})}authLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["main"]),this.setUserData(r.user)}).catch(r=>{window.alert(r)})}setUserData(t){return this.afs.doc(`users/${t.id}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(x.LFG(yS),x.LFG(A7),x.LFG(De.F0),x.LFG(x.R0b))},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _S(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Cn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?_S(Object(t),!0).forEach(function(r){ro(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_S(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Tv(n){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function CS(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ro(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gw(n,e){return function dR(n){if(Array.isArray(n))return n}(n)||function fR(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var u,h,r=[],s=!0,c=!1;try{for(t=t.call(n);!(s=(u=t.next()).done)&&(r.push(u.value),!e||r.length!==e);s=!0);}catch(m){c=!0,h=m}finally{try{!s&&null!=t.return&&t.return()}finally{if(c)throw h}}return r}}(n,e)||bS(n,e)||function mR(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k7(n){return function uR(n){if(Array.isArray(n))return vw(n)}(n)||function hR(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||bS(n)||function pR(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bS(n,e){if(n){if("string"==typeof n)return vw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vw(n,e)}}function vw(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var wS=function(){},yw={},ES={},IS=null,DS={mark:wS,measure:wS};try{typeof window<"u"&&(yw=window),typeof document<"u"&&(ES=document),typeof MutationObserver<"u"&&(IS=MutationObserver),typeof performance<"u"&&(DS=performance)}catch{}var Mv,Nv,kv,Rv,Pv,SS=(yw.navigator||{}).userAgent,TS=void 0===SS?"":SS,K3=yw,Bi=ES,xS=IS,Av=DS,y2=!!Bi.documentElement&&!!Bi.head&&"function"==typeof Bi.addEventListener&&"function"==typeof Bi.createElement,AS=~TS.indexOf("MSIE")||~TS.indexOf("Trident/"),_2="___FONT_AWESOME___",NS="svg-inline--fa",Z4="data-fa-i2svg",Cw="data-fa-pseudo-element",bw="data-prefix",ww="data-icon",kS="fontawesome-i2svg",_R=["HTML","HEAD","STYLE","SCRIPT"],RS=function(){try{return!0}catch{return!1}}(),ji="classic",vs="sharp",Ew=[ji,vs];function R7(n){return new Proxy(n,{get:function(t,r){return r in t?t[r]:t[ji]}})}var P7=R7((ro(Mv={},ji,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),ro(Mv,vs,{fa:"solid",fass:"solid","fa-solid":"solid"}),Mv)),O7=R7((ro(Nv={},ji,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ro(Nv,vs,{solid:"fass"}),Nv)),L7=R7((ro(kv={},ji,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ro(kv,vs,{fass:"fa-solid"}),kv)),CR=R7((ro(Rv={},ji,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ro(Rv,vs,{"fa-solid":"fass"}),Rv)),bR=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,PS="fa-layers-text",wR=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,ER=R7((ro(Pv={},ji,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ro(Pv,vs,{900:"fass"}),Pv)),OS=[1,2,3,4,5,6,7,8,9,10],IR=OS.concat([11,12,13,14,15,16,17,18,19,20]),DR=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],F7=new Set;Object.keys(O7[ji]).map(F7.add.bind(F7)),Object.keys(O7[vs]).map(F7.add.bind(F7));var SR=[].concat(Ew,k7(F7),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(OS.map(function(n){return"".concat(n,"x")})).concat(IR.map(function(n){return"w-".concat(n)})),z7=K3.FontAwesomeConfig||{};Bi&&"function"==typeof Bi.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=gw(n,2),r=e[1],s=function xR(n){return""===n||"false"!==n&&("true"===n||n)}(function TR(n){var e=Bi.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=s&&(z7[r]=s)});var LS={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:NS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};z7.familyPrefix&&(z7.cssPrefix=z7.familyPrefix);var B0=Cn(Cn({},LS),z7);B0.autoReplaceSvg||(B0.observeMutations=!1);var Mn={};Object.keys(LS).forEach(function(n){Object.defineProperty(Mn,n,{enumerable:!0,set:function(t){B0[n]=t,V7.forEach(function(r){return r(Mn)})},get:function(){return B0[n]}})}),Object.defineProperty(Mn,"familyPrefix",{enumerable:!0,set:function(e){B0.cssPrefix=e,V7.forEach(function(t){return t(Mn)})},get:function(){return B0.cssPrefix}}),K3.FontAwesomeConfig=Mn;var V7=[],lu={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function H7(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function j0(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function Iw(n){return n.classList?j0(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function FS(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ov(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function Dw(n){return n.size!==lu.size||n.x!==lu.x||n.y!==lu.y||n.rotate!==lu.rotate||n.flipX||n.flipY}function zS(){var n="fa",e=NS,t=Mn.cssPrefix,r=Mn.replacementClass,s=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||r!==e){var c=new RegExp("\\.".concat(n,"\\-"),"g"),u=new RegExp("\\--".concat(n,"\\-"),"g"),h=new RegExp("\\.".concat(e),"g");s=s.replace(c,".".concat(t,"-")).replace(u,"--".concat(t,"-")).replace(h,".".concat(r))}return s}var VS=!1;function Sw(){Mn.autoAddCss&&!VS&&(function NR(n){if(n&&y2){var e=Bi.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Bi.head.childNodes,r=null,s=t.length-1;s>-1;s--){var c=t[s],u=(c.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(u)>-1&&(r=c)}Bi.head.insertBefore(e,r)}}(zS()),VS=!0)}var FR={mixout:function(){return{dom:{css:zS,insertCss:Sw}}},hooks:function(){return{beforeDOMElementCreation:function(){Sw()},beforeI2svg:function(){Sw()}}}},C2=K3||{};C2[_2]||(C2[_2]={}),C2[_2].styles||(C2[_2].styles={}),C2[_2].hooks||(C2[_2].hooks={}),C2[_2].shims||(C2[_2].shims=[]);var xl=C2[_2],HS=[],Lv=!1;function VR(n){!y2||(Lv?setTimeout(n,0):HS.push(n))}function U7(n){var e=n.tag,t=n.attributes,r=void 0===t?{}:t,s=n.children,c=void 0===s?[]:s;return"string"==typeof n?FS(n):"<".concat(e," ").concat(function RR(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(FS(n[t]),'" ')},"").trim()}(r),">").concat(c.map(U7).join(""),"</").concat(e,">")}function US(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}y2&&((Lv=(Bi.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Bi.readyState))||Bi.addEventListener("DOMContentLoaded",function n(){Bi.removeEventListener("DOMContentLoaded",n),Lv=1,HS.map(function(e){return e()})}));var Tw=function(e,t,r,s){var m,w,O,c=Object.keys(e),u=c.length,h=void 0!==s?function(e,t){return function(r,s,c,u){return e.call(t,r,s,c,u)}}(t,s):t;for(void 0===r?(m=1,O=e[c[0]]):(m=0,O=r);m<u;m++)O=h(O,e[w=c[m]],w,e);return O};function xw(n){var e=function UR(n){for(var e=[],t=0,r=n.length;t<r;){var s=n.charCodeAt(t++);if(s>=55296&&s<=56319&&t<r){var c=n.charCodeAt(t++);56320==(64512&c)?e.push(((1023&s)<<10)+(1023&c)+65536):(e.push(s),t--)}else e.push(s)}return e}(n);return 1===e.length?e[0].toString(16):null}function BS(n){return Object.keys(n).reduce(function(e,t){var r=n[t];return r.icon?e[r.iconName]=r.icon:e[t]=r,e},{})}function Aw(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.skipHooks,s=void 0!==r&&r,c=BS(e);"function"!=typeof xl.hooks.addPack||s?xl.styles[n]=Cn(Cn({},xl.styles[n]||{}),c):xl.hooks.addPack(n,BS(e)),"fas"===n&&Aw("fa",e)}var Fv,zv,Vv,$0=xl.styles,jR=xl.shims,$R=(ro(Fv={},ji,Object.values(L7[ji])),ro(Fv,vs,Object.values(L7[vs])),Fv),Mw=null,jS={},$S={},GS={},WS={},qS={},GR=(ro(zv={},ji,Object.keys(P7[ji])),ro(zv,vs,Object.keys(P7[vs])),zv);function qR(n,e){var t=e.split("-"),r=t[0],s=t.slice(1).join("-");return r!==n||""===s||function WR(n){return~SR.indexOf(n)}(s)?null:s}var ZS=function(){var e=function(c){return Tw($0,function(u,h,m){return u[m]=Tw(h,c,{}),u},{})};jS=e(function(s,c,u){return c[3]&&(s[c[3]]=u),c[2]&&c[2].filter(function(m){return"number"==typeof m}).forEach(function(m){s[m.toString(16)]=u}),s}),$S=e(function(s,c,u){return s[u]=u,c[2]&&c[2].filter(function(m){return"string"==typeof m}).forEach(function(m){s[m]=u}),s}),qS=e(function(s,c,u){var h=c[2];return s[u]=u,h.forEach(function(m){s[m]=u}),s});var t="far"in $0||Mn.autoFetchSvg,r=Tw(jR,function(s,c){var u=c[0],h=c[1],m=c[2];return"far"===h&&!t&&(h="fas"),"string"==typeof u&&(s.names[u]={prefix:h,iconName:m}),"number"==typeof u&&(s.unicodes[u.toString(16)]={prefix:h,iconName:m}),s},{names:{},unicodes:{}});GS=r.names,WS=r.unicodes,Mw=Hv(Mn.styleDefault,{family:Mn.familyDefault})};function Nw(n,e){return(jS[n]||{})[e]}function Y4(n,e){return(qS[n]||{})[e]}function KS(n){return GS[n]||{prefix:null,iconName:null}}function Q3(){return Mw}function Hv(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,r=void 0===t?ji:t,s=P7[r][n],c=O7[r][n]||O7[r][s],u=n in xl.styles?n:null;return c||u||null}(function MR(n){V7.push(n)})(function(n){Mw=Hv(n.styleDefault,{family:Mn.familyDefault})}),ZS();var YS=(ro(Vv={},ji,Object.keys(L7[ji])),ro(Vv,vs,Object.keys(L7[vs])),Vv);function Uv(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.skipLookups,s=void 0!==r&&r,c=(ro(e={},ji,"".concat(Mn.cssPrefix,"-").concat(ji)),ro(e,vs,"".concat(Mn.cssPrefix,"-").concat(vs)),e),u=null,h=ji;(n.includes(c[ji])||n.some(function(w){return YS[ji].includes(w)}))&&(h=ji),(n.includes(c[vs])||n.some(function(w){return YS[vs].includes(w)}))&&(h=vs);var m=n.reduce(function(w,O){var $=qR(Mn.cssPrefix,O);if($0[O]?(O=$R[h].includes(O)?CR[h][O]:O,u=O,w.prefix=O):GR[h].indexOf(O)>-1?(u=O,w.prefix=Hv(O,{family:h})):$?w.iconName=$:O!==Mn.replacementClass&&O!==c[ji]&&O!==c[vs]&&w.rest.push(O),!s&&w.prefix&&w.iconName){var ee="fa"===u?KS(w.iconName):{},de=Y4(w.prefix,w.iconName);ee.prefix&&(u=null),w.iconName=ee.iconName||de||w.iconName,w.prefix=ee.prefix||w.prefix,"far"===w.prefix&&!$0.far&&$0.fas&&!Mn.autoFetchSvg&&(w.prefix="fas")}return w},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(m.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(m.prefix="fad"),!m.prefix&&h===vs&&($0.fass||Mn.autoFetchSvg)&&(m.prefix="fass",m.iconName=Y4(m.prefix,m.iconName)||m.iconName),("fa"===m.prefix||"fa"===u)&&(m.prefix=Q3()||"fas"),m}var YR=function(){function n(){(function aR(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function cR(n,e,t){e&&CS(n.prototype,e),t&&CS(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];var u=s.reduce(this._pullDefinitions,{});Object.keys(u).forEach(function(h){t.definitions[h]=Cn(Cn({},t.definitions[h]||{}),u[h]),Aw(h,u[h]);var m=L7[ji][h];m&&Aw(m,u[h]),ZS()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,r){var s=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(s).map(function(c){var u=s[c],h=u.prefix,m=u.iconName,w=u.icon,O=w[2];t[h]||(t[h]={}),O.length>0&&O.forEach(function($){"string"==typeof $&&(t[h][$]=w)}),t[h][m]=w}),t}}]),n}(),QS=[],G0={},W0={},QR=Object.keys(W0);function Rw(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var c=G0[n]||[];return c.forEach(function(u){e=u.apply(null,[e].concat(r))}),e}function Q4(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var s=G0[n]||[];s.forEach(function(c){c.apply(null,t)})}function b2(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return W0[n]?W0[n].apply(null,e):void 0}function Pw(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||Q3();if(e)return e=Y4(t,e)||e,US(JS.definitions,t,e)||US(xl.styles,t,e)}var JS=new YR,eP={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y2?(Q4("beforeI2svg",e),b2("pseudoElements2svg",e),b2("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Mn.autoReplaceSvg&&(Mn.autoReplaceSvg=!0),Mn.observeMutations=!0,VR(function(){nP({autoReplaceSvgRoot:t}),Q4("watch",e)})}},tc={noAuto:function(){Mn.autoReplaceSvg=!1,Mn.observeMutations=!1,Q4("noAuto")},config:Mn,dom:eP,parse:{icon:function(e){if(null===e)return null;if("object"===Tv(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Y4(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],r=Hv(e[0]);return{prefix:r,iconName:Y4(r,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(Mn.cssPrefix,"-"))>-1||e.match(bR))){var s=Uv(e.split(" "),{skipLookups:!0});return{prefix:s.prefix||Q3(),iconName:Y4(s.prefix,s.iconName)||s.iconName}}if("string"==typeof e){var c=Q3();return{prefix:c,iconName:Y4(c,e)||e}}}},library:JS,findIconDefinition:Pw,toHtml:U7},nP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,r=void 0===t?Bi:t;(Object.keys(xl.styles).length>0||Mn.autoFetchSvg)&&y2&&Mn.autoReplaceSvg&&tc.dom.i2svg({node:r})};function Bv(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(r){return U7(r)})}}),Object.defineProperty(n,"node",{get:function(){if(y2){var r=Bi.createElement("div");return r.innerHTML=n.html,r.children}}}),n}function Ow(n){var e=n.icons,t=e.main,r=e.mask,s=n.prefix,c=n.iconName,u=n.transform,h=n.symbol,m=n.title,w=n.maskId,O=n.titleId,$=n.extra,ee=n.watchable,de=void 0!==ee&&ee,Te=r.found?r:t,st=Te.width,It=Te.height,an="fak"===s,un=[Mn.replacementClass,c?"".concat(Mn.cssPrefix,"-").concat(c):""].filter(function(ga){return-1===$.classes.indexOf(ga)}).filter(function(ga){return""!==ga||!!ga}).concat($.classes).join(" "),qt={children:[],attributes:Cn(Cn({},$.attributes),{},{"data-prefix":s,"data-icon":c,class:un,role:$.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(st," ").concat(It)})},sn=an&&!~$.classes.indexOf("fa-fw")?{width:"".concat(st/It*16*.0625,"em")}:{};de&&(qt.attributes[Z4]=""),m&&(qt.children.push({tag:"title",attributes:{id:qt.attributes["aria-labelledby"]||"title-".concat(O||H7())},children:[m]}),delete qt.attributes.title);var In=Cn(Cn({},qt),{},{prefix:s,iconName:c,main:t,mask:r,maskId:w,transform:u,symbol:h,styles:Cn(Cn({},sn),$.styles)}),Fn=r.found&&t.found?b2("generateAbstractMask",In)||{children:[],attributes:{}}:b2("generateAbstractIcon",In)||{children:[],attributes:{}},wr=Fn.attributes;return In.children=Fn.children,In.attributes=wr,h?function iP(n){var t=n.iconName,r=n.children,s=n.attributes,c=n.symbol,u=!0===c?"".concat(n.prefix,"-").concat(Mn.cssPrefix,"-").concat(t):c;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Cn(Cn({},s),{},{id:u}),children:r}]}]}(In):function rP(n){var e=n.children,t=n.main,r=n.mask,s=n.attributes,c=n.styles,u=n.transform;if(Dw(u)&&t.found&&!r.found){var w={x:t.width/t.height/2,y:.5};s.style=Ov(Cn(Cn({},c),{},{"transform-origin":"".concat(w.x+u.x/16,"em ").concat(w.y+u.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}(In)}function XS(n){var e=n.content,t=n.width,r=n.height,s=n.transform,c=n.title,u=n.extra,h=n.watchable,m=void 0!==h&&h,w=Cn(Cn(Cn({},u.attributes),c?{title:c}:{}),{},{class:u.classes.join(" ")});m&&(w[Z4]="");var O=Cn({},u.styles);Dw(s)&&(O.transform=function OR(n){var e=n.transform,t=n.width,s=n.height,c=void 0===s?16:s,u=n.startCentered,h=void 0!==u&&u,m="";return m+=h&&AS?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-c/2,"em) "):h?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(m+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:s,startCentered:!0,width:t,height:r}),O["-webkit-transform"]=O.transform);var $=Ov(O);$.length>0&&(w.style=$);var ee=[];return ee.push({tag:"span",attributes:w,children:[e]}),c&&ee.push({tag:"span",attributes:{class:"sr-only"},children:[c]}),ee}function sP(n){var e=n.content,t=n.title,r=n.extra,s=Cn(Cn(Cn({},r.attributes),t?{title:t}:{}),{},{class:r.classes.join(" ")}),c=Ov(r.styles);c.length>0&&(s.style=c);var u=[];return u.push({tag:"span",attributes:s,children:[e]}),t&&u.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),u}var Lw=xl.styles;function Fw(n){var e=n[0],t=n[1],c=gw(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(c)?{tag:"g",attributes:{class:"".concat(Mn.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(Mn.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:c[0]}},{tag:"path",attributes:{class:"".concat(Mn.cssPrefix,"-").concat("primary"),fill:"currentColor",d:c[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:c}}}}var oP={found:!1,width:512,height:512};function zw(n,e){var t=e;return"fa"===e&&null!==Mn.styleDefault&&(e=Q3()),new Promise(function(r,s){if(b2("missingIconAbstract"),"fa"===t){var u=KS(n)||{};n=u.iconName||n,e=u.prefix||e}if(n&&e&&Lw[e]&&Lw[e][n])return r(Fw(Lw[e][n]));(function aP(n,e){!RS&&!Mn.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),r(Cn(Cn({},oP),{},{icon:Mn.showMissingIcons&&n&&b2("missingIconAbstract")||{}}))})}var eT=function(){},Vw=Mn.measurePerformance&&Av&&Av.mark&&Av.measure?Av:{mark:eT,measure:eT},B7='FA "6.2.0"',Hw_begin=function(e){return Vw.mark("".concat(B7," ").concat(e," begins")),function(){return function(e){Vw.mark("".concat(B7," ").concat(e," ends")),Vw.measure("".concat(B7," ").concat(e),"".concat(B7," ").concat(e," begins"),"".concat(B7," ").concat(e," ends"))}(e)}},jv=function(){};function nT(n){return"string"==typeof(n.getAttribute?n.getAttribute(Z4):null)}function hP(n){return Bi.createElementNS("http://www.w3.org/2000/svg",n)}function fP(n){return Bi.createElement(n)}function rT(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,r=void 0===t?"svg"===n.tag?hP:fP:t;if("string"==typeof n)return Bi.createTextNode(n);var s=r(n.tag);Object.keys(n.attributes||[]).forEach(function(u){s.setAttribute(u,n.attributes[u])});var c=n.children||[];return c.forEach(function(u){s.appendChild(rT(u,{ceFn:r}))}),s}var $v={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(s){t.parentNode.insertBefore(rT(s),t)}),null===t.getAttribute(Z4)&&Mn.keepOriginalSource){var r=Bi.createComment(function pP(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(r,t)}else t.remove()},nest:function(e){var t=e[0],r=e[1];if(~Iw(t).indexOf(Mn.replacementClass))return $v.replace(e);var s=new RegExp("".concat(Mn.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var c=r[0].attributes.class.split(" ").reduce(function(h,m){return m===Mn.replacementClass||m.match(s)?h.toSvg.push(m):h.toNode.push(m),h},{toNode:[],toSvg:[]});r[0].attributes.class=c.toSvg.join(" "),0===c.toNode.length?t.removeAttribute("class"):t.setAttribute("class",c.toNode.join(" "))}var u=r.map(function(h){return U7(h)}).join("\n");t.setAttribute(Z4,""),t.innerHTML=u}};function iT(n){n()}function sT(n,e){var t="function"==typeof e?e:jv;if(0===n.length)t();else{var r=iT;"async"===Mn.mutateApproach&&(r=K3.requestAnimationFrame||iT),r(function(){var s=function dP(){return!0===Mn.autoReplaceSvg?$v.replace:$v[Mn.autoReplaceSvg]||$v.replace}(),c=Hw_begin("mutate");n.map(s),c(),t()})}}var Uw=!1;function oT(){Uw=!0}function Bw(){Uw=!1}var Gv=null;function aT(n){if(xS&&Mn.observeMutations){var e=n.treeCallback,t=void 0===e?jv:e,r=n.nodeCallback,s=void 0===r?jv:r,c=n.pseudoElementsCallback,u=void 0===c?jv:c,h=n.observeMutationsRoot,m=void 0===h?Bi:h;Gv=new xS(function(w){if(!Uw){var O=Q3();j0(w).forEach(function($){if("childList"===$.type&&$.addedNodes.length>0&&!nT($.addedNodes[0])&&(Mn.searchPseudoElements&&u($.target),t($.target)),"attributes"===$.type&&$.target.parentNode&&Mn.searchPseudoElements&&u($.target.parentNode),"attributes"===$.type&&nT($.target)&&~DR.indexOf($.attributeName))if("class"===$.attributeName&&function lP(n){var e=n.getAttribute?n.getAttribute(bw):null,t=n.getAttribute?n.getAttribute(ww):null;return e&&t}($.target)){var ee=Uv(Iw($.target)),Te=ee.iconName;$.target.setAttribute(bw,ee.prefix||O),Te&&$.target.setAttribute(ww,Te)}else(function uP(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Mn.replacementClass)})($.target)&&s($.target)})}}),y2&&Gv.observe(m,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function gP(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(r,s){var c=s.split(":"),u=c[0],h=c.slice(1);return u&&h.length>0&&(r[u]=h.join(":").trim()),r},{})),t}function vP(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),r=void 0!==n.innerText?n.innerText.trim():"",s=Uv(Iw(n));return s.prefix||(s.prefix=Q3()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=function ZR(n,e){return($S[n]||{})[e]}(s.prefix,n.innerText)||Nw(s.prefix,xw(n.innerText))),!s.iconName&&Mn.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=n.firstChild.data)),s}function yP(n){var e=j0(n.attributes).reduce(function(s,c){return"class"!==s.name&&"style"!==s.name&&(s[c.name]=c.value),s},{}),t=n.getAttribute("title"),r=n.getAttribute("data-fa-title-id");return Mn.autoA11y&&(t?e["aria-labelledby"]="".concat(Mn.replacementClass,"-title-").concat(r||H7()):(e["aria-hidden"]="true",e.focusable="false")),e}function cT(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=vP(n),r=t.iconName,s=t.prefix,c=t.rest,u=yP(n),h=Rw("parseNodeAttributes",{},n),m=e.styleParser?gP(n):[];return Cn({iconName:r,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:s,transform:lu,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:c,styles:m,attributes:u}},h)}var CP=xl.styles;function lT(n){var e="nest"===Mn.autoReplaceSvg?cT(n,{styleParser:!1}):cT(n);return~e.extra.classes.indexOf(PS)?b2("generateLayersText",n,e):b2("generateSvgReplacementMutation",n,e)}var J3=new Set;function uT(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!y2)return Promise.resolve();var t=Bi.documentElement.classList,r=function($){return t.add("".concat(kS,"-").concat($))},s=function($){return t.remove("".concat(kS,"-").concat($))},c=Mn.autoFetchSvg?J3:Ew.map(function(O){return"fa-".concat(O)}).concat(Object.keys(CP));c.includes("fa")||c.push("fa");var u=[".".concat(PS,":not([").concat(Z4,"])")].concat(c.map(function(O){return".".concat(O,":not([").concat(Z4,"])")})).join(", ");if(0===u.length)return Promise.resolve();var h=[];try{h=j0(n.querySelectorAll(u))}catch{}if(!(h.length>0))return Promise.resolve();r("pending"),s("complete");var m=Hw_begin("onTree"),w=h.reduce(function(O,$){try{var ee=lT($);ee&&O.push(ee)}catch(de){RS||"MissingIcon"===de.name&&console.error(de)}return O},[]);return new Promise(function(O,$){Promise.all(w).then(function(ee){sT(ee,function(){r("active"),r("complete"),s("pending"),"function"==typeof e&&e(),m(),O()})}).catch(function(ee){m(),$(ee)})})}function bP(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;lT(n).then(function(t){t&&sT([t],e)})}function wP(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e||{}).icon?e:Pw(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:Pw(s||{})),n(r,Cn(Cn({},t),{},{mask:s}))}}Ew.map(function(n){J3.add("fa-".concat(n))}),Object.keys(P7[ji]).map(J3.add.bind(J3)),Object.keys(P7[vs]).map(J3.add.bind(J3)),J3=k7(J3);var EP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.transform,s=void 0===r?lu:r,c=t.symbol,u=void 0!==c&&c,h=t.mask,m=void 0===h?null:h,w=t.maskId,O=void 0===w?null:w,$=t.title,ee=void 0===$?null:$,de=t.titleId,Te=void 0===de?null:de,st=t.classes,It=void 0===st?[]:st,an=t.attributes,un=void 0===an?{}:an,qt=t.styles,sn=void 0===qt?{}:qt;if(e){var In=e.prefix,Fn=e.iconName,jr=e.icon;return Bv(Cn({type:"icon"},e),function(){return Q4("beforeDOMElementCreation",{iconDefinition:e,params:t}),Mn.autoA11y&&(ee?un["aria-labelledby"]="".concat(Mn.replacementClass,"-title-").concat(Te||H7()):(un["aria-hidden"]="true",un.focusable="false")),Ow({icons:{main:Fw(jr),mask:m?Fw(m.icon):{found:!1,width:null,height:null,icon:{}}},prefix:In,iconName:Fn,transform:Cn(Cn({},lu),s),symbol:u,title:ee,maskId:O,titleId:Te,extra:{attributes:un,styles:sn,classes:It}})})}},IP={mixout:function(){return{icon:wP(EP)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=uT,t.nodeCallback=bP,t}}},provides:function(e){e.i2svg=function(t){var r=t.node,c=t.callback;return uT(void 0===r?Bi:r,void 0===c?function(){}:c)},e.generateSvgReplacementMutation=function(t,r){var s=r.iconName,c=r.title,u=r.titleId,h=r.prefix,m=r.transform,w=r.symbol,O=r.mask,$=r.maskId,ee=r.extra;return new Promise(function(de,Te){Promise.all([zw(s,h),O.iconName?zw(O.iconName,O.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(st){var It=gw(st,2);de([t,Ow({icons:{main:It[0],mask:It[1]},prefix:h,iconName:s,transform:m,symbol:w,maskId:$,title:c,titleId:u,extra:ee,watchable:!0})])}).catch(Te)})},e.generateAbstractIcon=function(t){var w,r=t.children,s=t.attributes,c=t.main,u=t.transform,m=Ov(t.styles);return m.length>0&&(s.style=m),Dw(u)&&(w=b2("generateAbstractTransformGrouping",{main:c,transform:u,containerWidth:c.width,iconWidth:c.width})),r.push(w||c.icon),{children:r,attributes:s}}}},DP={mixout:function(){return{layer:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.classes,c=void 0===s?[]:s;return Bv({type:"layer"},function(){Q4("beforeDOMElementCreation",{assembler:t,params:r});var u=[];return t(function(h){Array.isArray(h)?h.map(function(m){u=u.concat(m.abstract)}):u=u.concat(h.abstract)}),[{tag:"span",attributes:{class:["".concat(Mn.cssPrefix,"-layers")].concat(k7(c)).join(" ")},children:u}]})}}}},SP={mixout:function(){return{counter:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.title,c=void 0===s?null:s,u=r.classes,h=void 0===u?[]:u,m=r.attributes,w=void 0===m?{}:m,O=r.styles,$=void 0===O?{}:O;return Bv({type:"counter",content:t},function(){return Q4("beforeDOMElementCreation",{content:t,params:r}),sP({content:t.toString(),title:c,extra:{attributes:w,styles:$,classes:["".concat(Mn.cssPrefix,"-layers-counter")].concat(k7(h))}})})}}}},TP={mixout:function(){return{text:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.transform,c=void 0===s?lu:s,u=r.title,h=void 0===u?null:u,m=r.classes,w=void 0===m?[]:m,O=r.attributes,$=void 0===O?{}:O,ee=r.styles,de=void 0===ee?{}:ee;return Bv({type:"text",content:t},function(){return Q4("beforeDOMElementCreation",{content:t,params:r}),XS({content:t,transform:Cn(Cn({},lu),c),title:h,extra:{attributes:$,styles:de,classes:["".concat(Mn.cssPrefix,"-layers-text")].concat(k7(w))}})})}}},provides:function(e){e.generateLayersText=function(t,r){var s=r.title,c=r.transform,u=r.extra,h=null,m=null;if(AS){var w=parseInt(getComputedStyle(t).fontSize,10),O=t.getBoundingClientRect();h=O.width/w,m=O.height/w}return Mn.autoA11y&&!s&&(u.attributes["aria-hidden"]="true"),Promise.resolve([t,XS({content:t.innerHTML,width:h,height:m,transform:c,title:s,extra:u,watchable:!0})])}}},xP=new RegExp('"',"ug"),dT=[1105920,1112319];function hT(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(r,s){if(null!==n.getAttribute(t))return r();var u=j0(n.children).filter(function(jr){return jr.getAttribute(Cw)===e})[0],h=K3.getComputedStyle(n,e),m=h.getPropertyValue("font-family").match(wR),w=h.getPropertyValue("font-weight"),O=h.getPropertyValue("content");if(u&&!m)return n.removeChild(u),r();if(m&&"none"!==O&&""!==O){var $=h.getPropertyValue("content"),ee=~["Sharp"].indexOf(m[2])?vs:ji,de=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(m[2])?O7[ee][m[2].toLowerCase()]:ER[ee][w],Te=function AP(n){var e=n.replace(xP,""),t=function BR(n,e){var s,t=n.length,r=n.charCodeAt(e);return r>=55296&&r<=56319&&t>e+1&&(s=n.charCodeAt(e+1))>=56320&&s<=57343?1024*(r-55296)+s-56320+65536:r}(e,0),r=t>=dT[0]&&t<=dT[1],s=2===e.length&&e[0]===e[1];return{value:xw(s?e[0]:e),isSecondary:r||s}}($),st=Te.value,It=Te.isSecondary,an=m[0].startsWith("FontAwesome"),un=Nw(de,st),qt=un;if(an){var sn=function KR(n){var e=WS[n],t=Nw("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(st);sn.iconName&&sn.prefix&&(un=sn.iconName,de=sn.prefix)}if(!un||It||u&&u.getAttribute(bw)===de&&u.getAttribute(ww)===qt)r();else{n.setAttribute(t,qt),u&&n.removeChild(u);var In=function _P(){return{iconName:null,title:null,titleId:null,prefix:null,transform:lu,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),Fn=In.extra;Fn.attributes[Cw]=e,zw(un,de).then(function(jr){var wr=Ow(Cn(Cn({},In),{},{icons:{main:jr,mask:{prefix:null,iconName:null,rest:[]}},prefix:de,iconName:qt,extra:Fn,watchable:!0})),ga=Bi.createElement("svg");"::before"===e?n.insertBefore(ga,n.firstChild):n.appendChild(ga),ga.outerHTML=wr.map(function(S2){return U7(S2)}).join("\n"),n.removeAttribute(t),r()}).catch(s)}}else r()})}function MP(n){return Promise.all([hT(n,"::before"),hT(n,"::after")])}function NP(n){return!(n.parentNode===document.head||~_R.indexOf(n.tagName.toUpperCase())||n.getAttribute(Cw)||n.parentNode&&"svg"===n.parentNode.tagName)}function fT(n){if(y2)return new Promise(function(e,t){var r=j0(n.querySelectorAll("*")).filter(NP).map(MP),s=Hw_begin("searchPseudoElements");oT(),Promise.all(r).then(function(){s(),Bw(),e()}).catch(function(){s(),Bw(),t()})})}var pT=!1,mT=function(e){return e.toLowerCase().split(" ").reduce(function(r,s){var c=s.toLowerCase().split("-"),u=c[0],h=c.slice(1).join("-");if(u&&"h"===h)return r.flipX=!0,r;if(u&&"v"===h)return r.flipY=!0,r;if(h=parseFloat(h),isNaN(h))return r;switch(u){case"grow":r.size=r.size+h;break;case"shrink":r.size=r.size-h;break;case"left":r.x=r.x-h;break;case"right":r.x=r.x+h;break;case"up":r.y=r.y-h;break;case"down":r.y=r.y+h;break;case"rotate":r.rotate=r.rotate+h}return r},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},jw={x:0,y:0,width:"100%",height:"100%"};function gT(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function OP(n){return"g"===n.tag?n.children:[n]}var LP={hooks:function(){return{parseNodeAttributes:function(t,r){var s=r.getAttribute("data-fa-mask"),c=s?Uv(s.split(" ").map(function(u){return u.trim()})):{prefix:null,iconName:null,rest:[]};return c.prefix||(c.prefix=Q3()),t.mask=c,t.maskId=r.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var r=t.children,s=t.attributes,c=t.main,u=t.mask,h=t.maskId,O=c.icon,ee=u.icon,de=function PR(n){var e=n.transform,r=n.iconWidth,s={transform:"translate(".concat(n.containerWidth/2," 256)")},c="translate(".concat(32*e.x,", ").concat(32*e.y,") "),u="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),h="rotate(".concat(e.rotate," 0 0)");return{outer:s,inner:{transform:"".concat(c," ").concat(u," ").concat(h)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:t.transform,containerWidth:u.width,iconWidth:c.width}),Te={tag:"rect",attributes:Cn(Cn({},jw),{},{fill:"white"})},st=O.children?{children:O.children.map(gT)}:{},It={tag:"g",attributes:Cn({},de.inner),children:[gT(Cn({tag:O.tag,attributes:Cn(Cn({},O.attributes),de.path)},st))]},an={tag:"g",attributes:Cn({},de.outer),children:[It]},un="mask-".concat(h||H7()),qt="clip-".concat(h||H7()),sn={tag:"mask",attributes:Cn(Cn({},jw),{},{id:un,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Te,an]},In={tag:"defs",children:[{tag:"clipPath",attributes:{id:qt},children:OP(ee)},sn]};return r.push(In,{tag:"rect",attributes:Cn({fill:"currentColor","clip-path":"url(#".concat(qt,")"),mask:"url(#".concat(un,")")},jw)}),{children:r,attributes:s}}}};!function JR(n,e){var t=e.mixoutsTo;QS=n,G0={},Object.keys(W0).forEach(function(r){-1===QR.indexOf(r)&&delete W0[r]}),QS.forEach(function(r){var s=r.mixout?r.mixout():{};if(Object.keys(s).forEach(function(u){"function"==typeof s[u]&&(t[u]=s[u]),"object"===Tv(s[u])&&Object.keys(s[u]).forEach(function(h){t[u]||(t[u]={}),t[u][h]=s[u][h]})}),r.hooks){var c=r.hooks();Object.keys(c).forEach(function(u){G0[u]||(G0[u]=[]),G0[u].push(c[u])})}r.provides&&r.provides(W0)})}([FR,IP,DP,SP,TP,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=fT,t}}},provides:function(e){e.pseudoElements2svg=function(t){var r=t.node;Mn.searchPseudoElements&&fT(void 0===r?Bi:r)}}},{mixout:function(){return{dom:{unwatch:function(){oT(),pT=!0}}}},hooks:function(){return{bootstrap:function(){aT(Rw("mutationObserverCallbacks",{}))},noAuto:function(){!function mP(){!Gv||Gv.disconnect()}()},watch:function(t){var r=t.observeMutationsRoot;pT?Bw():aT(Rw("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},{mixout:function(){return{parse:{transform:function(t){return mT(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,r){var s=r.getAttribute("data-fa-transform");return s&&(t.transform=mT(s)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var r=t.main,s=t.transform,u=t.iconWidth,h={transform:"translate(".concat(t.containerWidth/2," 256)")},m="translate(".concat(32*s.x,", ").concat(32*s.y,") "),w="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),O="rotate(".concat(s.rotate," 0 0)"),de={outer:h,inner:{transform:"".concat(m," ").concat(w," ").concat(O)},path:{transform:"translate(".concat(u/2*-1," -256)")}};return{tag:"g",attributes:Cn({},de.outer),children:[{tag:"g",attributes:Cn({},de.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Cn(Cn({},r.icon.attributes),de.path)}]}]}}}},LP,{provides:function(e){var t=!1;K3.matchMedia&&(t=K3.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],s={fill:"currentColor"},c={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:Cn(Cn({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var u=Cn(Cn({},c),{},{attributeName:"opacity"}),h={tag:"circle",attributes:Cn(Cn({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||h.children.push({tag:"animate",attributes:Cn(Cn({},c),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Cn(Cn({},u),{},{values:"1;0;1;1;0;1;"})}),r.push(h),r.push({tag:"path",attributes:Cn(Cn({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Cn(Cn({},u),{},{values:"1;0;0;0;0;1;"})}]}),t||r.push({tag:"path",attributes:Cn(Cn({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Cn(Cn({},u),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},{hooks:function(){return{parseNodeAttributes:function(t,r){var s=r.getAttribute("data-fa-symbol");return t.symbol=null!==s&&(""===s||s),t}}}}],{mixoutsTo:tc});var HP=tc.parse,UP=tc.icon;const BP=["*"],GP=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let ZP=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KP=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const r of t){r.prefix in this.definitions||(this.definitions[r.prefix]={}),this.definitions[r.prefix][r.iconName]=r;for(const s of r.icon[2])"string"==typeof s&&(this.definitions[r.prefix][s]=r)}}addIconPacks(...t){for(const r of t){const s=Object.keys(r).map(c=>r[c]);this.addIcons(...s)}}getIconDefinition(t,r){return t in this.definitions&&r in this.definitions[t]?this.definitions[t][r]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YP=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=x.lG2({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[x.TTD]}),n})(),QP=(()=>{class n{constructor(t,r){this.renderer=t,this.elementRef=r}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(x.Y36(x.Qsj),x.Y36(x.SBq))},n.\u0275cmp=x.Xpm({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[x.TTD],ngContentSelectors:BP,decls:1,vars:0,template:function(t,r){1&t&&(x.F$t(),x.Hsn(0))},encapsulation:2}),n})(),JP=(()=>{class n{constructor(t,r,s,c,u){this.sanitizer=t,this.config=r,this.iconLibrary=s,this.stackItem=c,this.classes=[],null!=u&&null==c&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let r=null;if(r=this.icon??this.config.fallbackIcon,t){const s=this.findIconDefinition(r);if(null!=s){const c=this.buildParams();this.renderIcon(s,c)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const r=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in r?r:this.iconLibrary.getIconDefinition(r.prefix,r.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(r),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},r="string"==typeof this.transform?HP.transform(this.transform):this.transform;return{title:this.title,transform:r,classes:[...GP(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,r){const s=UP(t,r);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(s.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(x.Y36(v.H7),x.Y36(ZP),x.Y36(KP),x.Y36(YP,8),x.Y36(QP,8))},n.\u0275cmp=x.Xpm({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,r){2&t&&(x.Ikx("innerHTML",r.renderedIconHTML,x.oJD),x.uIk("title",r.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[x.TTD],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),XP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n}),n.\u0275inj=x.cJS({}),n})();const eO=function(n){return{panelactive:n}};let vT=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.flag=!1,this.facebook=ol,this.google=gt,this.linkedin=Un,this.gitHub=Ih}ngOnInit(){this.loginForm=new q.cw({login:new q.NI(null,[q.kI.required,q.kI.email]),pass:new q.NI(null,q.kI.required)}),this.registrationForm=new q.cw({userEmail:new q.NI(null,[q.kI.required,q.kI.email]),userPass:new q.NI(null,q.kI.required)})}}return n.\u0275fac=function(t){return new(t||n)(x.Y36(M7),x.Y36(De.F0))},n.\u0275cmp=x.Xpm({type:n,selectors:[["app-enter"]],decls:57,vars:13,consts:[["id","container",1,"container",3,"ngClass"],[1,"form-container","sign-up-container"],["novalidate","",3,"formGroup","ngSubmit"],[1,"social-container"],["href","#",1,"social"],[3,"icon"],["href","#",1,"social",3,"click"],["type","email","placeholder","Email","formControlName","userEmail"],["userEmail",""],["type","password","placeholder","Password","formControlName","userPass"],["userPass",""],["type","submit",1,"btn",3,"disabled"],[1,"form-container","sign-in-container"],["type","email","placeholder","Email","formControlName","login"],["login",""],["type","password","placeholder","Password","formControlName","pass"],["pass",""],["href","/forgot-password"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-left"],["id","signIn",1,"ghost",3,"click"],[1,"overlay-panel","overlay-right"],["id","signUp",1,"ghost",3,"click"]],template:function(t,r){if(1&t){const s=x.EpF();x.TgZ(0,"div",0)(1,"div",1)(2,"form",2),x.NdJ("ngSubmit",function(){x.CHM(s);const u=x.MAs(15),h=x.MAs(17);return x.KtG(r.authService.signUp(u.value,h.value))}),x.TgZ(3,"h1"),x._uU(4,"Create Account"),x.qZA(),x.TgZ(5,"div",3)(6,"a",4),x._UZ(7,"fa-icon",5),x.qZA(),x.TgZ(8,"a",6),x.NdJ("click",function(){return r.authService.googleAuth()}),x._UZ(9,"fa-icon",5),x.qZA(),x.TgZ(10,"a",4),x._UZ(11,"fa-icon",5),x.qZA()(),x.TgZ(12,"span"),x._uU(13,"or use your email for registration"),x.qZA(),x._UZ(14,"input",7,8)(16,"input",9,10),x.TgZ(18,"button",11),x._uU(19,"Sign Up"),x.qZA()()(),x.TgZ(20,"div",12)(21,"form",2),x.NdJ("ngSubmit",function(){x.CHM(s);const u=x.MAs(34),h=x.MAs(36);return x.KtG(r.authService.signIn(u.value,h.value))}),x.TgZ(22,"h1"),x._uU(23,"Sign in"),x.qZA(),x.TgZ(24,"div",3)(25,"a",4),x._UZ(26,"fa-icon",5),x.qZA(),x.TgZ(27,"a",6),x.NdJ("click",function(){return r.authService.googleAuth()}),x._UZ(28,"fa-icon",5),x.qZA(),x.TgZ(29,"a",4),x._UZ(30,"fa-icon",5),x.qZA()(),x.TgZ(31,"span"),x._uU(32,"or use your account"),x.qZA(),x._UZ(33,"input",13,14)(35,"input",15,16),x.TgZ(37,"a",17),x._uU(38,"Forgot your password?"),x.qZA(),x.TgZ(39,"button",11),x._uU(40,"Sign In"),x.qZA()()(),x.TgZ(41,"div",18)(42,"div",19)(43,"div",20)(44,"h1"),x._uU(45,"Welcome!"),x.qZA(),x.TgZ(46,"p"),x._uU(47,"To keep chat please login with your personal info"),x.qZA(),x.TgZ(48,"button",21),x.NdJ("click",function(){return r.flag=!r.flag}),x._uU(49,"Sign In"),x.qZA()(),x.TgZ(50,"div",22)(51,"h1"),x._uU(52,"Hello!"),x.qZA(),x.TgZ(53,"p"),x._uU(54,"Sign up please and start chat with us"),x.qZA(),x.TgZ(55,"button",23),x.NdJ("click",function(){return r.flag=!r.flag}),x._uU(56,"Sign Up"),x.qZA()()()()()}2&t&&(x.Q6J("ngClass",x.VKq(11,eO,r.flag)),x.xp6(2),x.Q6J("formGroup",r.registrationForm),x.xp6(5),x.Q6J("icon",r.facebook),x.xp6(2),x.Q6J("icon",r.google),x.xp6(2),x.Q6J("icon",r.gitHub),x.xp6(7),x.Q6J("disabled",r.registrationForm.invalid),x.xp6(3),x.Q6J("formGroup",r.loginForm),x.xp6(5),x.Q6J("icon",r.facebook),x.xp6(2),x.Q6J("icon",r.google),x.xp6(2),x.Q6J("icon",r.gitHub),x.xp6(9),x.Q6J("disabled",r.loginForm.invalid))},dependencies:[Md.mk,q._Y,q.Fj,q.JJ,q.JL,q.sg,q.u,JP],styles:['@import"https://fonts.googleapis.com/css?family=Montserrat:400,800";*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;font-family:Montserrat,sans-serif;height:100vh}h1[_ngcontent-%COMP%]{font-weight:700;margin:0}h2[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #5759e6;background-color:#5759e6;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 50px;height:100%;text-align:center}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%}.container[_ngcontent-%COMP%]{position:absolute;top:40%;bottom:60%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border-radius:15px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;width:768px;max-width:100%;min-height:480px;text-align:center}.form-container[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;transition:all .6s ease-in-out}.sign-in-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.container.panelactive[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1}.container.panelactive[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:show .6s}@keyframes show{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.container.panelactive[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.overlay[_ngcontent-%COMP%]{background:#7e97a6;background:linear-gradient(to right,#5759e6,#7e97a6);background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:transform .6s ease-in-out}.container.panelactive[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.overlay-panel[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;text-align:center;top:0;height:100%;width:50%;transform:translate(0);transition:transform .6s ease-in-out}.overlay-left[_ngcontent-%COMP%]{transform:translate(-20%)}.container.panelactive[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translate(0)}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.panelactive[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translate(20%)}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #DDDDDD;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}']}),n})(),tO=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["enter"]),!0}}return n.\u0275fac=function(t){return new(t||n)(x.LFG(M7),x.LFG(De.F0))},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=x.Xpm({type:n,selectors:[["app-page404"]],decls:4,vars:0,template:function(t,r){1&t&&(x.TgZ(0,"h2"),x._uU(1,"Page no found "),x._UZ(2,"br"),x._uU(3," 404 "),x.qZA())},styles:["h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;background:pink}"]}),n})(),rO=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(x.Y36(M7))},n.\u0275cmp=x.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"reset"],[1,"authBlock"],["type","email","placeholder","Email Address","required",""],["passwordResetEmail",""],["type","submit",3,"click"],[1,"redirectToLogin"],["type","button","routerLink","/enter"]],template:function(t,r){if(1&t){const s=x.EpF();x.TgZ(0,"div",0)(1,"div",1)(2,"h3"),x._uU(3,"Reset Password"),x.qZA(),x.TgZ(4,"p"),x._uU(5," Please enter your email address to request a password reset. "),x.qZA(),x.TgZ(6,"div"),x._UZ(7,"input",2,3),x.qZA(),x.TgZ(9,"div")(10,"button",4),x.NdJ("click",function(){x.CHM(s);const u=x.MAs(8);return x.KtG(r.authService.forgotPassword(u.value))}),x._uU(11,"Reset Password"),x.qZA()()(),x.TgZ(12,"div",5)(13,"h3"),x._uU(14,"Go back to?"),x.qZA(),x.TgZ(15,"button",6),x._uU(16," Sign in "),x.qZA()()()}},dependencies:[De.rH],styles:['@import"https://fonts.googleapis.com/css?family=Montserrat:400,800";body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;font-family:Montserrat,sans-serif;height:100vh}.reset[_ngcontent-%COMP%]{position:absolute;top:40%;bottom:60%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border-radius:15px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;width:768px;max-width:100%;min-height:480px;text-align:center}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #5759e6;background-color:#5759e6;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0}']}),n})();function iO(n,e){if(1&n&&(x.TgZ(0,"div")(1,"p"),x._uU(2," We have sent a confirmation email to "),x.TgZ(3,"strong"),x._uU(4),x.qZA(),x._uU(5,". "),x.qZA(),x.TgZ(6,"p"),x._uU(7," Please check your email and click on the link to verfiy your email address. "),x.qZA()()),2&n){const t=e.ngIf;x.xp6(4),x.Oqu(t.email)}}const sO=[{path:"",component:vT,pathMatch:"full"},{path:"enter",component:vT},{path:"main",loadChildren:()=>W.e(178).then(W.bind(W,1178)).then(n=>n.MainModule),canActivate:[tO]},{path:"forgot-password",component:rO},{path:"verify-email",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(x.Y36(M7))},n.\u0275cmp=x.Xpm({type:n,selectors:[["app-verify-email"]],decls:13,vars:1,consts:[[1,"verify"],[4,"ngIf"],["type","button",3,"click"],[1,"redirectToLogin"],["type","button","routerLink","/enter"]],template:function(t,r){1&t&&(x.TgZ(0,"div",0)(1,"div")(2,"h2"),x._uU(3,"Thank You for Registering"),x.qZA(),x.YNc(4,iO,8,1,"div",1),x.TgZ(5,"div")(6,"button",2),x.NdJ("click",function(){return r.authService.sendVerificationMail()}),x._uU(7," Resend Verification Email "),x.qZA()()(),x.TgZ(8,"div",3)(9,"h3"),x._uU(10,"Go back to?"),x.qZA(),x.TgZ(11,"button",4),x._uU(12," Sign in "),x.qZA()()()),2&t&&(x.xp6(4),x.Q6J("ngIf",r.authService.userData))},dependencies:[Md.O5,De.rH],styles:['@import"https://fonts.googleapis.com/css?family=Montserrat:400,800";body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;font-family:Montserrat,sans-serif;height:100vh}.verify[_ngcontent-%COMP%]{position:absolute;top:40%;bottom:60%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border-radius:15px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;overflow:hidden;width:768px;max-width:100%;min-height:480px;text-align:center}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #5759e6;background-color:#5759e6;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}']}),n})()},{path:"**",component:nO}];let oO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n}),n.\u0275inj=x.cJS({imports:[De.Bz.forRoot(sO),De.Bz]}),n})();!function(n,e){"object"==typeof exports&&typeof module<"u"?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n=typeof globalThis<"u"?globalThis:n||self).CSSDoodle={})}(void 0,function(n){const e=[":",";",",","(",")","[","]","{","}","\u03c0","\xb1","+","-","*","/","%",'"',"'","`","@","="],t={escape:y=>"\\"==y,space:y=>/[\r\n\t\s]/.test(y),digit:y=>/^[0-9]$/.test(y),sign:y=>/^[+-]$/.test(y),dot:y=>"."==y,quote:y=>/^["'`]$/.test(y),symbol:y=>e.includes(y),hexNum:y=>/^[0-9a-f]$/i.test(y),hex:(y,D,I)=>"0"==y&&t.letter(D,"x")&&t.hexNum(I),expWithSign:(y,D,I)=>t.letter(y,"e")&&t.sign(D)&&t.digit(I),exp:(y,D)=>t.letter(y,"e")&&t.digit(D),dots:(y,D)=>t.dot(y)&&t.dot(D),letter:(y,D)=>String(y).toLowerCase()==String(D).toLowerCase(),comment:(y,D)=>"/"==y&&"*"==D,inlineComment:(y,D)=>"/"==y&&"/"===D,selfClosedTag:(y,D)=>"/"==y&&">"==D,closedTag:(y,D)=>"<"==y&&"/"==D};class r{constructor({type:D,value:I,pos:k,status:B}){this.type=D,this.value=I,this.pos=k,B&&(this.status=B)}isSymbol(...D){let I="Symbol"==this.type;return D.length?D.some(k=>k===this.value):I}isSpace(){return"Space"==this.type}isNumber(){return"Number"==this.type}isWord(){return"Word"==this.type}}function s(y){let D=-1,I=y.length,k=-1,B=0;return{curr:(G=0)=>y[D+G],next(G=1){let ie=y[D+=G];return"\n"===ie?(B++,k=0):k+=G,ie},end:()=>D>=I,get:()=>({prev:y[D-1],curr:y[D+0],next:y[D+1],next2:y[D+2],next3:y[D+3],pos:[k,B]})}}function c(y){for(;y.next();){let{curr:D,prev:I}=y.get();if(t.comment(D,I))break}}function u(y){for(;y.next()&&"\n"!==y.curr(););}function h(y){return[":",";",",","{","}","(",")","[","]"].includes(y)}function m(y){let D="";for(;!y.end();){let{curr:I,next:k}=y.get();D+=I;let B=t.symbol(k)||t.space(k)||t.digit(k);if(D.length&&B&&!t.closedTag(I,k))break;y.next()}return D.trim()}function w(y){let D="";for(;!y.end();){let{curr:I,next:k}=y.get();if(D+=I,!t.space(k))break;y.next()}return D}function O(y){let D="",I=!1;for(;!y.end();){let{curr:k,next:B,next2:G,next3:ie}=y.get();if(D+=k,I&&t.dot(B)||(t.dot(k)&&(I=!0),t.dots(B,G)))break;if(t.expWithSign(B,G,ie))D+=y.next()+y.next();else if(t.exp(B,G))D+=y.next();else if(!t.digit(B)&&!t.dot(B))break;y.next()}return D}function $(y){let D="0x";for(y.next(2);!y.end();){let{curr:I,next:k}=y.get();if(D+=I,!t.hexNum(k))break;y.next()}return D}function ee(y){return y[y.length-1]}function de(y,D={}){let I=s(String(y).trim()),k=[],B=[];for(;I.next();){let{prev:ie,curr:ne,next:Ie,next2:it,pos:Ke}=I.get();if(t.comment(ne,Ie))c(I);else if(D.ignoreInlineComment&&t.inlineComment(ne,Ie))u(I);else if(t.hex(ne,Ie,it)){let ut=$(I);k.push(new r({type:"Number",value:ut,pos:Ke}))}else if(t.digit(ne)||t.digit(Ie)&&t.dot(ne)&&!t.dots(ie,ne)){let ut=O(I);k.push(new r({type:"Number",value:ut,pos:Ke}))}else if(t.symbol(ne)&&!t.selfClosedTag(ne,Ie)){let ut=ee(k),Ft=t.digit(Ie)||t.dot(Ie)&&t.digit(it);if("-"===ne&&Ft&&(!ut||!ut.isNumber())){let Ht=O(I);k.push(new r({type:"Number",value:Ht,pos:Ke}));continue}let zt={type:"Symbol",value:ne,pos:Ke};if(B.length&&t.escape(ut.value)){k.pop();let Ht=m(I);Ht.length&&k.push(new r({type:"Word",value:Ht,pos:Ke}))}else t.quote(ne)&&(ee(B)==ne?(B.pop(),zt.status="close"):(B.push(ne),zt.status="open")),k.push(new r(zt))}else if(t.space(ne)){let ut=w(I),Ft=ee(k),{next:zt}=I.get();if(!B.length&&Ft){let Ht=Ft.value,bn=h(Ht)&&")"!==Ht,Jn=h(zt)&&"("!==zt;if(bn||Jn)continue;ut=D.preserveLineBreak?ne:" "}k.length&&zt&&zt.trim()&&k.push(new r({type:"Space",value:ut,pos:Ke}))}else{let ut=m(I);ut.length&&k.push(new r({type:"Word",value:ut,pos:Ke}))}}let G=ee(k);return G&&G.isSpace()&&(k.length=k.length-1),k}function st(y){let D=[];for(;y.next();){let{curr:I,next:k}=y.get();if("var"===I.value){if(k&&k.isSymbol("(")){y.next();let B=It(y);un(B.name)&&D.push(B)}}else if(D.length&&!I.isSymbol(","))break}return D}function It(y){let D={},I=[];for(;y.next();){let{curr:k}=y.get();if(k.isSymbol(")",";")&&!D.name){D.name=an(I);break}k.isSymbol(",")?(void 0===D.name&&(D.name=an(I),I=[]),D.name&&(D.fallback=st(y))):I.push(k)}return D}function an(y){return y.map(D=>D.value).join("")}function un(y){return!(void 0===y||y.length<=2||y.substr(2).startsWith("-")||!y.startsWith("--"))}function qt(y,D,I){return y=Number(y)||0,Math.max(D,Math.min(I,y))}function sn(y,D){return y?"function"==typeof D?D():D:""}function In(y,D,I){let k=0,B=y,G=Ie=>Ie>0&&Ie<1?.1:1,ie=arguments.length;1==ie&&([y,D]=[G(y),y]),ie<3&&(I=G(y));let ne=[];for(;(I>=0&&y<=D||I<0&&y>D)&&(ne.push(y),y+=I,!(k++>=1e3)););return ne.length||ne.push(B),ne}function Fn(y,D){for(let[I,k]of Object.entries(D))y[I]=y[k];return y}function jr(y){return/^[a-zA-Z]$/.test(y)}function wr(y){return null==y}function ga(y){return wr(y)||Number.isNaN(y)}function S2(y){return wr(y)||""===y}function hI(y){let D=I=>(...k)=>y(I,...k);return D.lazy=!0,D}function wp(y,D,I){return"c-"+y+"-"+D+"-"+I}function sc(y){let D=y;for(;D&&!wr(D.value);)D=D.value;return wr(D)?"":D}function wM(y,D,I=0){let k=new Image;k.crossOrigin="anonymous",k.src=y,k.onload=function(){setTimeout(D,I)}}function fI(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function pI(y){let D=document.createElement("textarea");return D.innerHTML=y,D.value}function mI(y,D=0){let I=3735928559^D,k=1103547991^D;for(let G,B=0;B<y.length;B++)G=y.charCodeAt(B),I=Math.imul(I^G,2654435761),k=Math.imul(k^G,1597334677);return I=Math.imul(I^I>>>16,2246822507)^Math.imul(k^k>>>13,3266489909),k=Math.imul(k^k>>>16,2246822507)^Math.imul(I^I>>>13,3266489909),4294967296*(2097151&k)+(I>>>0)}function EM(y){return(I,...k)=>{let B=I.reduce((G,ie,ne)=>G+ie+(I=>wr(I)?"":I)(k[ne]),"");return y(B)}}function IM(){let y=0;return(D="")=>`${D}-${++y}`}function T2(y,D,I){return D+y*(I-D)}function Ep(y=""){return y+Math.random().toString(32).substr(2)}function Bc(y,D={symbol:",",noSpace:!1}){let I=[],k=[],B=[],G=[];if(S2(y))return I;let ie=s(de(y));function ne(Ie){let it=D.symbol||",";return D.noSpace?Ie.isSymbol(it):Ie.isSymbol(it)||Ie.isSpace()}for(;ie.next();){let{prev:Ie,curr:it,next:Ke}=ie.get();it.isSymbol("(")&&B.push(it.value),it.isSymbol(")")&&B.pop(),"open"===it.status&&G.push(it.value),"close"===it.status&&G.pop();let ut=!B.length&&!G.length;if(ut){let Ft=D.noSpace&&it.isSpace()&&ne(Ke),zt=D.noSpace&&it.isSpace()&&ne(Ie);if(Ft||zt)continue}ut&&ne(it)?(I.push(DM(k)),k=[]):k.push(it)}return k.length&&I.push(DM(k)),I}function DM(y){return y.map(D=>D.value).join("")}function gU(y,D){let k,I=[],B=[],G=[];for(;y.next();){let{curr:ie,next:ne}=y.get(),Ie=!B.length&&!G.length&&(!ne||ie.isSymbol(";")||ne.isSymbol("}"));if(ie.isSymbol("(")?G.push(ie):ie.isSymbol(")")&&G.pop(),ie.isSymbol("'",'"')&&("open"===ie.status?B.push(ie):B.pop(),ne.isSymbol("}")&&!B.length&&(Ie=!0)),!G.length&&!B.length&&ie.isSymbol("{")){let Ke=vI(I,zt=>zt.isSpace());if(!Ke.length)continue;let ut=Ke.pop(),Ft=yI(...Ke,ut);for(k=Oy(gI(y,Ly(ut,{type:"block",inline:!0,name:ut,value:[]})),Ft);ut=Ke.pop();)k=Oy(Ly(ut,{type:"block",name:ut,value:[k]}),Ft);break}if("open"==ie.status&&1==B.length||"close"==ie.status&&!B.length||I.push(ie),Ie)break}return I.length&&!k?D.value=Ip(I):k&&(D.value=k),D.origin&&(D.origin.value=D.value),D}function gI(y,D){let I=[],k=[],B=D&&D.type||"",G=[];for(;y.next();){let{prev:ie,curr:ne,next:Ie}=y.get(),it=!Ie||ne.isSymbol("}");if(ne.isSymbol("(")&&G.push(ne.value),ne.isSymbol(")")&&G.pop(),Fy(B)&&it){!Ie&&I.length&&!ne.isSymbol("}")&&"string"==typeof I[I.length-1].value&&(I[I.length-1].value+=";"+ne.value),D.value=I;break}if(ne.isSymbol("{")){let Ke=vI(k,Ht=>Ht.isSpace());if(!Ke.length)continue;yI(D.name)&&(Ke=[Ip(k)]);let ut=Ke.pop(),Ft=yI(...Ke,D.name,ut),zt=Oy(gI(y,Ly(ut,{type:"block",name:ut,value:[]})),Ft);for(;ut=Ke.pop();)zt=Oy(Ly(ut,{type:"block",name:ut,value:[zt]}),Ft);I.push(zt),k=[]}else if(ne.isSymbol(":")&&!G.length&&!vU(ie,Ie)&&k.length){let Ke=vI(k,bn=>bn.isSymbol(",")),ut={type:"statement",name:"unkown",value:""};Ke.length>1&&(ut.origin={name:Ke});let Ft=gU(y,ut),zt=Bc(Ft.value),Ht=Ke.length>1&&zt.length===Ke.length;Ke.forEach((bn,Jn)=>{let sr=Object.assign({},Ft,{name:bn});Ht&&(sr.value=zt[Jn]),I.push(sr)}),Fy(B)&&(D.value=I),k=[]}else ne.isSymbol(";")?I.length&&k.length&&(I[I.length-1].value+=";"+Ip(k),k=[]):k.push(ne)}return I.length&&Fy(B)&&(D.value=I),B?D:I}function vU(y,D){return["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"].includes((y&&y.value)+":"+(D&&D.value))}function Ip(y){return y.filter((D,I)=>!(D.isSymbol(";","}")&&I===y.length-1)).map(D=>D.value).join("")}function Oy(y,D){let I=y.name||"",[k,...B]=I.split(/#/),G=B[B.length-1];return k&&G&&!D&&(y.name=k,y.value.push({type:"statement",name:"id",value:G})),y}function vI(y,D){let I=[],k=[];return y.forEach(B=>{D(B)?(I.push(Ip(k)),k=[]):k.push(B)}),k.length&&I.push(Ip(k)),I}function Ly(y,D){let I=Object.assign({},D);if(/\*[0-9]/.test(y)){let[k,B]=y.split("*");B&&(I.times=B,I.pureName=k)}return I}function yI(...y){return y.some(D=>"style"===D)}function Fy(y){return"block"===y}function SM(y){let D=y&&y.value&&y.value[0];return D&&"svg"===D.name&&Fy(D.type)?SM(D):y}function _I(y,D){return SM(gI(s(de(y)),D||{type:"block",name:"svg",value:[]}))}function CI(y,D){let I="";if("block"===y.type){if(I+=y.times?"@M"+y.times+"("+y.pureName+"{":y.name+"{",Array.isArray(y.value)&&y.value.length){let k="";for(let B of y.value)I+=CI(B,k),B.origin&&(k=B.origin.name.join(","))}I+=y.times?"})":"}"}else if("statement"===y.type){let k=y.origin&&D===y.origin.name.join(","),B=y.origin?y.origin.name.join(","):y.name,G=y.origin?y.origin.value:y.value;k||(I+=G&&G.type?B+":"+CI(G):B+":"+G+";")}return I}function yU(y){return CI(y).trim()}function zy(y){return wr(y)?[]:Array.isArray(y)?y:[y]}function Vy(y,D="\n"){return(y||[]).join(D)}function Bs(y,D=1){return wr(y)?"":y[y.length-D]}function TM(y){return y[0]}function _U(y){return JSON.parse(JSON.stringify(y))}function xM(y,D){return Array.prototype.flatMap?y.flatMap(D):y.reduce((I,k)=>I.concat(D(k)),[])}const oc_func=(y="")=>({type:"func",name:y,arguments:[]}),oc_text=(y="")=>({type:"text",value:y}),oc_pseudo=(y="")=>({type:"pseudo",selector:y,styles:[]}),oc_cond=(y="")=>({type:"cond",name:y,styles:[],arguments:[]}),oc_rule=(y="")=>({type:"rule",property:y,value:[]}),oc_keyframes=(y="")=>({type:"keyframes",name:y,steps:[]}),oc_step=(y="")=>({type:"step",name:y,styles:[]}),va_white_space=y=>/[\s\n\t]/.test(y),va_line_break=y=>/\n/.test(y),va_number=y=>!isNaN(y),va_pair_of=(y,D)=>({'"':'"',"'":"'","(":")"}[y]==D),Hy={\u03c0:Math.PI,"\u220f":Math.PI};function AM(y){return["@canvas","@shaders","@doodle"].includes(y)}function MM(y=""){let D=0,I=1,k=1;return{curr:(B=0)=>y[D+B],end:()=>y.length<=D,info:()=>({index:D,col:I,line:k}),index:B=>void 0===B?D:D=B,range:(B,G)=>y.substring(B,G),next(){let B=y[D++];return"\n"==B?(k++,I=0):I++,B}}}function wU(y,{col:D,line:I}){console.warn(`(at line ${I}, column ${D}) ${y}`)}function EU(y){return y.trim().length?va_number(+y)?+y:y.trim():y}function bI(y){return function(D,I){let k=D.index(),B="";for(;!D.end();){let G=D.next();if(y(G))break;B+=G}return I&&D.index(k),B}}function NM(y,D){return bI(k=>/[^\w@]/.test(k))(y,D)}function IU(y){return bI(D=>/[\s\{]/.test(D))(y)}function kM(y,D){return bI(k=>va_line_break(k)||"{"==k)(y,D)}function DU(y,D){let I,k=oc_step();for(;!y.end()&&"}"!=(I=y.curr());)if(va_white_space(I))y.next();else{if(k.name.length){if(k.styles.push(By(y,D)),"}"==y.curr())break}else k.name=OM(y);y.next()}return k}function SU(y,D){const I=[];let k;for(;!y.end()&&"}"!=(k=y.curr());)va_white_space(k)||I.push(DU(y,D)),y.next();return I}function TU(y,D){let k,I=oc_keyframes();for(;!y.end()&&"}"!=(k=y.curr());)if(I.name.length){if("{"==k||"{"==y.curr(-1)){y.next(),I.steps=SU(y,D);break}y.next()}else if(NM(y),I.name=IU(y),!I.name.length){wU("missing keyframes name",y.info());break}return I}function Uy(y,D={}){for(y.next();!y.end();){let I=y.curr();if(D.inline){if("\n"==I)break}else if("*"==(I=y.curr())&&"/"==y.curr(1))break;y.next()}D.inline||(y.next(),y.next())}function xU(y){for(y.next();!y.end()&&">"!=y.curr();)y.next()}function AU(y){let I,D="";for(;!y.end()&&":"!=(I=y.curr());)va_white_space(I)||(D+=I),y.next();return D}function wI(y,D,I){let ne,k=[],B=[],G=[],ie="",Ie="";for(;!y.end();){ne=y.curr();let it=y.index();if(/[\('"`]/.test(ne)&&"\\"!==y.curr(-1))G.length&&"("!=ne&&ne===Bs(G)?G.pop():G.push(ne),ie+=ne;else if("@"!=ne||I)if(I&&/[)]/.test(ne)||!I&&/[,)]/.test(ne))if(G.length)")"==ne&&G.pop(),ie+=ne;else{if(ie.length&&(B.length?/\S/.test(ie)&&B.push(oc_text(ie)):B.push(oc_text(EU(ie))),ie.startsWith("\xb1")&&!I)){let Ke=ie.substr(1),ut=_U(B);Bs(ut).value="-"+Ke,k.push(EI(ut)),Bs(B).value=Ke}if(k.push(EI(B)),[B,ie]=[[],""],")"==ne)break}else Hy[ne]&&!/[0-9]/.test(y.curr(-1))&&(ne=Hy[ne]),ie+=ne;else B.length||(ie=ie.trimLeft()),ie.length&&(B.push(oc_text(ie)),ie=""),B.push(RM(y));if(!(!D||")"!=y.curr(1)&&/[0-9a-zA-Z_\-.]/.test(y.curr())||G.length)){B.length&&k.push(EI(B));break}Ie+=y.range(it,y.index()+1),y.next()}return[MU(k),Ie]}function MU(y){let D=Bs(y[0]);return D&&"text"===D.type&&!String(D.value).trim().length&&(y[0]=y[0].slice(0,-1)),y}function EI(y){let D=y.map(B=>{if("text"==B.type&&"string"==typeof B.value){let G=String(B.value);G.includes("`")&&(B.value=G=G.replace(/`/g,'"')),B.value=G}return B}),I=TM(D)||{},k=Bs(D)||{};if("text"==I.type&&"text"==k.type){let B=TM(I.value),G=Bs(k.value);"string"==typeof I.value&&"string"==typeof k.value&&va_pair_of(B,G)&&(I.value=I.value.slice(1),k.value=k.value.slice(0,k.value.length-1),D.cluster=!0)}return D}function kU(y){let D=JSON.stringify(y);return D.includes("pureName")&&D.includes("times")}function RM(y){let k,D=oc_func(),I="@",B=!1;for(y.next();!y.end();){k=y.curr();let ne="."==k&&"@"==y.curr(1),Ie=y.curr(1);if("("==k||ne){B=!0,y.next();let[it,Ke]=wI(y,ne,AM(I));if("@svg"===I&&/\d\s*{/.test(Ke)){let ut=_I(Ke);if(kU(ut)){let Ft=yU(ut);Ft+=")",it=wI(MM(Ft),ne,AM(I))[0]}}D.arguments=it;break}if(!B&&"("!==Ie&&!/[0-9a-zA-Z_\-.]/.test(Ie)){I+=k;break}I+=k,y.next()}let{fname:G,extra:ie}=function NU(y){let D="",I="";if(/\D$/.test(y)&&!/\d+x\d+/.test(y)||Math[y.substr(1)])return{fname:y,extra:I};for(let k=y.length-1;k>=0;k--){let B=y[k],G=y[k-1],ie=y[k+1];if(!(/[\d.]/.test(B)||"x"==B&&/\d/.test(G)&&/\d/.test(ie))){D=y.substring(0,k+1);break}I=B+I}return{fname:D,extra:I}}(I);return D.name=G,ie.length&&D.arguments.unshift([{type:"text",value:ie}]),D.position=y.info().index,D}function PM(y){let B,D=oc_text(),I=0,k=!0;const G=[],ie=[];for(G[I]=[];!y.end();)if(B=y.curr(),k&&va_white_space(B))y.next();else{if(k=!1,"\n"!=B||va_white_space(y.curr(-1)))if(","!=B||ie.length){if(/[;}<]/.test(B)){D.value.length&&(G[I].push(D),D=oc_text());break}"@"==B?(D.value.length&&(G[I].push(D),D=oc_text()),G[I].push(RM(y))):(!va_white_space(B)||!va_white_space(y.curr(-1)))&&("("==B&&ie.push(B),")"==B&&ie.pop(),Hy[B]&&!/[0-9]/.test(y.curr(-1))&&(B=Hy[B]),D.value+=B)}else D.value.length&&(G[I].push(D),D=oc_text()),G[++I]=[],k=!0;else D.value+=" ";y.next()}return D.value.length&&G[I].push(D),G}function OM(y){let I,D="";for(;!y.end()&&"{"!=(I=y.curr());)va_white_space(I)||(D+=I),y.next();return D}function RU(y){let I,D={name:"",arguments:[]};for(;!y.end();){if("("==(I=y.curr()))y.next(),D.arguments=wI(y)[0];else{if(/[){]/.test(I))break;va_white_space(I)||(D.name+=I)}y.next()}return D}function LM(y,D){let k,I=oc_pseudo();for(;!y.end();){if(k=y.curr(),"/"==k&&"*"==y.curr(1))Uy(y);else{if("}"==k)break;if(va_white_space(k)){y.next();continue}if(I.selector){let B=By(y,D);if("@use"==B.property?I.styles=I.styles.concat(B.value):I.styles.push(B),"}"==y.curr())break}else I.selector=OM(y)}y.next()}return I}function By(y,D){let k,I=oc_rule(),B=y.index();for(;!y.end();){if(k=y.curr(),"/"==k&&"*"==y.curr(1))Uy(y);else{if(";"==k)break;if(I.property.length){I.value=PM(y);break}if(I.property=AU(y),"@use"==I.property){I.value=PU(y,D);break}}y.next()}let G=y.index();return I.raw=()=>y.range(B,G).trim(),I}function FM(y,D){let k,I=oc_cond();for(;!y.end();){if(k=y.curr(),"/"==k&&"*"==y.curr(1))Uy(y);else{if("}"==k)break;if(I.name.length)if(":"==k){let B=LM(y);B.selector&&I.styles.push(B)}else if("@"!=k||kM(y,!0).includes(":")){if(!va_white_space(k)){let B=By(y,D);if(B.property&&I.styles.push(B),"}"==y.curr())break}}else I.styles.push(FM(y));else Object.assign(I,RU(y))}y.next()}return I}function zM(y,D){let I="";return y&&y.get_variable&&(I=y.get_variable(D)),I}function VM(y,D){y.forEach&&y.forEach(I=>{if("text"==I.type&&I.value){let k=function Te(y){return st(s(de(y)))}(I.value);I.value=k.reduce((B,G)=>{let Ie,ie="",ne="";ie=zM(D,G.name),!ie&&G.fallback&&G.fallback.every(it=>{if(ne=zM(D,it.name),ne)return ie=ne,!1});try{Ie=Dp(ie,D)}catch{}return Ie&&B.push.apply(B,Ie),B},[])}"func"==I.type&&I.arguments&&I.arguments.forEach(k=>{VM(k,D)})})}function PU(y,D){return y.next(),(PM(y)||[]).reduce((k,B)=>{VM(B,D);let[G]=B;return G.value&&G.value.length&&k.push(...G.value),k},[])}function Dp(y,D){const I=MM(y),k=[];for(;!I.end();){let B=I.curr();if(va_white_space(B))I.next();else{if("/"==B&&"*"==I.curr(1))Uy(I);else if(":"==B){let G=LM(I,D);G.selector&&k.push(G)}else if("@"==B&&"@keyframes"===NM(I,!0)){let G=TU(I,D);k.push(G)}else if("@"!=B||kM(I,!0).includes(":")){if("<"==B)xU(I);else if(!va_white_space(B)){let G=By(I,D);G.property&&k.push(G)}}else{let G=FM(I,D);G.name.length&&k.push(G)}I.next()}}return k}function II(y,D=64){const[I,k,B]=[1,D,D*D];let[G,ie,ne]=(y+"").replace(/\s+/g,"").replace(/[,\uff0cxX]+/g,"x").split("x").map(ut=>parseInt(ut));const Ie=1==G||1==ie?B:k,it=1==G&&1==ie?B:I,Ke={x:qt(G||I,1,Ie),y:qt(ie||G||I,1,Ie),z:qt(ne||I,1,it)};return Object.assign({},Ke,{count:Ke.x*Ke.y*Ke.z,ratio:Ke.x/Ke.y})}function LU(y){return/^texture\w*$|^(fragment|vertex)$/.test(y)}function HM(){return new r({type:"LineBreak",value:"\n"})}function UM(y){let D=y[0],I=y[y.length-1];for(;D&&D.isSymbol("(")&&I&&I.isSymbol(")");)D=(y=y.slice(1,y.length-1))[0],I=y[y.length-1];return y}function DI(y){return UM(y).map(D=>D.value).join("")}function BM(y,D){return`url("data:image/svg+xml;utf8,${encodeURIComponent(y)+(D?`#${D}`:"")}")`}function jM(y){const D='xmlns="http://www.w3.org/2000/svg"',I='xmlns:xlink="http://www.w3.org/1999/xlink"';return y.includes("<svg")||(y=`<svg ${D} ${I}>${y}</svg>`),y.includes("xmlns")||(y=y.replace(/<svg([\s>])/,`<svg ${D} ${I}$1`)),y}const UU=IM();class jy{constructor(D,I=""){if(!D)throw new Error("Tag name is required");this.name=D,this.body=[],this.attrs={},this.isTextNode()&&(this.body=I)}isTextNode(){return"text-node"===this.name}find(D){let I=D.attrs.id,k=D.name;if(Array.isArray(this.body)&&void 0!==I)return this.body.find(B=>B.attrs.id===I&&B.name===k)}append(D){this.isTextNode()||this.body.push(D)}merge(D){for(let[I,k]of Object.entries(D.attrs))this.attrs[I]=k;Array.isArray(D.body)&&this.body.push(...D.body)}attr(D,I){if(!this.isTextNode())return void 0===I?this.attrs[D]:this.attrs[D]=I}toString(){if(this.isTextNode())return this.body;let D=[""],I=[];for(let[k,B]of Object.entries(this.attrs))D.push(`${k}="${B}"`);for(let k of this.body)I.push(k.toString());return`<${this.name}${D.join(" ")}>${I.join("")}</${this.name}>`}}function $M(y,D){return`${y}:${D};`}function GM(y){const D=y.value.map(I=>"block"===I.type?GM(I):$M(I.name,I.value)).join("");return`${y.name}{${D}}`}function SI(y,D,I,k){let B;if(D||(D=new jy("root")),"block"===y.type)if("style"===y.name){if(Array.isArray(y.value)){let G=new jy("style"),ie=[];for(let ne of y.value)"block"===ne.type&&ie.push(GM(ne));G.append(ie.join("")),D.append(G)}}else{let G=new jy(y.name);k||(k=G).attr("xmlns","http://www.w3.org/2000/svg");for(let ne of y.value){let Ie=SI(ne,G,y,k);Ie&&(B=Ie)}if(y.inline){let ne=y.value.find(Ie=>"statement"===Ie.type&&"id"===Ie.name);ne?B=ne.value:(B=UU(y.name),G.attr("id",B))}let ie=k.find(G);ie?ie.merge(G):D.append(G)}if("statement"===y.type)if(I&&/^(text|tspan|textPath|title|desc)$/i.test(I.name)&&"content"===y.name){let ie=new jy("text-node",y.value);D.append(ie)}else if(y.name.startsWith("style ")){let ie=(y.name.split("style ")[1]||"").trim();if(ie.length){let ne=D.attr("style")||"";D.attr("style",ne+$M(ie,y.value))}}else{let ie=y.value;if(ie&&"block"===ie.type){let ne=SI(y.value,k,y,k);ie=`url(#${ne})`,("xlink:href"===y.name||"href"===y.name)&&(ie=`#${ne}`)}D.attr(y.name,ie),y.name.includes("xlink:")&&k.attr("xmlns:xlink","http://www.w3.org/1999/xlink")}return I?B:k.toString()}function WM(y){return SI(y)}function qM(y){let D=s(de(y)),I={},k=!1;for(;D.next();){let{prev:B,curr:G,next:ie}=D.get(),ne=k&&(G.isWord()||G.isSymbol())&&B&&B.isNumber()&&!ie;if(G.isNumber())I.value=Number(G.value),k=!0;else{if(!ne)break;I.unit=G.value}}return I}function ZM(y){return(...D)=>{let I=[],k=[];for(let ie of D){let{unit:ne,value:Ie}=qM(ie);void 0!==ne&&I.push(ne),void 0!==Ie&&k.push(Ie)}let B=y(...k),G=I.find(ie=>void 0!==ie);return void 0===G?B:Array.isArray(B)?B.map(ie=>ie+G):B+G}}function TI(y){return(...D)=>{let I=D.map(B=>String(B).charCodeAt(0)),k=y(...I);return Array.isArray(k)?k.map(B=>String.fromCharCode(B)):String.fromCharCode(k)}}const BU={\u03c0:Math.PI,gcd:(y,D)=>{for(;D;)[y,D]=[D,y%D];return y}},xI={"^":7,"*":6,"/":6,"\xf7":6,"%":6,"&":5,"|":5,"+":4,"-":4,"<":3,"<<":3,">":3,">>":3,"=":3,"==":3,"\u2264":3,"<=":3,"\u2265":3,">=":3,"\u2260":3,"!=":3,"\u2227":2,"&&":2,"\u2228":2,"||":2,"(":1,")":1};function $y(y,D,I=[]){let k=[];for(;y.length;){let{name:B,value:G,type:ie}=y.shift();if("variable"===ie){let ne=D[G];ga(ne)&&(ne=Math[G]),ga(ne)&&(ne=KM(G,D)),ga(ne)&&/^\-\D/.test(G)&&(ne=KM("-1"+G.substr(1),D)),void 0===ne&&(ne=0),"number"!=typeof ne&&(I.push(ne),GU(I)?(ne=0,I=[]):ne=$y(Sp(ne),D,I)),k.push(ne)}else if("function"===ie){let ne=!1;/^\-/.test(B)&&(ne=!0,B=B.substr(1));let Ke,Ie=G.map(ut=>$y(ut,D)),it=B.split(".");for(;Ke=it.pop();){if(!Ke)continue;let ut=D[Ke]||Math[Ke];Ie="function"==typeof ut?Array.isArray(Ie)?ut(...Ie):ut(Ie):0}ne&&(Ie*=-1),k.push(Ie)}else if(/\d+/.test(G))k.push(G);else{let ne=k.pop(),Ie=k.pop();k.push($U(G,Number(Ie),Number(ne)))}}return Number(k[0])||0}function Sp(y){let D=function jU(y){let D=String(y),I=[],k="";for(let B=0;B<D.length;++B){let G=D[B];if(xI[G]){let ie=Bs(I);if("="==G&&ie&&/^[!<>=]$/.test(ie.value))ie.value+=G;else if(/^[|&<>]$/.test(G)&&ie&&ie.value==G)ie.value+=G;else if("-"==G&&"e"==D[B-1])k+=G;else if(I.length||k.length||!/[+-]/.test(G)){let{type:ne,value:Ie}=ie||{};"operator"==ne&&!k.length&&/[^()]/.test(G)&&/[^()]/.test(Ie)?k+=G:(k.length&&(I.push({type:"number",value:k}),k=""),I.push({type:"operator",value:G}))}else k+=G}else/\S/.test(G)&&(","==G?(I.push({type:"number",value:k}),k="",I.push({type:"comma",value:G})):"!"==G?(I.push({type:"number",value:k}),I.push({type:"operator",value:G}),k=""):k+=G)}return k.length&&I.push({type:"number",value:k}),I}(y);const I=[],k=[];for(let B=0;B<D.length;++B){let{type:G,value:ie}=D[B],ne=D[B+1]||{};if("number"==G)if("("==ne.value&&/[^\d.\-]/.test(ie)){let Ie="",it=[],Ke=[];for(B+=1;void 0!==D[B++];){let ut=D[B];if(void 0===ut)break;let Ft=ut.value;if(")"==Ft){if(!it.length)break;it.pop(),Ie+=Ft}else if("("==Ft&&it.push(Ft),","!=Ft||it.length)Ie+=Ft;else{let zt=Sp(Ie);zt.length&&Ke.push(zt),Ie=""}}Ie.length&&Ke.push(Sp(Ie)),k.push({type:"function",name:ie,value:Ke})}else/[^\d.\-]/.test(ie)?k.push({type:"variable",value:ie}):k.push({type:"number",value:ie});else if("operator"==G)if("("==ie)I.push(ie);else if(")"==ie){for(;I.length&&"("!=Bs(I);)k.push({type:"operator",value:I.pop()});I.pop()}else{for(;I.length&&xI[Bs(I)]>=xI[ie];){let Ie=I.pop();/[()]/.test(Ie)||k.push({type:"operator",value:Ie})}I.push(ie)}}for(;I.length;)k.push({type:"operator",value:I.pop()});return k}function $U(y,D,I){switch(y){case"+":return D+I;case"-":return D-I;case"*":return D*I;case"%":return D%I;case"|":return D|I;case"&":return D&I;case"<":return D<I;case">":return D>I;case"^":return Math.pow(D,I);case"\xf7":case"/":return D/I;case"=":case"==":return D==I;case"\u2264":case"<=":return D<=I;case"\u2265":case">=":return D>=I;case"\u2260":case"!=":return D!=I;case"\u2227":case"&&":return D&&I;case"\u2228":case"||":return D||I;case"<<":return D<<I;case">>":return D>>I}}function KM(y,D){let[I,k,B]=y.match(/([\d.\-]+)(.*)/)||[],G=D[B];return void 0===G?G:"number"==typeof G?Number(k)*G:k*$y(Sp(G),D)}function GU(y){return y[0]==y[2]&&y[1]==y[3]}function jc(y,D){return $y(Sp(y),Object.assign({},BU,D))}var ud=new class WU{constructor(){this.cache={}}clear(){this.cache={}}set(D,I){if(wr(D))return"";let k=this.getKey(D);return this.cache[k]=I}get(D){let I=this.getKey(D);return this.cache[I]}getKey(D){return mI("string"==typeof D?D:JSON.stringify(D))}};function AI(y,D){return(...I)=>{let k=y+I.join("-");return ud.get(k)||ud.set(k,D(...I))}}function Gy(y,D){return{type:y,value:D}}const ZU=AI("build_range",y=>{let D=function qU(y){let D=String(y),I=[],k=[];if(!D.startsWith("[")||!D.endsWith("]"))return I;for(let B=1;B<D.length-1;++B){let G=D[B];if("-"!=G||"-"!=D[B-1]){if("-"==G){k.push(G);continue}if("-"==Bs(k)){k.pop();let ie=k.pop();I.push(ie?Gy("range",[ie,G]):Gy("char",G));continue}k.length&&I.push(Gy("char",k.pop())),k.push(G)}}return k.length&&I.push(Gy("char",k.pop())),I}(y);return xM(D,({type:I,value:k})=>{if("char"==I)return k;let[B,G]=k,ie=!1;B>G&&([B,G]=[G,B],ie=!0);let ne=TI(In)(B,G);return ie&&ne.reverse(),ne})});function Wy(y){return(...D)=>y(...xM(D,I=>String(I).startsWith("[")?ZU(I):I))}class KU{constructor(D){this.prev=this.next=null,this.data=D}}class YU{constructor(D=20){this._limit=D,this._size=0}push(D){this._size>=this._limit&&(this.root=this.root.next,this.root.prev=null);let I=new KU(D);this.root?(I.prev=this.tail,this.tail.next=I,this.tail=I):this.root=this.tail=I,this._size++}last(D=1){let I=this.tail;for(;--D&&I.prev;)I=I.prev;return I.data}}class YM{constructor(D){this.p=function CU(y){return[].concat(y,y)}(D([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180]))}grad(D,I,k,B){let G=15&D,ie=G<8?I:k,ne=G<4?k:12==G||14==G?I:B;return(0==(1&G)?ie:-ie)+(0==(2&G)?ne:-ne)}noise(D,I,k){let{p:B,grad:G}=this,[ie,ne,Ie]=[D,I,k].map(Xn=>255&Math.floor(Xn));[D,I,k]=[D,I,k].map(Xn=>Xn-Math.floor(Xn));let[it,Ke,ut]=[D,I,k].map(Xn=>Xn*Xn*Xn*(Xn*(6*Xn-15)+10)),Ft=B[ie]+ne,zt=B[Ft]+Ie,Ht=B[Ft+1]+Ie,bn=B[ie+1]+ne,Jn=B[bn]+Ie,sr=B[bn+1]+Ie;return T2(ut,T2(Ke,T2(it,G(B[zt],D,I,k),G(B[Jn],D-1,I,k)),T2(it,G(B[Ht],D,I-1,k),G(B[sr],D-1,I-1,k))),T2(Ke,T2(it,G(B[zt+1],D,I,k-1),G(B[Jn+1],D-1,I,k-1)),T2(it,G(B[Ht+1],D,I-1,k-1),G(B[sr+1],D-1,I-1,k-1))))}}function QM(y,D){let I={},k=!0;for(let B=0;B<y.length;++B){let G=y[B],ie=D[B];if(/=/.test(G)){let[ne,Ie]=Bc(G,{symbol:"=",noSpace:!0});void 0!==Ie?(D.includes(ne)&&(I[ne]=Ie),k=!1):I[ie]=G}else k&&(I[ie]=G)}return I}function MI(y){let B,D=s(de(y)),I={},k=[],G=!1;for(;D.next();){let{prev:ie,curr:ne,next:Ie}=D.get();if(ne.isSymbol(":")&&!B)B=NI(k),k=[];else if(ne.isSymbol(";")&&B)I[B]=JM(B,NI(k),G),k=[],B=null,G=!1;else if(!ne.isSymbol(";")){let it=ie&&ie.isSymbol("-"),Ke=Ie&&Ie.isSymbol("-"),ut=ne.isSymbol("-");B||k.length||!ut||it||Ke||Ie&&Ie.isSymbol(":")?k.push(ne):G=!0}}return k.length&&B&&(I[B]=JM(B,NI(k),G)),I}function JM(y,D,I){return["fill-rule","fill"].includes(y)?D:I?`-1 * (${D})`:D}function NI(y){return y.map(D=>D.value).join("")}const QU=["auto","reverse"],JU=["deg","rad","grad","turn"];function XU(y){let D=s(de(y)),I=!1,k="",B={direction:"",angle:""};for(;D.next();){let{prev:G,curr:ie}=D.get();if(ie.isWord()&&QU.includes(ie.value))B.direction=ie.value,I=!0;else if(ie.isNumber())B.angle=Number(ie.value),I=!0;else if(ie.isWord()&&G&&G.isNumber()&&JU.includes(ie.value))k=ie.value;else if(ie.isSpace()&&""!==B.direction&&""!==B.angle)break}return I||(B.direction="auto"),function eB(y,D){let{angle:I}=y;return""===I&&(I=0),"rad"===D&&(I/=Math.PI/180),"grad"===D&&(I*=.9),"turn"===D&&(I*=360),Object.assign({},y,{angle:I})}(B,k)}const{cos:Tp,sin:xp,abs:tB,atan2:XM,PI:kI}=Math,Ao=EM(y=>RI(MI(y),{min:3,max:3600})),qy={circle:()=>Ao`
    split: 180;
    scale: .99
  `,triangle:()=>Ao`
    rotate: 30;
    scale: 1.1;
    move: 0 .2
  `,pentagon:()=>Ao`
    split: 5;
    rotate: 54
  `,hexagon:()=>Ao`
    split: 6;
    rotate: 30;
    scale: .98
  `,octagon:()=>Ao`
    split: 8;
    rotat: 22.5;
    scale: .99
  `,star:()=>Ao`
    split: 10;
    r: cos(5t);
    rotate: -18;
    scale: .99
  `,infinity:()=>Ao`
    split: 180;
    scale: .99;
    x: cos(t)*.99 / (sin(t)^2 + 1);
    y: x * sin(t)
  `,heart:()=>Ao`
    split: 180;
    rotate: 180;
    a: cos(t)*13/18 - cos(2t)*5/18;
    b: cos(3t)/18 + cos(4t)/18;
    x: (.75 * sin(t)^3) * 1.2;
    y: (a - b + .2) * -1.1
  `,bean:()=>Ao`
    split: 180;
    r: sin(t)^3 + cos(t)^3;
    move: -.35 .35;
  `,bicorn:()=>Ao`
    split: 180;
    x: cos(t);
    y: sin(t)^2 / (2 + sin(t)) - .5
  `,drop:()=>Ao`
    split: 180;
    rotate: 90;
    scale: .95;
    x: sin(t);
    y: (1 + sin(t)) * cos(t) / 1.6
  `,fish:()=>Ao`
    split: 240;
    x: cos(t) - sin(t)^2 / sqrt(2) - .04;
    y: sin(2t)/2
  `,whale:()=>Ao`
    split: 240;
    rotate: 180;
    R: 3.4 * (sin(t)^2 - .5) * cos(t);
    x: cos(t) * R + .75;
    y: sin(t) * R * 1.2
  `,windmill:()=>Ao`
    split: 18;
    R: seq(.618, 1, 0);
    T: seq(t-.55, t, t);
    x: R * cos(T);
    y: R * sin(T)
  `,vase:()=>Ao`
    split: 240;
    scale: .3;
    x: sin(4t) + sin(t) * 1.4;
    y: cos(t) + cos(t) * 4.8 + .3
  `,clover:(y=3)=>(4==(y=qt(y,3,5))&&(y=2),Ao`
      split: 240;
      r: cos(${y}t);
      scale: .98
    `),hypocycloid:(y=3)=>(y=qt(y,3,5),Ao`
      split: 240;
      scale: ${[0,0,0,.34,.25,.19][y]};
      k: ${y};
      x: (k-1)*cos(t) + cos((k-1)*t);
      y: (k-1)*sin(t) - sin((k-1)*t)
    `),bud:(y=3)=>(y=qt(y,3,10),Ao`
      split: 240;
      scale: .8;
      r: 1 + .2 * cos(${y}t)
    `)};class eN{constructor(D,I,k){this.x=D,this.y=I,this.extra=k}valueOf(){return this.x+" "+this.y}toString(){return this.valueOf()}}function rB(y,D,I,k,B){let G=180*XM(D+k,y-I)/kI;return"reverse"===B.direction&&(G-=180),B.direction||(G=90),B.angle&&(G+=B.angle),G}function tN(y,D,I){let[k,B=k]=Bc(I).map(Number);return[y*k,D*B]}function RI(y,{min:D,max:I}){let k=qt(parseInt(y.vertices||y.points||y.split)||0,D,I),B=S2(y.x)?"cos(t)":y.x,G=S2(y.y)?"sin(t)":y.y,ie=S2(y.r)?"":y.r,{unit:ne,value:Ie}=qM(ie);return ne&&!y[ne]&&"t"!==ne&&(S2(y.unit)&&(y.unit=ne),ie=y.r=Ie),y.degree&&(y.rotate=y.degree),y.origin&&(y.move=y.origin),function nB(y,D){"function"==typeof arguments[0]&&(D=y,y={}),D||(D=Ht=>[Tp(Ht),xp(Ht)]);let Ke,ut,I=y.split||180,k=y.turn||1,B=y.frame,G=y.fill||y["fill-rule"],ie=XU(y.direction||y.dir||""),ne=y.unit,Ie=2*kI*k/I,it=[],Ft=void 0===y.scale?1:y.scale,zt=([Ht,bn,Jn=0,sr=0])=>{if("evenodd"==Ht||"nonzero"==Ht)return it.push(new eN(Ht,"",""));let[Xn,ds]=tN(Ht,-bn,Ft),[$a,vu]=tN(Jn,-sr,Ft),kp=rB(Xn,ds,$a,vu,ie);void 0!==ne&&"%"!==ne?"none"!==ne&&(Xn+=ne,ds+=ne):(Xn=50*(Xn+1)+"%",ds=50*(ds+1)+"%"),it.push(new eN(Xn,ds,kp))};("nonzero"==G||"evenodd"==G)&&zt([G,"",""]);for(let Ht=0;Ht<I;++Ht){let Jn=D(Ie*Ht,Ht);Ht||(Ke=Jn),zt(Jn)}if(void 0!==B){zt(Ke);let Ht=B/100;k>1&&(Ht*=2),0==Ht&&(Ht=.002);for(let bn=0;bn<I;++bn){let Jn=-Ie*bn,[sr,Xn,ds=0,$a=0]=D(Jn,bn),vu=XM(Xn+$a,sr-ds),kp=[sr-Ht*Tp(vu),Xn-Ht*xp(vu)];bn||(ut=kp),zt(kp)}zt(ut),zt(Ke)}return it}(Object.assign({},y,{split:k}),(Ke,ut)=>{let Ft=Object.assign({},y,{t:Ke,\u03b8:Ke,i:ut+1,seq:(...sr)=>sr.length?sr[ut%sr.length]:"",range:(sr,Xn=0)=>((sr=Number(sr)||0)>(Xn=Number(Xn)||0)&&([sr,Xn]=[Xn,sr]),sr+tB(Xn-sr)/(k-1)*ut)}),zt=jc(B,Ft),Ht=jc(G,Ft),bn=0,Jn=0;if(ie){let sr=jc(ie,Ft);0==sr&&(sr=1e-5),zt=sr*Tp(Ke),Ht=sr*xp(Ke)}return y.rotate&&([zt,Ht]=function iB(y,D,I){let k=-kI/180*I;return[y*Tp(k)-D*xp(k),D*Tp(k)+y*xp(k)]}(zt,Ht,Number(y.rotate)||0)),y.move&&([zt,Ht,bn,Jn]=function sB(y,D,I){let[k,B=k]=Bc(I).map(Number);return[y+(k||0),D-(B||0),k,B]}(zt,Ht,y.move)),[zt,Ht,bn,Jn]})}function Zy(y){let D=s(de(y)),I={},k={commands:[],valid:!0};for(;D.next();){let{curr:B}=D.get();if(!B.isSpace()&&!B.isSymbol(","))if(B.isWord())I.name&&(k.commands.push(I),I={}),I.name=B.value,I.value=[],"MmLlHhVvCcSsQqTtAaZz".includes(B.value)?I.type="mlhvcsqtaz".includes(B.value)?"relative":"absolute":(I.type="unknown",k.valid=!1);else if(I.value){let G=B.value;B.isNumber()&&(G=Number(B.value)),I.value.push(G)}else I.name||(k.valid=!1)}return I.name&&k.commands.push(I),k}const b1={name:"cssd-uniform-time","animation-name":"cssd-uniform-time-animation","animation-duration":31536e6,"animation-iteration-count":"infinite","animation-delay":"0s","animation-direction":"normal","animation-fill-mode":"none","animation-play-state":"running","animation-timing-function":"linear"};b1.animation=`\n  ${b1["animation-duration"]}ms\n  ${b1["animation-timing-function"]}\n  ${b1["animation-delay"]}\n  ${b1["animation-iteration-count"]}\n  ${b1["animation-name"]}\n`;const nN={name:"cssd-uniform-mousex"},rN={name:"cssd-uniform-mousey"},iN={name:"cssd-uniform-width"},sN={name:"cssd-uniform-height"};var l5=Object.freeze({__proto__:null,uniform_time:b1,uniform_mousex:nN,uniform_mousey:rN,uniform_width:iN,uniform_height:sN});function PI(y){return hI((D,I,...k)=>{if(!k||!I)return"";let B=sc(I()),G=B;/\D/.test(B)&&(G=jc(B),0===G&&(G=B));let ie=Math.random();return function fU(y,D){let[I,k=1]=String(y).split("x");I=qt(Math.ceil(I)||1,1,65536),k=qt(Math.ceil(k)||1,1,65536);let B=I*k,G=[],ie=1;for(let ne=1;ne<=k;++ne)for(let Ie=1;Ie<=I;++Ie)G.push(D(ie++,Ie,ne,B,I,k));return G}(G,(...ne)=>k.map(Ie=>sc(Ie(...ne,ie))).join(",")).join(y)})}function u5(y,D,I){return y[D]||(y[D]=new YU),y[D].push(I),I}function oN(y){return-1*y}const OI=Fn({i:({count:y})=>D=>y,y:({y})=>D=>y,x:({x:y})=>D=>y,z:({z:y})=>D=>y,I:({grid:y})=>D=>y.count,Y:({grid:y})=>D=>y.y,X:({grid:y})=>D=>y.x,Z:({grid:y})=>D=>y.z,id:({x:y,y:D,z:I})=>k=>wp(y,D,I),n({extra:y}){let D=Bs(y);return I=>D?D[0]+(Number(I)||0):"@n"},nx({extra:y}){let D=Bs(y);return I=>D?D[1]+(Number(I)||0):"@nx"},ny({extra:y}){let D=Bs(y);return I=>D?D[2]+(Number(I)||0):"@ny"},N({extra:y}){let D=Bs(y);return I=>D?D[3]+(Number(I)||0):"@N"},m:PI(","),M:PI(" "),\u00b5:PI(""),p:({context:y,pick:D})=>Wy((...I)=>{I.length||(I=y.last_pick_args||[]);let k=D(I);return y.last_pick_args=I,u5(y,"last_pick",k)}),P({context:y,pick:D,position:I}){let k="P-counter"+I;return Wy((...B)=>{let G=!0;B.length||(B=y.last_pick_args||[],G=!1);let ie=y.last_pick,ne=ie?ie.last(1):"";if(G&&(y[k]||(y[k]={}),ne=y[k].last_pick),B.length>1){let it=B.findIndex(Ke=>Ke===ne);-1!==it&&B.splice(it,1)}let Ie=D(B);return y.last_pick_args=B,G&&(y[k].last_pick=Ie),u5(y,"last_pick",Ie)})},pn({context:y,extra:D,position:I}){let k=Bs(D),G="pn-counter"+I+(k?Bs(k):"");return Wy((...ie)=>{y[G]||(y[G]=0),y[G]+=1;let ne=ie.length,[Ie=y[G]]=k||[];return u5(y,"last_pick",ie[(Ie-1)%ne])})},pd({context:y,extra:D,position:I,shuffle:k}){let B=Bs(D),G=B?Bs(B):"",ie="pd-counter"+I+G,ne="pd-values"+I+G;return Wy((...Ie)=>{y[ie]||(y[ie]=0),y[ie]+=1,y[ne]||(y[ne]=k(Ie||[]));let it=Ie.length,[Ke=y[ie]]=B||[];return u5(y,"last_pick",y[ne][(Ke-1)%it])})},lp:({context:y})=>(D=1)=>{let I=y.last_pick;return I?I.last(D):""},r:({context:y,rand:D})=>(...I)=>{let B=(I.every(jr)?TI:ZM)(D)(...I);return u5(y,"last_rand",B)},rn({x:y,y:D,context:I,position:k,grid:B,extra:G,shuffle:ie}){let ne="noise-2d"+k,[Ie,it,Ke,ut,Ft,zt]=Bs(G)||[],Ht=Ie&&ut;return(...bn)=>{let{from:Jn=0,to:sr=Jn,frequency:Xn=1,amplitude:ds=1}=QM(bn,["from","to","frequency","amplitude"]);1==bn.length&&([Jn,sr]=[0,Jn]),I[ne]||(I[ne]=new YM(ie)),Xn=qt(Xn,0,1/0),ds=qt(ds,0,1/0);let $a=[Jn,sr].every(jr)?TI:ZM,vu=Ht?I[ne].noise((it-1)/Ft*Xn,(Ke-1)/zt*Xn,0):I[ne].noise((y-1)/B.x*Xn,(D-1)/B.y*Xn,0),qB=$a((ZB,KB)=>function cB(y,D,I,k=1){let G=Math.sqrt(.5)*k,[ie,ne]=[-G,G];return T2((y-ie)/(ne-ie),D*k,I*k)}(vu*ds,ZB,KB,ds))(Jn,sr);return u5(I,"last_rand",qB)}},lr:({context:y})=>(D=1)=>{let I=y.last_rand;return I?I.last(D):""},noise({context:y,grid:D,position:I,shuffle:k,...B}){let G={i:B.count,I:D.count,x:B.x,X:D.x,y:B.y,Y:D.y,z:B.z,Z:D.z};return(ie,ne,Ie=0)=>{let it="raw-noise-2d"+I;return y[it]||(y[it]=new YM(k)),y[it].noise(jc(ie,G),jc(ne,G),jc(Ie,G))}},stripe:()=>(...y)=>{let G,D=y.map(sc),I=D.length,k=0,B=[];if(!I)return"";D.forEach(ne=>{let[Ie,it]=Bc(ne);void 0!==it?B.push(it):k+=1});let ie=B.length?`(100% - ${B.join(" - ")}) / ${k}`:`100% / ${I}`;return D.map((ne,Ie)=>{if(B.length){let[it,Ke]=Bc(ne);return G=(G?G+" + ":"")+(void 0!==Ke?Ke:ie),`${it} 0 calc(${G})`}return`${ne} 0 ${100/I*(Ie+1)}%`}).join(",")},calc:()=>y=>jc(sc(y)),hex:()=>y=>parseInt(sc(y)).toString(16),svg:hI((y,...D)=>{let I=D.map(B=>sc(B())).join(",");return I.startsWith("<")||(I=WM(_I(I))),BM(jM(I))}),filter:hI((y,...D)=>{let I=D.map(ie=>sc(ie())),k=I.join(","),B=Ep("filter-");if(I.every(ie=>/^[\d.]/.test(ie)||/^(\w+)/.test(ie)&&!/[{}<>]/.test(ie))){let{frequency:ie,scale:ne=1,octave:Ie,seed:it=y.seed,blur:Ke,erode:ut,dilate:Ft}=QM(I,["frequency","scale","octave","seed","blur","erode","dilate"]);if(k="\n        x: -20%;\n        y: -20%;\n        width: 140%;\n        height: 140%;\n      ",wr(Ft)||(k+=`\n          feMorphology {\n            operator: dilate;\n            radius: ${Ft};\n          }\n        `),wr(ut)||(k+=`\n          feMorphology {\n            operator: erode;\n            radius: ${ut};\n          }\n        `),wr(Ke)||(k+=`\n          feGaussianBlur {\n            stdDeviation: ${Ke};\n          }\n        `),!wr(ie)){let[zt,Ht=zt]=Bc(ie);Ie=Ie?`numOctaves: ${Ie};`:"",k+=`\n          feTurbulence {\n            type: fractalNoise;\n            baseFrequency: ${zt} ${Ht};\n            seed: ${it};\n            ${Ie}\n          }\n          feDisplacementMap {\n            in: SourceGraphic;\n            scale: ${ne};\n          }\n        `}}return k.startsWith("<")||(k=WM(_I(k,{type:"block",name:"filter"}))),BM(jM(k).replace(/<filter([\s>])/,`<filter id="${B}"$1`),B)}),var:()=>y=>`var(${sc(y)})`,ut:()=>y=>`var(--${b1.name})`,uw:()=>y=>`var(--${iN.name})`,uh:()=>y=>`var(--${sN.name})`,ux:()=>y=>`var(--${nN.name})`,uy:()=>y=>`var(--${rN.name})`,plot({count:y,context:D,extra:I,position:k,grid:B}){let G="offset-points"+k,ie=Bs(I);return ne=>{let[Ie=y,it,Ke,ut=B.count]=ie||[];if(!D[G]){let Ft=MI(ne);delete Ft.fill,delete Ft["fill-rule"],delete Ft.frame,Ft.points=ut,D[G]=RI(Ft,{min:1,max:65536})}return D[G][Ie-1]}},shape:()=>AI("shape-function",(y="",...D)=>{let I=[];if((y=String(y).trim()).length)if("function"==typeof qy[y])I=qy[y](D);else{let k=y,B=D.join(",");B.length&&(k=y+","+B),I=RI(MI(k),{min:3,max:3600})}return`polygon(${I.join(",")})`}),doodle:()=>y=>y,shaders:()=>y=>y,canvas:()=>y=>y,pattern:()=>y=>y,invert:()=>y=>{let D=Zy(y);return D.valid?D.commands.map(({name:I,value:k})=>{switch(I){case"v":return"h"+k.join(" ");case"V":return"H"+k.join(" ");case"h":return"v"+k.join(" ");case"H":return"V"+k.join(" ");default:return I+k.join(" ")}}).join(" "):y},flipH:()=>y=>{let D=Zy(y);return D.valid?D.commands.map(({name:I,value:k})=>{switch(I){case"h":case"H":return I+k.map(oN).join(" ");default:return I+k.join(" ")}}).join(" "):y},flipV:()=>y=>{let D=Zy(y);return D.valid?D.commands.map(({name:I,value:k})=>{switch(I){case"v":case"V":return I+k.map(oN).join(" ");default:return I+k.join(" ")}}).join(" "):y},flip(...y){let D=OI.flipH(...y),I=OI.flipV(...y);return k=>I(D(k))},reverse:(...y)=>D=>{let I=Zy(D);return I.valid?I.commands.reverse().map(({name:k,value:B})=>k+B.join(" ")).join(" "):D}},{index:"i",col:"x",row:"y",depth:"z",rand:"r",pick:"p",stripes:"stripe",strip:"stripe",patern:"pattern",flipv:"flipV",fliph:"flipH",t:"ut","svg-filter":"filter","last-rand":"lr","last-pick":"lp",multiple:"m",multi:"m",rep:"\xb5",repeat:"\xb5",ms:"M",s:"I",size:"I",sx:"X","size-x":"X","size-col":"X","max-col":"X",sy:"Y","size-y":"Y","size-row":"Y","max-row":"Y",sz:"Z","size-z":"Z","size-depth":"Z","pick-by-turn":"pn","pick-n":"pn","pick-d":"pd",offset:"plot",Offset:"Plot",point:"plot",Point:"Plot",paint:"canvas"}),aN={"4a0":[1682,2378],"2a0":[1189,1682],a0:[841,1189],a1:[594,841],a2:[420,594],a3:[297,420],a4:[210,297],a5:[148,210],a6:[105,148],a7:[74,105],a8:[52,74],a9:[37,52],a10:[26,37],b0:[1e3,1414],b1:[707,1e3],b2:[500,707],b3:[353,500],b4:[250,353],b5:[176,250],b6:[125,176],b7:[88,125],b8:[62,88],b9:[44,62],b10:[31,44],b11:[22,32],b12:[16,22],c0:[917,1297],c1:[648,917],c2:[458,648],c3:[324,458],c4:[229,324],c5:[162,229],c6:[114,162],c7:[81,114],c8:[57,81],c9:[40,57],c10:[28,40],c11:[22,32],c12:[16,22],d0:[764,1064],d1:[532,760],d2:[380,528],d3:[264,376],d4:[188,260],d5:[130,184],d6:[92,126],letter:[216,279],postcard:[100,148],poster:[390,540]},lB={portrait:"p",pt:"p",p:"p",landscape:"l",ls:"l",l:"l"};let Ky=[];function cN(y){if(!Ky.length){let D=new Set;if(typeof document<"u")for(let I in document.head.style)I.startsWith("-")||D.add(I.replace(/[A-Z]/g,"-$&").toLowerCase());D.has("grid-gap")||D.add("grid-gap"),Ky=Array.from(D)}return y instanceof RegExp?Ky.filter(D=>y.test(D)):Ky}function lN(y){let D=new RegExp(`\\-?${y}\\-?`);return cN(D).map(I=>I.replace(D,"")).reduce((I,k)=>(I[k]=k,I),{})}const fB=lN("webkit"),pB=lN("moz");function uN(y,D){return fB[y]?`-webkit-${D} ${D}`:pB[y]?`-moz-${D} ${D}`:D}const mB={center:"50%",left:"0%",right:"100%",top:"50%",bottom:"50%"},gB={center:"50%",top:"0%",bottom:"100%",left:"50%",right:"50%"};var Yy=Fn({size(y,{is_special_selector:D,grid:I}){let[k,B=k]=Bc(y);(function hB(y){return!!aN[y]})(k)&&([k,B]=function dB(y,D){y=String(y).toLowerCase();let[I,k]=aN[y]||[];return"p"==lB[D]&&([k,I]=[I,k]),[k,I].map(B=>B+"mm")}(k,B));let G=`\n      width: ${k};\n      height: ${B};\n    `;return D?("auto"===k||"auto"===B)&&(G+=`aspect-ratio: ${I.ratio};`):G+=`\n        --internal-cell-width: ${k};\n        --internal-cell-height: ${B};\n      `,G},position(y,{extra:D}){let[I,k="50%"]=Bc(y);I=mB[I]||I,k=gB[k]||k;const B="var(--internal-cell-width, 25%)",G="var(--internal-cell-height, 25%)";return`\n      position: absolute;\n      left: ${I};\n      top: ${k};\n      width: ${B};\n      height: ${G};\n      margin-left: calc(${B} / -2);\n      margin-top: calc(${G} / -2);\n      grid-area: unset;\n      --plot-angle: ${D||0};\n      transform: rotate(${D||0}deg);\n    `},grid(y,D){let[I,k]=Bc(y,{symbol:"/",noSpace:!0});return{grid:II(I,D.max_grid),size:k?this.size(k,D):""}},seed:y=>y,shape:AI("shape-property",y=>{let[D,...I]=Bc(y);if("function"!=typeof qy[D])return"";let k="clip-path";return uN(k,`${k}: polygon(${qy[D](...I).join(",")});`)+"overflow: hidden;"}),use(y){if(y.length>2)return y}},{place:"position","place-cell":"position",offset:"position"});const dd={even:y=>!(y%2),odd:y=>!!(y%2)};function LI(y,D,I){for(let k=0;k<=I;++k)if(jc(y,{n:k})==D)return!0}var vB={at:({x:y,y:D})=>(I,k)=>y==I&&D==k,nth:({count:y,grid:D})=>(...I)=>I.some(k=>dd[k]?dd[k](y):LI(k,y,D.count)),row:({y,grid:D})=>(...I)=>I.some(k=>dd[k]?dd[k](y):LI(k,y,D.y)),col:({x:y,grid:D})=>(...I)=>I.some(k=>dd[k]?dd[k](y):LI(k,y,D.x)),even:({x:I,y:k})=>B=>dd.odd(I+k),odd:({x:I,y:k})=>B=>dd.even(I+k),random:({random:y,count:D,x:I,y:k,grid:B})=>(G=.5)=>/\D/.test(G)?y()<jc("("+G+")",{x:I,X:B.x,y:k,Y:B.y,i:D,I:B.count,random:y}):y()<G,match:({count:y,grid:D,x:I,y:k,random:B})=>G=>!!jc("("+G+")",{x:I,X:D.x,y:k,Y:D.y,i:y,I:D.count,random:B})},Ap=globalThis,Mp=Math,Qy=[],x2=256,CB=Mp.pow(x2,6),hN=Mp.pow(2,52),bB=2*hN;function Jy(y,D,I){var k=[],B=FI(mN((D=1==D?{entropy:!0}:D||{}).entropy?[y,Np(Qy)]:y??function EB(){try{var y;return y=new Uint8Array(x2),(Ap.crypto||Ap.msCrypto).getRandomValues(y),Np(y)}catch{var D=Ap.navigator,I=D&&D.plugins;return[+new Date,Ap,I,Ap.screen,Np(Qy)]}}(),3),k),G=new wB(k),ie=function(){for(var ne=G.g(6),Ie=CB,it=0;ne<hN;)ne=(ne+it)*x2,Ie*=x2,it=G.g(1);for(;ne>=bB;)ne/=2,Ie/=2,it>>>=1;return(ne+it)/Ie};return ie.int32=function(){return 0|G.g(4)},ie.quick=function(){return G.g(4)/4294967296},ie.double=ie,FI(Np(G.S),Qy),(D.pass||I||function(ne,Ie,it,Ke){return Ke&&(Ke.S&&pN(Ke,G),ne.state=function(){return pN(G,{})}),it?(Mp.random=ne,Ie):ne})(ie,B,"global"in D?D.global:this==Mp,D.state)}function wB(y){var D,I=y.length,k=this,B=0,G=k.i=k.j=0,ie=k.S=[];for(I||(y=[I++]);B<x2;)ie[B]=B++;for(B=0;B<x2;B++)ie[B]=ie[G=255&G+y[B%I]+(D=ie[B])],ie[G]=D;(k.g=function(ne){for(var Ie,it=0,Ke=k.i,ut=k.j,Ft=k.S;ne--;)Ie=Ft[Ke=255&Ke+1],it=it*x2+Ft[255&(Ft[Ke]=Ft[ut=255&ut+Ie])+(Ft[ut]=Ie)];return k.i=Ke,k.j=ut,it})(x2)}function pN(y,D){return D.i=y.i,D.j=y.j,D.S=y.S.slice(),D}function mN(y,D){var B,I=[],k=typeof y;if(D&&"object"==k)for(B in y)try{I.push(mN(y[B],D-1))}catch{}return I.length?I:"string"==k?y:y+"\0"}function FI(y,D){for(var k,I=y+"",B=0;B<I.length;)D[255&B]=255&(k^=19*D[255&B])+I.charCodeAt(B++);return Np(D)}function Np(y){return String.fromCharCode.apply(0,y)}function hd(y){return/^\:(host|doodle)/.test(y)}function zI(y){return/^\:(container|parent)/.test(y)}function VI(y){return hd(y)||zI(y)}FI(Mp.random(),Qy);const gN={};for(let y of Object.getOwnPropertyNames(Math))gN[y]=()=>(...D)=>"number"==typeof Math[y]?Math[y]:(D=D.map(I=>jc(sc(I))),Math[y](...D));class IB{constructor(D){this.tokens=D,this.rules={},this.props={},this.keyframes={},this.grid=null,this.seed=null,this.is_grid_defined=!1,this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={},this.reset(),this.custom_properties={},this.uniforms={}}reset(){this.styles={host:"",container:"",cells:"",keyframes:""},this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={};for(let D in this.rules)D.startsWith("#c")&&delete this.rules[D]}add_rule(D,I){let k=this.rules[D];k||(k=this.rules[D]=[]),k.push.apply(k,zy(I))}pick_func(D){return OI[D]||gN[D]}apply_func(D,I,k){let B=D(...zy(I)),G=[];return k.forEach(ne=>{let Ie=typeof ne.value;if(ne.cluster||"number"!==Ie&&"string"!==Ie){if("function"==typeof ne)G.push(ne);else if(!wr(ne.value)){let Ke=sc(ne.value);G.push(Ke)}}else G.push(...Bc(ne.value,{noSpace:!0}))}),G=function bU(y){return y.filter(D=>!wr(D)&&String(D).trim().length)}(G),B(...zy(G))}compose_aname(...D){return D.join("-")}compose_selector({x:D,y:I,z:k},B=""){return`#${wp(D,I,k)}${B}`}is_composable(D){return["doodle","shaders","canvas","pattern"].includes(D)}read_var(D,I){let B=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[I.count]);if(void 0!==B[D]){let G=String(B[D]).trim();return"("==G[0]&&")"===G[G.length-1]&&(G=G.substring(1,G.length-1)),G.replace(/;+$/g,"")}return D}compose_argument(D,I,k=[],B){I.extra||(I.extra=[]),I.extra.push(k);let G=D.map(ie=>{if("text"===ie.type)return/^\-\-\w/.test(ie.value)?B&&"@var"===B.name?ie.value:this.read_var(ie.value,I):ie.value;if("func"===ie.type){let ne=ie.name.substr(1),Ie=this.pick_func(ne);if("function"==typeof Ie){if(this.check_uniforms(ne),this.is_composable(ne)){let ut=sc((ie.arguments[0]||[])[0]);if(!wr(ut))switch(ne){case"doodle":return this.compose_doodle(this.inject_variables(ut,I.count));case"shaders":return this.compose_shaders(ut,I);case"canvas":return this.compose_canvas(ut,ie.arguments.slice(1));case"pattern":return this.compose_pattern(ut,I)}}I.position=ie.position;let it=ie.arguments.map(ut=>Ie.lazy?(...Ft)=>this.compose_argument(ut,I,Ft,ie):this.compose_argument(ut,I,k,ie));return this.apply_func(Ie,I,it)}return ie.name}});return I.extra.pop(),{cluster:D.cluster,value:G.length>=2?{value:G.join("")}:G[0]}}compose_doodle(D){let I=Ep("doodle");return this.doodles[I]=D,"${"+I+"}"}compose_shaders(D,{x:I,y:k,z:B}){let G=Ep("shader");return this.shaders[G]={id:"--"+G,shader:D,cell:wp(I,k,B)},"${"+G+"}"}compose_pattern(D,{x:I,y:k,z:B}){let G=Ep("pattern");return this.pattern[G]={id:"--"+G,code:D,cell:wp(I,k,B)},"${"+G+"}"}compose_canvas(D,I=[]){let k=D,B=I.map(ie=>sc(ie[0])).join(",");B.length&&(k=D+","+B);let G=Ep("canvas");return this.canvas[G]={code:k},"${"+G+"}"}check_uniforms(D){switch(D){case"ut":case"t":this.uniforms.time=!0;break;case"ux":this.uniforms.mousex=!0;break;case"uy":this.uniforms.mousey=!0;break;case"uw":this.uniforms.width=!0;break;case"uh":this.uniforms.height=!0}}inject_variables(D,I){let k=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[I]),B=[];for(let[G,ie]of Object.entries(k))B.push(`${G}: ${ie};`);return B=B.join(""),B.length?`:doodle { ${B} }`+D:D}compose_value(D,I){if(!Array.isArray(D))return{value:"",extra:""};let k="";return{value:D.reduce((G,ie)=>{switch(ie.type){case"text":G+=ie.value;break;case"func":{let ne=ie.name.substr(1),Ie=this.pick_func(ne);if("function"==typeof Ie)if(this.check_uniforms(ne),this.is_composable(ne)){let it=sc((ie.arguments[0]||[])[0]);if(!wr(it))switch(ne){case"doodle":G+=this.compose_doodle(this.inject_variables(it,I.count));break;case"shaders":G+=this.compose_shaders(it,I);break;case"pattern":G+=this.compose_pattern(it,I);break;case"canvas":G+=this.compose_canvas(it,ie.arguments.slice(1))}}else{I.position=ie.position;let it=ie.arguments.map(ut=>Ie.lazy?(...Ft)=>this.compose_argument(ut,I,Ft,ie):this.compose_argument(ut,I,[],ie)),Ke=this.apply_func(Ie,I,it);wr(Ke)||(G+=Ke,Ke.extra&&(k=Ke.extra))}else G+=ie.name}}return G},""),extra:k}}compose_rule(D,I,k){let ie,B=Object.assign({},I),G=D.property;if("@seed"===G)return"";let ne=D.value.reduce((Ke,ut)=>{let Ft=this.compose_value(ut,B);return Ft&&(Ft.value&&Ke.push(Ft.value),Ft.extra&&(ie=Ft.extra)),Ke},[]),Ie=ne.join(", ");if(/^animation(\-name)?$/.test(G)){if(this.props.has_animation=!0,hd(k)){let Ke=b1[G];Ke&&Ie&&(Ie=Ke+","+Ie)}if(B.count>1){let{count:Ke}=B;switch(G){case"animation-name":Ie=ne.map(ut=>this.compose_aname(ut,Ke)).join(", ");break;case"animation":Ie=ne.map(ut=>{let Ft=(ut||"").split(/\s+/);return Ft[0]=this.compose_aname(Ft[0],Ke),Ft.join(" ")}).join(", ")}}}"content"===G&&(/["']|^none$|^(var|counter|counters|attr|url)\(/.test(Ie)||(Ie=`'${Ie}'`)),"transition"===G&&(this.props.has_transition=!0);let it=`${G}: ${Ie};`;if(it=uN(G,it),"clip-path"===G&&(it+=";overflow: hidden;"),("width"===G||"height"===G)&&(VI(k)||(it+=`--internal-cell-${G}: ${Ie};`)),"background"===G&&(Ie.includes("shader")||Ie.includes("canvas")||Ie.includes("pattern"))&&(it+="background-size: 100% 100%;"),/^\-\-/.test(G)){let Ke=I.count;zI(k)&&(Ke="container"),hd(k)&&(Ke="host"),this.custom_properties[Ke]||(this.custom_properties[Ke]={}),this.custom_properties[Ke][G]=Ie}if(/^@/.test(G)&&Yy[G.substr(1)]){let Ke=G.substr(1),ut=Yy[Ke](Ie,{is_special_selector:VI(k),grid:B.grid,max_grid:B.max_grid,extra:ie});switch(Ke){case"grid":hd(k)?it=ut.size||"":(it="",this.is_grid_defined||(ut=Yy[Ke](Ie,{is_special_selector:!0,grid:B.grid,max_grid:B.max_grid}),this.add_rule(":host",ut.size||""))),this.grid=B.grid,this.is_grid_defined=!0;break;case"seed":it="";break;case"place-cell":case"place":case"position":case"offset":hd(k)||(it=ut);break;case"use":D.value.length&&this.compose(B,D.value),it="";break;default:it=ut}}return it}get_raw_value(D){let I=D.raw();wr(I)&&(I="");let[k,...B]=I.split(D.property);return B=B.join(D.property).replace(/^\s*:\s*/,"").replace(/[;}<]$/,"").trim().replace(/[;}<]$/,""),B}pre_compose_rule(D,I){let k=Object.assign({},I),B=D.property;switch(B){case"@grid":{let ie=D.value.reduce((it,Ke)=>{let ut=this.compose_value(Ke,k);return ut&&ut.value&&it.push(ut.value),it},[]).join(", "),ne=B.substr(1),Ie=Yy[ne](ie,{max_grid:I.max_grid});this.grid=Ie.grid;break}case"@use":D.value.length&&this.pre_compose(k,D.value)}}pre_compose(D,I){wr(this.seed)&&((I||this.tokens).forEach(k=>{if("rule"===k.type&&"@seed"===k.property&&(this.seed=this.get_raw_value(k)),"pseudo"===k.type&&hd(k.selector))for(let B of zy(k.styles))"rule"===B.type&&"@seed"===B.property&&(this.seed=this.get_raw_value(B))}),wr(this.seed)||D.update_random(this.seed)),(I||this.tokens).forEach(k=>{switch(k.type){case"rule":this.pre_compose_rule(k,D);break;case"pseudo":hd(k.selector)&&(k.styles||[]).forEach(B=>{this.pre_compose_rule(B,D)})}})}compose(D,I,k){this.coords.push(D),(I||this.tokens).forEach((B,G)=>{if(B.skip||k&&this.grid)return!1;switch(B.type){case"rule":this.add_rule(this.compose_selector(D),this.compose_rule(B,D));break;case"pseudo":{B.selector.startsWith(":doodle")&&(B.selector=B.selector.replace(/^\:+doodle/,":host"));let ie=VI(B.selector);ie&&(B.skip=!0),B.selector.split(",").forEach(ne=>{let Ie=B.styles.map(Ke=>this.compose_rule(Ke,D,ne)),it=ie?ne:this.compose_selector(D,ne);this.add_rule(it,Ie)});break}case"cond":{let ie=vB[B.name.substr(1)];if(ie){let ne=B.arguments.map(it=>this.compose_argument(it,D));this.apply_func(ie,D,ne)&&this.compose(D,B.styles)}break}case"keyframes":this.keyframes[B.name]||(this.keyframes[B.name]=ie=>`\n              ${Vy(B.steps.map(ne=>`\n                ${ne.name} {\n                  ${Vy(ne.styles.map(Ie=>this.compose_rule(Ie,ie)))}\n                }\n              `))}\n            `)}})}output(){for(let[D,I]of Object.entries(this.rules))if(zI(D))this.styles.container+=`\n          .container {\n            ${Vy(I)}\n          }\n        `;else{let k=hd(D)?"host":"cells",B=Vy(I).trim();this.styles[k]+=`${"host"===k?`${D}, .host`:D} { ${B} }`}return this.uniforms.time&&(this.styles.container+=`\n        :host, .host {\n          animation: ${b1.animation};\n        }\n      `,this.styles.keyframes+=`\n       @keyframes ${b1["animation-name"]} {\n         from { --${b1.name}: 0 }\n         to { --${b1.name}: ${b1["animation-duration"]/10} }\n       }\n      `),this.coords.forEach((D,I)=>{for(let[k,B]of Object.entries(this.keyframes)){let G=this.compose_aname(k,D.count);this.styles.keyframes+=`\n          ${sn(0===I,`@keyframes ${k} { ${B(D)} }`)}\n          @keyframes ${G} {\n            ${B(D)}\n          }\n        `}}),{props:this.props,styles:this.styles,grid:this.grid,seed:this.seed,random:this.random,doodles:this.doodles,shaders:this.shaders,canvas:this.canvas,pattern:this.pattern,uniforms:this.uniforms}}}function vN(y,D,I,k,B){let G=new IB(y),ie=B||Jy(String(I)),ne={};function it(Ht=0,bn){return 1==arguments.length&&([Ht,bn]=[0,Ht]),T2(ie(),Ht,bn)}function Ke(...Ht){let bn=Ht.reduce((Jn,sr)=>Jn.concat(sr),[]);return bn[~~(ie()*bn.length)]}function ut(Ht){let bn=[...Ht],Jn=Ht.length;for(;Jn;){let sr=~~(ie()*Jn--),Xn=bn[Jn];bn[Jn]=bn[sr],bn[sr]=Xn}return bn}G.pre_compose({x:1,y:1,z:1,count:1,context:{},grid:{x:1,y:1,z:1,count:1},random:ie,rand:it,pick:Ke,shuffle:ut,max_grid:k,update_random:function Ie(Ht){ie=Jy(String(Ht))}});let{grid:Ft,seed:zt}=G.output();if(Ft&&(D=Ft),zt?(zt=String(zt),ie=Jy(zt)):zt=I,wr(zt)&&(zt=Date.now(),ie=Jy(zt)),zt=String(zt),G.seed=zt,G.random=ie,G.reset(),1==D.z)for(let Ht=1,bn=0;Ht<=D.y;++Ht)for(let Jn=1;Jn<=D.x;++Jn)G.compose({x:Jn,y:Ht,z:1,count:++bn,grid:D,context:ne,rand:it,pick:Ke,shuffle:ut,random:ie,seed:zt,max_grid:k});else for(let Ht=1,bn=0;Ht<=D.z;++Ht)G.compose({x:1,y:1,z:Ht,count:++bn,grid:D,context:ne,rand:it,pick:Ke,shuffle:ut,random:ie,seed:zt,max_grid:k});return G.output()}function yN(y,D,I){let k=y.createShader(D);return y.shaderSource(k,I),y.compileShader(k),k}function d5(y,D){return y.includes(D)?y:D+"\n"+y}function _N(y,D,I,k){let B=ud.get(y);if(B)return Promise.resolve(B);let G=document.createElement("canvas"),ie=window.devicePixelRatio||1;I*=ie,G.width=D*=ie,G.height=I;let ne=G.getContext("webgl2",{preserveDrawingBuffer:!0});if(!ne)return Promise.resolve("");let Ie=d5(y.fragment||"","uniform vec2 u_resolution;");Ie=d5(Ie,"uniform float u_time;"),Ie=d5(Ie,"uniform float u_timeDelta;"),Ie=d5(Ie,"uniform int u_frameIndex;"),Ie=d5(Ie,"uniform vec2 u_seed;"),y.textures.forEach(ds=>{Ie=d5(Ie,`uniform sampler2D ${ds.name};`)}),/(^|[^\w\_])void\s+mainImage\(\s*out\s+vec4\s+fragColor,\s*in\s+vec2\s+fragCoord\s*\)/gm.test(Ie)&&(Ie=`// https://www.shadertoy.com/howto\n\n#define iResolution vec3(u_resolution, 0)\n#define iTime u_time\n#define iTimeDelta u_timeDelta\n#define iFrame u_frameIndex\n\n${y.textures.map((ds,$a)=>`#define iChannel${$a} ${ds.name}`).join("\n")}\n\n${Ie}\n\nvoid main() {\n  mainImage(FragColor, gl_FragCoord.xy);\n}`);let Ke=function DB(y,D,I){let k=yN(y,y.VERTEX_SHADER,D),B=yN(y,y.FRAGMENT_SHADER,I),G=y.createProgram();return y.attachShader(G,k),y.attachShader(G,B),y.linkProgram(G),y.getProgramParameter(G,y.LINK_STATUS)||(console.warn("Link failed: "+y.getProgramInfoLog(G)),console.warn("vs info-log: "+y.getShaderInfoLog(k)),console.warn("fs info-log: "+y.getShaderInfoLog(B))),G}(ne,y.vertex||"#version 300 es\n  in vec4 position;\n  void main() {\n    gl_Position = position;\n  }\n","#version 300 es\n  precision highp float;\n  out vec4 FragColor;\n"+Ie),ut=ne.getAttribLocation(Ke,"position"),Ft=ne.createBuffer();ne.bindBuffer(ne.ARRAY_BUFFER,Ft),ne.bufferData(ne.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,1,-1,1,1,-1]),ne.STATIC_DRAW),ne.enableVertexAttribArray(ut),ne.vertexAttribPointer(ut,2,ne.FLOAT,!1,0,0),ne.viewport(0,0,ne.drawingBufferWidth,ne.drawingBufferHeight),ne.clearColor(0,0,0,0),ne.clear(ne.COLOR_BUFFER_BIT),ne.useProgram(Ke);const Ht=ne.getUniformLocation(Ke,"u_resolution");ne.uniform2fv(Ht,[D,I]),y.textures.forEach((ds,$a)=>{(function xB(y,D,I){const k=y.createTexture();y.activeTexture(y["TEXTURE"+I]),y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,!0),y.bindTexture(y.TEXTURE_2D,k),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,D),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR)})(ne,ds.value,$a),ne.uniform1i(ne.getUniformLocation(Ke,ds.name),$a)});const bn=ne.getUniformLocation(Ke,"u_seed");bn&&ne.uniform2f(bn,mI(k)/1e16,Math.random());const Jn=ne.getUniformLocation(Ke,"u_time"),sr=ne.getUniformLocation(Ke,"u_frameIndex"),Xn=ne.getUniformLocation(Ke,"u_timeDelta");if(Jn||Xn||sr){let ds=0,$a=0;return Promise.resolve(ud.set(y,vu=>(ne.clear(ne.COLOR_BUFFER_BIT),Jn&&ne.uniform1f(Jn,vu/1e3),sr&&ne.uniform1i(sr,ds++),Xn&&(ne.uniform1f(Xn,($a-vu)/1e3),$a=vu),ne.drawArrays(ne.TRIANGLES,0,6),G.toDataURL())))}return ne.drawArrays(ne.TRIANGLES,0,6),Promise.resolve(ud.set(y,G.toDataURL()))}function AB(y,D){let I=[];for(;y.next();){let{curr:k,next:B}=y.get(),G=!B||k.isSymbol(";")||B.isSymbol("}");if(I.push(k),G)break}return I.length&&(D.value=HI(I)),D}function CN(y,D){let I=[],k=[],B=D&&D.type||"",G=[];for(;y.next();){let{curr:ne,next:Ie}=y.get(),it=!Ie||ne.isSymbol("}");if("block"===B&&it){!Ie&&I.length&&!ne.isSymbol("}")&&(I[I.length-1].value+=";"+ne.value),D.value=I;break}if(ne.isSymbol("{")&&k.length&&!G.length){let Ke=MB(k);if(!Ke.length)continue;let ut=CN(y,{type:"block",name:"unkown",value:[]});Ke.forEach(Ft=>{let zt=Object.assign({},ut,{name:Ft.name,args:Ft.args});I.push(zt)}),k=[]}else if(ne.isSymbol(":")&&k.length&&!G.length){let Ke=HI(k);I.push(AB(y,{type:"statement",name:Ke,value:""})),"block"==B&&(D.value=I),k=[]}else ne.isSymbol(";")?I.length&&k.length&&(I[I.length-1].value+=";"+HI(k),k=[]):(ne.isSymbol("(")&&G.push(ne),ne.isSymbol(")")&&G.pop(),k.push(ne))}return I.length&&"block"==B&&(D.value=I),B?D:I}function HI(y){return y.filter((D,I)=>!(D.isSymbol(";")&&I===y.length-1)).map(D=>D.value).join("")}function MB(y){let D=s(y),I=[],k="",B=[],G=[],ie=[];for(;D.next();){let{curr:ne}=D.get();!k.length&&ne.isWord()?k=ne.value:ne.isSymbol("(")?(ie.length&&G.push(ne.value),ie.push(ne)):ne.isSymbol(")")?(ie.pop(),ie.length?G.push(ne.value):G.length&&(B.push(G.join("")),G=[])):ne.isSymbol(",")?ie.length?(B.push(G.join("")),G=[]):(G.length&&(B.push(G.join("")),G=[]),k&&(I.push({name:k,args:B}),k="",B=[],G=[])):G.push(ne.value)}return k&&I.push({name:k,args:B}),I.filter((ne,Ie,it)=>it.findIndex(ut=>ut.name===ne.name&&ne.args.join("")==ut.args.join(""))===Ie)}function NB(y){return CN(s(de(y)))}function bN(y,D){if("fill"===y.name){let{r:I,g:k,b:B,a:G}=D.get_rgba_color(y.value);return{type:"statement",value:`\ncolor = vec4(${Xy(I/255)}, ${Xy(k/255)}, ${Xy(B/255)}, ${Xy(G)});\n`}}return"grid"==y.name?{type:"grid",value:y.value}:{type:"statement",value:""}}function Xy(y){return String(y).includes(".")?y:y+".0"}const LB=IM();const wN=1e3/60;if(typeof customElements<"u"){class y extends HTMLElement{constructor(){super(),this.doodle=this.attachShadow({mode:"open"}),this.animations=[],this.extra={get_variable:I=>function UB(y,D){return typeof getComputedStyle>"u"?"":getComputedStyle(y).getPropertyValue(D).trim().replace(/^\(|\)$/g,"")}(this,I),get_rgba_color:I=>function $B(y,D){let I=y.querySelector("#defs");return I?(I.style.color=D,function jB(y){let[D,I,k,B=1]=y.replace(/rgba?\((.+)\)/,(G,ie)=>ie).split(/,\s*/);return{r:D,g:I,b:k,a:B}}(getComputedStyle(I).color)):{r:0,g:0,b:0,a:1}}(this.shadowRoot,I)}}connectedCallback(I){this.innerHTML?this.load(I):setTimeout(()=>this.load(I))}disconnectedCallback(){this.cleanup()}cleanup(){ud.clear();for(let I of this.animations)I.cancel();this.animations=[]}update(I){this.cleanup();let k=this.get_use();I||(I=pI(this.innerHTML)),this.innerHTML=I,this.grid_size||(this.grid_size=this.get_grid());let{x:B,y:G,z:ie}=this.grid_size;const ne=this.generate(Dp(k+I,this.extra));if(!this.shadowRoot.innerHTML)return Object.assign(this.grid_size,ne.grid),this.build_grid(ne,ne.grid);if(ne.grid){let{x:it,y:Ke,z:ut}=ne.grid;if(B!==it||G!==Ke||ie!==ut)return Object.assign(this.grid_size,ne.grid),this.build_grid(ne,ne.grid);Object.assign(this.grid_size,ne.grid)}else{let it=this.get_grid(),{x:Ke,y:ut,z:Ft}=it;if(B!==Ke||G!==ut||ie!==Ft)return Object.assign(this.grid_size,it),this.build_grid(this.generate(Dp(k+I,this.extra)),it)}let Ie=this.replace(ne);this.set_content(".style-keyframes",Ie(ne.styles.keyframes)),ne.props.has_animation&&(this.set_content(".style-cells",""),this.set_content(".style-container","")),setTimeout(()=>{this.set_content(".style-container",Ie(UI(this.grid_size)+ne.styles.host+ne.styles.container)),this.set_content(".style-cells",Ie(ne.styles.cells))})}get grid(){return Object.assign({},this.grid_size)}set grid(I){this.attr("grid",I),this.connectedCallback(!0)}get seed(){return this._seed_value}set seed(I){this.attr("seed",I),this.connectedCallback(!0)}get use(){return this.attr("use")}set use(I){this.attr("use",I),this.connectedCallback(!0)}get_max_grid(){return this.hasAttribute("experimental")?256:64}get_grid(){return II(this.attr("grid"),this.get_max_grid())}get_use(){let I=String(this.attr("use")||"").trim();return/^var\(/.test(I)&&(I=`@use:${I};`),I}attr(I,k){return 1===arguments.length?this.getAttribute(I):2===arguments.length?(this.setAttribute(I,k),k):void 0}generate(I){let k=this.get_grid(),B=this.attr("seed")||this.attr("data-seed");wr(B)&&(B=Date.now());let G=this.compiled=vN(I,k,B,this.get_max_grid());return this._seed_value=G.seed,this._seed_random=G.random,G}doodle_to_image(I,k,B){"function"==typeof k&&(B=k,k=null);let G=Dp(I=":doodle { width:100%;height:100% }"+I,this.extra),ie=II(""),ne=vN(G,ie,this._seed_value,this.get_max_grid(),this._seed_random),Ie=ne.grid?ne.grid:ie;const{keyframes:it,host:Ke,container:ut,cells:Ft}=ne.styles;let zt=this.replace(ne),Ht=SN(Ie);zt(`\n        <svg ${k&&k.width&&k.height?`width="${k.width}" height="${k.height}"`:""} xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">\n          <foreignObject width="100%" height="100%">\n            <div class="host" xmlns="http://www.w3.org/1999/xhtml">\n              <style>\n                ${IN()}\n                ${UI(Ie)}\n                ${Ke}\n                ${ut}\n                ${Ft}\n                ${it}\n              </style>\n              <svg id="defs" xmlns="http://www.w3.org/2000/svg" style="width:0; height:0"></svg>\n              ${Ht}\n            </div>\n          </foreignObject>\n        </svg>\n      `).then(Jn=>{let sr=`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(Jn)))}`;fI()&&wM(sr),B(sr)})}pattern_to_image({code:I,cell:k,id:B},G){let ie=function OB(y,D){let I=NB(y),k=[],B={x:1,y:1};return I.forEach(G=>{if("statement"===G.type){let ie=bN(G,D);"statement"==ie.type&&k.push(ie.value),"grid"===ie.type&&(B=function PB(y){let[D,I=D]=String(y+"").replace(/\s+/g,"").replace(/[,\uff0cxX]+/g,"x").split("x").map(k=>parseInt(k));return(!D||D<1)&&(D=1),(!I||I<1)&&(I=1),{x:D,y:I}}(ie.value))}else"block"===G.type&&k.push(function RB(y,D){if("match"===y.name){let I=y.args[0],k=[];return y.value.forEach(B=>{let G=bN(B,D);"statement"==G.type&&k.push(G.value)}),`\n      if (${I}) {\n        ${k.join("")}\n      }\n    `}return""}(G,D))}),function kB(y,D){return`\n    vec3 mapping(vec2 uv, vec2 grid) {\n      vec2 _grid = 1.0/grid;\n      float x = ceil(uv.x/_grid.x);\n      float y = ceil(grid.y - uv.y/_grid.y);\n      float i = x + (y - 1.0) * y;\n      return vec3(x, y, i);\n    }\n    vec4 getColor(float x, float y, float i, float I, float X, float Y, float t) {\n      vec4 color = vec4(0, 0, 0, 0);\n      ${y}\n      return color;\n    }\n    void main() {\n      vec2 uv = gl_FragCoord.xy/u_resolution.xy;\n      vec2 grid = vec2(${D.x}, ${D.y});\n      vec3 p = mapping(uv, grid);\n      FragColor = getColor(p.x, p.y, p.z, grid.x * grid.y, grid.x, grid.y, u_time);\n    }\n  `}(k.join(""),B)}(I,this.extra);this.shader_to_image({shader:ie,cell:k,id:B},G)}canvas_to_image({code:I},k){(function FB(y){let D=ud.get(y);if(D)return Promise.resolve(D);let I=LB("css-doodle-paint"),k=function zB(y,D){return(D=pI(D)).includes("paint(")||(D=`\n      paint(ctx, {width, height}, props) {\n        ${D}\n      }\n    `),`\n    registerPaint('${y}', class {\n      ${D}\n    })\n  `}(I,y),B=new Blob([k],{type:"text/javascript"});try{CSS.paintWorklet&&CSS.paintWorklet.addModule(URL.createObjectURL(B))}catch{}return Promise.resolve(ud.set(y,`paint(${I})`))})(I).then(k)}pause(){this.setAttribute("cssd-paused-animation",!0);for(let I of this.animations)I.pause()}resume(){this.removeAttribute("cssd-paused-animation");for(let I of this.animations)I.resume()}shader_to_image({shader:I,cell:k,id:B},G){let ie="string"==typeof I?function OU(y){let G,ie,I=s(UM(de(y,{preserveLineBreak:!0,ignoreInlineComment:!0}))),k=[],B=[],ne={textures:[]};for(;I.next();){let{curr:Ie,next:it}=I.get();if(Ie.isSymbol("{")){if(k.length)B.push(Ie);else{let Ke=DI(B);LU(Ke)?(G=Ke,B=[]):B.push(Ie)}k.push("{")}else if(Ie.isSymbol("}"))if(k.pop(),!k.length&&G){let Ke=DI(B);G&&Ke.length&&(G.startsWith("texture")?ne.textures.push({name:G,value:Ke}):ne[G]=Ke,B=[]),G=null}else B.push(Ie);else!S2(ie)&&ie!=Ie.pos[1]&&(B.push(HM()),ie=null),Ie.isWord()&&Ie.value.startsWith("#")&&(B.push(HM()),ie=it.pos[1]),B.push(Ie)}return S2(ne.fragment)&&(ne.fragment=DI(B),ne.textures=ne.textures||[]),ne}(I):I,ne=this.doodle.getElementById(k);const Ie=this.seed,it=Ht=>{ne.style.setProperty(B,`url(${Ht})`)},Ke=Ht=>{if("function"==typeof Ht){let bn=function GB(y){let D,I=0,k=0,B=0,G=!1;function ie(ne){I||(I=ne),y(I);let Ie=ne-k;Ie<wN&&(Ie=wN),Ie>1e3&&(Ie=B||1e3),k&&(I+=Ie),B=Ie,k=ne,D=requestAnimationFrame(ie)}return D=requestAnimationFrame(ie),{resume(){D&&G&&(G=!1,D=requestAnimationFrame(ie))},pause(){D&&(cancelAnimationFrame(D),G=!0)},cancel(){D&&(G=!1,cancelAnimationFrame(D),D=null)}}}(Jn=>{it(Ht(Jn))});return this.animations.push(bn),""}it(Ht)};let{width:ut,height:Ft}=ne&&ne.getBoundingClientRect()||{width:0,height:0},zt=window.devicePixelRatio||1;if(!ie.textures.length||ie.ticker)_N(ie,ut,Ft,Ie).then(Ke).then(G);else{let Ht=ie.textures.map(bn=>new Promise(Jn=>{this.doodle_to_image(bn.value,{width:ut,height:Ft},sr=>{let Xn=new Image;Xn.width=ut*zt,Xn.height=Ft*zt,Xn.onload=()=>Jn({name:bn.name,value:Xn}),Xn.src=sr})}));Promise.all(Ht).then(bn=>{ie.textures=bn,_N(ie,ut,Ft,Ie).then(Ke).then(G)})}}load(I){this.cleanup();let B=Dp(this.get_use()+pI(this.innerHTML),this.extra),G=this.generate(B);I||this.hasAttribute("click-to-update")&&this.addEventListener("click",ie=>this.update()),this.grid_size=G.grid?G.grid:this.get_grid(),this.build_grid(G,this.grid_size)}replace({doodles:I,shaders:k,canvas:B,pattern:G}){let ie=Object.keys(I),ne=Object.keys(k),Ie=Object.keys(B),it=Object.keys(G),Ke=ie.length+Ie.length+ne.length+it.length;return ut=>{if(!Ke)return Promise.resolve(ut);let Ft=[].concat(ie.map(zt=>ut.includes(zt)?new Promise(Ht=>{this.doodle_to_image(I[zt],bn=>Ht({id:zt,value:bn}))}):Promise.resolve("")),ne.map(zt=>ut.includes(zt)?new Promise(Ht=>{this.shader_to_image(k[zt],bn=>Ht({id:zt,value:bn}))}):Promise.resolve("")),Ie.map(zt=>ut.includes(zt)?new Promise(Ht=>{this.canvas_to_image(B[zt],bn=>Ht({id:zt,value:bn}))}):Promise.resolve("")),it.map(zt=>ut.includes(zt)?new Promise(Ht=>{this.pattern_to_image(G[zt],bn=>Ht({id:zt,value:bn}))}):Promise.resolve("")));return Promise.all(Ft).then(zt=>{for(let{id:Ht,value:bn}of zt){let Jn=`url(${bn})`;/^canvas/.test(Ht)&&(Jn=bn),/^shader|^pattern/.test(Ht)&&(Jn=`var(--${Ht})`),ut=ut.replaceAll("${"+Ht+"}",Jn)}return ut})}}build_grid(I,k){const{has_transition:B,has_animation:G}=I.props;let ie=B||G;const{keyframes:ne,host:Ie,container:it,cells:Ke}=I.styles;let ut=UI(k)+Ie+it,Ft=ie?"":Ke;const{uniforms:zt}=I;let Ht=this.replace(I);this.doodle.innerHTML=`\n        <style>${IN()}</style>\n        <style class="style-keyframes">${ne}</style>\n        <style class="style-container">${ut}</style>\n        <style class="style-cells">${Ft}</style>\n        <svg id="defs" xmlns="http://www.w3.org/2000/svg" style="width:0;height:0"></svg>\n        ${SN(k)}\n      `,this.set_content(".style-container",Ht(ut)),ie?setTimeout(()=>{this.set_content(".style-cells",Ht(Ke))},50):this.set_content(".style-cells",Ht(Ke)),zt.time&&this.register_uniform_time(),zt.mousex||zt.mousey?this.register_uniform_mouse(zt):this.remove_uniform_mouse(),zt.width||zt.height?this.register_uniform_resolution(zt):this.remove_uniform_resolution()}register_uniform_mouse(I){if(!this.uniform_mouse_callback){let{uniform_mousex:k,uniform_mousey:B}=l5;this.uniform_mouse_callback=ie=>{let ne=ie.detail||ie;I.mousex&&this.style.setProperty("--"+k.name,ne.offsetX),I.mousey&&this.style.setProperty("--"+B.name,ne.offsetY)},this.addEventListener("pointermove",this.uniform_mouse_callback);let G=new CustomEvent("pointermove",{detail:{offsetX:0,offsetY:0}});this.dispatchEvent(G)}}remove_uniform_mouse(){if(this.uniform_mouse_callback){let{uniform_mousex:I,uniform_mousey:k}=l5;this.style.removeProperty("--"+I.name),this.style.removeProperty("--"+k.name),this.removeEventListener("pointermove",this.uniform_mouse_callback),this.uniform_mouse_callback=null}}register_uniform_resolution(I){if(!this.uniform_resolution_observer){let{uniform_width:k,uniform_height:B}=l5;const G=()=>{let ie=this.getBoundingClientRect();I.width&&this.style.setProperty("--"+k.name,ie.width),I.height&&this.style.setProperty("--"+B.name,ie.height)};G(),this.uniform_resolution_observer=new ResizeObserver(ie=>{for(let ne of ie)(ne.contentBoxSize||ne.contentRect)&&G()}),this.uniform_resolution_observer.observe(this)}}remove_uniform_resolution(){if(this.uniform_resolution_observer){let{uniform_width:I,uniform_height:k}=l5;this.style.removeProperty("--"+I.name),this.style.removeProperty("--"+k.name),this.uniform_resolution_observer.unobserve(this),this.uniform_resolution_observer=null}}register_uniform_time(){if(!window.CSS||!window.CSS.registerProperty)return!1;if(!this.is_uniform_time_registered){let{uniform_time:I}=l5;try{CSS.registerProperty({name:"--"+I.name,syntax:"<number>",initialValue:0,inherits:!0})}catch{}this.is_uniform_time_registered=!0}}export({scale:I,name:k,download:B,detail:G}={}){return new Promise((ie,ne)=>{let Ie=function HB(y){if(typeof getComputedStyle>"u")return"";let D={};if(y.computedStyleMap)for(let[I,k]of y.computedStyleMap())I.startsWith("--")&&(D[I]=k[0][0]);else{let I=getComputedStyle(y);for(let k of I)k.startsWith("--")&&(D[k]=I.getPropertyValue(k))}return function BB(y){let D=[];for(let[I,k]of Object.entries(y))D.push(I+":"+k);return D.join(";")}(D)}(this),it=this.doodle.innerHTML,{width:Ke,height:ut}=this.getBoundingClientRect(),Ft=Ke*(I=parseInt(I)||1),zt=ut*I,Ht=`\n          <svg xmlns="http://www.w3.org/2000/svg"\n            preserveAspectRatio="none"\n            viewBox="0 0 ${Ke} ${ut}"\n            ${fI()?"":`width="${Ft}px" height="${zt}px"`}\n          >\n            <foreignObject width="100%" height="100%">\n              <div\n                class="host"\n                xmlns="http://www.w3.org/1999/xhtml"\n                style="width: ${Ke}px; height: ${ut}px; "\n              >\n                <style>.host { ${function mU(y){return y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(Ie)} }</style>\n                ${it}\n              </div>\n            </foreignObject>\n          </svg>\n        `;B||G?function VB(y,D,I,k){return new Promise((B,G)=>{let ie=`data:image/svg+xml;utf8,${encodeURIComponent(y)}`;function ne(){let Ie=new Image;Ie.crossOrigin="anonymous",Ie.src=ie,Ie.onload=()=>{let it=document.createElement("canvas"),Ke=it.getContext("2d"),ut=window.devicePixelRatio||1;1!=k&&(ut=1),it.width=D*ut,it.height=I*ut,Ke.drawImage(Ie,0,0,it.width,it.height);try{it.toBlob(Ft=>{B({blob:Ft,source:ie,url:URL.createObjectURL(Ft)})})}catch(Ft){G(Ft)}}}fI()?wM(ie,ne,200):ne()})}(Ht,Ft,zt,I).then(({source:bn,url:Jn,blob:sr})=>{if(ie({width:Ft,height:zt,svg:Ht,blob:sr,source:bn}),B){let Xn=document.createElement("a");Xn.download=function pU(y){return(wr(y)?Date.now():String(y).replace(/\/.png$/g,""))+".png"}(k),Xn.href=Jn,Xn.click()}}).catch(bn=>{ne(bn)}):ie({width:Ft,height:zt,svg:Ht})})}set_content(I,k){if(k instanceof Promise)k.then(B=>{this.set_content(I,B)});else{const B=this.shadowRoot.querySelector(I);B&&(B.styleSheet?B.styleSheet.cssText=k:B.innerHTML=k)}}}customElements.get("css-doodle")||customElements.define("css-doodle",y)}function IN(){let{uniform_time:y}=l5;const D=cN(/grid/).map(I=>`${I}: inherit;`).join("");return`\n    *, *::after, *::before {\n      box-sizing: border-box;\n      animation-play-state: var(--cssd-animation-play-state) !important;\n    }\n    :host, .host {\n      display: block;\n      visibility: visible;\n      width: auto;\n      height: auto;\n      --${y.name}: 0\n    }\n    :host([hidden]), .host[hidden] {\n      display: none\n    }\n    .container {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: grid;\n      ${D}\n    }\n    cell:empty {\n      position: relative;\n      line-height: 1;\n      display: grid;\n      place-items: center\n    }\n    svg {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n    :host([cssd-paused-animation]) {\n      --cssd-animation-play-state: paused;\n      animation-play-state: paused !important;\n    }\n  `}function UI(y){let{x:D,y:I}=y||{};return`\n    :host, .host {\n      grid-template-rows: repeat(${I}, 1fr);\n      grid-template-columns: repeat(${D}, 1fr);\n    }\n  `}function DN(y,D,I){let k=document.createElement("cell");return k.id=wp(y,D,I),k}function SN(y){let{x:D,y:I,z:k}=y||{},B=document.createElement("grid"),G=document.createDocumentFragment();if(1==k)for(let ie=1;ie<=I;++ie)for(let ne=1;ne<=D;++ne)G.appendChild(DN(ne,ie,1));else{let ie=null;for(let ne=1;ne<=k;++ne){let Ie=DN(1,1,ne);(ie||G).appendChild(Ie),ie=Ie}ie=null}return B.className="container",B.appendChild(G),B.outerHTML}const WB=EM(y=>{let D=document.createElement("css-doodle");return D.update&&D.update(y),D});n.CSSDoodle=WB,Object.defineProperty(n,"__esModule",{value:!0})});let aO=(()=>{class n{constructor(){this.title="chat_angular"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=x.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:1,consts:[[1,"main"]],template:function(t,r){1&t&&(x.TgZ(0,"section",0)(1,"css-doodle"),x._uU(2),x.qZA()(),x._UZ(3,"router-outlet")),2&t&&(x.xp6(2),x.hij(" "," :doodle { @grid: 1 / 1920px; overflow: hidden; background: #000; } @place: center; @size: 140% 130%; background: linear-gradient(35deg, #000, #900a, #000), @m2(linear-gradient( @pn(165deg, -165deg), @stripe.@m10(hwb(calc(120 + 80/@N*@n) 5% calc(90%/@N*@n)) @r(20%)) )), linear-gradient(#373640,#63686e,#7e97a6,#b6f7c1); background-blend-mode: overlay; mask: radial-gradient(circle at 30% 10%, #fff 10%, #0000); filter: @filter(.003 .008, 80, @r(1000), 10) @M2.@filter(.016, 20, @r(10000), 20) @filter(.4 .016, 10, @r(10000), 20) @filter(.016, 20, @r(10000)) brightness(4.5) hue-rotate(92deg); ","\n"))},dependencies:[De.lC],styles:[".main[_ngcontent-%COMP%]{height:900px!important;display:grid;overflow:hidden;place-items:center;border-radius:20px}"]}),n})();var cO=W(529);const yT="firebasestorage.googleapis.com",_T="storageBucket";class ys extends re.ZR{constructor(e,t){super($w(e),`Firebase Storage: ${t} (${$w(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ys.prototype)}_codeEquals(e){return $w(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $w(n){return"storage/"+n}function Gw(){return new ys("unknown","An unknown error occurred, please check the error payload for server response.")}function CT(){return new ys("canceled","User canceled the upload/download.")}function bT(){return new ys("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function q0(n){return new ys("invalid-argument",n)}function wT(){return new ys("app-deleted","The Firebase app was deleted.")}function ET(n){return new ys("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function j7(n,e){return new ys("invalid-format","String does not match format '"+n+"': "+e)}function $7(n){throw new ys("internal-error","Internal error: "+n)}class pa{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=pa.makeFromUrl(e,t)}catch{return new pa(e,"")}if(""===r.path)return r;throw function _O(n){return new ys("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+s+"(/(.*))?$","i");function w(sn){sn.path_=decodeURIComponent(sn.path)}const $=t.replace(/[.]/g,"\\."),qt=[{regex:h,indices:{bucket:1,path:3},postModify:function c(sn){"/"===sn.path.charAt(sn.path.length-1)&&(sn.path_=sn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${$}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===yT?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let sn=0;sn<qt.length;sn++){const In=qt[sn],Fn=In.regex.exec(e);if(Fn){let wr=Fn[In.indices.path];wr||(wr=""),r=new pa(Fn[In.indices.bucket],wr),In.postModify(r);break}}if(null==r)throw function yO(n){return new ys("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class EO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Wv(n){return"string"==typeof n||n instanceof String}function IT(n){return Ww()&&n instanceof Blob}function Ww(){return typeof Blob<"u"}function qw(n,e,t,r){if(r<e)throw q0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw q0(`Invalid value for '${n}'. Expected ${t} or less.`)}function w2(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function DT(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var X3=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(X3||(X3={})),X3))();class AO{constructor(e,t,r,s,c,u,h,m,w,O,$){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=w,this.progressCallback_=O,this.connectionFactory_=$,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ee,de)=>{this.resolve_=ee,this.reject_=de,this.start_()})}start_(){const t=(r,s)=>{const c=this.resolve_,u=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function SO(n){return void 0!==n}(m)?c():c(m)}catch(m){u(m)}else if(null!==h){const m=Gw();m.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,m):m)}else u(s.canceled?this.appDelete_?wT():CT():function vO(){return new ys("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new qv(!1,null,!0)):this.backoffId_=function IO(n,e,t){let r=1,s=null,c=null,u=!1,h=0;function m(){return 2===h}let w=!1;function O(...It){w||(w=!0,e.apply(null,It))}function $(It){s=setTimeout(()=>{s=null,n(de,m())},It)}function ee(){c&&clearTimeout(c)}function de(It,...an){if(w)return void ee();if(It)return ee(),void O.call(null,It,...an);if(m()||u)return ee(),void O.call(null,It,...an);let qt;r<64&&(r*=2),1===h?(h=2,qt=0):qt=1e3*(r+Math.random()),$(qt)}let Te=!1;function st(It){Te||(Te=!0,ee(),!w&&(null!==s?(It||(h=2),clearTimeout(s),$(0)):It||(h=1)))}return $(0),c=setTimeout(()=>{u=!0,st(!0)},t),st}((r,s)=>{if(s)return void r(!1,new qv(!1,null,!0));const c=this.connectionFactory_();this.pendingConnection_=c;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const h=c.getErrorCode()===X3.NO_ERROR,m=c.getStatus();if(!h||this.isRetryStatusCode_(m)){const O=c.getErrorCode()===X3.ABORT;return void r(!1,new qv(!1,null,O))}const w=-1!==this.successCodes_.indexOf(m);r(!0,new qv(w,c))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function DO(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),c=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||c}}class qv{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function LO(...n){const e=function OO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Ww())return new Blob(n);throw new ys("unsupported-environment","This browser doesn't seem to support creating Blobs")}const nc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zw{constructor(e,t){this.data=e,this.contentType=t||null}}function Kw(n,e){switch(n){case nc.RAW:return new Zw(ST(e));case nc.BASE64:case nc.BASE64URL:return new Zw(TT(n,e));case nc.DATA_URL:return new Zw(function HO(n){const e=new xT(n);return e.base64?TT(nc.BASE64,e.rest):function VO(n){let e;try{e=decodeURIComponent(n)}catch{throw j7(nc.DATA_URL,"Malformed data URL.")}return ST(e)}(e.rest)}(e),function UO(n){return new xT(n).contentType}(e))}throw Gw()}function ST(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function TT(n,e){switch(n){case nc.BASE64:{const s=-1!==e.indexOf("-"),c=-1!==e.indexOf("_");if(s||c)throw j7(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case nc.BASE64URL:{const s=-1!==e.indexOf("+"),c=-1!==e.indexOf("/");if(s||c)throw j7(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function zO(n){return atob(n)}(e)}catch{throw j7(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class xT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw j7(nc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function BO(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class uu{constructor(e,t){let r=0,s="";IT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(IT(this.data_)){const s=function FO(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new uu(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new uu(r,!0)}}static getBlob(...e){if(Ww()){const t=e.map(r=>r instanceof uu?r.data_:r);return new uu(LO.apply(null,t))}{const t=e.map(u=>Wv(u)?Kw(nc.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let c=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)s[c++]=u[h]}),new uu(s,!0)}}uploadData(){return this.data_}}function Yw(n){let e;try{e=JSON.parse(n)}catch{return null}return function xO(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function AT(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function GO(n,e){return e}class Ua{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||GO}}let Zv=null;function G7(){if(Zv)return Zv;const n=[];n.push(new Ua("bucket")),n.push(new Ua("generation")),n.push(new Ua("metageneration")),n.push(new Ua("name","fullPath",!0));const t=new Ua("name");t.xform=function e(c,u){return function WO(n){return!Wv(n)||n.length<2?n:AT(n)}(u)},n.push(t);const s=new Ua("size");return s.xform=function r(c,u){return void 0!==u?Number(u):u},n.push(s),n.push(new Ua("timeCreated")),n.push(new Ua("updated")),n.push(new Ua("md5Hash",null,!0)),n.push(new Ua("cacheControl",null,!0)),n.push(new Ua("contentDisposition",null,!0)),n.push(new Ua("contentEncoding",null,!0)),n.push(new Ua("contentLanguage",null,!0)),n.push(new Ua("contentType",null,!0)),n.push(new Ua("metadata","customMetadata",!0)),Zv=n,Zv}function MT(n,e,t){const r=Yw(e);return null===r?null:function ZO(n,e,t){const r={type:"file"},s=t.length;for(let c=0;c<s;c++){const u=t[c];r[u.local]=u.xform(r,e[u.server])}return function qO(n,e){Object.defineProperty(n,"ref",{get:function t(){const c=new pa(n.bucket,n.fullPath);return e._makeStorageReference(c)}})}(r,n),r}(n,r,t)}function Qw(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const c=e[s];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}const NT="prefixes";class du{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hu(n){if(!n)throw Gw()}function Kv(n,e){return function t(r,s){const c=MT(n,s,e);return hu(null!==c),c}}function Z0(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function mO(){return new ys("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function pO(){return new ys("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function fO(n){return new ys("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function gO(n){return new ys("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function W7(n){const e=Z0(n);return function t(r,s){let c=e(r,s);return 404===r.getStatus()&&(c=function hO(n){return new ys("object-not-found","Object '"+n+"' does not exist.")}(n.path)),c.serverResponse=s.serverResponse,c}}function RT(n,e,t){const s=w2(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new du(s,"GET",Kv(n,t),u);return h.errorHandler=W7(e),h}function eL(n,e,t,r,s){const c={};c.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(c.delimiter=t),r&&(c.pageToken=r),s&&(c.maxResults=s);const h=w2(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,O=new du(h,"GET",function JO(n,e){return function t(r,s){const c=function QO(n,e,t){const r=Yw(t);return null===r?null:function YO(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[NT])for(const s of t[NT]){const c=s.replace(/\/$/,""),u=n._makeStorageReference(new pa(e,c));r.prefixes.push(u)}if(t.items)for(const s of t.items){const c=n._makeStorageReference(new pa(e,s.name));r.items.push(c)}return r}(n,e,r)}(n,e,s);return hu(null!==c),c}}(n,e.bucket),w);return O.urlParams=c,O.errorHandler=Z0(e),O}function OT(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Yv{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function Jw(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{hu(!1)}return hu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const cL={STATE_CHANGED:"state_changed"},Ba={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xw(n){switch(n){case"running":case"pausing":case"canceling":return Ba.RUNNING;case"paused":return Ba.PAUSED;case"success":return Ba.SUCCESS;case"canceled":return Ba.CANCELED;default:return Ba.ERROR}}class lL{constructor(e,t,r){if(function TO(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function K0(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class dL extends class uL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=X3.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=X3.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=X3.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw $7("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const c in s)s.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,s[c].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $7("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $7("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $7("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $7("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Al(){return new dL}class VT{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=G7(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,c)=>{this._resolve=s,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function sL(n,e,t,r,s){const c=e.bucketOnlyServerUrl(),u=OT(e,r,s),h={name:u.fullPath},m=w2(c,n.host,n._protocol),O={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},$=Qw(u,t),Te=new du(m,"POST",function de(st){let It;Jw(st);try{It=st.getResponseHeader("X-Goog-Upload-URL")}catch{hu(!1)}return hu(Wv(It)),It},n.maxUploadRetryTime);return Te.urlParams=h,Te.headers=O,Te.body=$,Te.errorHandler=Z0(e),Te}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Al,e,t);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function oL(n,e,t,r){const m=new du(t,"POST",function c(w){const O=Jw(w,["active","final"]);let $=null;try{$=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{hu(!1)}$||hu(!1);const ee=Number($);return hu(!isNaN(ee)),new Yv(ee,r.size(),"final"===O)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Z0(e),m}(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(s,Al,t,r);this._request=c,c.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Yv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,c)=>{let u;try{u=function aL(n,e,t,r,s,c,u,h){const m=new Yv(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function bO(){return new ys("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=m.total-m.current;let O=w;s>0&&(O=Math.min(O,s));const $=m.current,Te={"X-Goog-Upload-Command":O===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},st=r.slice($,$+O);if(null===st)throw bT();const qt=new du(t,"POST",function It(sn,In){const Fn=Jw(sn,["active","final"]),jr=m.current+O,wr=r.size();let ga;return ga="final"===Fn?Kv(e,c)(sn,In):null,new Yv(jr,wr,"final"===Fn,ga)},e.maxUploadRetryTime);return qt.headers=Te,qt.body=st.uploadData(),qt.progressCallback=h||null,qt.errorHandler=Z0(n),qt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Al,s,c);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=RT(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Al,e,t);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function LT(n,e,t,r,s){const c=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let qt="";for(let sn=0;sn<2;sn++)qt+=Math.random().toString().slice(2);return qt}();u["Content-Type"]="multipart/related; boundary="+m;const w=OT(e,r,s),O=Qw(w,t),de=uu.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+O+"\r\n--"+m+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===de)throw bT();const Te={name:w.fullPath},st=w2(c,n.host,n._protocol),an=n.maxUploadRetryTime,un=new du(st,"POST",Kv(n,t),an);return un.urlParams=Te,un.headers=u,un.body=de.uploadData(),un.errorHandler=Z0(e),un}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Al,e,t);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=CT(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Xw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const c=new lL(t||void 0,r||void 0,s||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Xw(this._state)){case Ba.SUCCESS:K0(this._resolve.bind(null,this.snapshot))();break;case Ba.CANCELED:case Ba.ERROR:K0(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Xw(this._state)){case Ba.RUNNING:case Ba.PAUSED:e.next&&K0(e.next.bind(e,this.snapshot))();break;case Ba.SUCCESS:e.complete&&K0(e.complete.bind(e))();break;default:e.error&&K0(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class J4{constructor(e,t){this._service=e,this._location=t instanceof pa?t:pa.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new J4(e,t)}get root(){const e=new pa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AT(this._location.path)}get storage(){return this._service}get parent(){const e=function jO(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new pa(this._location.bucket,e);return new J4(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw ET(e)}}function UT(n,e,t){return eE.apply(this,arguments)}function eE(){return eE=(0,yt.Z)(function*(n,e,t){const s=yield BT(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield UT(n,e,s.nextPageToken))}),eE.apply(this,arguments)}function BT(n,e){null!=e&&"number"==typeof e.maxResults&&qw("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Al)}function EL(n){n._throwIfRoot("getDownloadURL");const e=function tL(n,e,t){const s=w2(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new du(s,"GET",function XO(n,e){return function t(r,s){const c=MT(n,s,e);return hu(null!==c),function KO(n,e,t,r){const s=Yw(e);if(null===s||!Wv(s.downloadTokens))return null;const c=s.downloadTokens;if(0===c.length)return null;const u=encodeURIComponent;return c.split(",").map(w=>{const $=n.fullPath;return w2("/b/"+u(n.bucket)+"/o/"+u($),t,r)+DT({alt:"media",token:w})})[0]}(c,s,n.host,n._protocol)}}(n,t),u);return h.errorHandler=W7(e),h}(n.storage,n._location,G7());return n.storage.makeRequestWithTokens(e,Al).then(t=>{if(null===t)throw function wO(){return new ys("no-download-url","The given file does not have any download URLs.")}();return t})}function jT(n,e){const t=function $O(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new pa(n._location.bucket,t);return new J4(n.storage,r)}function $T(n,e){if(n instanceof tE){const t=n;if(null==t._bucket)throw function CO(){return new ys("no-default-bucket","No default bucket found. Did you set the '"+_T+"' property when initializing the app?")}();const r=new J4(t,t._bucket);return null!=e?$T(r,e):r}return void 0!==e?jT(n,e):n}function TL(n,e){if(e&&function DL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof tE)return function SL(n,e){return new J4(n,e)}(n,e);throw q0("To use ref(service, url), the first argument must be a Storage instance.")}return $T(n,e)}function GT(n,e){const t=e?.[_T];return null==t?null:pa.makeFromBucketSpec(t,n)}class tE{constructor(e,t,r,s,c){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=c,this._bucket=null,this._host=yT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?pa.makeFromBucketSpec(s,this._host):GT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?pa.makeFromBucketSpec(this._url,e):GT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,yt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,yt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new J4(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new EO(wT());{const c=function PO(n,e,t,r,s,c){const u=DT(n.urlParams),h=n.url+u,m=Object.assign({},n.headers);return function kO(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function MO(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function NO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,c),function RO(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new AO(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,yt.Z)(function*(){const[s,c]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,c).getPromise()})()}}const WT="@firebase/storage";function KT(n,e){return TL(n=(0,re.m9)(n),e)}function zL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new tE(t,r,s,e,Vo.SDK_VERSION)}!function VL(){(0,Vo._registerComponent)(new d1.wA("storage",zL,"PUBLIC").setMultipleInstances(!0)),(0,Vo.registerVersion)(WT,"0.9.9",""),(0,Vo.registerVersion)(WT,"0.9.9","esm2017")}();class Qv{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class YT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Qv(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Qv(r,this,this._ref))},t)}on(e,t,r,s){let c;return t&&(c="function"==typeof t?u=>t(new Qv(u,this,this._ref)):{next:t.next?u=>t.next(new Qv(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,c,r||void 0,s||void 0)}}class QT{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new E2(e,this._service))}get items(){return this._delegate.items.map(e=>new E2(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class E2{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function LL(n,e){return jT(n,e)}(this._delegate,e);return new E2(t,this.storage)}get root(){return new E2(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new E2(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new YT(function AL(n,e,t){return function yL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new VT(n,new uu(e),t)}(n=(0,re.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=nc.RAW,r){this._throwIfRoot("putString");const s=Kw(t,e),c=Object.assign({},r);return null==c.contentType&&null!=s.contentType&&(c.contentType=s.contentType),new YT(new VT(this._delegate,new uu(s.data,!0),c),this)}listAll(){return function RL(n){return function CL(n){const e={prefixes:[],items:[]};return UT(n,e).then(()=>e)}(n=(0,re.m9)(n))}(this._delegate).then(e=>new QT(e,this.storage))}list(e){return function kL(n,e){return BT(n=(0,re.m9)(n),e)}(this._delegate,e||void 0).then(t=>new QT(t,this.storage))}getMetadata(){return function ML(n){return function bL(n){n._throwIfRoot("getMetadata");const e=RT(n.storage,n._location,G7());return n.storage.makeRequestWithTokens(e,Al)}(n=(0,re.m9)(n))}(this._delegate)}updateMetadata(e){return function NL(n,e){return function wL(n,e){n._throwIfRoot("updateMetadata");const t=function nL(n,e,t,r){const c=w2(e.fullServerUrl(),n.host,n._protocol),h=Qw(t,r),w=n.maxOperationRetryTime,O=new du(c,"PATCH",Kv(n,r),w);return O.headers={"Content-Type":"application/json; charset=utf-8"},O.body=h,O.errorHandler=W7(e),O}(n.storage,n._location,e,G7());return n.storage.makeRequestWithTokens(t,Al)}(n=(0,re.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function PL(n){return EL(n=(0,re.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function OL(n){return function IL(n){n._throwIfRoot("deleteObject");const e=function rL(n,e){const r=w2(e.fullServerUrl(),n.host,n._protocol),h=new du(r,"DELETE",function u(m,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=W7(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Al)}(n=(0,re.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw ET(e)}}class JT{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(XT(e))throw q0("ref() expected a child path but got a URL, use refFromURL instead.");return new E2(KT(this._delegate,e),this)}refFromURL(e){if(!XT(e))throw q0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pa.makeFromUrl(e,this._delegate.host)}catch{throw q0("refFromUrl() expected a valid full URL but got an invalid one.")}return new E2(KT(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function FL(n,e,t,r={}){!function xL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,re.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function XT(n){return/^[A-Za-z]+:\/\//.test(n)}function jL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new JT(t,r)}function ex(n){const e=function GL(n){return new Td.y(e=>{const t=u=>e.next(u);t(n.snapshot);const c=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){c()}}).pipe(function lO(n,e=Sd.z){return(0,Mu.e)((t,r)=>{let s=null,c=null,u=null;const h=()=>{if(s){s.unsubscribe(),s=null;const w=c;c=null,r.next(w)}};function m(){const w=u+n,O=e.now();if(O<w)return s=this.schedule(void 0,w-O),void r.add(s);h()}t.subscribe((0,xd.x)(r,w=>{c=w,u=e.now(),s||(s=e.schedule(m,n),r.add(s))},()=>{h(),r.complete()},void 0,()=>{c=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Is.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Jv(n){return{getDownloadURL:()=>(0,H1.of)(void 0).pipe(Wr.fc,(0,Sl.w)(()=>n.getDownloadURL()),Wr.iC),getMetadata:()=>(0,H1.of)(void 0).pipe(Wr.fc,(0,Sl.w)(()=>n.getMetadata()),Wr.iC),delete:()=>(0,Ec.D)(n.delete()),child:e=>Jv(n.child(e)),updateMetadata:e=>(0,Ec.D)(n.updateMetadata(e)),put:(e,t)=>ex(n.put(e,t)),putString:(e,t,r)=>ex(n.putString(e,t,r)),list:e=>(0,Ec.D)(n.list(e)),listAll:()=>(0,Ec.D)(n.listAll())}}!function $L(n){const e={TaskState:Ba,TaskEvent:cL,StringFormat:nc,Storage:JT,Reference:E2};n.INTERNAL.registerComponent(new d1.wA("storage-compat",jL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Nd.Z);const WL=new x.OlP("angularfire2.storageBucket"),qL=new x.OlP("angularfire2.storage.maxUploadRetryTime"),ZL=new x.OlP("angularfire2.storage.maxOperationRetryTime"),KL=new x.OlP("angularfire2.storage.use-emulator");let YL=(()=>{class n{constructor(t,r,s,c,u,h,m,w,O,$){const ee=(0,ps.on)(t,u,r);this.storage=(0,ps.cc)(`${ee.name}.storage.${s}`,"AngularFireStorage",ee.name,()=>{const de=u.runOutsideAngular(()=>ee.storage(s||void 0)),Te=O;return Te&&de.useEmulator(...Te),m&&de.setMaxUploadRetryTime(m),w&&de.setMaxOperationRetryTime(w),de},[m,w])}ref(t){return Jv(this.storage.ref(t))}refFromURL(t){return Jv(this.storage.refFromURL(t))}upload(t,r,s){return Jv(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(x.LFG(ps.Dh),x.LFG(ps.xv,8),x.LFG(WL,8),x.LFG(x.Lbi),x.LFG(x.R0b),x.LFG(Wr.HU),x.LFG(qL,8),x.LFG(ZL,8),x.LFG(KL,8),x.LFG(x7,8))},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n}),n.\u0275inj=x.cJS({}),n})(),JL=(()=>{class n{constructor(){Dv.Z.registerVersion("angularfire",Wr.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n}),n.\u0275inj=x.cJS({providers:[YL],imports:[QL]}),n})();var XL=W(8421),eF=W(5032),tF=W(3269);const tx="@firebase/database";let nE="";function rx(n){nE=n}class iF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,re.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,re.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,re.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ix=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iF(e)}}catch{}return new sF},X4=ix("localStorage"),rE=ix("sessionStorage"),Y0=new u1.Yd("@firebase/database"),sx=function(){let n=1;return function(){return n++}}(),ox=function(n){const e=(0,re.dS)(n),t=new re.gQ;t.update(e);const r=t.digest();return re.US.encodeByteArray(r)},q7=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=q7.apply(null,r):e+="object"==typeof r?(0,re.Pz)(r):r,e+=" "}return e};let eh=null,ax=!0;const cx=function(n,e){(0,re.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Y0.logLevel=u1.in.VERBOSE,eh=Y0.log.bind(Y0),e&&rE.set("logging_enabled",!0)):"function"==typeof n?eh=n:(eh=null,rE.remove("logging_enabled"))},To=function(...n){if(!0===ax&&(ax=!1,null===eh&&!0===rE.get("logging_enabled")&&cx(!0)),eh){const e=q7.apply(null,n);eh(e)}},Z7=function(n){return function(...e){To(n,...e)}},iE=function(...n){const e="FIREBASE INTERNAL ERROR: "+q7(...n);Y0.error(e)},fu=function(...n){const e=`FIREBASE FATAL ERROR: ${q7(...n)}`;throw Y0.error(e),new Error(e)},ma=function(...n){const e="FIREBASE WARNING: "+q7(...n);Y0.warn(e)},Xv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},I2="[MIN_NAME]",pu="[MAX_NAME]",th=function(n,e){if(n===e)return 0;if(n===I2||e===pu)return-1;if(e===I2||n===pu)return 1;{const t=ey(n),r=ey(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},cF=function(n,e){return n===e?0:n<e?-1:1},K7=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,re.Pz)(e))},sE=function(n){if("object"!=typeof n||null===n)return(0,re.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,re.Pz)(e[r]),t+=":",t+=sE(n[e[r]]);return t+="}",t},lx=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)r.push(n.substring(s,s+e>t?t:s+e));return r};function xo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const ux=function(n){(0,re.hu)(!Xv(n),"Invalid JSON number");const r=1023;let s,c,u,h,m;0===n?(c=0,u=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),c=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(c=0,u=Math.round(n/Math.pow(2,-1074))));const w=[];for(m=52;m;m-=1)w.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)w.push(c%2?1:0),c=Math.floor(c/2);w.push(s?1:0),w.reverse();const O=w.join("");let $="";for(m=0;m<64;m+=8){let ee=parseInt(O.substr(m,8),2).toString(16);1===ee.length&&(ee="0"+ee),$+=ee}return $.toLowerCase()},hF=new RegExp("^-?(0*)\\d{1,10}$"),dx=-2147483648,oE=2147483647,ey=function(n){if(hF.test(n)){const e=Number(n);if(e>=dx&&e<=oE)return e}return null},Q0=function(n){try{n()}catch(e){setTimeout(()=>{throw ma("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Y7=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class pF{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ma(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class mF{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(To("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ma(e)}}let Q7=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const gx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_x="websocket",Cx="long_polling";class cE{constructor(e,t,r,s,c=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=c,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=X4.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&X4.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function bx(n,e,t){let r;if((0,re.hu)("string"==typeof e,"typeof type must == string"),(0,re.hu)("object"==typeof t,"typeof params must == object"),e===_x)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Cx)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function gF(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return xo(t,(c,u)=>{s.push(c+"="+u)}),r+s.join("&")}class vF{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,re.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,re.p$)(this.counters_)}}const lE={},uE={};function dE(n){const e=n.toString();return lE[e]||(lE[e]=new vF),lE[e]}class _F{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Q0(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ed{constructor(e,t,r,s,c,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Z7(e),this.stats_=dE(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),bx(t,Cx,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _F(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,re.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hE((...c)=>{const[u,h,m,w,O]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[u,h]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&gx.test(location.hostname)&&(r.r="f");const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ed.forceAllow_=!0}static forceDisallow(){ed.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!ed.forceAllow_&&(ed.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,re.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,re.h$)(t),s=lx(r,1840);for(let c=0;c<s.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,re.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hE{constructor(e,t,r,s){if(this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sx(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hE.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){To("frame writing exception"),h.stack&&To(h.stack),To(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||To("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+s+"="+u.seg+"&ts"+s+"="+u.ts+"&d"+s+"="+u.d,s++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),r()})}addTag(e,t){(0,re.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||"loaded"===s||"complete"===s)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{To("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let ny=null;typeof MozWebSocket<"u"?ny=MozWebSocket:typeof WebSocket<"u"&&(ny=WebSocket);let J0=(()=>{class n{constructor(t,r,s,c,u,h,m){this.connId=t,this.applicationId=s,this.appCheckToken=c,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Z7(this.connId),this.stats_=dE(r),this.connURL=n.connectionURL_(r,h,m,c,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,s,c,u){const h={v:"5"};return!(0,re.Yr)()&&typeof location<"u"&&location.hostname&&gx.test(location.hostname)&&(h.r="f"),r&&(h.s=r),s&&(h.ls=s),c&&(h.ac=c),u&&(h.p=u),bx(t,_x,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,X4.set("previous_websocket_failure",!0);try{let s;if((0,re.Yr)()){s={headers:{"User-Agent":`Firebase/5/${nE}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(s.proxy={origin:h})}this.mySock=new ny(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const c=s.message||s.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const c=s.message||s.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==ny&&!n.forceDisallow_}static previouslyFailed(){return X4.isInMemoryStorage||!0===X4.get("previous_websocket_failure")}markConnectionHealthy(){X4.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const s=(0,re.cI)(r);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const s=this.extractFrameCount_(r);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const r=(0,re.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=lx(r,16384);s.length>1&&this.sendString_(String(s.length));for(let c=0;c<s.length;c++)this.sendString_(s[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),xx=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ed,J0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=J0&&J0.isAvailable();let s=r&&!J0.previouslyFailed();if(t.webSocketOnly&&(r||ma("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[J0];else{const c=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&c.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Ox{constructor(e,t,r,s,c,u,h,m,w,O){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=c,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=w,this.lastSessionId=O,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Z7("c:"+this.id+":"),this.transportManager_=new xx(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Y7(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=K7("t",e),r=K7("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=K7("t",e),r=K7("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=K7("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?iE("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iE("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ma("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Y7(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y7(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(X4.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Lx{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Fx{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,re.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let c=0;c<s.length;c++)if(s[c].callback===t&&(!r||r===s[c].context))return void s.splice(c,1)}validateEventType_(e){(0,re.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ry extends Fx{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ry}getInitialEvent(e){return(0,re.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ii{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Kr(){return new ii("")}function Cr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function td(n){return n.pieces_.length-n.pieceNum_}function yi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ii(n.pieces_,e)}function pE(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function J7(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Hx(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ii(e,0)}function ts(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ii)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new ii(t,0)}function br(n){return n.pieceNum_>=n.pieces_.length}function ja(n,e){const t=Cr(n),r=Cr(e);if(null===t)return e;if(t===r)return ja(yi(n),yi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function UF(n,e){const t=J7(n,0),r=J7(e,0);for(let s=0;s<t.length&&s<r.length;s++){const c=th(t[s],r[s]);if(0!==c)return c}return t.length===r.length?0:t.length<r.length?-1:1}function mE(n,e){if(td(n)!==td(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function zc(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(td(n)>td(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class BF{constructor(e,t){this.errorPrefix_=t,this.parts_=J7(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,re.ug)(this.parts_[r]);Ux(this)}}function Ux(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nh(n))}function nh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class gE extends Fx{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gE}getInitialEvent(e){return(0,re.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const X7=1e3;let sy,rh=(()=>{class n extends Lx{constructor(t,r,s,c,u,h,m,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=c,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Z7("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=X7,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gE.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ry.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,s){const c=++this.requestNumber_,u={r:c,a:t,b:r};this.log_((0,re.Pz)(u)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[c]=s)}get(t){this.initConnection_();const r=new re.BH,s={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:s,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,s,c){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,re.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:c,hashFn:r,query:t,tag:s};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(t){const r=t.query,s=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+s+" for "+c);const u={p:s};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const w=m.d,O=m.s;n.warnOnListenWarnings_(w,r),(this.listens.get(s)&&this.listens.get(s).get(c))===t&&(this.log_("listen response",m),"ok"!==O&&this.removeListen_(s,c),t.onComplete&&t.onComplete(O,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,re.r3)(t,"w")){const s=(0,re.DV)(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const c='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();ma(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,re.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,re.w9)(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(r,s,c=>{const u=c.s,h=c.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,s=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(t,r){const s=t._path.toString(),c=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+c),(0,re.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,c)&&this.connected_&&this.sendUnlisten_(s,c,t._queryObject,r)}sendUnlisten_(t,r,s,c){this.log_("Unlisten on "+t+" for "+r);const u={p:t};c&&(u.q=s,u.t=c),this.sendRequest("n",u)}onDisconnectPut(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:s})}onDisconnectMerge(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:s})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,s,c){const u={p:r,d:s};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{c&&setTimeout(()=>{c(h.s,h.d)},Math.floor(0))})}put(t,r,s,c){this.putInternal("p",t,r,s,c)}merge(t,r,s,c){this.putInternal("m",t,r,s,c)}putInternal(t,r,s,c,u){this.initConnection_();const h={p:r,d:s};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,c=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,s,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,re.Pz)(t));const r=t.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):iE("Unrecognized action received from server: "+(0,re.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=X7,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=X7,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=X7),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,yt.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),c=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,w=null;const O=function(){w?w.close():(m=!0,c())};t.realtime_={close:O,sendRequest:function(de){(0,re.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(de)}};const ee=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[de,Te]=yield Promise.all([t.authTokenProvider_.getToken(ee),t.appCheckTokenProvider_.getToken(ee)]);m?To("getToken() completed but was canceled"):(To("getToken() completed. Creating connection."),t.authToken_=de&&de.accessToken,t.appCheckToken_=Te&&Te.token,w=new Ox(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,s,c,st=>{ma(st+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(de){t.log_("Failed to get token: "+de),m||(t.repoInfo_.nodeAdmin&&ma(de),O())}}})()}interrupt(t){To("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){To("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=X7,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let s;s=r?r.map(u=>sE(u)).join("$"):"default";const c=this.removeListen_(t,s);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(t,r){const s=new ii(t).toString();let c;if(this.listens.has(s)){const u=this.listens.get(s);c=u.get(r),u.delete(r),0===u.size&&this.listens.delete(s)}else c=void 0;return c}onAuthRevoked_(t,r){To("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){To("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,re.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+nE.replace(/\./g,"-")]=1,(0,re.uI)()?t["framework.cordova"]=1:(0,re.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ry.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Sr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Sr(e,t)}}class iy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Sr(I2,e),s=new Sr(I2,t);return 0!==this.compare(r,s)}minPost(){return Sr.MIN}}class $x extends iy{static get __EMPTY_NODE(){return sy}static set __EMPTY_NODE(e){sy=e}compare(e,t){return th(e.name,t.name)}isDefinedOn(e){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Sr.MIN}maxPost(){return new Sr(pu,sy)}makePost(e,t){return(0,re.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Sr(e,sy)}toString(){return".key"}}const mu=new $x;class oy{constructor(e,t,r,s,c=null){this.isReverse_=s,this.resultGenerator_=c,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,s&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yE,Ml=(()=>{class n{constructor(t,r,s,c,u){this.key=t,this.value=r,this.color=s??n.RED,this.left=c??_1.EMPTY_NODE,this.right=u??_1.EMPTY_NODE}copy(t,r,s,c,u){return new n(t??this.key,r??this.value,s??this.color,c??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let c=this;const u=s(t,c.key);return c=u<0?c.copy(null,null,null,c.left.insert(t,r,s),null):0===u?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(t,r,s)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return _1.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let s,c;if(s=this,r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===r(t,s.key)){if(s.right.isEmpty())return _1.EMPTY_NODE;c=s.right.min_(),s=s.copy(c.key,c.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class _1{constructor(e,t=_1.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new _1(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ml.BLACK,null,null))}remove(e){return new _1(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ml.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(s=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new oy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new oy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new oy(this.root_,null,this.comparator_,!0,e)}}function YF(n,e){return th(n.name,e.name)}function vE(n,e){return th(n,e)}_1.EMPTY_NODE=new class KF{copy(e,t,r,s,c){return this}insert(e,t,r){return new Ml(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Gx=function(n){return"number"==typeof n?"number:"+ux(n):"string:"+n},Wx=function(n){if(n.isLeafNode()){const e=n.val();(0,re.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,re.r3)(e,".sv"),"Priority must be a string or number.")}else(0,re.hu)(n===yE||n.isEmpty(),"priority of unexpected type.");(0,re.hu)(n===yE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qx,Zx,Kx,X0=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Wx(this.priorityNode_)}static set __childrenNodeConstructor(t){qx=t}static get __childrenNodeConstructor(){return qx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return br(t)?this:".priority"===Cr(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const s=Cr(t);return null===s?r:r.isEmpty()&&".priority"!==s?this:((0,re.hu)(".priority"!==s||1===td(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(yi(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Gx(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?ux(this.value_):this.value_,this.lazyHash_=ox(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,re.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,s=typeof this.value_,c=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(s);return(0,re.hu)(c>=0,"Unknown leaf type: "+r),(0,re.hu)(u>=0,"Unknown leaf type: "+s),c===u?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-c}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Mi=new class ez extends iy{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),c=r.compareTo(s);return 0===c?th(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Sr.MIN}maxPost(){return new Sr(pu,new X0("[PRIORITY-POST]",Kx))}makePost(e,t){const r=Zx(e);return new Sr(t,new X0("[PRIORITY-POST]",r))}toString(){return".priority"}},tz=Math.log(2);class nz{constructor(e){this.count=parseInt(Math.log(e+1)/tz,10),this.current_=this.count-1;const s=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ay=function(n,e,t,r){n.sort(e);const s=function(m,w){const O=w-m;let $,ee;if(0===O)return null;if(1===O)return $=n[m],ee=t?t($):$,new Ml(ee,$.node,Ml.BLACK,null,null);{const de=parseInt(O/2,10)+m,Te=s(m,de),st=s(de+1,w);return $=n[de],ee=t?t($):$,new Ml(ee,$.node,Ml.BLACK,Te,st)}},h=function(m){let w=null,O=null,$=n.length;const ee=function(Te,st){const It=$-Te,an=$;$-=Te;const un=s(It+1,an),qt=n[It],sn=t?t(qt):qt;de(new Ml(sn,qt.node,st,null,un))},de=function(Te){w?(w.left=Te,w=Te):(O=Te,w=Te)};for(let Te=0;Te<m.count;++Te){const st=m.nextBitIsOne(),It=Math.pow(2,m.count-(Te+1));st?ee(It,Ml.BLACK):(ee(It,Ml.BLACK),ee(It,Ml.RED))}return O}(new nz(n.length));return new _1(r||e,h)};let _E;const e5={};class D2{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,re.hu)(e5&&Mi,"ChildrenNode.ts has not been loaded"),_E=_E||new D2({".priority":e5},{".priority":Mi}),_E}get(e){const t=(0,re.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _1?t:null}hasIndex(e){return(0,re.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,re.hu)(e!==mu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const c=t.getIterator(Sr.Wrap);let h,u=c.getNext();for(;u;)s=s||e.isDefinedOn(u.node),r.push(u),u=c.getNext();h=s?ay(r,e.getCompare()):e5;const m=e.toString(),w=Object.assign({},this.indexSet_);w[m]=e;const O=Object.assign({},this.indexes_);return O[m]=h,new D2(O,w)}addToIndexes(e,t){const r=(0,re.UI)(this.indexes_,(s,c)=>{const u=(0,re.DV)(this.indexSet_,c);if((0,re.hu)(u,"Missing index implementation for "+c),s===e5){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(Sr.Wrap);let w=m.getNext();for(;w;)w.name!==e.name&&h.push(w),w=m.getNext();return h.push(e),ay(h,u.getCompare())}return e5}{const h=t.get(e.name);let m=s;return h&&(m=m.remove(new Sr(e.name,h))),m.insert(e,e.node)}});return new D2(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,re.UI)(this.indexes_,s=>{if(s===e5)return s;{const c=t.get(e.name);return c?s.remove(new Sr(e.name,c)):s}});return new D2(r,this.indexSet_)}}let ep,ur=(()=>{class n{constructor(t,r,s){this.children_=t,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Wx(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ep||(ep=new n(new _1(vE),null,D2.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ep}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?ep:r}}getChild(t){const r=Cr(t);return null===r?this:this.getImmediateChild(r).getChild(yi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,re.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const s=new Sr(t,r);let c,u;r.isEmpty()?(c=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(s,this.children_)):(c=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(s,this.children_));const h=c.isEmpty()?ep:this.priorityNode_;return new n(c,h,u)}}updateChild(t,r){const s=Cr(t);if(null===s)return r;{(0,re.hu)(".priority"!==Cr(t)||1===td(t),".priority must be the last token in a path");const c=this.getImmediateChild(s).updateChild(yi(t),r);return this.updateImmediateChild(s,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let s=0,c=0,u=!0;if(this.forEachChild(Mi,(h,m)=>{r[h]=m.val(t),s++,u&&n.INTEGER_REGEXP_.test(h)?c=Math.max(c,Number(h)):u=!1}),!t&&u&&c<2*s){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Gx(this.getPriority().val())+":"),this.forEachChild(Mi,(r,s)=>{const c=s.hash();""!==c&&(t+=":"+r+":"+c)}),this.lazyHash_=""===t?"":ox(t)}return this.lazyHash_}getPredecessorChildName(t,r,s){const c=this.resolveIndex_(s);if(c){const u=c.getPredecessorKey(new Sr(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Sr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Sr(r,this.children_.get(r)):null}forEachChild(t,r){const s=this.resolveIndex_(t);return s?s.inorderTraversal(c=>r(c.name,c.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(t,c=>c);{const c=this.children_.getIteratorFrom(t.name,Sr.Wrap);let u=c.peek();for(;null!=u&&r.compare(u,t)<0;)c.getNext(),u=c.peek();return c}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(t,c=>c);{const c=this.children_.getReverseIteratorFrom(t.name,Sr.Wrap);let u=c.peek();for(;null!=u&&r.compare(u,t)>0;)c.getNext(),u=c.peek();return c}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tp?-1:0}withIndex(t){if(t===mu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===mu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const s=this.getIterator(Mi),c=r.getIterator(Mi);let u=s.getNext(),h=c.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=s.getNext(),h=c.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===mu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tp=new class rz extends ur{constructor(){super(new _1(vE),ur.EMPTY_NODE,D2.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ur.EMPTY_NODE}isEmpty(){return!1}};function us(n,e=null){if(null===n)return ur.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,re.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new X0(n,us(e));if(n instanceof Array){let t=ur.EMPTY_NODE;return xo(n,(r,s)=>{if((0,re.r3)(n,r)&&"."!==r.substring(0,1)){const c=us(s);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(r,c))}}),t.updatePriority(us(e))}{const t=[];let r=!1;if(xo(n,(u,h)=>{if("."!==u.substring(0,1)){const m=us(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Sr(u,m)))}}),0===t.length)return ur.EMPTY_NODE;const c=ay(t,YF,u=>u.name,vE);if(r){const u=ay(t,Mi.getCompare());return new ur(c,us(e),new D2({".priority":u},{".priority":Mi}))}return new ur(c,us(e),D2.Default)}}Object.defineProperties(Sr,{MIN:{value:new Sr(I2,ur.EMPTY_NODE)},MAX:{value:new Sr(pu,tp)}}),$x.__EMPTY_NODE=ur.EMPTY_NODE,X0.__childrenNodeConstructor=ur,function QF(n){yE=n}(tp),function XF(n){Kx=n}(tp),function JF(n){Zx=n}(us);class CE extends iy{constructor(e){super(),this.indexPath_=e,(0,re.hu)(!br(e)&&".priority"!==Cr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),c=r.compareTo(s);return 0===c?th(e.name,t.name):c}makePost(e,t){const r=us(e),s=ur.EMPTY_NODE.updateChild(this.indexPath_,r);return new Sr(t,s)}maxPost(){const e=ur.EMPTY_NODE.updateChild(this.indexPath_,tp);return new Sr(pu,e)}toString(){return J7(this.indexPath_,0).join("/")}}const bE=new class sz extends iy{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?th(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Sr.MIN}maxPost(){return Sr.MAX}makePost(e,t){const r=us(e);return new Sr(t,r)}toString(){return".value"}},t5="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oz=function(){let n=0;const e=[];return function(t){const r=t===n;let s;n=t;const c=new Array(8);for(s=7;s>=0;s--)c[s]=t5.charAt(t%64),t=Math.floor(t/64);(0,re.hu)(0===t,"Cannot push at time == 0");let u=c.join("");if(r){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)u+=t5.charAt(e[s]);return(0,re.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Jx=function(n){if(n===""+oE)return"-";const e=ey(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return pu;const c=t5.charAt(t5.indexOf(t[r])+1);return t[r]=c,t.slice(0,r+1).join("")},Xx=function(n){if(n===""+dx)return I2;const e=ey(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+oE:(delete t[t.length-1],t.join("")):(t[t.length-1]=t5.charAt(t5.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function eA(n){return{type:"value",snapshotNode:n}}function n5(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function np(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function rp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class EE{constructor(e){this.index_=e}updateChild(e,t,r,s,c,u){(0,re.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(s).equals(r.getChild(s))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(np(t,h)):(0,re.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(n5(t,r)):u.trackChildChange(rp(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Mi,(s,c)=>{t.hasChild(s)||r.trackChildChange(np(s,c))}),t.isLeafNode()||t.forEachChild(Mi,(s,c)=>{if(e.hasChild(s)){const u=e.getImmediateChild(s);u.equals(c)||r.trackChildChange(rp(s,c,u))}else r.trackChildChange(n5(s,c))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ur.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ip{constructor(e){this.indexedFilter_=new EE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ip.getStartPost_(e),this.endPost_=ip.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,s,c,u){return this.matches(new Sr(t,r))||(r=ur.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,c,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ur.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(ur.EMPTY_NODE);const c=this;return t.forEachChild(Mi,(u,h)=>{c.matches(new Sr(u,h))||(s=s.updateImmediateChild(u,ur.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class cz{constructor(e){this.rangedFilter_=new ip(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,s,c,u){return this.rangedFilter_.matches(new Sr(t,r))||(r=ur.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,c,u):this.fullLimitUpdateChild_(e,t,r,c,u)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=ur.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let c;s=ur.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;c.hasNext()&&u<this.limit_;){const h=c.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;s=s.updateImmediateChild(h.name,h.node),u++}}else{let c,u,h,m;if(s=t.withIndex(this.index_),s=s.updatePriority(ur.EMPTY_NODE),this.reverse_){m=s.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const $=this.index_.getCompare();h=(ee,de)=>$(de,ee)}else m=s.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,O=!1;for(;m.hasNext();){const $=m.getNext();!O&&h(c,$)<=0&&(O=!0),O&&w<this.limit_&&h($,u)<=0?w++:s=s.updateImmediateChild($.name,ur.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,c){let u;if(this.reverse_){const $=this.index_.getCompare();u=(ee,de)=>$(de,ee)}else u=this.index_.getCompare();const h=e;(0,re.hu)(h.numChildren()===this.limit_,"");const m=new Sr(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),O=this.rangedFilter_.matches(m);if(h.hasChild(t)){const $=h.getImmediateChild(t);let ee=s.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=ee&&(ee.name===t||h.hasChild(ee.name));)ee=s.getChildAfterChild(this.index_,ee,this.reverse_);const de=null==ee?1:u(ee,m);if(O&&!r.isEmpty()&&de>=0)return c?.trackChildChange(rp(t,r,$)),h.updateImmediateChild(t,r);{c?.trackChildChange(np(t,$));const st=h.updateImmediateChild(t,ur.EMPTY_NODE);return null!=ee&&this.rangedFilter_.matches(ee)?(c?.trackChildChange(n5(ee.name,ee.node)),st.updateImmediateChild(ee.name,ee.node)):st}}return r.isEmpty()?e:O&&u(w,m)>=0?(null!=c&&(c.trackChildChange(np(w.name,w.node)),c.trackChildChange(n5(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,ur.EMPTY_NODE)):e}}class cy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I2}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mi}copy(){const e=new cy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IE(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function DE(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ly(n,e){const t=n.copy();return t.index_=e,t}function tA(n){const e={};if(n.isDefault())return e;let t;return n.index_===Mi?t="$priority":n.index_===bE?t="$value":n.index_===mu?t="$key":((0,re.hu)(n.index_ instanceof CE,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,re.Pz)(t),n.startSet_&&(e.startAt=(0,re.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,re.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,re.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,re.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function nA(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Mi&&(e.i=n.index_.toString()),e}class uy extends Lx{constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Z7("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,re.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,s){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const u=uy.getListenId_(e,r),h={};this.listens_[u]=h;const m=tA(e._queryParams);this.restRequest_(c+".json",m,(w,O)=>{let $=O;if(404===w&&($=null,w=null),null===w&&this.onDataUpdate_(c,$,!1,r),(0,re.DV)(this.listens_,u)===h){let ee;ee=w?401===w?"permission_denied":"rest_error:"+w:"ok",s(ee,null)}})}unlisten(e,t){const r=uy.getListenId_(e,t);delete this.listens_[r]}get(e){const t=tA(e._queryParams),r=e._path.toString(),s=new re.BH;return this.restRequest_(r+".json",t,(c,u)=>{let h=u;404===c&&(h=null,c=null),null===c?(this.onDataUpdate_(r,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,c])=>{s&&s.accessToken&&(t.auth=s.accessToken),c&&c.token&&(t.ac=c.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,re.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,re.cI)(h.responseText)}catch{ma("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&ma("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class pz{constructor(){this.rootNode_=ur.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function dy(){return{value:null,children:new Map}}function r5(n,e,t){if(br(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Cr(e);n.children.has(r)||n.children.set(r,dy()),r5(n.children.get(r),e=yi(e),t)}}function SE(n,e){if(br(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Mi,(r,s)=>{r5(n,new ii(r),s)}),SE(n,e)}}if(n.children.size>0){const t=Cr(e);return e=yi(e),n.children.has(t)&&SE(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function TE(n,e,t){null!==n.value?t(e,n.value):function mz(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,s)=>{TE(s,new ii(e.toString()+"/"+r),t)})}class gz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xo(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}class _z{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new gz(e);const r=1e4+2e4*Math.random();Y7(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xo(e,(s,c)=>{c>0&&(0,re.r3)(this.statsToReport_,s)&&(t[s]=c,r=!0)}),r&&this.server_.reportStats(t),Y7(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Vc=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Vc||(Vc={})),Vc))();function ME(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class hy{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Vc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(br(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ii(e));return new hy(Kr(),t,this.revert)}}return(0,re.hu)(Cr(this.path)===e,"operationForChild called for unrelated child."),new hy(yi(this.path),this.affectedTree,this.revert)}}class sp{constructor(e,t){this.source=e,this.path=t,this.type=Vc.LISTEN_COMPLETE}operationForChild(e){return br(this.path)?new sp(this.source,Kr()):new sp(this.source,yi(this.path))}}class ih{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Vc.OVERWRITE}operationForChild(e){return br(this.path)?new ih(this.source,Kr(),this.snap.getImmediateChild(e)):new ih(this.source,yi(this.path),this.snap)}}class i5{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Vc.MERGE}operationForChild(e){if(br(this.path)){const t=this.children.subtree(new ii(e));return t.isEmpty()?null:t.value?new ih(this.source,Kr(),t.value):new i5(this.source,Kr(),t)}return(0,re.hu)(Cr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new i5(this.source,yi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class nd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(br(e))return this.isFullyInitialized()&&!this.filtered_;const t=Cr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Cz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function op(n,e,t,r,s,c){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function Ez(n,e,t){if(null==e.childName||null==t.childName)throw(0,re.g5)("Should only compare child_ events.");const r=new Sr(e.childName,e.snapshotNode),s=new Sr(t.childName,t.snapshotNode);return n.index_.compare(r,s)}(n,h,m)),u.forEach(h=>{const m=function wz(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,c);s.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(m,n.query_))})})}function fy(n,e){return{eventCache:n,serverCache:e}}function ap(n,e,t,r){return fy(new nd(e,t,r),n.serverCache)}function iA(n,e,t,r){return fy(n.eventCache,new nd(e,t,r))}function py(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sh(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let NE;class Ni{constructor(e,t=(()=>(NE||(NE=new _1(cF)),NE))()){this.value=e,this.children=t}static fromObject(e){let t=new Ni(null);return xo(e,(r,s)=>{t=t.set(new ii(r),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Kr(),value:this.value};if(br(e))return null;{const r=Cr(e),s=this.children.get(r);if(null!==s){const c=s.findRootMostMatchingPathAndValue(yi(e),t);return null!=c?{path:ts(new ii(r),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(br(e))return this;{const t=Cr(e),r=this.children.get(t);return null!==r?r.subtree(yi(e)):new Ni(null)}}set(e,t){if(br(e))return new Ni(t,this.children);{const r=Cr(e),c=(this.children.get(r)||new Ni(null)).set(yi(e),t),u=this.children.insert(r,c);return new Ni(this.value,u)}}remove(e){if(br(e))return this.children.isEmpty()?new Ni(null):new Ni(null,this.children);{const t=Cr(e),r=this.children.get(t);if(r){const s=r.remove(yi(e));let c;return c=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&c.isEmpty()?new Ni(null):new Ni(this.value,c)}return this}}get(e){if(br(e))return this.value;{const t=Cr(e),r=this.children.get(t);return r?r.get(yi(e)):null}}setTree(e,t){if(br(e))return t;{const r=Cr(e),c=(this.children.get(r)||new Ni(null)).setTree(yi(e),t);let u;return u=c.isEmpty()?this.children.remove(r):this.children.insert(r,c),new Ni(this.value,u)}}fold(e){return this.fold_(Kr(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,c)=>{r[s]=c.fold_(ts(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Kr(),t)}findOnPath_(e,t,r){const s=!!this.value&&r(t,this.value);if(s)return s;if(br(e))return null;{const c=Cr(e),u=this.children.get(c);return u?u.findOnPath_(yi(e),ts(t,c),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Kr(),t)}foreachOnPath_(e,t,r){if(br(e))return this;{this.value&&r(t,this.value);const s=Cr(e),c=this.children.get(s);return c?c.foreachOnPath_(yi(e),ts(t,s),r):new Ni(null)}}foreach(e){this.foreach_(Kr(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(ts(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Nl{constructor(e){this.writeTree_=e}static empty(){return new Nl(new Ni(null))}}function cp(n,e,t){if(br(e))return new Nl(new Ni(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const s=r.path;let c=r.value;const u=ja(s,e);return c=c.updateChild(u,t),new Nl(n.writeTree_.set(s,c))}{const s=new Ni(t),c=n.writeTree_.setTree(e,s);return new Nl(c)}}}function kE(n,e,t){let r=n;return xo(t,(s,c)=>{r=cp(r,ts(e,s),c)}),r}function sA(n,e){if(br(e))return Nl.empty();{const t=n.writeTree_.setTree(e,new Ni(null));return new Nl(t)}}function RE(n,e){return null!=oh(n,e)}function oh(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ja(t.path,e)):null}function oA(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Mi,(r,s)=>{e.push(new Sr(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{null!=s.value&&e.push(new Sr(r,s.value))}),e}function rd(n,e){if(br(e))return n;{const t=oh(n,e);return new Nl(null!=t?new Ni(t):n.writeTree_.subtree(e))}}function PE(n){return n.writeTree_.isEmpty()}function s5(n,e){return aA(Kr(),n.writeTree_,e)}function aA(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,c)=>{".priority"===s?((0,re.hu)(null!==c.value,"Priority writes must always be leaf nodes"),r=c.value):t=aA(ts(n,s),c,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ts(n,".priority"),r)),t}}function my(n,e){return hA(e,n)}function Az(n,e){if(n.snap)return zc(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&zc(ts(n.path,t),e))return!0;return!1}function Nz(n){return n.visible}function cA(n,e,t){let r=Nl.empty();for(let s=0;s<n.length;++s){const c=n[s];if(e(c)){const u=c.path;let h;if(c.snap)zc(t,u)?(h=ja(t,u),r=cp(r,h,c.snap)):zc(u,t)&&(h=ja(u,t),r=cp(r,Kr(),c.snap.getChild(h)));else{if(!c.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(zc(t,u))h=ja(t,u),r=kE(r,h,c.children);else if(zc(u,t))if(h=ja(u,t),br(h))r=kE(r,Kr(),c.children);else{const m=(0,re.DV)(c.children,Cr(h));if(m){const w=m.getChild(yi(h));r=cp(r,Kr(),w)}}}}}return r}function lA(n,e,t,r,s){if(r||s){const c=rd(n.visibleWrites,e);return!s&&PE(c)?t:s||null!=t||RE(c,Kr())?s5(cA(n.allWrites,function(w){return(w.visible||s)&&(!r||!~r.indexOf(w.writeId))&&(zc(w.path,e)||zc(e,w.path))},e),t||ur.EMPTY_NODE):null}{const c=oh(n.visibleWrites,e);if(null!=c)return c;{const u=rd(n.visibleWrites,e);return PE(u)?t:null!=t||RE(u,Kr())?s5(u,t||ur.EMPTY_NODE):null}}}function gy(n,e,t,r){return lA(n.writeTree,n.treePath,e,t,r)}function OE(n,e){return function kz(n,e,t){let r=ur.EMPTY_NODE;const s=oh(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Mi,(c,u)=>{r=r.updateImmediateChild(c,u)}),r;if(t){const c=rd(n.visibleWrites,e);return t.forEachChild(Mi,(u,h)=>{const m=s5(rd(c,new ii(u)),h);r=r.updateImmediateChild(u,m)}),oA(c).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return oA(rd(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function uA(n,e,t,r){return function Rz(n,e,t,r,s){(0,re.hu)(r||s,"Either existingEventSnap or existingServerSnap must exist");const c=ts(e,t);if(RE(n.visibleWrites,c))return null;{const u=rd(n.visibleWrites,c);return PE(u)?s.getChild(t):s5(u,s.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function vy(n,e){return function Oz(n,e){return oh(n.visibleWrites,e)}(n.writeTree,ts(n.treePath,e))}function LE(n,e,t){return function Pz(n,e,t,r){const s=ts(e,t),c=oh(n.visibleWrites,s);return null!=c?c:r.isCompleteForChild(t)?s5(rd(n.visibleWrites,s),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function dA(n,e){return hA(ts(n.treePath,e),n.writeTree)}function hA(n,e){return{treePath:n,writeTree:e}}class Vz{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,re.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const c=s.type;if("child_added"===t&&"child_removed"===c)this.changeMap.set(r,rp(r,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===c)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===c)this.changeMap.set(r,np(r,s.oldSnap));else if("child_changed"===t&&"child_added"===c)this.changeMap.set(r,n5(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==c)throw(0,re.g5)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(r,rp(r,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const fA=new class Hz{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class FE{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new nd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return LE(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sh(this.viewCache_),c=function zz(n,e,t,r,s,c){return function Lz(n,e,t,r,s,c,u){let h;const m=rd(n.visibleWrites,e),w=oh(m,Kr());if(null!=w)h=w;else{if(null==t)return[];h=s5(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const O=[],$=u.getCompare(),ee=c?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let de=ee.getNext();for(;de&&O.length<s;)0!==$(de,r)&&O.push(de),de=ee.getNext();return O}}(n.writeTree,n.treePath,e,t,r,s,c)}(this.writes_,s,t,1,r,e);return 0===c.length?null:c[0]}}function pA(n,e,t,r,s,c){const u=e.eventCache;if(null!=vy(r,t))return e;{let h,m;if(br(t))if((0,re.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=sh(e),$=OE(r,w instanceof ur?w:ur.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),$,c)}else{const w=gy(r,sh(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,c)}else{const w=Cr(t);if(".priority"===w){(0,re.hu)(1===td(t),"Can't have a priority with additional path components");const O=u.getNode();m=e.serverCache.getNode();const $=uA(r,t,O,m);h=null!=$?n.filter.updatePriority(O,$):u.getNode()}else{const O=yi(t);let $;if(u.isCompleteForChild(w)){m=e.serverCache.getNode();const ee=uA(r,t,u.getNode(),m);$=null!=ee?u.getNode().getImmediateChild(w).updateChild(O,ee):u.getNode().getImmediateChild(w)}else $=LE(r,w,e.serverCache);h=null!=$?n.filter.updateChild(u.getNode(),w,$,O,s,c):u.getNode()}}return ap(e,h,u.isFullyInitialized()||br(t),n.filter.filtersNodes())}}function yy(n,e,t,r,s,c,u,h){const m=e.serverCache;let w;const O=u?n.filter:n.filter.getIndexedFilter();if(br(t))w=O.updateFullNode(m.getNode(),r,null);else if(O.filtersNodes()&&!m.isFiltered()){const de=m.getNode().updateChild(t,r);w=O.updateFullNode(m.getNode(),de,null)}else{const de=Cr(t);if(!m.isCompleteForPath(t)&&td(t)>1)return e;const Te=yi(t),It=m.getNode().getImmediateChild(de).updateChild(Te,r);w=".priority"===de?O.updatePriority(m.getNode(),It):O.updateChild(m.getNode(),de,It,Te,fA,null)}const $=iA(e,w,m.isFullyInitialized()||br(t),O.filtersNodes());return pA(n,$,t,s,new FE(s,$,c),h)}function zE(n,e,t,r,s,c,u){const h=e.eventCache;let m,w;const O=new FE(s,e,c);if(br(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=ap(e,w,!0,n.filter.filtersNodes());else{const $=Cr(t);if(".priority"===$)w=n.filter.updatePriority(e.eventCache.getNode(),r),m=ap(e,w,h.isFullyInitialized(),h.isFiltered());else{const ee=yi(t),de=h.getNode().getImmediateChild($);let Te;if(br(ee))Te=r;else{const st=O.getCompleteChild($);Te=null!=st?".priority"===pE(ee)&&st.getChild(Hx(ee)).isEmpty()?st:st.updateChild(ee,r):ur.EMPTY_NODE}m=de.equals(Te)?e:ap(e,n.filter.updateChild(h.getNode(),$,Te,ee,O,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function mA(n,e){return n.eventCache.isCompleteForChild(e)}function gA(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function VE(n,e,t,r,s,c,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,m=e;w=br(t)?r:new Ni(null).setTree(t,r);const O=e.serverCache.getNode();return w.children.inorderTraversal(($,ee)=>{if(O.hasChild($)){const Te=gA(0,e.serverCache.getNode().getImmediateChild($),ee);m=yy(n,m,new ii($),Te,s,c,u,h)}}),w.children.inorderTraversal(($,ee)=>{const de=!e.serverCache.isCompleteForChild($)&&null===ee.value;if(!O.hasChild($)&&!de){const st=gA(0,e.serverCache.getNode().getImmediateChild($),ee);m=yy(n,m,new ii($),st,s,c,u,h)}}),m}class Kz{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new EE(r.getIndex()),c=function lz(n){return n.loadsAllData()?new EE(n.getIndex()):n.hasLimit()?new cz(n):new ip(n)}(r);this.processor_=function Uz(n){return{filter:n}}(c);const u=t.serverCache,h=t.eventCache,m=s.updateFullNode(ur.EMPTY_NODE,u.getNode(),null),w=c.updateFullNode(ur.EMPTY_NODE,h.getNode(),null),O=new nd(m,u.isFullyInitialized(),s.filtersNodes()),$=new nd(w,h.isFullyInitialized(),c.filtersNodes());this.viewCache_=fy($,O),this.eventGenerator_=new Cz(this.query_)}get query(){return this.query_}}function Jz(n,e){const t=sh(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!br(e)&&!t.getImmediateChild(Cr(e)).isEmpty())?t.getChild(e):null}function vA(n){return 0===n.eventRegistrations_.length}function yA(n,e,t){const r=[];if(t){(0,re.hu)(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(c=>{const u=c.createCancelEvent(t,s);u&&r.push(u)})}if(e){let s=[];for(let c=0;c<n.eventRegistrations_.length;++c){const u=n.eventRegistrations_[c];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(c+1));break}}else s.push(u)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function _A(n,e,t,r){e.type===Vc.MERGE&&null!==e.source.queryId&&((0,re.hu)(sh(n.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(py(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,c=function jz(n,e,t,r,s){const c=new Vz;let u,h;if(t.type===Vc.OVERWRITE){const w=t;w.source.fromUser?u=zE(n,e,w.path,w.snap,r,s,c):((0,re.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!br(w.path),u=yy(n,e,w.path,w.snap,r,s,h,c))}else if(t.type===Vc.MERGE){const w=t;w.source.fromUser?u=function Gz(n,e,t,r,s,c,u){let h=e;return r.foreach((m,w)=>{const O=ts(t,m);mA(e,Cr(O))&&(h=zE(n,h,O,w,s,c,u))}),r.foreach((m,w)=>{const O=ts(t,m);mA(e,Cr(O))||(h=zE(n,h,O,w,s,c,u))}),h}(n,e,w.path,w.children,r,s,c):((0,re.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),u=VE(n,e,w.path,w.children,r,s,h,c))}else if(t.type===Vc.ACK_USER_WRITE){const w=t;u=w.revert?function Zz(n,e,t,r,s,c){let u;if(null!=vy(r,t))return e;{const h=new FE(r,e,s),m=e.eventCache.getNode();let w;if(br(t)||".priority"===Cr(t)){let O;if(e.serverCache.isFullyInitialized())O=gy(r,sh(e));else{const $=e.serverCache.getNode();(0,re.hu)($ instanceof ur,"serverChildren would be complete if leaf node"),O=OE(r,$)}w=n.filter.updateFullNode(m,O,c)}else{const O=Cr(t);let $=LE(r,O,e.serverCache);null==$&&e.serverCache.isCompleteForChild(O)&&($=m.getImmediateChild(O)),w=null!=$?n.filter.updateChild(m,O,$,yi(t),h,c):e.eventCache.getNode().hasChild(O)?n.filter.updateChild(m,O,ur.EMPTY_NODE,yi(t),h,c):m,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=gy(r,sh(e)),u.isLeafNode()&&(w=n.filter.updateFullNode(w,u,c)))}return u=e.serverCache.isFullyInitialized()||null!=vy(r,Kr()),ap(e,w,u,n.filter.filtersNodes())}}(n,e,w.path,r,s,c):function Wz(n,e,t,r,s,c,u){if(null!=vy(s,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(br(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return yy(n,e,t,m.getNode().getChild(t),s,c,h,u);if(br(t)){let w=new Ni(null);return m.getNode().forEachChild(mu,(O,$)=>{w=w.set(new ii(O),$)}),VE(n,e,t,w,s,c,h,u)}return e}{let w=new Ni(null);return r.foreach((O,$)=>{const ee=ts(t,O);m.isCompleteForPath(ee)&&(w=w.set(O,m.getNode().getChild(ee)))}),VE(n,e,t,w,s,c,h,u)}}(n,e,w.path,w.affectedTree,r,s,c)}else{if(t.type!==Vc.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+t.type);u=function qz(n,e,t,r,s){const c=e.serverCache;return pA(n,iA(e,c.getNode(),c.isFullyInitialized()||br(t),c.isFiltered()),t,r,fA,s)}(n,e,t.path,r,c)}const m=c.getChanges();return function $z(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=py(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&t.push(eA(py(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,s,e,t,r);return function Bz(n,e){(0,re.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,c.viewCache),(0,re.hu)(c.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,CA(n,c.changes,c.viewCache.eventCache.getNode(),null)}function CA(n,e,t,r){return function bz(n,e,t,r){const s=[],c=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&c.push(function az(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),op(n,s,"child_removed",e,r,t),op(n,s,"child_added",e,r,t),op(n,s,"child_moved",c,r,t),op(n,s,"child_changed",e,r,t),op(n,s,"value",e,r,t),s}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let _y,by;class bA{constructor(){this.views=new Map}}function HE(n,e,t,r){const s=e.source.queryId;if(null!==s){const c=n.views.get(s);return(0,re.hu)(null!=c,"SyncTree gave us an op for an invalid query."),_A(c,e,t,r)}{let c=[];for(const u of n.views.values())c=c.concat(_A(u,e,t,r));return c}}function wA(n,e,t,r,s){const u=n.views.get(e._queryIdentifier);if(!u){let h=gy(t,s?r:null),m=!1;h?m=!0:r instanceof ur?(h=OE(t,r),m=!1):(h=ur.EMPTY_NODE,m=!1);const w=fy(new nd(h,m,!1),new nd(r,s,!1));return new Kz(e,w)}return u}function EA(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function id(n,e){let t=null;for(const r of n.views.values())t=t||Jz(r,e);return t}function IA(n,e){return e._queryParams.loadsAllData()?Cy(n):n.views.get(e._queryIdentifier)}function DA(n,e){return null!=IA(n,e)}function sd(n){return null!=Cy(n)}function Cy(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let cV=1;class SA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ni(null),this.pendingWriteTree_=function Fz(){return{visibleWrites:Nl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function UE(n,e,t,r,s){return function Dz(n,e,t,r,s){(0,re.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=cp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,s),s?o5(n,new ih({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function od(n,e,t=!1){const r=function Tz(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function xz(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,re.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,c=!1,u=n.allWrites.length-1;for(;s&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&Az(h,r.path)?s=!1:zc(r.path,h.path)&&(c=!0)),u--}return!!s&&(c?(function Mz(n){n.visibleWrites=cA(n.allWrites,Nz,Kr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=sA(n.visibleWrites,r.path):xo(r.children,m=>{n.visibleWrites=sA(n.visibleWrites,ts(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let c=new Ni(null);return null!=r.snap?c=c.set(Kr(),!0):xo(r.children,u=>{c=c.set(new ii(u),!0)}),o5(n,new hy(r.path,c,t))}return[]}function lp(n,e,t){return o5(n,new ih({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function wy(n,e,t,r,s=!1){const c=e._path,u=n.syncPointTree_.get(c);let h=[];if(u&&("default"===e._queryIdentifier||DA(u,e))){const m=function sV(n,e,t,r){const s=e._queryIdentifier,c=[];let u=[];const h=sd(n);if("default"===s)for(const[m,w]of n.views.entries())u=u.concat(yA(w,t,r)),vA(w)&&(n.views.delete(m),w.query._queryParams.loadsAllData()||c.push(w.query));else{const m=n.views.get(s);m&&(u=u.concat(yA(m,t,r)),vA(m)&&(n.views.delete(s),m.query._queryParams.loadsAllData()||c.push(m.query)))}return h&&!sd(n)&&c.push(new(function nV(){return(0,re.hu)(_y,"Reference.ts has not been loaded"),_y}())(e._repo,e._path)),{removed:c,events:u}}(u,e,t,r);(function rV(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(c));const w=m.removed;if(h=m.events,!s){const O=-1!==w.findIndex(ee=>ee._queryParams.loadsAllData()),$=n.syncPointTree_.findOnPath(c,(ee,de)=>sd(de));if(O&&!$){const ee=n.syncPointTree_.subtree(c);if(!ee.isEmpty()){const de=function mV(n){return n.fold((e,t,r)=>{if(t&&sd(t))return[Cy(t)];{let s=[];return t&&(s=EA(t)),xo(r,(c,u)=>{s=s.concat(u)}),s}})}(ee);for(let Te=0;Te<de.length;++Te){const st=de[Te],It=st.query,an=MA(n,st);n.listenProvider_.startListening(dp(It),up(n,It),an.hashFn,an.onComplete)}}}!$&&w.length>0&&!r&&(O?n.listenProvider_.stopListening(dp(e),null):w.forEach(ee=>{const de=n.queryToTagMap.get(Iy(ee));n.listenProvider_.stopListening(dp(ee),de)}))}!function gV(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=Iy(r),c=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(c)}}}(n,w)}return h}function TA(n,e,t,r){const s=jE(n,r);if(null!=s){const c=$E(s),u=c.path,h=c.queryId,m=ja(u,e);return GE(n,u,new ih(ME(h),m,t))}return[]}function BE(n,e,t,r=!1){const s=e._path;let c=null,u=!1;n.syncPointTree_.foreachOnPath(s,(ee,de)=>{const Te=ja(ee,s);c=c||id(de,Te),u=u||sd(de)});let m,h=n.syncPointTree_.get(s);h?(u=u||sd(h),c=c||id(h,Kr())):(h=new bA,n.syncPointTree_=n.syncPointTree_.set(s,h)),null!=c?m=!0:(m=!1,c=ur.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((de,Te)=>{const st=id(Te,Kr());st&&(c=c.updateImmediateChild(de,st))}));const w=DA(h,e);if(!w&&!e._queryParams.loadsAllData()){const ee=Iy(e);(0,re.hu)(!n.queryToTagMap.has(ee),"View does not exist, but we have a tag");const de=function vV(){return cV++}();n.queryToTagMap.set(ee,de),n.tagToQueryMap.set(de,ee)}let $=function iV(n,e,t,r,s,c){const u=wA(n,e,r,s,c);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function Xz(n,e){n.eventRegistrations_.push(e)}(u,t),function eV(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Mi,(c,u)=>{r.push(n5(c,u))}),t.isFullyInitialized()&&r.push(eA(t.getNode())),CA(n,r,t.getNode(),e)}(u,t)}(h,e,t,my(n.pendingWriteTree_,s),c,m);if(!w&&!u&&!r){const ee=IA(h,e);$=$.concat(function yV(n,e,t){const r=e._path,s=up(n,e),c=MA(n,t),u=n.listenProvider_.startListening(dp(e),s,c.hashFn,c.onComplete),h=n.syncPointTree_.subtree(r);if(s)(0,re.hu)(!sd(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((w,O,$)=>{if(!br(w)&&O&&sd(O))return[Cy(O).query];{let ee=[];return O&&(ee=ee.concat(EA(O).map(de=>de.query))),xo($,(de,Te)=>{ee=ee.concat(Te)}),ee}});for(let w=0;w<m.length;++w){const O=m[w];n.listenProvider_.stopListening(dp(O),up(n,O))}}return u}(n,e,ee))}return $}function Ey(n,e,t){const s=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(u,h)=>{const w=id(h,ja(u,e));if(w)return w});return lA(s,e,c,t,!0)}function o5(n,e){return xA(e,n.syncPointTree_,null,my(n.pendingWriteTree_,Kr()))}function xA(n,e,t,r){if(br(n.path))return AA(n,e,t,r);{const s=e.get(Kr());null==t&&null!=s&&(t=id(s,Kr()));let c=[];const u=Cr(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const w=t?t.getImmediateChild(u):null,O=dA(r,u);c=c.concat(xA(h,m,w,O))}return s&&(c=c.concat(HE(s,n,r,t))),c}}function AA(n,e,t,r){const s=e.get(Kr());null==t&&null!=s&&(t=id(s,Kr()));let c=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,w=dA(r,u),O=n.operationForChild(u);O&&(c=c.concat(AA(O,h,m,w)))}),s&&(c=c.concat(HE(s,n,r,t))),c}function MA(n,e){const t=e.query,r=up(n,t);return{hashFn:()=>(function Yz(n){return n.viewCache_.serverCache.getNode()}(e)||ur.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return r?function hV(n,e,t){const r=jE(n,t);if(r){const s=$E(r),c=s.path,u=s.queryId,h=ja(c,e);return GE(n,c,new sp(ME(u),h))}return[]}(n,t._path,r):function dV(n,e){return o5(n,new sp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const c=function dF(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(s,t);return wy(n,t,null,c)}}}}function up(n,e){const t=Iy(e);return n.queryToTagMap.get(t)}function Iy(n){return n._path.toString()+"$"+n._queryIdentifier}function jE(n,e){return n.tagToQueryMap.get(e)}function $E(n){const e=n.indexOf("$");return(0,re.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ii(n.substr(0,e))}}function GE(n,e,t){const r=n.syncPointTree_.get(e);return(0,re.hu)(r,"Missing sync point for query tag that we're tracking"),HE(r,t,my(n.pendingWriteTree_,e),null)}function dp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function aV(){return(0,re.hu)(by,"Reference.ts has not been loaded"),by}())(n._repo,n._path):n}class WE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new WE(t)}node(){return this.node_}}class qE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ts(this.path_,e);return new qE(this.syncTree_,t)}node(){return Ey(this.syncTree_,this.path_)}}const NA=function(n,e,t){return n&&"object"==typeof n?((0,re.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?CV(n[".sv"],e,t):"object"==typeof n[".sv"]?bV(n[".sv"],e):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},CV=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,re.hu)(!1,"Unexpected server value: "+n)},bV=function(n,e,t){n.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,re.hu)(!1,"Unexpected increment value: "+r);const s=e.node();if((0,re.hu)(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const u=s.getValue();return"number"!=typeof u?r:u+r},kA=function(n,e,t,r){return KE(e,new qE(t,n),r)},ZE=function(n,e,t){return KE(n,new WE(e),t)};function KE(n,e,t){const r=n.getPriority().val(),s=NA(r,e.getImmediateChild(".priority"),t);let c;if(n.isLeafNode()){const u=n,h=NA(u.getValue(),e,t);return h!==u.getValue()||s!==u.getPriority().val()?new X0(h,us(s)):n}{const u=n;return c=u,s!==u.getPriority().val()&&(c=c.updatePriority(new X0(s))),u.forEachChild(Mi,(h,m)=>{const w=KE(m,e.getImmediateChild(h),t);w!==m&&(c=c.updateImmediateChild(h,w))}),c}}class YE{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Dy(n,e){let t=e instanceof ii?e:new ii(e),r=n,s=Cr(t);for(;null!==s;){const c=(0,re.DV)(r.node.children,s)||{children:{},childCount:0};r=new YE(s,r,c),t=yi(t),s=Cr(t)}return r}function ah(n){return n.node.value}function QE(n,e){n.node.value=e,JE(n)}function RA(n){return n.node.childCount>0}function Sy(n,e){xo(n.node.children,(t,r)=>{e(new YE(t,n,r))})}function PA(n,e,t,r){t&&!r&&e(n),Sy(n,s=>{PA(s,e,!0,r)}),t&&r&&e(n)}function hp(n){return new ii(null===n.parent?n.name:hp(n.parent)+"/"+n.name)}function JE(n){null!==n.parent&&function IV(n,e,t){const r=function wV(n){return void 0===ah(n)&&!RA(n)}(t),s=(0,re.r3)(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,JE(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,JE(n))}(n.parent,n.name,n)}const DV=/[\[\].#$\/\u0000-\u001F\u007F]/,SV=/[\[\].#$\u0000-\u001F\u007F]/,XE=10485760,Ty=function(n){return"string"==typeof n&&0!==n.length&&!DV.test(n)},OA=function(n){return"string"==typeof n&&0!==n.length&&!SV.test(n)},fp=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Xv(n)||n&&"object"==typeof n&&(0,re.r3)(n,".sv")},gu=function(n,e,t,r){r&&void 0===e||pp((0,re.gK)(n,"value"),e,t)},pp=function(n,e,t){const r=t instanceof ii?new BF(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+nh(r));if("function"==typeof e)throw new Error(n+"contains a function "+nh(r)+" with contents = "+e.toString());if(Xv(e))throw new Error(n+"contains "+e.toString()+" "+nh(r));if("string"==typeof e&&e.length>XE/3&&(0,re.ug)(e)>XE)throw new Error(n+"contains a string greater than "+XE+" utf8 bytes "+nh(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,c=!1;if(xo(e,(u,h)=>{if(".value"===u)s=!0;else if(".priority"!==u&&".sv"!==u&&(c=!0,!Ty(u)))throw new Error(n+" contains an invalid key ("+u+") "+nh(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function jF(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,re.ug)(e),Ux(n)})(r,u),pp(n,h,r),function $F(n){const e=n.parts_.pop();n.byteLength_-=(0,re.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),s&&c)throw new Error(n+' contains ".value" child '+nh(r)+" in addition to actual children.")}},LA=function(n,e,t,r){if(r&&void 0===e)return;const s=(0,re.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const c=[];xo(e,(u,h)=>{const m=new ii(u);if(pp(s,h,ts(t,m)),".priority"===pE(m)&&!fp(h))throw new Error(s+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const c=J7(r);for(let u=0;u<c.length;u++)if((".priority"!==c[u]||u!==c.length-1)&&!Ty(c[u]))throw new Error(n+"contains an invalid key ("+c[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(UF);let s=null;for(t=0;t<e.length;t++){if(r=e[t],null!==s&&zc(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,c)},eI=function(n,e,t){if(!t||void 0!==e){if(Xv(e))throw new Error((0,re.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fp(e))throw new Error((0,re.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mp=function(n,e,t,r){if(!(r&&void 0===t||Ty(t)))throw new Error((0,re.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gp=function(n,e,t,r){if(!(r&&void 0===t||OA(t)))throw new Error((0,re.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Hc=function(n,e){if(".info"===Cr(e))throw new Error(n+" failed = Can't modify data under /.info/")},FA=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ty(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),OA(n)}(t))throw new Error((0,re.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class MV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xy(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],c=s.getPath();null!==t&&!mE(c,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:c}),t.events.push(s)}t&&n.eventLists_.push(t)}function zA(n,e,t){xy(n,t),VA(n,r=>mE(r,e))}function rc(n,e,t){xy(n,t),VA(n,r=>zc(r,e)||zc(e,r))}function VA(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];s&&(e(s.path)?(NV(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function NV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();eh&&To("event: "+t.toString()),Q0(r)}}}const HA="repo_interrupt";class RV{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dy(),this.transactionQueueTree_=new YE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function UA(n){const t=n.infoData_.getNode(new ii(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vp(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:UA(n)})}function BA(n,e,t,r,s){n.dataUpdateCount++;const c=new ii(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(s)if(r){const m=(0,re.UI)(t,w=>us(w));u=function fV(n,e,t,r){const s=jE(n,r);if(s){const c=$E(s),u=c.path,h=c.queryId,m=ja(u,e),w=Ni.fromObject(t);return GE(n,u,new i5(ME(h),m,w))}return[]}(n.serverSyncTree_,c,m,s)}else{const m=us(t);u=TA(n.serverSyncTree_,c,m,s)}else if(r){const m=(0,re.UI)(t,w=>us(w));u=function uV(n,e,t){const r=Ni.fromObject(t);return o5(n,new i5({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,c,m)}else{const m=us(t);u=lp(n.serverSyncTree_,c,m)}let h=c;u.length>0&&(h=c5(n,c)),rc(n.eventQueue_,h,u)}function jA(n,e){tI(n,"connected",e),!1===e&&function zV(n){a5(n,"onDisconnectEvents");const e=vp(n),t=dy();TE(n.onDisconnect_,Kr(),(s,c)=>{const u=kA(s,c,n.serverSyncTree_,e);r5(t,s,u)});let r=[];TE(t,Kr(),(s,c)=>{r=r.concat(lp(n.serverSyncTree_,s,c));const u=sI(n,s);c5(n,u)}),n.onDisconnect_=dy(),rc(n.eventQueue_,Kr(),r)}(n)}function tI(n,e,t){const r=new ii("/.info/"+e),s=us(t);n.infoData_.updateSnapshot(r,s);const c=lp(n.infoSyncTree_,r,s);rc(n.eventQueue_,r,c)}function Ay(n){return n.nextWriteId_++}function nI(n,e,t,r,s){a5(n,"set",{path:e.toString(),value:t,priority:r});const c=vp(n),u=us(t,r),h=Ey(n.serverSyncTree_,e),m=ZE(u,h,c),w=Ay(n),O=UE(n.serverSyncTree_,e,m,w,!0);xy(n.eventQueue_,O),n.server_.put(e.toString(),u.val(!0),(ee,de)=>{const Te="ok"===ee;Te||ma("set at "+e+" failed: "+ee);const st=od(n.serverSyncTree_,w,!Te);rc(n.eventQueue_,e,st),ad(0,s,ee,de)});const $=sI(n,e);c5(n,$),rc(n.eventQueue_,$,[])}function VV(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{"ok"===r&&SE(n.onDisconnect_,e),ad(0,t,r,s)})}function $A(n,e,t,r){const s=us(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,u)=>{"ok"===c&&r5(n.onDisconnect_,e,s),ad(0,r,c,u)})}function rI(n,e,t){let r;r=".info"===Cr(e._path)?wy(n.infoSyncTree_,e,t):wy(n.serverSyncTree_,e,t),zA(n.eventQueue_,e._path,r)}function GA(n){n.persistentConnection_&&n.persistentConnection_.interrupt(HA)}function a5(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),To(t,...e)}function ad(n,e,t,r){e&&Q0(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let c=s;r&&(c+=": "+r);const u=new Error(c);u.code=s,e(u)}})}function iI(n,e,t){return Ey(n.serverSyncTree_,e,t)||ur.EMPTY_NODE}function My(n,e=n.transactionQueueTree_){if(e||Ny(n,e),ah(e)){const t=qA(n,e);(0,re.hu)(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function GV(n,e,t){const r=t.map(w=>w.currentWriteId),s=iI(n,e,r);let c=s;const u=s.hash();for(let w=0;w<t.length;w++){const O=t[w];(0,re.hu)(0===O.status,"tryToSendTransactionQueue_: items in queue should all be run."),O.status=1,O.retryCount++;const $=ja(e,O.path);c=c.updateChild($,O.currentOutputSnapshotRaw)}const h=c.val(!0),m=e;n.server_.put(m.toString(),h,w=>{a5(n,"transaction put response",{path:m.toString(),status:w});let O=[];if("ok"===w){const $=[];for(let ee=0;ee<t.length;ee++)t[ee].status=2,O=O.concat(od(n.serverSyncTree_,t[ee].currentWriteId)),t[ee].onComplete&&$.push(()=>t[ee].onComplete(null,!0,t[ee].currentOutputSnapshotResolved)),t[ee].unwatcher();Ny(n,Dy(n.transactionQueueTree_,e)),My(n,n.transactionQueueTree_),rc(n.eventQueue_,e,O);for(let ee=0;ee<$.length;ee++)Q0($[ee])}else{if("datastale"===w)for(let $=0;$<t.length;$++)t[$].status=3===t[$].status?4:0;else{ma("transaction at "+m.toString()+" failed: "+w);for(let $=0;$<t.length;$++)t[$].status=4,t[$].abortReason=w}c5(n,e)}},u)}(n,hp(e),t)}else RA(e)&&Sy(e,t=>{My(n,t)})}function c5(n,e){const t=WA(n,e),r=hp(t);return function WV(n,e,t){if(0===e.length)return;const r=[];let s=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],w=ja(t,m.path);let $,O=!1;if((0,re.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)O=!0,$=m.abortReason,s=s.concat(od(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)O=!0,$="maxretry",s=s.concat(od(n.serverSyncTree_,m.currentWriteId,!0));else{const ee=iI(n,m.path,u);m.currentInputSnapshot=ee;const de=e[h].update(ee.val());if(void 0!==de){pp("transaction failed: Data returned ",de,m.path);let Te=us(de);"object"==typeof de&&null!=de&&(0,re.r3)(de,".priority")||(Te=Te.updatePriority(ee.getPriority()));const It=m.currentWriteId,an=vp(n),un=ZE(Te,ee,an);m.currentOutputSnapshotRaw=Te,m.currentOutputSnapshotResolved=un,m.currentWriteId=Ay(n),u.splice(u.indexOf(It),1),s=s.concat(UE(n.serverSyncTree_,m.path,un,m.currentWriteId,m.applyLocally)),s=s.concat(od(n.serverSyncTree_,It,!0))}else O=!0,$="nodata",s=s.concat(od(n.serverSyncTree_,m.currentWriteId,!0))}rc(n.eventQueue_,t,s),s=[],O&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===$?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error($),!1,null)))}Ny(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Q0(r[h]);My(n,n.transactionQueueTree_)}(n,qA(n,t),r),r}function WA(n,e){let t,r=n.transactionQueueTree_;for(t=Cr(e);null!==t&&void 0===ah(r);)r=Dy(r,t),t=Cr(e=yi(e));return r}function qA(n,e){const t=[];return ZA(n,e,t),t.sort((r,s)=>r.order-s.order),t}function ZA(n,e,t){const r=ah(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);Sy(e,s=>{ZA(n,s,t)})}function Ny(n,e){const t=ah(e);if(t){let r=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[r]=t[s],r++);t.length=r,QE(e,t.length>0?t:void 0)}Sy(e,r=>{Ny(n,r)})}function sI(n,e){const t=hp(WA(n,e)),r=Dy(n.transactionQueueTree_,e);return function EV(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,s=>{oI(n,s)}),oI(n,r),PA(r,s=>{oI(n,s)}),t}function oI(n,e){const t=ah(e);if(t){const r=[];let s=[],c=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,re.hu)(c===u-1,"All SENT items should be at beginning of queue."),c=u,t[u].status=3,t[u].abortReason="set"):((0,re.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),s=s.concat(od(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===c?QE(e,void 0):t.length=c+1,rc(n.eventQueue_,hp(e),s);for(let u=0;u<r.length;u++)Q0(r[u])}}const aI=function(n,e){const t=KV(n),r=t.namespace;return"firebase.com"===t.domain&&fu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&fu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ma("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new cE(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ii(t.pathString)}},KV=function(n){let e="",t="",r="",s="",c="",u=!0,h="https",m=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let O=n.indexOf("/");-1===O&&(O=n.length);let $=n.indexOf("?");-1===$&&($=n.length),e=n.substring(0,Math.min(O,$)),O<$&&(s=function qV(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(O,$)));const ee=function ZV(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ma(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,$)));w=e.indexOf(":"),w>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(w+1),10)):w=e.length;const de=e.slice(0,w);if("localhost"===de.toLowerCase())t="localhost";else if(de.split(".").length<=2)t=de;else{const Te=e.indexOf(".");r=e.substring(0,Te).toLowerCase(),t=e.substring(Te+1),c=r}"ns"in ee&&(c=ee.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:s,namespace:c}};class KA{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Pz)(this.snapshot.exportVal())}}class YA{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class cI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class QA{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new re.BH;return VV(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Hc("OnDisconnect.remove",this._path);const e=new re.BH;return $A(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Hc("OnDisconnect.set",this._path),gu("OnDisconnect.set",e,this._path,!1);const t=new re.BH;return $A(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Hc("OnDisconnect.setWithPriority",this._path),gu("OnDisconnect.setWithPriority",e,this._path,!1),eI("OnDisconnect.setWithPriority",t,!1);const r=new re.BH;return function HV(n,e,t,r,s){const c=us(t,r);n.server_.onDisconnectPut(e.toString(),c.val(!0),(u,h)=>{"ok"===u&&r5(n.onDisconnect_,e,c),ad(0,s,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Hc("OnDisconnect.update",this._path),LA("OnDisconnect.update",e,this._path,!1);const t=new re.BH;return function UV(n,e,t,r){if((0,re.xb)(t))return To("onDisconnect().update() called with empty data.  Don't do anything."),void ad(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,c)=>{"ok"===s&&xo(t,(u,h)=>{const m=us(h);r5(n.onDisconnect_,ts(e,u),m)}),ad(0,r,s,c)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class C1{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return br(this._path)?null:pE(this._path)}get ref(){return new Uc(this._repo,this._path)}get _queryIdentifier(){const e=nA(this._queryParams),t=sE(e);return"{}"===t?"default":t}get _queryObject(){return nA(this._queryParams)}isEqual(e){if(!((e=(0,re.m9)(e))instanceof C1))return!1;const t=this._repo===e._repo,r=mE(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function HF(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ky(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function cd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===mu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==I2)throw new Error(r);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==pu)throw new Error(r);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===Mi){if(null!=e&&!fp(e)||null!=t&&!fp(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(n.getIndex()instanceof CE||n.getIndex()===bE,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ry(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Uc extends C1{constructor(e,t){super(e,t,new cy,!1)}get parent(){const e=Hx(this._path);return null===e?null:new Uc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ch{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ii(e),r=lh(this.ref,e);return new ch(this._node.getChild(t),r,Mi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,s)=>e(new ch(s,lh(this.ref,r),Mi)))}hasChild(e){const t=new ii(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function JA(n,e){return(n=(0,re.m9)(n))._checkNotDeleted("ref"),void 0!==e?lh(n._root,e):n._root}function XA(n,e){(n=(0,re.m9)(n))._checkNotDeleted("refFromURL");const t=aI(e,n._repo.repoInfo_.nodeAdmin);FA("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&fu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),JA(n,t.path.toString())}function lh(n,e){return null===Cr((n=(0,re.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gp("child","path",t,!1)):gp("child","path",e,!1),new Uc(n._repo,ts(n._path,e));var t}function lI(n,e){n=(0,re.m9)(n),Hc("set",n._path),gu("set",e,n._path,!1);const t=new re.BH;return nI(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function eH(n,e){LA("update",e,n._path,!1);const t=new re.BH;return function FV(n,e,t,r){a5(n,"update",{path:e.toString(),value:t});let s=!0;const c=vp(n),u={};if(xo(t,(h,m)=>{s=!1,u[h]=kA(ts(e,h),us(m),n.serverSyncTree_,c)}),s)To("update() called with empty data.  Don't do anything."),ad(0,r,"ok",void 0);else{const h=Ay(n),m=function lV(n,e,t,r){!function Sz(n,e,t,r){(0,re.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=kE(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const s=Ni.fromObject(t);return o5(n,new i5({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,u,h);xy(n.eventQueue_,m),n.server_.merge(e.toString(),t,(w,O)=>{const $="ok"===w;$||ma("update at "+e+" failed: "+w);const ee=od(n.serverSyncTree_,h,!$),de=ee.length>0?c5(n,e):e;rc(n.eventQueue_,de,ee),ad(0,r,w,O)}),xo(t,w=>{const O=sI(n,ts(e,w));c5(n,O)}),rc(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function tH(n){n=(0,re.m9)(n);const e=new cI(()=>{}),t=new yp(e);return function LV(n,e,t){const r=function pV(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,O)=>{const $=ja(w,t);r=r||id(O,$)});let s=n.syncPointTree_.get(t);s?r=r||id(s,Kr()):(s=new bA,n.syncPointTree_=n.syncPointTree_.set(t,s));const c=null!=r,u=c?new nd(r,!0,!1):null;return function Qz(n){return py(n.viewCache_)}(wA(s,e,my(n.pendingWriteTree_,e._path),c?u.getNode():ur.EMPTY_NODE,c))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(s=>{const c=us(s).withIndex(e._queryParams.getIndex());let u;if(BE(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=lp(n.serverSyncTree_,e._path,c);else{const h=up(n.serverSyncTree_,e);u=TA(n.serverSyncTree_,e._path,c,h)}return rc(n.eventQueue_,e._path,u),wy(n.serverSyncTree_,e,t,null,!0),c},s=>(a5(n,"get for query "+(0,re.Pz)(e)+" failed: "+s),Promise.reject(new Error(s))))}(n._repo,n,t).then(r=>new ch(r,new Uc(n._repo,n._path),n._queryParams.getIndex()))}class yp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new KA("value",this,new ch(e.snapshotNode,new Uc(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YA(this,e,t):null}matches(e){return e instanceof yp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Py{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YA(this,e,t):null}createEvent(e,t){(0,re.hu)(null!=e.childName,"Child events should have a childName.");const r=lh(new Uc(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new KA(e.type,this,new ch(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Py&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _p(n,e,t,r,s){let c;if("object"==typeof r&&(c=void 0,s=r),"function"==typeof r&&(c=r),s&&s.onlyOnce){const m=t,w=(O,$)=>{rI(n._repo,n,h),m(O,$)};w.userCallback=t.userCallback,w.context=t.context,t=w}const u=new cI(t,c||void 0),h="value"===e?new yp(u):new Py(e,u);return function BV(n,e,t){let r;r=".info"===Cr(e._path)?BE(n.infoSyncTree_,e,t):BE(n.serverSyncTree_,e,t),zA(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>rI(n._repo,n,h)}function uI(n,e,t,r){return _p(n,"value",e,t,r)}function eM(n,e,t,r){return _p(n,"child_added",e,t,r)}function tM(n,e,t,r){return _p(n,"child_changed",e,t,r)}function nM(n,e,t,r){return _p(n,"child_moved",e,t,r)}function rM(n,e,t,r){return _p(n,"child_removed",e,t,r)}function iM(n,e,t){let r=null;const s=t?new cI(t):null;"value"===e?r=new yp(s):e&&(r=new Py(e,s)),rI(n._repo,n,r)}class kl{}class sM extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("endAt",this._value,e._path,!0);const t=DE(e._queryParams,this._value,this._key);if(Ry(t),cd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new C1(e._repo,e._path,t,e._orderByCalled)}}class rH extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("endBefore",this._value,e._path,!1);const t=function fz(n,e,t){let r,s;return n.index_===mu?("string"==typeof e&&(e=Xx(e)),s=DE(n,e,t)):(r=null==t?I2:Xx(t),s=DE(n,e,r)),s.endBeforeSet_=!0,s}(e._queryParams,this._value,this._key);if(Ry(t),cd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new C1(e._repo,e._path,t,e._orderByCalled)}}class oM extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("startAt",this._value,e._path,!0);const t=IE(e._queryParams,this._value,this._key);if(Ry(t),cd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new C1(e._repo,e._path,t,e._orderByCalled)}}class oH extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("startAfter",this._value,e._path,!1);const t=function hz(n,e,t){let r;if(n.index_===mu)"string"==typeof e&&(e=Jx(e)),r=IE(n,e,t);else{let s;s=null==t?pu:Jx(t),r=IE(n,e,s)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Ry(t),cd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new C1(e._repo,e._path,t,e._orderByCalled)}}class cH extends kl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new C1(e._repo,e._path,function uz(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class uH extends kl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new C1(e._repo,e._path,function dz(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class hH extends kl{constructor(e){super(),this._path=e}_apply(e){ky(e,"orderByChild");const t=new ii(this._path);if(br(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new CE(t),s=ly(e._queryParams,r);return cd(s),new C1(e._repo,e._path,s,!0)}}class pH extends kl{_apply(e){ky(e,"orderByKey");const t=ly(e._queryParams,mu);return cd(t),new C1(e._repo,e._path,t,!0)}}class gH extends kl{_apply(e){ky(e,"orderByPriority");const t=ly(e._queryParams,Mi);return cd(t),new C1(e._repo,e._path,t,!0)}}class yH extends kl{_apply(e){ky(e,"orderByValue");const t=ly(e._queryParams,bE);return cd(t),new C1(e._repo,e._path,t,!0)}}class CH extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(gu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sM(this._value,this._key)._apply(new oM(this._value,this._key)._apply(e))}}function Rl(n,...e){let t=(0,re.m9)(n);for(const r of e)t=r._apply(t);return t}(function tV(n){(0,re.hu)(!_y,"__referenceConstructor has already been defined"),_y=n})(Uc),function oV(n){(0,re.hu)(!by,"__referenceConstructor has already been defined"),by=n}(Uc);const dI={};function cM(n,e,t,r,s){let c=r||n.options.databaseURL;void 0===c&&(n.options.projectId||fu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),To("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,w,u=aI(c,s),h=u.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(m=!0,c=`http://${w}?ns=${h.namespace}`,u=aI(c,s),h=u.repoInfo):m=!u.repoInfo.secure;const O=s&&m?new Q7(Q7.OWNER):new mF(n.name,n.options,e);FA("Invalid Firebase Database URL",u),br(u.path)||fu("Database URL must point to the root of a Firebase Database (not including a child path).");const $=function DH(n,e,t,r){let s=dI[e.name];s||(s={},dI[e.name]=s);let c=s[n.toURLString()];return c&&fu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new RV(n,false,t,r),s[n.toURLString()]=c,c}(h,n,O,new pF(n.name,t));return new TH($,n)}class TH{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function PV(n,e,t){if(n.stats_=dE(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new uy(n.repoInfo_,(r,s,c,u)=>{BA(n,r,s,c,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jA(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new rh(n.repoInfo_,e,(r,s,c,u)=>{BA(n,r,s,c,u)},r=>{jA(n,r)},r=>{!function OV(n,e){xo(e,(t,r)=>{tI(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function yF(n,e){const t=n.toString();return uE[t]||(uE[t]=e()),uE[t]}(n.repoInfo_,()=>new _z(n.stats_,n.server_)),n.infoData_=new pz,n.infoSyncTree_=new SA({startListening:(r,s,c,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=lp(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),tI(n,"connected",!1),n.serverSyncTree_=new SA({startListening:(r,s,c,u)=>(n.server_.listen(r,c,s,(h,m)=>{const w=u(h,m);rc(n.eventQueue_,r._path,w)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Uc(this._repo,Kr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function IH(n,e){const t=dI[e];(!t||t[n.key]!==n)&&fu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),GA(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fu("Cannot call "+e+" on a deleted database.")}}function lM(){xx.IS_TRANSPORT_INITIALIZED&&ma("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function xH(){lM(),ed.forceDisallow()}function AH(){lM(),J0.forceDisallow(),ed.forceAllow()}function RH(n,e){cx(n,e)}const OH={".sv":"timestamp"};class zH{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}rh.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},rh.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function PH(n){rx(Vo.SDK_VERSION),(0,Vo._registerComponent)(new d1.wA("database",(e,{instanceIdentifier:t})=>cM(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Vo.registerVersion)(tx,"0.13.6",n),(0,Vo.registerVersion)(tx,"0.13.6","esm2017")}();const BH=new u1.Yd("@firebase/database-compat"),uM=function(n){BH.warn("FIREBASE WARNING: "+n)};class GH{constructor(e){this._delegate=e}cancel(e){(0,re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,re.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,re.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,re.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,re.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const s=this._delegate.setWithPriority(e,t);return r&&s.then(()=>r(null),c=>r(c)),s}update(e,t){if((0,re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let c=0;c<e.length;++c)s[""+c]=e[c];e=s,uM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,re.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),s=>t(s)),r}}class WH{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ld{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,re.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),gp("DataSnapshot.child","path",e,!1),new ld(this._database,this._delegate.child(e))}hasChild(e){return(0,re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),gp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,re.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ld(this._database,t)))}hasChildren(){return(0,re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,re.Dv)("DataSnapshot.ref",0,0,arguments.length),new ic(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qo{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,s){var c;(0,re.Dv)("Query.on",2,4,arguments.length),(0,re.Wj)("Query.on","callback",t,!1);const u=qo.getCancelAndContextArgs_("Query.on",r,s),h=(w,O)=>{t.call(u.context,new ld(this.database,w),O)};h.userCallback=t,h.context=u.context;const m=null===(c=u.cancel)||void 0===c?void 0:c.bind(u.context);switch(e){case"value":return uI(this._delegate,h,m),t;case"child_added":return eM(this._delegate,h,m),t;case"child_removed":return rM(this._delegate,h,m),t;case"child_changed":return tM(this._delegate,h,m),t;case"child_moved":return nM(this._delegate,h,m),t;default:throw new Error((0,re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,re.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,re.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,re.Wj)("Query.off","callback",t,!0),(0,re.lb)("Query.off","context",r,!0),t){const s=()=>{};s.userCallback=t,s.context=r,iM(this._delegate,e,s)}else iM(this._delegate,e)}get(){return tH(this._delegate).then(e=>new ld(this.database,e))}once(e,t,r,s){(0,re.Dv)("Query.once",1,4,arguments.length),(0,re.Wj)("Query.once","callback",t,!0);const c=qo.getCancelAndContextArgs_("Query.once",r,s),u=new re.BH,h=(w,O)=>{const $=new ld(this.database,w);t&&t.call(c.context,$,O),u.resolve($)};h.userCallback=t,h.context=c.context;const m=w=>{c.cancel&&c.cancel.call(c.context,w),u.reject(w)};switch(e){case"value":uI(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":eM(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":rM(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":tM(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":nM(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,re.Dv)("Query.limitToFirst",1,1,arguments.length),new qo(this.database,Rl(this._delegate,function lH(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cH(n)}(e)))}limitToLast(e){return(0,re.Dv)("Query.limitToLast",1,1,arguments.length),new qo(this.database,Rl(this._delegate,function dH(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uH(n)}(e)))}orderByChild(e){return(0,re.Dv)("Query.orderByChild",1,1,arguments.length),new qo(this.database,Rl(this._delegate,function fH(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gp("orderByChild","path",n,!1),new hH(n)}(e)))}orderByKey(){return(0,re.Dv)("Query.orderByKey",0,0,arguments.length),new qo(this.database,Rl(this._delegate,function mH(){return new pH}()))}orderByPriority(){return(0,re.Dv)("Query.orderByPriority",0,0,arguments.length),new qo(this.database,Rl(this._delegate,function vH(){return new gH}()))}orderByValue(){return(0,re.Dv)("Query.orderByValue",0,0,arguments.length),new qo(this.database,Rl(this._delegate,function _H(){return new yH}()))}startAt(e=null,t){return(0,re.Dv)("Query.startAt",0,2,arguments.length),new qo(this.database,Rl(this._delegate,function sH(n=null,e){return mp("startAt","key",e,!0),new oM(n,e)}(e,t)))}startAfter(e=null,t){return(0,re.Dv)("Query.startAfter",0,2,arguments.length),new qo(this.database,Rl(this._delegate,function aH(n,e){return mp("startAfter","key",e,!0),new oH(n,e)}(e,t)))}endAt(e=null,t){return(0,re.Dv)("Query.endAt",0,2,arguments.length),new qo(this.database,Rl(this._delegate,function nH(n,e){return mp("endAt","key",e,!0),new sM(n,e)}(e,t)))}endBefore(e=null,t){return(0,re.Dv)("Query.endBefore",0,2,arguments.length),new qo(this.database,Rl(this._delegate,function iH(n,e){return mp("endBefore","key",e,!0),new rH(n,e)}(e,t)))}equalTo(e,t){return(0,re.Dv)("Query.equalTo",1,2,arguments.length),new qo(this.database,Rl(this._delegate,function bH(n,e){return mp("equalTo","key",e,!0),new CH(n,e)}(e,t)))}toString(){return(0,re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,re.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof qo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const s={cancel:void 0,context:void 0};if(t&&r)s.cancel=t,(0,re.Wj)(e,"cancel",s.cancel,!0),s.context=r,(0,re.lb)(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error((0,re.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new ic(this.database,new Uc(this._delegate._repo,this._delegate._path))}}class ic extends qo{constructor(e,t){super(e,new C1(t._repo,t._path,new cy,!1)),this.database=e,this._delegate=t}getKey(){return(0,re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ic(this.database,lh(this._delegate,e))}getParent(){(0,re.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ic(this.database,e):null}getRoot(){return(0,re.Dv)("Reference.root",0,0,arguments.length),new ic(this.database,this._delegate.root)}set(e,t){(0,re.Dv)("Reference.set",1,2,arguments.length),(0,re.Wj)("Reference.set","onComplete",t,!0);const r=lI(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}update(e,t){if((0,re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let c=0;c<e.length;++c)s[""+c]=e[c];e=s,uM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hc("Reference.update",this._delegate._path),(0,re.Wj)("Reference.update","onComplete",t,!0);const r=eH(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,re.Wj)("Reference.setWithPriority","onComplete",r,!0);const s=function XV(n,e,t){if(Hc("setWithPriority",n._path),gu("setWithPriority",e,n._path,!1),eI("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new re.BH;return nI(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&s.then(()=>r(null),c=>r(c)),s}remove(e){(0,re.Dv)("Reference.remove",0,1,arguments.length),(0,re.Wj)("Reference.remove","onComplete",e,!0);const t=function QV(n){return Hc("remove",n._path),lI(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,re.Dv)("Reference.transaction",1,3,arguments.length),(0,re.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,re.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,re.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const s=function VH(n,e,t){var r;if(n=(0,re.m9)(n),Hc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(r=t?.applyLocally)||void 0===r||r,c=new re.BH,h=uI(n,()=>{});return function $V(n,e,t,r,s,c){a5(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:sx(),applyLocally:c,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=iI(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{pp("transaction failed: Data returned ",m,u.path),u.status=0;const w=Dy(n.transactionQueueTree_,e),O=ah(w)||[];let $;O.push(u),QE(w,O),"object"==typeof m&&null!==m&&(0,re.r3)(m,".priority")?($=(0,re.DV)(m,".priority"),(0,re.hu)(fp($),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):$=(Ey(n.serverSyncTree_,e)||ur.EMPTY_NODE).getPriority().val();const ee=vp(n),de=us(m,$),Te=ZE(de,h,ee);u.currentOutputSnapshotRaw=de,u.currentOutputSnapshotResolved=Te,u.currentWriteId=Ay(n);const st=UE(n.serverSyncTree_,e,Te,u.currentWriteId,u.applyLocally);rc(n.eventQueue_,e,st),My(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,w,O)=>{let $=null;m?c.reject(m):($=new ch(O,new Uc(n._repo,n._path),Mi),c.resolve(new zH(w,$)))},h,s),c.promise}(this._delegate,e,{applyLocally:r}).then(c=>new WH(c.committed,new ld(this.database,c.snapshot)));return t&&s.then(c=>t(null,c.committed,c.snapshot),c=>t(c,!1,null)),s}setPriority(e,t){(0,re.Dv)("Reference.setPriority",1,2,arguments.length),(0,re.Wj)("Reference.setPriority","onComplete",t,!0);const r=function JV(n,e){n=(0,re.m9)(n),Hc("setPriority",n._path),eI("setPriority",e,!1);const t=new re.BH;return nI(n._repo,ts(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}push(e,t){(0,re.Dv)("Reference.push",0,2,arguments.length),(0,re.Wj)("Reference.push","onComplete",t,!0);const r=function YV(n,e){n=(0,re.m9)(n),Hc("push",n._path),gu("push",e,n._path,!0);const t=UA(n._repo),r=oz(t),s=lh(n,r),c=lh(n,r);let u;return u=null!=e?lI(c,e).then(()=>c):Promise.resolve(c),s.then=u.then.bind(u),s.catch=u.then.bind(u,void 0),s}(this._delegate,e),s=r.then(u=>new ic(this.database,u));t&&s.then(()=>t(null),u=>t(u));const c=new ic(this.database,r);return c.then=s.then.bind(s),c.catch=s.catch.bind(s,void 0),c}onDisconnect(){return Hc("Reference.onDisconnect",this._delegate._path),new GH(new QA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Cp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:xH,forceLongPolling:AH}}useEmulator(e,t,r={}){!function MH(n,e,t,r={}){(n=(0,re.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&fu("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let c;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&fu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Q7(Q7.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,re.Sg)(r.mockUserToken,n.app.options.projectId);c=new Q7(u)}!function EH(n,e,t,r){n.repoInfo_=new cE(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(s,e,t,c)}(this._delegate,e,t,r)}ref(e){if((0,re.Dv)("database.ref",0,1,arguments.length),e instanceof ic){const t=XA(this._delegate,e.toString());return new ic(this,t)}{const t=JA(this._delegate,e);return new ic(this,t)}}refFromURL(e){(0,re.Dv)("database.refFromURL",1,1,arguments.length);const r=XA(this._delegate,e);return new ic(this,r)}goOffline(){return(0,re.Dv)("database.goOffline",0,0,arguments.length),function NH(n){(n=(0,re.m9)(n))._checkNotDeleted("goOffline"),GA(n._repo)}(this._delegate)}goOnline(){return(0,re.Dv)("database.goOnline",0,0,arguments.length),function kH(n){(n=(0,re.m9)(n))._checkNotDeleted("goOnline"),function jV(n){n.persistentConnection_&&n.persistentConnection_.resume(HA)}(n._repo)}(this._delegate)}}Cp.ServerValue={TIMESTAMP:function LH(){return OH}(),increment:n=>function FH(n){return{".sv":{increment:n}}}(n)};var ZH=Object.freeze({__proto__:null,initStandalone:function qH({app:n,url:e,version:t,customAuthImpl:r,namespace:s,nodeAdmin:c=!1}){rx(t);const u=new d1.zt("auth-internal",new d1.H0("database-standalone"));return u.setComponent(new d1.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Cp(cM(n,u,void 0,e,c),n),namespace:s}}});const KH=Cp.ServerValue;function dM(n){return null==n}function hM(n){return"function"==typeof n.set}function fM(n,e){return hM(e)?e:n.ref(e)}function pM(n,e){if(function QH(n){return"string"==typeof n}(n))return e.stringCase();if(hM(n))return e.firebaseCase();if(function JH(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function bp(n,e,t="on",r=Sd.z){return new Td.y(s=>{let c=null;return c=n[t](e,(u,h)=>{r.schedule(()=>{s.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>s.complete())},u=>{r.schedule(()=>s.error(u))}),"on"===t?{unsubscribe(){null!=c&&n.off(e,c)}}:{unsubscribe(){}}}).pipe((0,Is.U)(s=>{const{snapshot:c,prevKey:u}=s;let h=null;return c.exists()&&(h=c.key),{type:e,payload:c,prevKey:u,key:h}}),(0,zD.B)())}function mM(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function tU(n,e){const{payload:t,prevKey:r,key:s}=e,c=mM(n,s),u=function eU(n,e){if(dM(e))return 0;{const t=mM(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const w={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,w],!1})}return n;case"child_added":if(c>-1){const h=n[c-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===s?e:h);case"child_moved":if(c>-1){const h=n.splice(c,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function gM(n){return(dM(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function vM(n,e,t){return function XH(n,e,t){return bp(n,"value","once",t).pipe((0,Sl.w)(r=>{const s=[(0,H1.of)(r)];return e.forEach(c=>s.push(bp(n,c,"on",t))),(0,Bb.T)(...s).pipe((0,Ah.R)(tU,[]))}),Qp())}(n,e=gM(e),t)}function yM(n,e,t){const r=(e=gM(e)).map(s=>bp(n,s,"on",t));return(0,Bb.T)(...r)}function _M(n,e){return function(r,s){return pM(r,{stringCase:()=>n.child(r)[e](s),firebaseCase:()=>r[e](s),snapshotCase:()=>r.ref[e](s)})}}function sU(n){return function(t){return t?pM(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function CM(n,e){return function(){return bp(n,"value","on",e)}}!function YH(n){n.INTERNAL.registerComponent(new d1.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new Cp(s,r)},"PUBLIC").setServiceProps({Reference:ic,Query:qo,Database:Cp,DataSnapshot:ld,enableLogging:RH,INTERNAL:ZH,ServerValue:KH}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(Nd.Z);const cU=new x.OlP("angularfire2.realtimeDatabaseURL"),lU=new x.OlP("angularfire2.database.use-emulator");let uU=(()=>{class n{constructor(t,r,s,c,u,h,m,w,O,$,ee,de,Te,st,It){this.schedulers=h;const an=m,un=(0,ps.on)(t,u,r);w&&fw(un,u,O,ee,de,Te,$,st),this.database=(0,ps.cc)(`${un.name}.database.${s}`,"AngularFireDatabase",un.name,()=>{const qt=u.runOutsideAngular(()=>un.database(s||void 0));return an&&qt.useEmulator(...an),qt},[an])}list(t,r){const s=this.schedulers.ngZone.runOutsideAngular(()=>fM(this.database,t));let c=s;return r&&(c=r(s)),function oU(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:_M(r,"update"),set:_M(r,"set"),push:s=>r.push(s),remove:sU(r),snapshotChanges:s=>vM(n,s,t).pipe(Wr.iC),stateChanges:s=>yM(n,s,t).pipe(Wr.iC),auditTrail:s=>function nU(n,e,t){return function iU(n,e,t){return function rU(n,e){return bp(n,"value","on",e).pipe((0,Is.U)(t=>{let r;return t.payload.forEach(s=>(r=s.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function nF(...n){const e=(0,tF.jO)(n);return(0,Mu.e)((t,r)=>{const s=n.length,c=new Array(s);let u=n.map(()=>!1),h=!1;for(let m=0;m<s;m++)(0,XL.Xf)(n[m]).subscribe((0,xd.x)(r,w=>{c[m]=w,!h&&!u[m]&&(u[m]=!0,(h=u.every(E_.y))&&(u=null))},eF.Z));t.subscribe((0,xd.x)(r,m=>{if(h){const w=[m,...c];r.next(e?e(...w):w)}}))})}(e),(0,Is.U)(([s,c])=>{const u=s.lastKeyToLoad,h=c.map(m=>m.key);return{actions:c,lastKeyToLoad:u,loadedKeys:h}}),function rF(n){return(0,Mu.e)((e,t)=>{let r=!1,s=0;e.subscribe((0,xd.x)(t,c=>(r||(r=!n(c,s++)))&&t.next(c)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,Is.U)(s=>s.actions))}(n,yM(n,e).pipe((0,Ah.R)((s,c)=>[...s,c],[])),t)}(n,s,t).pipe(Wr.iC),valueChanges:(s,c)=>vM(n,s,t).pipe((0,Is.U)(h=>h.map(m=>c&&c.idField?Object.assign(Object.assign({},m.payload.val()),{[c.idField]:m.key}):m.payload.val())),Wr.iC)}}(c,this)}object(t){return function aU(n,e){return{query:n,snapshotChanges:()=>CM(n,e.schedulers.outsideAngular)().pipe(Wr.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>CM(n,e.schedulers.outsideAngular)().pipe(Wr.iC,(0,Is.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>fM(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(x.LFG(ps.Dh),x.LFG(ps.xv,8),x.LFG(cU,8),x.LFG(x.Lbi),x.LFG(x.R0b),x.LFG(Wr.HU),x.LFG(lU,8),x.LFG(A7,8),x.LFG(aw,8),x.LFG(cw,8),x.LFG(lw,8),x.LFG(uw,8),x.LFG(dw,8),x.LFG(hw,8),x.LFG(x7,8))},n.\u0275prov=x.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dU=(()=>{class n{constructor(){Dv.Z.registerVersion("angularfire",Wr.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n}),n.\u0275inj=x.cJS({providers:[uU]}),n})();const bM_firebase={apiKey:"AIzaSyCY09Nh-RAUvbBcjq6--GCjcoWF_IAYO7Y",authDomain:"chat-angular-5ccb9.firebaseapp.com",projectId:"chat-angular-5ccb9",storageBucket:"chat-angular-5ccb9.appspot.com",messagingSenderId:"1089322634676",appId:"1:1089322634676:web:089b5166d6cefe4d1bf6e1"};let hU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=x.oAB({type:n,bootstrap:[aO]}),n.\u0275inj=x.cJS({providers:[M7],imports:[v.b2,oO,q.u5,q.UX,cO.JF,XP,ps.hO.initializeApp(bM_firebase),Jk,oR,JL,dU]}),n})();(0,x.G48)(),v.q6().bootstrapModule(hU).catch(n=>console.error(n))},5867:(Zt,Je,W)=>{W.d(Je,{C6:()=>v.getApps,Mq:()=>v.getApp});var v=W(9681);(0,v.registerVersion)("firebase","9.9.4","app")},127:(Zt,Je,W)=>{W.d(Je,{Z:()=>v.Z});var v=W(3942);v.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(Zt,Je,W)=>{W.r(Je);var v=W(5861),x=W(3942),q=W(8554),De=W(2090),Ue=(W(9681),W(1877),W(4859));function Ve(){return window}function ge(){return(ge=(0,v.Z)(function*(xe,Ee,ve){var ft;const{BuildInfo:Rt}=Ve();(0,q.aq)(Ee.sessionId,"AuthEvent did not contain a session ID");const _t=yield Ye(Ee.sessionId),Vt={};return(0,q.ar)()?Vt.ibi=Rt.packageName:(0,q.as)()?Vt.apn=Rt.packageName:(0,q.at)(xe,"operation-not-supported-in-this-environment"),Rt.displayName&&(Vt.appDisplayName=Rt.displayName),Vt.sessionId=_t,(0,q.au)(xe,ve,Ee.type,void 0,null!==(ft=Ee.eventId)&&void 0!==ft?ft:void 0,Vt)})).apply(this,arguments)}function Tt(){return(Tt=(0,v.Z)(function*(xe){const{BuildInfo:Ee}=Ve(),ve={};(0,q.ar)()?ve.iosBundleId=Ee.packageName:(0,q.as)()?ve.androidPackageName=Ee.packageName:(0,q.at)(xe,"operation-not-supported-in-this-environment"),yield(0,q.av)(xe,ve)})).apply(this,arguments)}function Ut(){return(Ut=(0,v.Z)(function*(xe,Ee,ve){const{cordova:ft}=Ve();let Rt=()=>{};try{yield new Promise((_t,Vt)=>{let pn=null;function Me(){var Ae;_t();const ht=null===(Ae=ft.plugins.browsertab)||void 0===Ae?void 0:Ae.close;"function"==typeof ht&&ht(),"function"==typeof ve?.close&&ve.close()}function be(){pn||(pn=window.setTimeout(()=>{Vt((0,q.aw)(xe,"redirect-cancelled-by-user"))},2e3))}function ae(){"visible"===document?.visibilityState&&be()}Ee.addPassiveListener(Me),document.addEventListener("resume",be,!1),(0,q.as)()&&document.addEventListener("visibilitychange",ae,!1),Rt=()=>{Ee.removePassiveListener(Me),document.removeEventListener("resume",be,!1),document.removeEventListener("visibilitychange",ae,!1),pn&&window.clearTimeout(pn)}})}finally{Rt()}})).apply(this,arguments)}function Ye(xe){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,v.Z)(function*(xe){const Ee=jt(xe),ve=yield crypto.subtle.digest("SHA-256",Ee);return Array.from(new Uint8Array(ve)).map(Rt=>Rt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function jt(xe){if((0,q.aq)(/[0-9a-zA-Z]+/.test(xe),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(xe);const Ee=new ArrayBuffer(xe.length),ve=new Uint8Array(Ee);for(let ft=0;ft<xe.length;ft++)ve[ft]=xe.charCodeAt(ft);return ve}class bt extends q.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Ee=>{this.resolveInialized=Ee})}addPassiveListener(Ee){this.passiveListeners.add(Ee)}removePassiveListener(Ee){this.passiveListeners.delete(Ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Ee){return this.resolveInialized(),this.passiveListeners.forEach(ve=>ve(Ee)),super.onEvent(Ee)}initialized(){var Ee=this;return(0,v.Z)(function*(){yield Ee.initPromise})()}}function Fe(xe){return je.apply(this,arguments)}function je(){return(je=(0,v.Z)(function*(xe){const Ee=yield Oe()._get(qe(xe));return Ee&&(yield Oe()._remove(qe(xe))),Ee})).apply(this,arguments)}function ke(){const xe=[],Ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ve=0;ve<20;ve++){const ft=Math.floor(Math.random()*Ee.length);xe.push(Ee.charAt(ft))}return xe.join("")}function Oe(){return(0,q.ay)(q.b)}function qe(xe){return(0,q.az)("authEvent",xe.config.apiKey,xe.name)}function xt(xe){if(!xe?.includes("?"))return{};const[Ee,...ve]=xe.split("?");return(0,De.zd)(ve.join("?"))}function Pt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,q.aw)("no-auth-event")}}function wn(){var xe;return(null===(xe=self?.location)||void 0===xe?void 0:xe.protocol)||null}function Tr(xe=(0,De.z$)()){return!("file:"!==wn()&&"ionic:"!==wn()&&"capacitor:"!==wn()||!xe.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yr(){try{const xe=self.localStorage,Ee=q.aI();if(xe)return xe.setItem(Ee,"1"),xe.removeItem(Ee),!function ei(xe=(0,De.z$)()){return function Lr(){return(0,De.w1)()&&11===document?.documentMode}()||function fr(xe=(0,De.z$)()){return/Edge\/\d+/.test(xe)}(xe)}()||(0,De.hl)()}catch{return fn()&&(0,De.hl)()}return!1}function fn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yr(){return(function Dn(){return"http:"===wn()||"https:"===wn()}()||(0,De.ru)()||Tr())&&!function mr(){return(0,De.b$)()||(0,De.UG)()}()&&Yr()&&!fn()}function Fr(){return Tr()&&typeof document<"u"}function or(){return(or=(0,v.Z)(function*(){return!!Fr()&&new Promise(xe=>{const Ee=setTimeout(()=>{xe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Ee),xe(!0)})})})).apply(this,arguments)}const xn={LOCAL:"local",NONE:"none",SESSION:"session"},dr=q.ax,$r="persistence";function kn(xe){return dt.apply(this,arguments)}function dt(){return(dt=(0,v.Z)(function*(xe){yield xe._initializationPromise;const Ee=le(),ve=q.az($r,xe.config.apiKey,xe.name);Ee&&Ee.setItem(ve,xe._getPersistence())})).apply(this,arguments)}function le(){var xe;try{return(null===(xe=function pr(){return typeof window<"u"?window:null}())||void 0===xe?void 0:xe.sessionStorage)||null}catch{return null}}const $e=q.ax;class vt{constructor(){this.browserResolver=q.ay(q.k),this.cordovaResolver=q.ay(class Hn{constructor(){this._redirectPersistence=q.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=q.aB,this._overrideRedirectResult=q.aC}_initialize(Ee){var ve=this;return(0,v.Z)(function*(){const ft=Ee._key();let Rt=ve.eventManagers.get(ft);return Rt||(Rt=new bt(Ee),ve.eventManagers.set(ft,Rt),ve.attachCallbackListeners(Ee,Rt)),Rt})()}_openPopup(Ee){(0,q.at)(Ee,"operation-not-supported-in-this-environment")}_openRedirect(Ee,ve,ft,Rt){var _t=this;return(0,v.Z)(function*(){!function ot(xe){var Ee,ve,ft,Rt,_t,Vt,pn,Me,be,ae;const Ae=Ve();(0,q.ax)("function"==typeof(null===(Ee=Ae?.universalLinks)||void 0===Ee?void 0:Ee.subscribe),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,q.ax)(typeof(null===(ve=Ae?.BuildInfo)||void 0===ve?void 0:ve.packageName)<"u",xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,q.ax)("function"==typeof(null===(_t=null===(Rt=null===(ft=Ae?.cordova)||void 0===ft?void 0:ft.plugins)||void 0===Rt?void 0:Rt.browsertab)||void 0===_t?void 0:_t.openUrl),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.ax)("function"==typeof(null===(Me=null===(pn=null===(Vt=Ae?.cordova)||void 0===Vt?void 0:Vt.plugins)||void 0===pn?void 0:pn.browsertab)||void 0===Me?void 0:Me.isAvailable),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.ax)("function"==typeof(null===(ae=null===(be=Ae?.cordova)||void 0===be?void 0:be.InAppBrowser)||void 0===ae?void 0:ae.open),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Ee);const Vt=yield _t._initialize(Ee);yield Vt.initialized(),Vt.resetRedirect(),(0,q.aD)(),yield _t._originValidation(Ee);const pn=function at(xe,Ee,ve=null){return{type:Ee,eventId:ve,urlResponse:null,sessionId:ke(),postBody:null,tenantId:xe.tenantId,error:(0,q.aw)(xe,"no-auth-event")}}(Ee,ft,Rt);yield function rt(xe,Ee){return Oe()._set(qe(xe),Ee)}(Ee,pn);const Me=yield function me(xe,Ee,ve){return ge.apply(this,arguments)}(Ee,pn,ve),be=yield function mt(xe){const{cordova:Ee}=Ve();return new Promise(ve=>{Ee.plugins.browsertab.isAvailable(ft=>{let Rt=null;ft?Ee.plugins.browsertab.openUrl(xe):Rt=Ee.InAppBrowser.open(xe,(0,q.ap)()?"_blank":"_system","location=yes"),ve(Rt)})})}(Me);return function Xe(xe,Ee,ve){return Ut.apply(this,arguments)}(Ee,Vt,be)})()}_isIframeWebStorageSupported(Ee,ve){throw new Error("Method not implemented.")}_originValidation(Ee){const ve=Ee._key();return this.originValidationPromises[ve]||(this.originValidationPromises[ve]=function Re(xe){return Tt.apply(this,arguments)}(Ee)),this.originValidationPromises[ve]}attachCallbackListeners(Ee,ve){const{universalLinks:ft,handleOpenURL:Rt,BuildInfo:_t}=Ve(),Vt=setTimeout((0,v.Z)(function*(){yield Fe(Ee),ve.onEvent(Pt())}),500),pn=function(){var ae=(0,v.Z)(function*(Ae){clearTimeout(Vt);const ht=yield Fe(Ee);let gn=null;ht&&Ae?.url&&(gn=function Ze(xe,Ee){var ve,ft;const Rt=function Dt(xe){const Ee=xt(xe),ve=Ee.link?decodeURIComponent(Ee.link):void 0,ft=xt(ve).link,Rt=Ee.deep_link_id?decodeURIComponent(Ee.deep_link_id):void 0;return xt(Rt).link||Rt||ft||ve||xe}(Ee);if(Rt.includes("/__/auth/callback")){const _t=xt(Rt),Vt=_t.firebaseError?function He(xe){try{return JSON.parse(xe)}catch{return null}}(decodeURIComponent(_t.firebaseError)):null,pn=null===(ft=null===(ve=Vt?.code)||void 0===ve?void 0:ve.split("auth/"))||void 0===ft?void 0:ft[1],Me=pn?(0,q.aw)(pn):null;return Me?{type:xe.type,eventId:xe.eventId,tenantId:xe.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:xe.type,eventId:xe.eventId,tenantId:xe.tenantId,sessionId:xe.sessionId,urlResponse:Rt,postBody:null}}return null}(ht,Ae.url)),ve.onEvent(gn||Pt())});return function(ht){return ae.apply(this,arguments)}}();typeof ft<"u"&&"function"==typeof ft.subscribe&&ft.subscribe(null,pn);const Me=Rt,be=`${_t.packageName.toLowerCase()}://`;Ve().handleOpenURL=function(){var ae=(0,v.Z)(function*(Ae){if(Ae.toLowerCase().startsWith(be)&&pn({url:Ae}),"function"==typeof Me)try{Me(Ae)}catch(ht){console.error(ht)}});return function(Ae){return ae.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=q.a,this._completeRedirectFn=q.aB,this._overrideRedirectResult=q.aC}_initialize(Ee){var ve=this;return(0,v.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._initialize(Ee)})()}_openPopup(Ee,ve,ft,Rt){var _t=this;return(0,v.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openPopup(Ee,ve,ft,Rt)})()}_openRedirect(Ee,ve,ft,Rt){var _t=this;return(0,v.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openRedirect(Ee,ve,ft,Rt)})()}_isIframeWebStorageSupported(Ee,ve){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Ee,ve)}_originValidation(Ee){return this.assertedUnderlyingResolver._originValidation(Ee)}get _shouldInitProactively(){return Fr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $e(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Ee=this;return(0,v.Z)(function*(){if(Ee.underlyingResolver)return;const ve=yield function tn(){return or.apply(this,arguments)}();Ee.underlyingResolver=ve?Ee.cordovaResolver:Ee.browserResolver})()}}function nn(xe){return xe.unwrap()}function Qt(xe){return cr(xe)}function cr(xe){const{_tokenResponse:Ee}=xe instanceof De.ZR?xe.customData:xe;if(!Ee)return null;if(!(xe instanceof De.ZR)&&"temporaryProof"in Ee&&"phoneNumber"in Ee)return q.P.credentialFromResult(xe);const ve=Ee.providerId;if(!ve||ve===q.o.PASSWORD)return null;let ft;switch(ve){case q.o.GOOGLE:ft=q.Q;break;case q.o.FACEBOOK:ft=q.N;break;case q.o.GITHUB:ft=q.T;break;case q.o.TWITTER:ft=q.W;break;default:const{oauthIdToken:Rt,oauthAccessToken:_t,oauthTokenSecret:Vt,pendingToken:pn,nonce:Me}=Ee;return _t||Vt||Rt||pn?pn?ve.startsWith("saml.")?q.aL._create(ve,pn):q.J._fromParams({providerId:ve,signInMethod:ve,pendingToken:pn,idToken:Rt,accessToken:_t}):new q.U(ve).credential({idToken:Rt,accessToken:_t,rawNonce:Me}):null}return xe instanceof De.ZR?ft.credentialFromError(xe):ft.credentialFromResult(xe)}function En(xe,Ee){return Ee.catch(ve=>{throw ve instanceof De.ZR&&function dn(xe,Ee){var ve,ft;const Rt=null===(ve=Ee.customData)||void 0===ve?void 0:ve._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ft=Ee)||void 0===ft?void 0:ft.code))Ee.resolver=new ue(xe,q.an(xe,Ee));else if(Rt){const _t=cr(Ee),Vt=Ee;_t&&(Vt.credential=_t,Vt.tenantId=Rt.tenantId||void 0,Vt.email=Rt.email||void 0,Vt.phoneNumber=Rt.phoneNumber||void 0)}}(xe,ve),ve}).then(ve=>{const Rt=ve.user;return{operationType:ve.operationType,credential:Qt(ve),additionalUserInfo:q.al(ve),user:pe.getOrCreate(Rt)}})}function xr(xe,Ee){return on.apply(this,arguments)}function on(){return(on=(0,v.Z)(function*(xe,Ee){const ve=yield Ee;return{verificationId:ve.verificationId,confirm:ft=>En(xe,ve.confirm(ft))}})).apply(this,arguments)}class ue{constructor(Ee,ve){this.resolver=ve,this.auth=function Sn(xe){return xe.wrapped()}(Ee)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Ee){return En(nn(this.auth),this.resolver.resolveSignIn(Ee))}}class pe{constructor(Ee){this._delegate=Ee,this.multiFactor=q.ao(Ee)}static getOrCreate(Ee){return pe.USER_MAP.has(Ee)||pe.USER_MAP.set(Ee,new pe(Ee)),pe.USER_MAP.get(Ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Ee){return this._delegate.getIdTokenResult(Ee)}getIdToken(Ee){return this._delegate.getIdToken(Ee)}linkAndRetrieveDataWithCredential(Ee){return this.linkWithCredential(Ee)}linkWithCredential(Ee){var ve=this;return(0,v.Z)(function*(){return En(ve.auth,q.Z(ve._delegate,Ee))})()}linkWithPhoneNumber(Ee,ve){var ft=this;return(0,v.Z)(function*(){return xr(ft.auth,q.l(ft._delegate,Ee,ve))})()}linkWithPopup(Ee){var ve=this;return(0,v.Z)(function*(){return En(ve.auth,q.d(ve._delegate,Ee,vt))})()}linkWithRedirect(Ee){var ve=this;return(0,v.Z)(function*(){return yield kn(q.aE(ve.auth)),q.g(ve._delegate,Ee,vt)})()}reauthenticateAndRetrieveDataWithCredential(Ee){return this.reauthenticateWithCredential(Ee)}reauthenticateWithCredential(Ee){var ve=this;return(0,v.Z)(function*(){return En(ve.auth,q._(ve._delegate,Ee))})()}reauthenticateWithPhoneNumber(Ee,ve){return xr(this.auth,q.r(this._delegate,Ee,ve))}reauthenticateWithPopup(Ee){return En(this.auth,q.e(this._delegate,Ee,vt))}reauthenticateWithRedirect(Ee){var ve=this;return(0,v.Z)(function*(){return yield kn(q.aE(ve.auth)),q.h(ve._delegate,Ee,vt)})()}sendEmailVerification(Ee){return q.ab(this._delegate,Ee)}unlink(Ee){var ve=this;return(0,v.Z)(function*(){return yield q.ak(ve._delegate,Ee),ve})()}updateEmail(Ee){return q.ag(this._delegate,Ee)}updatePassword(Ee){return q.ah(this._delegate,Ee)}updatePhoneNumber(Ee){return q.u(this._delegate,Ee)}updateProfile(Ee){return q.af(this._delegate,Ee)}verifyBeforeUpdateEmail(Ee,ve){return q.ac(this._delegate,Ee,ve)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pe.USER_MAP=new WeakMap;const he=q.ax;let Ce=(()=>{class xe{constructor(ve,ft){if(this.app=ve,ft.isInitialized())return this._delegate=ft.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Rt}=ve.options;he(Rt,"invalid-api-key",{appName:ve.name}),he(Rt,"invalid-api-key",{appName:ve.name});const _t=typeof window<"u"?vt:void 0;this._delegate=ft.initialize({options:{persistence:gt(Rt,ve.name),popupRedirectResolver:_t}}),this._delegate._updateErrorMap(q.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ve){this._delegate.languageCode=ve}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ve){this._delegate.tenantId=ve}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ve,ft){q.G(this._delegate,ve,ft)}applyActionCode(ve){return q.a2(this._delegate,ve)}checkActionCode(ve){return q.a3(this._delegate,ve)}confirmPasswordReset(ve,ft){return q.a1(this._delegate,ve,ft)}createUserWithEmailAndPassword(ve,ft){var Rt=this;return(0,v.Z)(function*(){return En(Rt._delegate,q.a5(Rt._delegate,ve,ft))})()}fetchProvidersForEmail(ve){return this.fetchSignInMethodsForEmail(ve)}fetchSignInMethodsForEmail(ve){return q.aa(this._delegate,ve)}isSignInWithEmailLink(ve){return q.a8(this._delegate,ve)}getRedirectResult(){var ve=this;return(0,v.Z)(function*(){he(yr(),ve._delegate,"operation-not-supported-in-this-environment");const ft=yield q.j(ve._delegate,vt);return ft?En(ve._delegate,Promise.resolve(ft)):{credential:null,user:null}})()}addFrameworkForLogging(ve){!function ln(xe,Ee){(0,q.aE)(xe)._logFramework(Ee)}(this._delegate,ve)}onAuthStateChanged(ve,ft,Rt){const{next:_t,error:Vt,complete:pn}=_e(ve,ft,Rt);return this._delegate.onAuthStateChanged(_t,Vt,pn)}onIdTokenChanged(ve,ft,Rt){const{next:_t,error:Vt,complete:pn}=_e(ve,ft,Rt);return this._delegate.onIdTokenChanged(_t,Vt,pn)}sendSignInLinkToEmail(ve,ft){return q.a7(this._delegate,ve,ft)}sendPasswordResetEmail(ve,ft){return q.a0(this._delegate,ve,ft||void 0)}setPersistence(ve){var ft=this;return(0,v.Z)(function*(){let Rt;switch(function Qr(xe,Ee){dr(Object.values(xn).includes(Ee),xe,"invalid-persistence-type"),(0,De.b$)()?dr(Ee!==xn.SESSION,xe,"unsupported-persistence-type"):(0,De.UG)()?dr(Ee===xn.NONE,xe,"unsupported-persistence-type"):fn()?dr(Ee===xn.NONE||Ee===xn.LOCAL&&(0,De.hl)(),xe,"unsupported-persistence-type"):dr(Ee===xn.NONE||Yr(),xe,"unsupported-persistence-type")}(ft._delegate,ve),ve){case xn.SESSION:Rt=q.a;break;case xn.LOCAL:Rt=(yield q.ay(q.i)._isAvailable())?q.i:q.b;break;case xn.NONE:Rt=q.L;break;default:return q.at("argument-error",{appName:ft._delegate.name})}return ft._delegate.setPersistence(Rt)})()}signInAndRetrieveDataWithCredential(ve){return this.signInWithCredential(ve)}signInAnonymously(){return En(this._delegate,q.X(this._delegate))}signInWithCredential(ve){return En(this._delegate,q.Y(this._delegate,ve))}signInWithCustomToken(ve){return En(this._delegate,q.$(this._delegate,ve))}signInWithEmailAndPassword(ve,ft){return En(this._delegate,q.a6(this._delegate,ve,ft))}signInWithEmailLink(ve,ft){return En(this._delegate,q.a9(this._delegate,ve,ft))}signInWithPhoneNumber(ve,ft){return xr(this._delegate,q.s(this._delegate,ve,ft))}signInWithPopup(ve){var ft=this;return(0,v.Z)(function*(){return he(yr(),ft._delegate,"operation-not-supported-in-this-environment"),En(ft._delegate,q.c(ft._delegate,ve,vt))})()}signInWithRedirect(ve){var ft=this;return(0,v.Z)(function*(){return he(yr(),ft._delegate,"operation-not-supported-in-this-environment"),yield kn(ft._delegate),q.f(ft._delegate,ve,vt)})()}updateCurrentUser(ve){return this._delegate.updateCurrentUser(ve)}verifyPasswordResetCode(ve){return q.a4(this._delegate,ve)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return xe.Persistence=xn,xe})();function _e(xe,Ee,ve){let ft=xe;"function"!=typeof xe&&({next:ft,error:Ee,complete:ve}=xe);const Rt=ft;return{next:Vt=>Rt(Vt&&pe.getOrCreate(Vt)),error:Ee,complete:ve}}function gt(xe,Ee){const ve=function ye(xe,Ee){const ve=le();if(!ve)return[];const ft=q.az($r,xe,Ee);switch(ve.getItem(ft)){case xn.NONE:return[q.L];case xn.LOCAL:return[q.i,q.a];case xn.SESSION:return[q.a];default:return[]}}(xe,Ee);if(typeof self<"u"&&!ve.includes(q.i)&&ve.push(q.i),typeof window<"u")for(const ft of[q.b,q.a])ve.includes(ft)||ve.push(ft);return ve.includes(q.L)||ve.push(q.L),ve}class kt{constructor(){this.providerId="phone",this._delegate=new q.P(nn(x.Z.auth()))}static credential(Ee,ve){return q.P.credential(Ee,ve)}verifyPhoneNumber(Ee,ve){return this._delegate.verifyPhoneNumber(Ee,ve)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=q.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=q.P.PROVIDER_ID;const hn=q.ax;class Gn{constructor(Ee,ve,ft=x.Z.app()){var Rt;hn(null===(Rt=ft.options)||void 0===Rt?void 0:Rt.apiKey,"invalid-api-key",{appName:ft.name}),this._delegate=new q.R(Ee,ve,ft.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ar(xe){xe.INTERNAL.registerComponent(new Ue.wA("auth-compat",Ee=>{const ve=Ee.getProvider("app-compat").getImmediate(),ft=Ee.getProvider("auth");return new Ce(ve,ft)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q.A.EMAIL_SIGNIN,PASSWORD_RESET:q.A.PASSWORD_RESET,RECOVER_EMAIL:q.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q.A.VERIFY_EMAIL}},EmailAuthProvider:q.M,FacebookAuthProvider:q.N,GithubAuthProvider:q.T,GoogleAuthProvider:q.Q,OAuthProvider:q.U,SAMLAuthProvider:q.V,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:q.m,RecaptchaVerifier:Gn,TwitterAuthProvider:q.W,Auth:Ce,AuthCredential:q.H,Error:De.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),xe.registerVersion("@firebase/auth-compat","0.2.19")}(x.Z)},9751:(Zt,Je,W)=>{W.d(Je,{y:()=>Ve});var v=W(930),x=W(727),q=W(8822),De=W(9635),Pe=W(2416),Le=W(576),Ue=W(2806);let Ve=(()=>{class Re{constructor(mt){mt&&(this._subscribe=mt)}lift(mt){const Xe=new Re;return Xe.source=this,Xe.operator=mt,Xe}subscribe(mt,Xe,Ut){const ot=function ge(Re){return Re&&Re instanceof v.Lv||function me(Re){return Re&&(0,Le.m)(Re.next)&&(0,Le.m)(Re.error)&&(0,Le.m)(Re.complete)}(Re)&&(0,x.Nn)(Re)}(mt)?mt:new v.Hp(mt,Xe,Ut);return(0,Ue.x)(()=>{const{operator:Ye,source:Bt}=this;ot.add(Ye?Ye.call(ot,Bt):Bt?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(mt){try{return this._subscribe(mt)}catch(Xe){mt.error(Xe)}}forEach(mt,Xe){return new(Xe=We(Xe))((Ut,ot)=>{const Ye=new v.Hp({next:Bt=>{try{mt(Bt)}catch(jt){ot(jt),Ye.unsubscribe()}},error:ot,complete:Ut});this.subscribe(Ye)})}_subscribe(mt){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(mt)}[q.L](){return this}pipe(...mt){return(0,De.U)(mt)(this)}toPromise(mt){return new(mt=We(mt))((Xe,Ut)=>{let ot;this.subscribe(Ye=>ot=Ye,Ye=>Ut(Ye),()=>Xe(ot))})}}return Re.create=Tt=>new Re(Tt),Re})();function We(Re){var Tt;return null!==(Tt=Re??Pe.v.Promise)&&void 0!==Tt?Tt:Promise}},7579:(Zt,Je,W)=>{W.d(Je,{x:()=>Ue});var v=W(9751),x=W(727);const De=(0,W(3888).d)(We=>function(){We(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=W(8737),Le=W(2806);let Ue=(()=>{class We extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ge){const Re=new Ve(this,this);return Re.operator=ge,Re}_throwIfClosed(){if(this.closed)throw new De}next(ge){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Re of this.currentObservers)Re.next(ge)}})}error(ge){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ge;const{observers:Re}=this;for(;Re.length;)Re.shift().error(ge)}})}complete(){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ge}=this;for(;ge.length;)ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ge;return(null===(ge=this.observers)||void 0===ge?void 0:ge.length)>0}_trySubscribe(ge){return this._throwIfClosed(),super._trySubscribe(ge)}_subscribe(ge){return this._throwIfClosed(),this._checkFinalizedStatuses(ge),this._innerSubscribe(ge)}_innerSubscribe(ge){const{hasError:Re,isStopped:Tt,observers:mt}=this;return Re||Tt?x.Lc:(this.currentObservers=null,mt.push(ge),new x.w0(()=>{this.currentObservers=null,(0,Pe.P)(mt,ge)}))}_checkFinalizedStatuses(ge){const{hasError:Re,thrownError:Tt,isStopped:mt}=this;Re?ge.error(Tt):mt&&ge.complete()}asObservable(){const ge=new v.y;return ge.source=this,ge}}return We.create=(me,ge)=>new Ve(me,ge),We})();class Ve extends Ue{constructor(me,ge){super(),this.destination=me,this.source=ge}next(me){var ge,Re;null===(Re=null===(ge=this.destination)||void 0===ge?void 0:ge.next)||void 0===Re||Re.call(ge,me)}error(me){var ge,Re;null===(Re=null===(ge=this.destination)||void 0===ge?void 0:ge.error)||void 0===Re||Re.call(ge,me)}complete(){var me,ge;null===(ge=null===(me=this.destination)||void 0===me?void 0:me.complete)||void 0===ge||ge.call(me)}_subscribe(me){var ge,Re;return null!==(Re=null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(me))&&void 0!==Re?Re:x.Lc}}},930:(Zt,Je,W)=>{W.d(Je,{Hp:()=>Ut,Lv:()=>Re});var v=W(576),x=W(727),q=W(2416),De=W(7849),Pe=W(5032);const Le=We("C",void 0,void 0);function We(Ct,bt,at){return{kind:Ct,value:bt,error:at}}var me=W(3410),ge=W(2806);class Re extends x.w0{constructor(bt){super(),this.isStopped=!1,bt?(this.destination=bt,(0,x.Nn)(bt)&&bt.add(this)):this.destination=jt}static create(bt,at,rt){return new Ut(bt,at,rt)}next(bt){this.isStopped?Bt(function Ve(Ct){return We("N",Ct,void 0)}(bt),this):this._next(bt)}error(bt){this.isStopped?Bt(function Ue(Ct){return We("E",void 0,Ct)}(bt),this):(this.isStopped=!0,this._error(bt))}complete(){this.isStopped?Bt(Le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(bt){this.destination.next(bt)}_error(bt){try{this.destination.error(bt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tt=Function.prototype.bind;function mt(Ct,bt){return Tt.call(Ct,bt)}class Xe{constructor(bt){this.partialObserver=bt}next(bt){const{partialObserver:at}=this;if(at.next)try{at.next(bt)}catch(rt){ot(rt)}}error(bt){const{partialObserver:at}=this;if(at.error)try{at.error(bt)}catch(rt){ot(rt)}else ot(bt)}complete(){const{partialObserver:bt}=this;if(bt.complete)try{bt.complete()}catch(at){ot(at)}}}class Ut extends Re{constructor(bt,at,rt){let Fe;if(super(),(0,v.m)(bt)||!bt)Fe={next:bt??void 0,error:at??void 0,complete:rt??void 0};else{let je;this&&q.v.useDeprecatedNextContext?(je=Object.create(bt),je.unsubscribe=()=>this.unsubscribe(),Fe={next:bt.next&&mt(bt.next,je),error:bt.error&&mt(bt.error,je),complete:bt.complete&&mt(bt.complete,je)}):Fe=bt}this.destination=new Xe(Fe)}}function ot(Ct){q.v.useDeprecatedSynchronousErrorHandling?(0,ge.O)(Ct):(0,De.h)(Ct)}function Bt(Ct,bt){const{onStoppedNotification:at}=q.v;at&&me.z.setTimeout(()=>at(Ct,bt))}const jt={closed:!0,next:Pe.Z,error:function Ye(Ct){throw Ct},complete:Pe.Z}},727:(Zt,Je,W)=>{W.d(Je,{Lc:()=>Le,w0:()=>Pe,Nn:()=>Ue});var v=W(576);const q=(0,W(3888).d)(We=>function(ge){We(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((Re,Tt)=>`${Tt+1}) ${Re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge});var De=W(8737);class Pe{constructor(me){this.initialTeardown=me,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let me;if(!this.closed){this.closed=!0;const{_parentage:ge}=this;if(ge)if(this._parentage=null,Array.isArray(ge))for(const mt of ge)mt.remove(this);else ge.remove(this);const{initialTeardown:Re}=this;if((0,v.m)(Re))try{Re()}catch(mt){me=mt instanceof q?mt.errors:[mt]}const{_finalizers:Tt}=this;if(Tt){this._finalizers=null;for(const mt of Tt)try{Ve(mt)}catch(Xe){me=me??[],Xe instanceof q?me=[...me,...Xe.errors]:me.push(Xe)}}if(me)throw new q(me)}}add(me){var ge;if(me&&me!==this)if(this.closed)Ve(me);else{if(me instanceof Pe){if(me.closed||me._hasParent(this))return;me._addParent(this)}(this._finalizers=null!==(ge=this._finalizers)&&void 0!==ge?ge:[]).push(me)}}_hasParent(me){const{_parentage:ge}=this;return ge===me||Array.isArray(ge)&&ge.includes(me)}_addParent(me){const{_parentage:ge}=this;this._parentage=Array.isArray(ge)?(ge.push(me),ge):ge?[ge,me]:me}_removeParent(me){const{_parentage:ge}=this;ge===me?this._parentage=null:Array.isArray(ge)&&(0,De.P)(ge,me)}remove(me){const{_finalizers:ge}=this;ge&&(0,De.P)(ge,me),me instanceof Pe&&me._removeParent(this)}}Pe.EMPTY=(()=>{const We=new Pe;return We.closed=!0,We})();const Le=Pe.EMPTY;function Ue(We){return We instanceof Pe||We&&"closed"in We&&(0,v.m)(We.remove)&&(0,v.m)(We.add)&&(0,v.m)(We.unsubscribe)}function Ve(We){(0,v.m)(We)?We():We.unsubscribe()}},2416:(Zt,Je,W)=>{W.d(Je,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Zt,Je,W)=>{W.d(Je,{z:()=>Pe});var v=W(8189),q=W(3269),De=W(8996);function Pe(...Le){return function x(){return(0,v.J)(1)}()((0,De.D)(Le,(0,q.yG)(Le)))}},515:(Zt,Je,W)=>{W.d(Je,{E:()=>x});const x=new(W(9751).y)(Pe=>Pe.complete())},8996:(Zt,Je,W)=>{W.d(Je,{D:()=>bt});var v=W(8421),x=W(5363),q=W(9468),Le=W(9751),Ve=W(2202),We=W(576),me=W(9672);function Re(at,rt){if(!at)throw new Error("Iterable cannot be null");return new Le.y(Fe=>{(0,me.f)(Fe,rt,()=>{const je=at[Symbol.asyncIterator]();(0,me.f)(Fe,rt,()=>{je.next().then(Ze=>{Ze.done?Fe.complete():Fe.next(Ze.value)})},0,!0)})})}var Tt=W(3670),mt=W(8239),Xe=W(1144),Ut=W(6495),ot=W(2206),Ye=W(4532),Bt=W(3260);function bt(at,rt){return rt?function Ct(at,rt){if(null!=at){if((0,Tt.c)(at))return function De(at,rt){return(0,v.Xf)(at).pipe((0,q.R)(rt),(0,x.Q)(rt))}(at,rt);if((0,Xe.z)(at))return function Ue(at,rt){return new Le.y(Fe=>{let je=0;return rt.schedule(function(){je===at.length?Fe.complete():(Fe.next(at[je++]),Fe.closed||this.schedule())})})}(at,rt);if((0,mt.t)(at))return function Pe(at,rt){return(0,v.Xf)(at).pipe((0,q.R)(rt),(0,x.Q)(rt))}(at,rt);if((0,ot.D)(at))return Re(at,rt);if((0,Ut.T)(at))return function ge(at,rt){return new Le.y(Fe=>{let je;return(0,me.f)(Fe,rt,()=>{je=at[Ve.h](),(0,me.f)(Fe,rt,()=>{let Ze,ke;try{({value:Ze,done:ke}=je.next())}catch(Oe){return void Fe.error(Oe)}ke?Fe.complete():Fe.next(Ze)},0,!0)}),()=>(0,We.m)(je?.return)&&je.return()})}(at,rt);if((0,Bt.L)(at))return function jt(at,rt){return Re((0,Bt.Q)(at),rt)}(at,rt)}throw(0,Ye.z)(at)}(at,rt):(0,v.Xf)(at)}},8421:(Zt,Je,W)=>{W.d(Je,{Xf:()=>Tt});var v=W(655),x=W(1144),q=W(8239),De=W(9751),Pe=W(3670),Le=W(2206),Ue=W(4532),Ve=W(6495),We=W(3260),me=W(576),ge=W(7849),Re=W(8822);function Tt(Ct){if(Ct instanceof De.y)return Ct;if(null!=Ct){if((0,Pe.c)(Ct))return function mt(Ct){return new De.y(bt=>{const at=Ct[Re.L]();if((0,me.m)(at.subscribe))return at.subscribe(bt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ct);if((0,x.z)(Ct))return function Xe(Ct){return new De.y(bt=>{for(let at=0;at<Ct.length&&!bt.closed;at++)bt.next(Ct[at]);bt.complete()})}(Ct);if((0,q.t)(Ct))return function Ut(Ct){return new De.y(bt=>{Ct.then(at=>{bt.closed||(bt.next(at),bt.complete())},at=>bt.error(at)).then(null,ge.h)})}(Ct);if((0,Le.D)(Ct))return Ye(Ct);if((0,Ve.T)(Ct))return function ot(Ct){return new De.y(bt=>{for(const at of Ct)if(bt.next(at),bt.closed)return;bt.complete()})}(Ct);if((0,We.L)(Ct))return function Bt(Ct){return Ye((0,We.Q)(Ct))}(Ct)}throw(0,Ue.z)(Ct)}function Ye(Ct){return new De.y(bt=>{(function jt(Ct,bt){var at,rt,Fe,je;return(0,v.mG)(this,void 0,void 0,function*(){try{for(at=(0,v.KL)(Ct);!(rt=yield at.next()).done;)if(bt.next(rt.value),bt.closed)return}catch(Ze){Fe={error:Ze}}finally{try{rt&&!rt.done&&(je=at.return)&&(yield je.call(at))}finally{if(Fe)throw Fe.error}}bt.complete()})})(Ct,bt).catch(at=>bt.error(at))})}},6451:(Zt,Je,W)=>{W.d(Je,{T:()=>Le});var v=W(8189),x=W(8421),q=W(515),De=W(3269),Pe=W(8996);function Le(...Ue){const Ve=(0,De.yG)(Ue),We=(0,De._6)(Ue,1/0),me=Ue;return me.length?1===me.length?(0,x.Xf)(me[0]):(0,v.J)(We)((0,Pe.D)(me,Ve)):q.E}},9646:(Zt,Je,W)=>{W.d(Je,{of:()=>q});var v=W(3269),x=W(8996);function q(...De){const Pe=(0,v.yG)(De);return(0,x.D)(De,Pe)}},5403:(Zt,Je,W)=>{W.d(Je,{x:()=>x});var v=W(930);function x(De,Pe,Le,Ue,Ve){return new q(De,Pe,Le,Ue,Ve)}class q extends v.Lv{constructor(Pe,Le,Ue,Ve,We,me){super(Pe),this.onFinalize=We,this.shouldUnsubscribe=me,this._next=Le?function(ge){try{Le(ge)}catch(Re){Pe.error(Re)}}:super._next,this._error=Ve?function(ge){try{Ve(ge)}catch(Re){Pe.error(Re)}finally{this.unsubscribe()}}:super._error,this._complete=Ue?function(){try{Ue()}catch(ge){Pe.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Le}=this;super.unsubscribe(),!Le&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},4351:(Zt,Je,W)=>{W.d(Je,{b:()=>q});var v=W(5577),x=W(576);function q(De,Pe){return(0,x.m)(Pe)?(0,v.z)(De,Pe,1):(0,v.z)(De,1)}},6590:(Zt,Je,W)=>{W.d(Je,{d:()=>q});var v=W(4482),x=W(5403);function q(De){return(0,v.e)((Pe,Le)=>{let Ue=!1;Pe.subscribe((0,x.x)(Le,Ve=>{Ue=!0,Le.next(Ve)},()=>{Ue||Le.next(De),Le.complete()}))})}},9300:(Zt,Je,W)=>{W.d(Je,{h:()=>q});var v=W(4482),x=W(5403);function q(De,Pe){return(0,v.e)((Le,Ue)=>{let Ve=0;Le.subscribe((0,x.x)(Ue,We=>De.call(Pe,We,Ve++)&&Ue.next(We)))})}},590:(Zt,Je,W)=>{W.d(Je,{P:()=>Ue});var v=W(6805),x=W(9300),q=W(5698),De=W(6590),Pe=W(8068),Le=W(4671);function Ue(Ve,We){const me=arguments.length>=2;return ge=>ge.pipe(Ve?(0,x.h)((Re,Tt)=>Ve(Re,Tt,ge)):Le.y,(0,q.q)(1),me?(0,De.d)(We):(0,Pe.T)(()=>new v.K))}},4004:(Zt,Je,W)=>{W.d(Je,{U:()=>q});var v=W(4482),x=W(5403);function q(De,Pe){return(0,v.e)((Le,Ue)=>{let Ve=0;Le.subscribe((0,x.x)(Ue,We=>{Ue.next(De.call(Pe,We,Ve++))}))})}},9718:(Zt,Je,W)=>{W.d(Je,{h:()=>x});var v=W(4004);function x(q){return(0,v.U)(()=>q)}},8189:(Zt,Je,W)=>{W.d(Je,{J:()=>q});var v=W(5577),x=W(4671);function q(De=1/0){return(0,v.z)(x.y,De)}},5577:(Zt,Je,W)=>{W.d(Je,{z:()=>Ve});var v=W(4004),x=W(8421),q=W(4482),De=W(9672),Pe=W(5403),Ue=W(576);function Ve(We,me,ge=1/0){return(0,Ue.m)(me)?Ve((Re,Tt)=>(0,v.U)((mt,Xe)=>me(Re,mt,Tt,Xe))((0,x.Xf)(We(Re,Tt))),ge):("number"==typeof me&&(ge=me),(0,q.e)((Re,Tt)=>function Le(We,me,ge,Re,Tt,mt,Xe,Ut){const ot=[];let Ye=0,Bt=0,jt=!1;const Ct=()=>{jt&&!ot.length&&!Ye&&me.complete()},bt=rt=>Ye<Re?at(rt):ot.push(rt),at=rt=>{mt&&me.next(rt),Ye++;let Fe=!1;(0,x.Xf)(ge(rt,Bt++)).subscribe((0,Pe.x)(me,je=>{Tt?.(je),mt?bt(je):me.next(je)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Ye--;ot.length&&Ye<Re;){const je=ot.shift();Xe?(0,De.f)(me,Xe,()=>at(je)):at(je)}Ct()}catch(je){me.error(je)}}))};return We.subscribe((0,Pe.x)(me,bt,()=>{jt=!0,Ct()})),()=>{Ut?.()}}(Re,Tt,We,ge)))}},5363:(Zt,Je,W)=>{W.d(Je,{Q:()=>De});var v=W(9672),x=W(4482),q=W(5403);function De(Pe,Le=0){return(0,x.e)((Ue,Ve)=>{Ue.subscribe((0,q.x)(Ve,We=>(0,v.f)(Ve,Pe,()=>Ve.next(We),Le),()=>(0,v.f)(Ve,Pe,()=>Ve.complete(),Le),We=>(0,v.f)(Ve,Pe,()=>Ve.error(We),Le)))})}},5026:(Zt,Je,W)=>{W.d(Je,{R:()=>De});var v=W(4482),x=W(5403);function q(Pe,Le,Ue,Ve,We){return(me,ge)=>{let Re=Ue,Tt=Le,mt=0;me.subscribe((0,x.x)(ge,Xe=>{const Ut=mt++;Tt=Re?Pe(Tt,Xe,Ut):(Re=!0,Xe),Ve&&ge.next(Tt)},We&&(()=>{Re&&ge.next(Tt),ge.complete()})))}}function De(Pe,Le){return(0,v.e)(q(Pe,Le,arguments.length>=2,!0))}},3099:(Zt,Je,W)=>{W.d(Je,{B:()=>Pe});var v=W(8421),x=W(7579),q=W(930),De=W(4482);function Pe(Ue={}){const{connector:Ve=(()=>new x.x),resetOnError:We=!0,resetOnComplete:me=!0,resetOnRefCountZero:ge=!0}=Ue;return Re=>{let Tt,mt,Xe,Ut=0,ot=!1,Ye=!1;const Bt=()=>{mt?.unsubscribe(),mt=void 0},jt=()=>{Bt(),Tt=Xe=void 0,ot=Ye=!1},Ct=()=>{const bt=Tt;jt(),bt?.unsubscribe()};return(0,De.e)((bt,at)=>{Ut++,!Ye&&!ot&&Bt();const rt=Xe=Xe??Ve();at.add(()=>{Ut--,0===Ut&&!Ye&&!ot&&(mt=Le(Ct,ge))}),rt.subscribe(at),!Tt&&Ut>0&&(Tt=new q.Hp({next:Fe=>rt.next(Fe),error:Fe=>{Ye=!0,Bt(),mt=Le(jt,We,Fe),rt.error(Fe)},complete:()=>{ot=!0,Bt(),mt=Le(jt,me),rt.complete()}}),(0,v.Xf)(bt).subscribe(Tt))})(Re)}}function Le(Ue,Ve,...We){if(!0===Ve)return void Ue();if(!1===Ve)return;const me=new q.Hp({next:()=>{me.unsubscribe(),Ue()}});return Ve(...We).subscribe(me)}},8675:(Zt,Je,W)=>{W.d(Je,{O:()=>De});var v=W(7272),x=W(3269),q=W(4482);function De(...Pe){const Le=(0,x.yG)(Pe);return(0,q.e)((Ue,Ve)=>{(Le?(0,v.z)(Pe,Ue,Le):(0,v.z)(Pe,Ue)).subscribe(Ve)})}},9468:(Zt,Je,W)=>{W.d(Je,{R:()=>x});var v=W(4482);function x(q,De=0){return(0,v.e)((Pe,Le)=>{Le.add(q.schedule(()=>Pe.subscribe(Le),De))})}},3900:(Zt,Je,W)=>{W.d(Je,{w:()=>De});var v=W(8421),x=W(4482),q=W(5403);function De(Pe,Le){return(0,x.e)((Ue,Ve)=>{let We=null,me=0,ge=!1;const Re=()=>ge&&!We&&Ve.complete();Ue.subscribe((0,q.x)(Ve,Tt=>{We?.unsubscribe();let mt=0;const Xe=me++;(0,v.Xf)(Pe(Tt,Xe)).subscribe(We=(0,q.x)(Ve,Ut=>Ve.next(Le?Le(Tt,Ut,Xe,mt++):Ut),()=>{We=null,Re()}))},()=>{ge=!0,Re()}))})}},5698:(Zt,Je,W)=>{W.d(Je,{q:()=>De});var v=W(515),x=W(4482),q=W(5403);function De(Pe){return Pe<=0?()=>v.E:(0,x.e)((Le,Ue)=>{let Ve=0;Le.subscribe((0,q.x)(Ue,We=>{++Ve<=Pe&&(Ue.next(We),Pe<=Ve&&Ue.complete())}))})}},8505:(Zt,Je,W)=>{W.d(Je,{b:()=>Pe});var v=W(576),x=W(4482),q=W(5403),De=W(4671);function Pe(Le,Ue,Ve){const We=(0,v.m)(Le)||Ue||Ve?{next:Le,error:Ue,complete:Ve}:Le;return We?(0,x.e)((me,ge)=>{var Re;null===(Re=We.subscribe)||void 0===Re||Re.call(We);let Tt=!0;me.subscribe((0,q.x)(ge,mt=>{var Xe;null===(Xe=We.next)||void 0===Xe||Xe.call(We,mt),ge.next(mt)},()=>{var mt;Tt=!1,null===(mt=We.complete)||void 0===mt||mt.call(We),ge.complete()},mt=>{var Xe;Tt=!1,null===(Xe=We.error)||void 0===Xe||Xe.call(We,mt),ge.error(mt)},()=>{var mt,Xe;Tt&&(null===(mt=We.unsubscribe)||void 0===mt||mt.call(We)),null===(Xe=We.finalize)||void 0===Xe||Xe.call(We)}))}):De.y}},8068:(Zt,Je,W)=>{W.d(Je,{T:()=>De});var v=W(6805),x=W(4482),q=W(5403);function De(Le=Pe){return(0,x.e)((Ue,Ve)=>{let We=!1;Ue.subscribe((0,q.x)(Ve,me=>{We=!0,Ve.next(me)},()=>We?Ve.complete():Ve.error(Le())))})}function Pe(){return new v.K}},4408:(Zt,Je,W)=>{W.d(Je,{o:()=>Pe});var v=W(727);class x extends v.w0{constructor(Ue,Ve){super()}schedule(Ue,Ve=0){return this}}const q={setInterval(Le,Ue,...Ve){const{delegate:We}=q;return We?.setInterval?We.setInterval(Le,Ue,...Ve):setInterval(Le,Ue,...Ve)},clearInterval(Le){const{delegate:Ue}=q;return(Ue?.clearInterval||clearInterval)(Le)},delegate:void 0};var De=W(8737);class Pe extends x{constructor(Ue,Ve){super(Ue,Ve),this.scheduler=Ue,this.work=Ve,this.pending=!1}schedule(Ue,Ve=0){if(this.closed)return this;this.state=Ue;const We=this.id,me=this.scheduler;return null!=We&&(this.id=this.recycleAsyncId(me,We,Ve)),this.pending=!0,this.delay=Ve,this.id=this.id||this.requestAsyncId(me,this.id,Ve),this}requestAsyncId(Ue,Ve,We=0){return q.setInterval(Ue.flush.bind(Ue,this),We)}recycleAsyncId(Ue,Ve,We=0){if(null!=We&&this.delay===We&&!1===this.pending)return Ve;q.clearInterval(Ve)}execute(Ue,Ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const We=this._execute(Ue,Ve);if(We)return We;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ue,Ve){let me,We=!1;try{this.work(Ue)}catch(ge){We=!0,me=ge||new Error("Scheduled action threw falsy error")}if(We)return this.unsubscribe(),me}unsubscribe(){if(!this.closed){const{id:Ue,scheduler:Ve}=this,{actions:We}=Ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,De.P)(We,this),null!=Ue&&(this.id=this.recycleAsyncId(Ve,Ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Zt,Je,W)=>{W.d(Je,{v:()=>q});var v=W(6063);class x{constructor(Pe,Le=x.now){this.schedulerActionCtor=Pe,this.now=Le}schedule(Pe,Le=0,Ue){return new this.schedulerActionCtor(this,Pe).schedule(Ue,Le)}}x.now=v.l.now;class q extends x{constructor(Pe,Le=x.now){super(Pe,Le),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Pe){const{actions:Le}=this;if(this._active)return void Le.push(Pe);let Ue;this._active=!0;do{if(Ue=Pe.execute(Pe.state,Pe.delay))break}while(Pe=Le.shift());if(this._active=!1,Ue){for(;Pe=Le.shift();)Pe.unsubscribe();throw Ue}}}},4986:(Zt,Je,W)=>{W.d(Je,{P:()=>De,z:()=>q});var v=W(4408);const q=new(W(7565).v)(v.o),De=q},6063:(Zt,Je,W)=>{W.d(Je,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},3410:(Zt,Je,W)=>{W.d(Je,{z:()=>v});const v={setTimeout(x,q,...De){const{delegate:Pe}=v;return Pe?.setTimeout?Pe.setTimeout(x,q,...De):setTimeout(x,q,...De)},clearTimeout(x){const{delegate:q}=v;return(q?.clearTimeout||clearTimeout)(x)},delegate:void 0}},2202:(Zt,Je,W)=>{W.d(Je,{h:()=>x});const x=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Zt,Je,W)=>{W.d(Je,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Zt,Je,W)=>{W.d(Je,{K:()=>x});const x=(0,W(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Zt,Je,W)=>{W.d(Je,{_6:()=>Le,jO:()=>De,yG:()=>Pe});var v=W(576),x=W(3532);function q(Ue){return Ue[Ue.length-1]}function De(Ue){return(0,v.m)(q(Ue))?Ue.pop():void 0}function Pe(Ue){return(0,x.K)(q(Ue))?Ue.pop():void 0}function Le(Ue,Ve){return"number"==typeof q(Ue)?Ue.pop():Ve}},4742:(Zt,Je,W)=>{W.d(Je,{D:()=>Pe});const{isArray:v}=Array,{getPrototypeOf:x,prototype:q,keys:De}=Object;function Pe(Ue){if(1===Ue.length){const Ve=Ue[0];if(v(Ve))return{args:Ve,keys:null};if(function Le(Ue){return Ue&&"object"==typeof Ue&&x(Ue)===q}(Ve)){const We=De(Ve);return{args:We.map(me=>Ve[me]),keys:We}}}return{args:Ue,keys:null}}},8737:(Zt,Je,W)=>{function v(x,q){if(x){const De=x.indexOf(q);0<=De&&x.splice(De,1)}}W.d(Je,{P:()=>v})},3888:(Zt,Je,W)=>{function v(x){const De=x(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return De.prototype=Object.create(Error.prototype),De.prototype.constructor=De,De}W.d(Je,{d:()=>v})},1810:(Zt,Je,W)=>{function v(x,q){return x.reduce((De,Pe,Le)=>(De[Pe]=q[Le],De),{})}W.d(Je,{n:()=>v})},2806:(Zt,Je,W)=>{W.d(Je,{O:()=>De,x:()=>q});var v=W(2416);let x=null;function q(Pe){if(v.v.useDeprecatedSynchronousErrorHandling){const Le=!x;if(Le&&(x={errorThrown:!1,error:null}),Pe(),Le){const{errorThrown:Ue,error:Ve}=x;if(x=null,Ue)throw Ve}}else Pe()}function De(Pe){v.v.useDeprecatedSynchronousErrorHandling&&x&&(x.errorThrown=!0,x.error=Pe)}},9672:(Zt,Je,W)=>{function v(x,q,De,Pe=0,Le=!1){const Ue=q.schedule(function(){De(),Le?x.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(x.add(Ue),!Le)return Ue}W.d(Je,{f:()=>v})},4671:(Zt,Je,W)=>{function v(x){return x}W.d(Je,{y:()=>v})},1144:(Zt,Je,W)=>{W.d(Je,{z:()=>v});const v=x=>x&&"number"==typeof x.length&&"function"!=typeof x},2206:(Zt,Je,W)=>{W.d(Je,{D:()=>x});var v=W(576);function x(q){return Symbol.asyncIterator&&(0,v.m)(q?.[Symbol.asyncIterator])}},576:(Zt,Je,W)=>{function v(x){return"function"==typeof x}W.d(Je,{m:()=>v})},3670:(Zt,Je,W)=>{W.d(Je,{c:()=>q});var v=W(8822),x=W(576);function q(De){return(0,x.m)(De[v.L])}},6495:(Zt,Je,W)=>{W.d(Je,{T:()=>q});var v=W(2202),x=W(576);function q(De){return(0,x.m)(De?.[v.h])}},8239:(Zt,Je,W)=>{W.d(Je,{t:()=>x});var v=W(576);function x(q){return(0,v.m)(q?.then)}},3260:(Zt,Je,W)=>{W.d(Je,{L:()=>De,Q:()=>q});var v=W(655),x=W(576);function q(Pe){return(0,v.FC)(this,arguments,function*(){const Ue=Pe.getReader();try{for(;;){const{value:Ve,done:We}=yield(0,v.qq)(Ue.read());if(We)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(Ve)}}finally{Ue.releaseLock()}})}function De(Pe){return(0,x.m)(Pe?.getReader)}},3532:(Zt,Je,W)=>{W.d(Je,{K:()=>x});var v=W(576);function x(q){return q&&(0,v.m)(q.schedule)}},4482:(Zt,Je,W)=>{W.d(Je,{A:()=>x,e:()=>q});var v=W(576);function x(De){return(0,v.m)(De?.lift)}function q(De){return Pe=>{if(x(Pe))return Pe.lift(function(Le){try{return De(Le,this)}catch(Ue){this.error(Ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Zt,Je,W)=>{W.d(Je,{Z:()=>De});var v=W(4004);const{isArray:x}=Array;function De(Pe){return(0,v.U)(Le=>function q(Pe,Le){return x(Le)?Pe(...Le):Pe(Le)}(Pe,Le))}},5032:(Zt,Je,W)=>{function v(){}W.d(Je,{Z:()=>v})},9635:(Zt,Je,W)=>{W.d(Je,{U:()=>q,z:()=>x});var v=W(4671);function x(...De){return q(De)}function q(De){return 0===De.length?v.y:1===De.length?De[0]:function(Le){return De.reduce((Ue,Ve)=>Ve(Ue),Le)}}},7849:(Zt,Je,W)=>{W.d(Je,{h:()=>q});var v=W(2416),x=W(3410);function q(De){x.z.setTimeout(()=>{const{onUnhandledError:Pe}=v.v;if(!Pe)throw De;Pe(De)})}},4532:(Zt,Je,W)=>{function v(x){return new TypeError(`You provided ${null!==x&&"object"==typeof x?"an invalid object":`'${x}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(Je,{z:()=>v})},655:(Zt,Je,W)=>{function De(ke,Oe){var qe={};for(var He in ke)Object.prototype.hasOwnProperty.call(ke,He)&&Oe.indexOf(He)<0&&(qe[He]=ke[He]);if(null!=ke&&"function"==typeof Object.getOwnPropertySymbols){var Dt=0;for(He=Object.getOwnPropertySymbols(ke);Dt<He.length;Dt++)Oe.indexOf(He[Dt])<0&&Object.prototype.propertyIsEnumerable.call(ke,He[Dt])&&(qe[He[Dt]]=ke[He[Dt]])}return qe}function Ve(ke,Oe,qe,He){return new(qe||(qe=Promise))(function(xt,en){function Hn(ln){try{Pt(He.next(ln))}catch(er){en(er)}}function zn(ln){try{Pt(He.throw(ln))}catch(er){en(er)}}function Pt(ln){ln.done?xt(ln.value):function Dt(xt){return xt instanceof qe?xt:new qe(function(en){en(xt)})}(ln.value).then(Hn,zn)}Pt((He=He.apply(ke,Oe||[])).next())})}function ot(ke){return this instanceof ot?(this.v=ke,this):new ot(ke)}function Ye(ke,Oe,qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Dt,He=qe.apply(ke,Oe||[]),xt=[];return Dt={},en("next"),en("throw"),en("return"),Dt[Symbol.asyncIterator]=function(){return this},Dt;function en($n){He[$n]&&(Dt[$n]=function(Qn){return new Promise(function(wn,Dn){xt.push([$n,Qn,wn,Dn])>1||Hn($n,Qn)})})}function Hn($n,Qn){try{!function zn($n){$n.value instanceof ot?Promise.resolve($n.value.v).then(Pt,ln):er(xt[0][2],$n)}(He[$n](Qn))}catch(wn){er(xt[0][3],wn)}}function Pt($n){Hn("next",$n)}function ln($n){Hn("throw",$n)}function er($n,Qn){$n(Qn),xt.shift(),xt.length&&Hn(xt[0][0],xt[0][1])}}function jt(ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,Oe=ke[Symbol.asyncIterator];return Oe?Oe.call(ke):(ke=function Re(ke){var Oe="function"==typeof Symbol&&Symbol.iterator,qe=Oe&&ke[Oe],He=0;if(qe)return qe.call(ke);if(ke&&"number"==typeof ke.length)return{next:function(){return ke&&He>=ke.length&&(ke=void 0),{value:ke&&ke[He++],done:!ke}}};throw new TypeError(Oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ke),qe={},He("next"),He("throw"),He("return"),qe[Symbol.asyncIterator]=function(){return this},qe);function He(xt){qe[xt]=ke[xt]&&function(en){return new Promise(function(Hn,zn){!function Dt(xt,en,Hn,zn){Promise.resolve(zn).then(function(Pt){xt({value:Pt,done:Hn})},en)}(Hn,zn,(en=ke[xt](en)).done,en.value)})}}}W.d(Je,{FC:()=>Ye,KL:()=>jt,_T:()=>De,mG:()=>Ve,qq:()=>ot})},6895:(Zt,Je,W)=>{W.d(Je,{Do:()=>jt,EM:()=>Ns,HT:()=>Pe,JF:()=>li,K0:()=>Ue,Mx:()=>ya,O5:()=>Br,PM:()=>ea,S$:()=>ot,V_:()=>me,Ye:()=>Ct,b0:()=>Bt,bD:()=>Vr,ez:()=>Xo,mk:()=>io,q:()=>q,sg:()=>Ri,w_:()=>Le});var v=W(4650);let x=null;function q(){return x}function Pe(z){x||(x=z)}class Le{}const Ue=new v.OlP("DocumentToken");let Ve=(()=>{class z{historyGo(V){throw new Error("Not implemented")}}return z.\u0275fac=function(V){return new(V||z)},z.\u0275prov=v.Yz7({token:z,factory:function(){return function We(){return(0,v.LFG)(ge)}()},providedIn:"platform"}),z})();const me=new v.OlP("Location Initialized");let ge=(()=>{class z extends Ve{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(V){const te=q().getGlobalEventTarget(this._doc,"window");return te.addEventListener("popstate",V,!1),()=>te.removeEventListener("popstate",V)}onHashChange(V){const te=q().getGlobalEventTarget(this._doc,"window");return te.addEventListener("hashchange",V,!1),()=>te.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,te,Se){Re()?this._history.pushState(V,te,Se):this.location.hash=Se}replaceState(V,te,Se){Re()?this._history.replaceState(V,te,Se):this.location.hash=Se}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return z.\u0275fac=function(V){return new(V||z)(v.LFG(Ue))},z.\u0275prov=v.Yz7({token:z,factory:function(){return function Tt(){return new ge((0,v.LFG)(Ue))}()},providedIn:"platform"}),z})();function Re(){return!!window.history.pushState}function mt(z,J){if(0==z.length)return J;if(0==J.length)return z;let V=0;return z.endsWith("/")&&V++,J.startsWith("/")&&V++,2==V?z+J.substring(1):1==V?z+J:z+"/"+J}function Xe(z){const J=z.match(/#|\?|$/),V=J&&J.index||z.length;return z.slice(0,V-("/"===z[V-1]?1:0))+z.slice(V)}function Ut(z){return z&&"?"!==z[0]?"?"+z:z}let ot=(()=>{class z{historyGo(V){throw new Error("Not implemented")}}return z.\u0275fac=function(V){return new(V||z)},z.\u0275prov=v.Yz7({token:z,factory:function(){return(0,v.f3M)(Bt)},providedIn:"root"}),z})();const Ye=new v.OlP("appBaseHref");let Bt=(()=>{class z extends ot{constructor(V,te){super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=te??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return mt(this._baseHref,V)}path(V=!1){const te=this._platformLocation.pathname+Ut(this._platformLocation.search),Se=this._platformLocation.hash;return Se&&V?`${te}${Se}`:te}pushState(V,te,Se,ct){const Qe=this.prepareExternalUrl(Se+Ut(ct));this._platformLocation.pushState(V,te,Qe)}replaceState(V,te,Se,ct){const Qe=this.prepareExternalUrl(Se+Ut(ct));this._platformLocation.replaceState(V,te,Qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return z.\u0275fac=function(V){return new(V||z)(v.LFG(Ve),v.LFG(Ye,8))},z.\u0275prov=v.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})(),jt=(()=>{class z extends ot{constructor(V,te){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=te&&(this._baseHref=te)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let te=this._platformLocation.hash;return null==te&&(te="#"),te.length>0?te.substring(1):te}prepareExternalUrl(V){const te=mt(this._baseHref,V);return te.length>0?"#"+te:te}pushState(V,te,Se,ct){let Qe=this.prepareExternalUrl(Se+Ut(ct));0==Qe.length&&(Qe=this._platformLocation.pathname),this._platformLocation.pushState(V,te,Qe)}replaceState(V,te,Se,ct){let Qe=this.prepareExternalUrl(Se+Ut(ct));0==Qe.length&&(Qe=this._platformLocation.pathname),this._platformLocation.replaceState(V,te,Qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return z.\u0275fac=function(V){return new(V||z)(v.LFG(Ve),v.LFG(Ye,8))},z.\u0275prov=v.Yz7({token:z,factory:z.\u0275fac}),z})(),Ct=(()=>{class z{constructor(V){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const te=this._locationStrategy.getBaseHref();this._baseHref=Xe(rt(te)),this._locationStrategy.onPopState(Se=>{this._subject.emit({url:this.path(!0),pop:!0,state:Se.state,type:Se.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,te=""){return this.path()==this.normalize(V+Ut(te))}normalize(V){return z.stripTrailingSlash(function at(z,J){return z&&J.startsWith(z)?J.substring(z.length):J}(this._baseHref,rt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,te="",Se=null){this._locationStrategy.pushState(Se,"",V,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ut(te)),Se)}replaceState(V,te="",Se=null){this._locationStrategy.replaceState(Se,"",V,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ut(te)),Se)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){this._locationStrategy.historyGo?.(V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(te=>{this._notifyUrlChangeListeners(te.url,te.state)})),()=>{const te=this._urlChangeListeners.indexOf(V);this._urlChangeListeners.splice(te,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",te){this._urlChangeListeners.forEach(Se=>Se(V,te))}subscribe(V,te,Se){return this._subject.subscribe({next:V,error:te,complete:Se})}}return z.normalizeQueryParams=Ut,z.joinWithSlash=mt,z.stripTrailingSlash=Xe,z.\u0275fac=function(V){return new(V||z)(v.LFG(ot))},z.\u0275prov=v.Yz7({token:z,factory:function(){return function bt(){return new Ct((0,v.LFG)(ot))}()},providedIn:"root"}),z})();function rt(z){return z.replace(/\/index.html$/,"")}function ya(z,J){J=encodeURIComponent(J);for(const V of z.split(";")){const te=V.indexOf("="),[Se,ct]=-1==te?[V,""]:[V.slice(0,te),V.slice(te+1)];if(Se.trim()===J)return decodeURIComponent(ct)}return null}let io=(()=>{class z{constructor(V,te,Se,ct){this._iterableDiffers=V,this._keyValueDiffers=te,this._ngEl=Se,this._renderer=ct,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(V){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof V?V.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(V){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof V?V.split(/\s+/):V,this._rawClass&&((0,v.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const V=this._iterableDiffer.diff(this._rawClass);V&&this._applyIterableChanges(V)}else if(this._keyValueDiffer){const V=this._keyValueDiffer.diff(this._rawClass);V&&this._applyKeyValueChanges(V)}}_applyKeyValueChanges(V){V.forEachAddedItem(te=>this._toggleClass(te.key,te.currentValue)),V.forEachChangedItem(te=>this._toggleClass(te.key,te.currentValue)),V.forEachRemovedItem(te=>{te.previousValue&&this._toggleClass(te.key,!1)})}_applyIterableChanges(V){V.forEachAddedItem(te=>{if("string"!=typeof te.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,v.AaK)(te.item)}`);this._toggleClass(te.item,!0)}),V.forEachRemovedItem(te=>this._toggleClass(te.item,!1))}_applyClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(te=>this._toggleClass(te,!0)):Object.keys(V).forEach(te=>this._toggleClass(te,!!V[te])))}_removeClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(te=>this._toggleClass(te,!1)):Object.keys(V).forEach(te=>this._toggleClass(te,!1)))}_toggleClass(V,te){(V=V.trim())&&V.split(/\s+/g).forEach(Se=>{te?this._renderer.addClass(this._ngEl.nativeElement,Se):this._renderer.removeClass(this._ngEl.nativeElement,Se)})}}return z.\u0275fac=function(V){return new(V||z)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))},z.\u0275dir=v.lG2({type:z,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),z})();class _s{constructor(J,V,te,Se){this.$implicit=J,this.ngForOf=V,this.index=te,this.count=Se}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ri=(()=>{class z{constructor(V,te,Se){this._viewContainer=V,this._template=te,this._differs=Se,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const te=this._viewContainer;V.forEachOperation((Se,ct,Qe)=>{if(null==Se.previousIndex)te.createEmbeddedView(this._template,new _s(Se.item,this._ngForOf,-1,-1),null===Qe?void 0:Qe);else if(null==Qe)te.remove(null===ct?void 0:ct);else if(null!==ct){const Gt=te.get(ct);te.move(Gt,Qe),Xr(Gt,Se)}});for(let Se=0,ct=te.length;Se<ct;Se++){const Gt=te.get(Se).context;Gt.index=Se,Gt.count=ct,Gt.ngForOf=this._ngForOf}V.forEachIdentityChange(Se=>{Xr(te.get(Se.currentIndex),Se)})}static ngTemplateContextGuard(V,te){return!0}}return z.\u0275fac=function(V){return new(V||z)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},z.\u0275dir=v.lG2({type:z,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),z})();function Xr(z,J){z.context.$implicit=J.item}let Br=(()=>{class z{constructor(V,te){this._viewContainer=V,this._context=new hi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=te}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Gi("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Gi("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,te){return!0}}return z.\u0275fac=function(V){return new(V||z)(v.Y36(v.s_b),v.Y36(v.Rgc))},z.\u0275dir=v.lG2({type:z,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),z})();class hi{constructor(){this.$implicit=null,this.ngIf=null}}function Gi(z,J){if(J&&!J.createEmbeddedView)throw new Error(`${z} must be a TemplateRef, but received '${(0,v.AaK)(J)}'.`)}let Xo=(()=>{class z{}return z.\u0275fac=function(V){return new(V||z)},z.\u0275mod=v.oAB({type:z}),z.\u0275inj=v.cJS({}),z})();const Vr="browser";function ea(z){return"server"===z}let Ns=(()=>{class z{}return z.\u0275prov=(0,v.Yz7)({token:z,providedIn:"root",factory:()=>new Li((0,v.LFG)(Ue),window)}),z})();class Li{constructor(J,V){this.document=J,this.window=V,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const V=function Yi(z,J){const V=z.getElementById(J)||z.getElementsByName(J)[0];if(V)return V;if("function"==typeof z.createTreeWalker&&z.body&&(z.body.createShadowRoot||z.body.attachShadow)){const te=z.createTreeWalker(z.body,NodeFilter.SHOW_ELEMENT);let Se=te.currentNode;for(;Se;){const ct=Se.shadowRoot;if(ct){const Qe=ct.getElementById(J)||ct.querySelector(`[name="${J}"]`);if(Qe)return Qe}Se=te.nextNode()}}return null}(this.document,J);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=J)}}scrollToElement(J){const V=J.getBoundingClientRect(),te=V.left+this.window.pageXOffset,Se=V.top+this.window.pageYOffset,ct=this.offset();this.window.scrollTo(te-ct[0],Se-ct[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=Fi(this.window.history)||Fi(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Fi(z){return Object.getOwnPropertyDescriptor(z,"scrollRestoration")}class li{}},529:(Zt,Je,W)=>{W.d(Je,{JF:()=>$r,eN:()=>xt});var v=W(6895),x=W(4650),q=W(9646),De=W(9751),Pe=W(4351),Le=W(9300),Ue=W(4004);class Ve{}class We{}class me{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(le=>{const $e=le.indexOf(":");if($e>0){const vt=le.slice(0,$e),nn=vt.toLowerCase(),Sn=le.slice($e+1).trim();this.maybeSetNormalizedName(vt,nn),this.headers.has(nn)?this.headers.get(nn).push(Sn):this.headers.set(nn,[Sn])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(le=>{let $e=ye[le];const vt=le.toLowerCase();"string"==typeof $e&&($e=[$e]),$e.length>0&&(this.headers.set(vt,$e),this.maybeSetNormalizedName(le,vt))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const le=this.headers.get(ye.toLowerCase());return le&&le.length>0?le[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,le){return this.clone({name:ye,value:le,op:"a"})}set(ye,le){return this.clone({name:ye,value:le,op:"s"})}delete(ye,le){return this.clone({name:ye,value:le,op:"d"})}maybeSetNormalizedName(ye,le){this.normalizedNames.has(le)||this.normalizedNames.set(le,ye)}init(){this.lazyInit&&(this.lazyInit instanceof me?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(le=>{this.headers.set(le,ye.headers.get(le)),this.normalizedNames.set(le,ye.normalizedNames.get(le))})}clone(ye){const le=new me;return le.lazyInit=this.lazyInit&&this.lazyInit instanceof me?this.lazyInit:this,le.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),le}applyUpdate(ye){const le=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let $e=ye.value;if("string"==typeof $e&&($e=[$e]),0===$e.length)return;this.maybeSetNormalizedName(ye.name,le);const vt=("a"===ye.op?this.headers.get(le):void 0)||[];vt.push(...$e),this.headers.set(le,vt);break;case"d":const nn=ye.value;if(nn){let Sn=this.headers.get(le);if(!Sn)return;Sn=Sn.filter(Qt=>-1===nn.indexOf(Qt)),0===Sn.length?(this.headers.delete(le),this.normalizedNames.delete(le)):this.headers.set(le,Sn)}else this.headers.delete(le),this.normalizedNames.delete(le)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(le=>ye(this.normalizedNames.get(le),this.headers.get(le)))}}class Re{encodeKey(ye){return Ut(ye)}encodeValue(ye){return Ut(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const mt=/%(\d[a-f0-9])/gi,Xe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ut(dt){return encodeURIComponent(dt).replace(mt,(ye,le)=>Xe[le]??ye)}function ot(dt){return`${dt}`}class Ye{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new Re,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Tt(dt,ye){const le=new Map;return dt.length>0&&dt.replace(/^\?/,"").split("&").forEach(vt=>{const nn=vt.indexOf("="),[Sn,Qt]=-1==nn?[ye.decodeKey(vt),""]:[ye.decodeKey(vt.slice(0,nn)),ye.decodeValue(vt.slice(nn+1))],dn=le.get(Sn)||[];dn.push(Qt),le.set(Sn,dn)}),le}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(le=>{const $e=ye.fromObject[le],vt=Array.isArray($e)?$e.map(ot):[ot($e)];this.map.set(le,vt)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const le=this.map.get(ye);return le?le[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,le){return this.clone({param:ye,value:le,op:"a"})}appendAll(ye){const le=[];return Object.keys(ye).forEach($e=>{const vt=ye[$e];Array.isArray(vt)?vt.forEach(nn=>{le.push({param:$e,value:nn,op:"a"})}):le.push({param:$e,value:vt,op:"a"})}),this.clone(le)}set(ye,le){return this.clone({param:ye,value:le,op:"s"})}delete(ye,le){return this.clone({param:ye,value:le,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const le=this.encoder.encodeKey(ye);return this.map.get(ye).map($e=>le+"="+this.encoder.encodeValue($e)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const le=new Ye({encoder:this.encoder});return le.cloneFrom=this.cloneFrom||this,le.updates=(this.updates||[]).concat(ye),le}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const le=("a"===ye.op?this.map.get(ye.param):void 0)||[];le.push(ot(ye.value)),this.map.set(ye.param,le);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let $e=this.map.get(ye.param)||[];const vt=$e.indexOf(ot(ye.value));-1!==vt&&$e.splice(vt,1),$e.length>0?this.map.set(ye.param,$e):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class jt{constructor(){this.map=new Map}set(ye,le){return this.map.set(ye,le),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function bt(dt){return typeof ArrayBuffer<"u"&&dt instanceof ArrayBuffer}function at(dt){return typeof Blob<"u"&&dt instanceof Blob}function rt(dt){return typeof FormData<"u"&&dt instanceof FormData}class je{constructor(ye,le,$e,vt){let nn;if(this.url=le,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function Ct(dt){switch(dt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||vt?(this.body=void 0!==$e?$e:null,nn=vt):nn=$e,nn&&(this.reportProgress=!!nn.reportProgress,this.withCredentials=!!nn.withCredentials,nn.responseType&&(this.responseType=nn.responseType),nn.headers&&(this.headers=nn.headers),nn.context&&(this.context=nn.context),nn.params&&(this.params=nn.params)),this.headers||(this.headers=new me),this.context||(this.context=new jt),this.params){const Sn=this.params.toString();if(0===Sn.length)this.urlWithParams=le;else{const Qt=le.indexOf("?");this.urlWithParams=le+(-1===Qt?"?":Qt<le.length-1?"&":"")+Sn}}else this.params=new Ye,this.urlWithParams=le}serializeBody(){return null===this.body?null:bt(this.body)||at(this.body)||rt(this.body)||function Fe(dt){return typeof URLSearchParams<"u"&&dt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ye?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rt(this.body)?null:at(this.body)?this.body.type||null:bt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ye?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const le=ye.method||this.method,$e=ye.url||this.url,vt=ye.responseType||this.responseType,nn=void 0!==ye.body?ye.body:this.body,Sn=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,Qt=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let dn=ye.headers||this.headers,cr=ye.params||this.params;const En=ye.context??this.context;return void 0!==ye.setHeaders&&(dn=Object.keys(ye.setHeaders).reduce((xr,on)=>xr.set(on,ye.setHeaders[on]),dn)),ye.setParams&&(cr=Object.keys(ye.setParams).reduce((xr,on)=>xr.set(on,ye.setParams[on]),cr)),new je(le,$e,nn,{params:cr,headers:dn,context:En,reportProgress:Qt,responseType:vt,withCredentials:Sn})}}var Ze=(()=>((Ze=Ze||{})[Ze.Sent=0]="Sent",Ze[Ze.UploadProgress=1]="UploadProgress",Ze[Ze.ResponseHeader=2]="ResponseHeader",Ze[Ze.DownloadProgress=3]="DownloadProgress",Ze[Ze.Response=4]="Response",Ze[Ze.User=5]="User",Ze))();class ke{constructor(ye,le=200,$e="OK"){this.headers=ye.headers||new me,this.status=void 0!==ye.status?ye.status:le,this.statusText=ye.statusText||$e,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class Oe extends ke{constructor(ye={}){super(ye),this.type=Ze.ResponseHeader}clone(ye={}){return new Oe({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class qe extends ke{constructor(ye={}){super(ye),this.type=Ze.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new qe({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class He extends ke{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}function Dt(dt,ye){return{body:ye,headers:dt.headers,context:dt.context,observe:dt.observe,params:dt.params,reportProgress:dt.reportProgress,responseType:dt.responseType,withCredentials:dt.withCredentials}}let xt=(()=>{class dt{constructor(le){this.handler=le}request(le,$e,vt={}){let nn;if(le instanceof je)nn=le;else{let dn,cr;dn=vt.headers instanceof me?vt.headers:new me(vt.headers),vt.params&&(cr=vt.params instanceof Ye?vt.params:new Ye({fromObject:vt.params})),nn=new je(le,$e,void 0!==vt.body?vt.body:null,{headers:dn,context:vt.context,params:cr,reportProgress:vt.reportProgress,responseType:vt.responseType||"json",withCredentials:vt.withCredentials})}const Sn=(0,q.of)(nn).pipe((0,Pe.b)(dn=>this.handler.handle(dn)));if(le instanceof je||"events"===vt.observe)return Sn;const Qt=Sn.pipe((0,Le.h)(dn=>dn instanceof qe));switch(vt.observe||"body"){case"body":switch(nn.responseType){case"arraybuffer":return Qt.pipe((0,Ue.U)(dn=>{if(null!==dn.body&&!(dn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return dn.body}));case"blob":return Qt.pipe((0,Ue.U)(dn=>{if(null!==dn.body&&!(dn.body instanceof Blob))throw new Error("Response is not a Blob.");return dn.body}));case"text":return Qt.pipe((0,Ue.U)(dn=>{if(null!==dn.body&&"string"!=typeof dn.body)throw new Error("Response is not a string.");return dn.body}));default:return Qt.pipe((0,Ue.U)(dn=>dn.body))}case"response":return Qt;default:throw new Error(`Unreachable: unhandled observe type ${vt.observe}}`)}}delete(le,$e={}){return this.request("DELETE",le,$e)}get(le,$e={}){return this.request("GET",le,$e)}head(le,$e={}){return this.request("HEAD",le,$e)}jsonp(le,$e){return this.request("JSONP",le,{params:(new Ye).append($e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(le,$e={}){return this.request("OPTIONS",le,$e)}patch(le,$e,vt={}){return this.request("PATCH",le,Dt(vt,$e))}post(le,$e,vt={}){return this.request("POST",le,Dt(vt,$e))}put(le,$e,vt={}){return this.request("PUT",le,Dt(vt,$e))}}return dt.\u0275fac=function(le){return new(le||dt)(x.LFG(Ve))},dt.\u0275prov=x.Yz7({token:dt,factory:dt.\u0275fac}),dt})();class en{constructor(ye,le){this.next=ye,this.interceptor=le}handle(ye){return this.interceptor.intercept(ye,this.next)}}const Hn=new x.OlP("HTTP_INTERCEPTORS");let zn=(()=>{class dt{intercept(le,$e){return $e.handle(le)}}return dt.\u0275fac=function(le){return new(le||dt)},dt.\u0275prov=x.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const Lr=/^\)\]\}',?\n/;let ei=(()=>{class dt{constructor(le){this.xhrFactory=le}handle(le){if("JSONP"===le.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new De.y($e=>{const vt=this.xhrFactory.build();if(vt.open(le.method,le.urlWithParams),le.withCredentials&&(vt.withCredentials=!0),le.headers.forEach((ue,pe)=>vt.setRequestHeader(ue,pe.join(","))),le.headers.has("Accept")||vt.setRequestHeader("Accept","application/json, text/plain, */*"),!le.headers.has("Content-Type")){const ue=le.detectContentTypeHeader();null!==ue&&vt.setRequestHeader("Content-Type",ue)}if(le.responseType){const ue=le.responseType.toLowerCase();vt.responseType="json"!==ue?ue:"text"}const nn=le.serializeBody();let Sn=null;const Qt=()=>{if(null!==Sn)return Sn;const ue=vt.statusText||"OK",pe=new me(vt.getAllResponseHeaders()),he=function fr(dt){return"responseURL"in dt&&dt.responseURL?dt.responseURL:/^X-Request-URL:/m.test(dt.getAllResponseHeaders())?dt.getResponseHeader("X-Request-URL"):null}(vt)||le.url;return Sn=new Oe({headers:pe,status:vt.status,statusText:ue,url:he}),Sn},dn=()=>{let{headers:ue,status:pe,statusText:he,url:Ce}=Qt(),_e=null;204!==pe&&(_e=typeof vt.response>"u"?vt.responseText:vt.response),0===pe&&(pe=_e?200:0);let gt=pe>=200&&pe<300;if("json"===le.responseType&&"string"==typeof _e){const kt=_e;_e=_e.replace(Lr,"");try{_e=""!==_e?JSON.parse(_e):null}catch(hn){_e=kt,gt&&(gt=!1,_e={error:hn,text:_e})}}gt?($e.next(new qe({body:_e,headers:ue,status:pe,statusText:he,url:Ce||void 0})),$e.complete()):$e.error(new He({error:_e,headers:ue,status:pe,statusText:he,url:Ce||void 0}))},cr=ue=>{const{url:pe}=Qt(),he=new He({error:ue,status:vt.status||0,statusText:vt.statusText||"Unknown Error",url:pe||void 0});$e.error(he)};let En=!1;const xr=ue=>{En||($e.next(Qt()),En=!0);let pe={type:Ze.DownloadProgress,loaded:ue.loaded};ue.lengthComputable&&(pe.total=ue.total),"text"===le.responseType&&!!vt.responseText&&(pe.partialText=vt.responseText),$e.next(pe)},on=ue=>{let pe={type:Ze.UploadProgress,loaded:ue.loaded};ue.lengthComputable&&(pe.total=ue.total),$e.next(pe)};return vt.addEventListener("load",dn),vt.addEventListener("error",cr),vt.addEventListener("timeout",cr),vt.addEventListener("abort",cr),le.reportProgress&&(vt.addEventListener("progress",xr),null!==nn&&vt.upload&&vt.upload.addEventListener("progress",on)),vt.send(nn),$e.next({type:Ze.Sent}),()=>{vt.removeEventListener("error",cr),vt.removeEventListener("abort",cr),vt.removeEventListener("load",dn),vt.removeEventListener("timeout",cr),le.reportProgress&&(vt.removeEventListener("progress",xr),null!==nn&&vt.upload&&vt.upload.removeEventListener("progress",on)),vt.readyState!==vt.DONE&&vt.abort()}})}}return dt.\u0275fac=function(le){return new(le||dt)(x.LFG(v.JF))},dt.\u0275prov=x.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const Yr=new x.OlP("XSRF_COOKIE_NAME"),fn=new x.OlP("XSRF_HEADER_NAME");class yr{}let Fr=(()=>{class dt{constructor(le,$e,vt){this.doc=le,this.platform=$e,this.cookieName=vt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const le=this.doc.cookie||"";return le!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,v.Mx)(le,this.cookieName),this.lastCookieString=le),this.lastToken}}return dt.\u0275fac=function(le){return new(le||dt)(x.LFG(v.K0),x.LFG(x.Lbi),x.LFG(Yr))},dt.\u0275prov=x.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),tn=(()=>{class dt{constructor(le,$e){this.tokenService=le,this.headerName=$e}intercept(le,$e){const vt=le.url.toLowerCase();if("GET"===le.method||"HEAD"===le.method||vt.startsWith("http://")||vt.startsWith("https://"))return $e.handle(le);const nn=this.tokenService.getToken();return null!==nn&&!le.headers.has(this.headerName)&&(le=le.clone({headers:le.headers.set(this.headerName,nn)})),$e.handle(le)}}return dt.\u0275fac=function(le){return new(le||dt)(x.LFG(yr),x.LFG(fn))},dt.\u0275prov=x.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),or=(()=>{class dt{constructor(le,$e){this.backend=le,this.injector=$e,this.chain=null}handle(le){if(null===this.chain){const $e=this.injector.get(Hn,[]);this.chain=$e.reduceRight((vt,nn)=>new en(vt,nn),this.backend)}return this.chain.handle(le)}}return dt.\u0275fac=function(le){return new(le||dt)(x.LFG(We),x.LFG(x.zs3))},dt.\u0275prov=x.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),dr=(()=>{class dt{static disable(){return{ngModule:dt,providers:[{provide:tn,useClass:zn}]}}static withOptions(le={}){return{ngModule:dt,providers:[le.cookieName?{provide:Yr,useValue:le.cookieName}:[],le.headerName?{provide:fn,useValue:le.headerName}:[]]}}}return dt.\u0275fac=function(le){return new(le||dt)},dt.\u0275mod=x.oAB({type:dt}),dt.\u0275inj=x.cJS({providers:[tn,{provide:Hn,useExisting:tn,multi:!0},{provide:yr,useClass:Fr},{provide:Yr,useValue:"XSRF-TOKEN"},{provide:fn,useValue:"X-XSRF-TOKEN"}]}),dt})(),$r=(()=>{class dt{}return dt.\u0275fac=function(le){return new(le||dt)},dt.\u0275mod=x.oAB({type:dt}),dt.\u0275inj=x.cJS({providers:[xt,{provide:Ve,useClass:or},ei,{provide:We,useExisting:ei}],imports:[dr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),dt})()},4650:(Zt,Je,W)=>{W.d(Je,{$8M:()=>yc,$Z:()=>f3,AFp:()=>y0,ALo:()=>O8,AaK:()=>Ve,CHM:()=>ks,CRH:()=>u0,CZH:()=>B3,CqO:()=>nm,D6c:()=>Rb,EJc:()=>db,EiD:()=>Lp,EpF:()=>Hs,F$t:()=>j6,F4k:()=>tm,FYo:()=>b_,FiY:()=>et,G48:()=>iv,GfV:()=>u1,Gpc:()=>ge,Hsn:()=>$6,Ikx:()=>zf,JOm:()=>h1,JVY:()=>yh,KtG:()=>bi,L6k:()=>_h,LAX:()=>Ch,LFG:()=>ui,LSH:()=>D5,Lbi:()=>lb,Lck:()=>Jm,MAs:()=>V6,MMx:()=>I8,NdJ:()=>Ef,OlP:()=>tr,Oqu:()=>Ac,PXZ:()=>A0,Q6J:()=>ri,QGY:()=>B6,QP$:()=>h2,Qsj:()=>w_,R0b:()=>Wo,RDi:()=>p5,Rgc:()=>V3,SBq:()=>Dd,Sil:()=>e7,Suo:()=>yg,TTD:()=>Zi,TgZ:()=>xc,VKq:()=>sg,X6Q:()=>Rr,XFs:()=>tn,Xpm:()=>he,Xts:()=>S5,Y36:()=>h3,YKP:()=>Qm,YNc:()=>z6,Yjl:()=>Ar,Yz7:()=>Qn,ZZ4:()=>P0,_Bn:()=>Ym,_UZ:()=>Ku,_Vd:()=>Id,_c5:()=>Nb,_uU:()=>e8,aQg:()=>Dl,c2e:()=>ub,cJS:()=>Dn,cg1:()=>a8,dDg:()=>pb,dqk:()=>$e,eBb:()=>C5,eFA:()=>Jg,ekj:()=>Nf,eoX:()=>Wg,f3M:()=>H2,g9A:()=>b0,h0i:()=>c2,hGG:()=>kb,hij:()=>Rf,iGM:()=>wl,ifc:()=>le,ip1:()=>Lg,kL8:()=>c8,lG2:()=>Un,lqb:()=>Au,lri:()=>$g,mCW:()=>Be,n5z:()=>Jc,oAB:()=>kt,oJD:()=>Fp,oxw:()=>Yu,pB0:()=>b5,q3G:()=>os,q4F:()=>d1,qLn:()=>Pa,qOj:()=>wo,qZA:()=>Cf,qzn:()=>wc,rWj:()=>Gg,s9C:()=>G1,sBO:()=>gi,sIi:()=>Vi,s_b:()=>n0,soG:()=>E0,tb:()=>w0,tp0:()=>Wt,uIk:()=>Wu,vHH:()=>Xe,vpe:()=>y1,wAp:()=>Vn,xi3:()=>e0,xp6:()=>a3,z2F:()=>V4,z3N:()=>V1,zSh:()=>N5,zs3:()=>Zl});var v=W(7579),x=W(727),q=W(9751),De=W(6451),Pe=W(3099);function Le(i){for(let o in i)if(i[o]===Le)return o;throw Error("Could not find renamed property on target object.")}function Ue(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Ve(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Ve).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function We(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const me=Le({__forward_ref__:Le});function ge(i){return i.__forward_ref__=ge,i.toString=function(){return Ve(this())},i}function Re(i){return Tt(i)?i():i}function Tt(i){return"function"==typeof i&&i.hasOwnProperty(me)&&i.__forward_ref__===ge}class Xe extends Error{constructor(o,a){super(function Ut(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ot(i){return"string"==typeof i?i:null==i?"":String(i)}function bt(i,o){throw new Xe(-201,!1)}function zn(i,o){null==i&&function Pt(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Qn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Dn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Tr(i){return mr(i,Yr)||mr(i,yr)}function mr(i,o){return i.hasOwnProperty(o)?i[o]:null}function ei(i){return i&&(i.hasOwnProperty(fn)||i.hasOwnProperty(Fr))?i[fn]:null}const Yr=Le({\u0275prov:Le}),fn=Le({\u0275inj:Le}),yr=Le({ngInjectableDef:Le}),Fr=Le({ngInjectorDef:Le});var tn=(()=>((tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn))();let or;function xn(i){const o=or;return or=i,o}function dr(i,o,a){const l=Tr(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&tn.Optional?null:void 0!==o?o:void bt(Ve(i))}function Qr(i){return{toString:i}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),le=(()=>{return(i=le||(le={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",le;var i})();const $e=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Sn={},Qt=[],dn=Le({\u0275cmp:Le}),cr=Le({\u0275dir:Le}),En=Le({\u0275pipe:Le}),xr=Le({\u0275mod:Le}),on=Le({\u0275fac:Le}),ue=Le({__NG_ELEMENT_ID__:Le});let pe=0;function he(i){return Qr(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Qt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||le.Emulated,id:"c"+pe++,styles:i.styles||Qt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return d.inputs=Gn(i.inputs,l),d.outputs=Gn(i.outputs),_&&_.forEach(T=>T(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(_e).filter(gt):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(ve).filter(gt):null,d})}function _e(i){return xe(i)||Ee(i)}function gt(i){return null!==i}function kt(i){return Qr(()=>({type:i.type,bootstrap:i.bootstrap||Qt,declarations:i.declarations||Qt,imports:i.imports||Qt,exports:i.exports||Qt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Gn(i,o){if(null==i)return Sn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const Un=he;function Ar(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function xe(i){return i[dn]||null}function Ee(i){return i[cr]||null}function ve(i){return i[En]||null}function ft(i,o){const a=i[xr]||null;if(!a&&!0===o)throw new Error(`Type ${Ve(i)} does not have '\u0275mod' property.`);return a}function Br(i){return Array.isArray(i)&&"object"==typeof i[1]}function hi(i){return Array.isArray(i)&&!0===i[1]}function Gi(i){return 0!=(8&i.flags)}function oo(i){return 2==(2&i.flags)}function Cs(i){return 1==(1&i.flags)}function Pi(i){return null!==i.template}function bs(i){return 0!=(256&i[2])}function Ws(i,o){return i.hasOwnProperty(on)?i[on]:null}class qs{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Zi(){return fi}function fi(i){return i.type.prototype.ngOnChanges&&(i.setInput=wa),Zs}function Zs(){const i=Ks(this),o=i?.current;if(o){const a=i.previous;if(a===Sn)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function wa(i,o,a,l){const d=Ks(i)||function Jo(i,o){return i[As]=o}(i,{previous:Sn,current:null}),f=d.current||(d.current={}),_=d.previous,T=this.declaredInputs[a],M=_[T];f[T]=new qs(M&&M.currentValue,o,_===Sn),i[l]=o}Zi.ngInherit=!0;const As="__ngSimpleChanges__";function Ks(i){return i[As]||null}function Gr(i){for(;Array.isArray(i);)i=i[0];return i}function Ns(i,o){return Gr(o[i])}function Li(i,o){return Gr(o[i.index])}function Yi(i,o){return i.data[o]}function si(i,o){return i[o]}function li(i,o){const a=o[i];return Br(a)?a:a[0]}function z(i){return 4==(4&i[2])}function J(i){return 64==(64&i[2])}function te(i,o){return null==o?null:i[o]}function Se(i){i[18]=0}function ct(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Qe={lFrame:Ka(null),bindingsEnabled:!0};function hr(){return Qe.bindingsEnabled}function wt(){return Qe.lFrame.lView}function Ln(){return Qe.lFrame.tView}function ks(i){return Qe.lFrame.contextLView=i,i[8]}function bi(i){return Qe.lFrame.contextLView=null,i}function Zr(){let i=Rs();for(;null!==i&&64===i.type;)i=i.parent;return i}function Rs(){return Qe.lFrame.currentTNode}function pi(i,o){const a=Qe.lFrame;a.currentTNode=i,a.isParent=o}function cc(){return Qe.lFrame.isParent}function ta(){Qe.lFrame.isParent=!1}function H(){const i=Qe.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function X(){return Qe.lFrame.bindingIndex++}function wi(i,o){const a=Qe.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ps(o)}function Ps(i){Qe.lFrame.currentDirectiveIndex=i}function ho(){return Qe.lFrame.currentQueryIndex}function D1(i){Qe.lFrame.currentQueryIndex=i}function S1(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Pl(i,o,a){if(a&tn.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&tn.Host||(d=S1(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const l=Qe.lFrame=$c();return l.currentTNode=o,l.lView=i,!0}function Ia(i){const o=$c(),a=i[1];Qe.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function $c(){const i=Qe.lFrame,o=null===i?null:i.child;return null===o?Ka(i):o}function Ka(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Gc(){const i=Qe.lFrame;return Qe.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ya=Gc;function T1(){const i=Gc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function oi(){return Qe.lFrame.selectedIndex}function Po(i){Qe.lFrame.selectedIndex=i}function Hr(){const i=Qe.lFrame;return Yi(i.tView,i.selectedIndex)}function Xa(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:T,ngAfterViewInit:M,ngAfterViewChecked:j,ngOnDestroy:Q}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),T&&((i.contentHooks||(i.contentHooks=[])).push(a,T),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,T)),M&&(i.viewHooks||(i.viewHooks=[])).push(-a,M),j&&((i.viewHooks||(i.viewHooks=[])).push(a,j),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,j)),null!=Q&&(i.destroyHooks||(i.destroyHooks=[])).push(a,Q)}}function Wc(i,o,a){A2(i,o,3,a)}function Da(i,o,a,l){(3&i[2])===a&&A2(i,o,a,l)}function A1(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function A2(i,o,a,l){const f=l??-1,_=o.length-1;let T=0;for(let M=void 0!==l?65535&i[18]:0;M<_;M++)if("number"==typeof o[M+1]){if(T=o[M],null!=l&&T>=l)break}else o[M]<0&&(i[18]+=65536),(T<f||-1==f)&&(fd(i,a,o,M),i[18]=(4294901760&i[18])+M+2),M++}function fd(i,o,a,l){const d=a[l]<0,f=a[l+1],T=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(T)}finally{}}}else try{f.call(T)}finally{}}class uc{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function e1(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],_=a[l++],T=a[l++];i.setAttribute(o,_,T,f)}else{const f=d,_=a[++l];N1(f)?i.setProperty(o,f,_):i.setAttribute(o,f,_),l++}}return l}function M1(i){return 3===i||4===i||6===i}function N1(i){return 64===i.charCodeAt(0)}function na(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Zc(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Zc(i,o,a,l,d){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const T=i[f++];if("number"==typeof T){if(T===o){_=-1;break}if(T>o){_=f-1;break}}}for(;f<i.length;){const T=i[f];if("number"==typeof T)break;if(T===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function Kc(i){return-1!==i}function Ta(i){return 32767&i}function mi(i,o){let a=function Cu(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let hc=!0;function t1(i){const o=hc;return hc=i,o}let bu=0;const _r={};function Ys(i,o){const a=r1(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,k1(l.data,i),k1(o,null),k1(l.blueprint,null));const d=fc(i,o),f=i.injectorIndex;if(Kc(d)){const _=Ta(d),T=mi(d,o),M=T[1].data;for(let j=0;j<8;j++)o[f+j]=T[_+j]|M[_+j]}return o[f+8]=d,f}function k1(i,o){i.push(0,0,0,0,0,0,0,0,o)}function r1(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function fc(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=P1(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function pc(i,o,a){!function Qc(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ue)&&(l=a[ue]),null==l&&(l=a[ue]=bu++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function mc(i,o,a){if(a&tn.Optional)return i;bt()}function xa(i,o,a,l){if(a&tn.Optional&&void 0===l&&(l=null),0==(a&(tn.Self|tn.Host))){const d=i[9],f=xn(void 0);try{return d?d.get(o,l,a&tn.Optional):dr(o,l,a&tn.Optional)}finally{xn(f)}}return mc(l,0,a)}function i1(i,o,a,l=tn.Default,d){if(null!==i){if(1024&o[2]){const _=function is(i,o,a,l,d){let f=i,_=o;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const T=ra(f,_,a,l|tn.Self,_r);if(T!==_r)return T;let M=f.parent;if(!M){const j=_[21];if(j){const Q=j.get(a,_r,l);if(Q!==_r)return Q}M=P1(_),_=_[15]}f=M}return d}(i,o,a,l,_r);if(_!==_r)return _}const f=ra(i,o,a,l,_r);if(f!==_r)return f}return xa(o,a,l,d)}function ra(i,o,a,l,d){const f=function s1(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ue)?i[ue]:void 0;return"number"==typeof o?o>=0?255&o:vc:o}(a);if("function"==typeof f){if(!Pl(o,i,l))return l&tn.Host?mc(d,0,l):xa(o,a,l,d);try{const _=f(l);if(null!=_||l&tn.Optional)return _;bt()}finally{Ya()}}else if("number"==typeof f){let _=null,T=r1(i,o),M=-1,j=l&tn.Host?o[16][6]:null;for((-1===T||l&tn.SkipSelf)&&(M=-1===T?fc(i,o):o[T+8],-1!==M&&Ul(l,!1)?(_=o[1],T=Ta(M),o=mi(M,o)):T=-1);-1!==T;){const Q=o[1];if(o1(f,T,Q.data)){const oe=ia(T,o,a,_,l,j);if(oe!==_r)return oe}M=o[T+8],-1!==M&&Ul(l,o[1].data[T+8]===j)&&o1(f,T,o)?(_=Q,T=Ta(M),o=mi(M,o)):T=-1}}return d}function ia(i,o,a,l,d,f){const _=o[1],T=_.data[i+8],Q=gc(T,_,a,null==l?oo(T)&&hc:l!=_&&0!=(3&T.type),d&tn.Host&&f===T);return null!==Q?Oo(o,_,Q,T):_r}function gc(i,o,a,l,d){const f=i.providerIndexes,_=o.data,T=1048575&f,M=i.directiveStart,Q=f>>20,Ne=d?T+Q:i.directiveEnd;for(let Ge=l?T:T+Q;Ge<Ne;Ge++){const Et=_[Ge];if(Ge<M&&a===Et||Ge>=M&&Et.type===a)return Ge}if(d){const Ge=_[M];if(Ge&&Pi(Ge)&&Ge.type===a)return M}return null}function Oo(i,o,a,l){let d=i[a];const f=o.data;if(function qc(i){return i instanceof uc}(d)){const _=d;_.resolving&&function Bt(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ye(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ot(i)}(f[a]));const T=t1(_.canSeeViewProviders);_.resolving=!0;const M=_.injectImpl?xn(_.injectImpl):null;Pl(i,l,tn.Default);try{d=i[a]=_.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Ja(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const _=fi(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==M&&xn(M),t1(T),_.resolving=!1,Ya()}}return d}function o1(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Ul(i,o){return!(i&tn.Self||i&tn.Host&&o)}class mo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return i1(this._tNode,this._lView,o,l,a)}}function vc(){return new mo(Zr(),wt())}function Jc(i){return Qr(()=>{const o=i.prototype.constructor,a=o[on]||R1(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[on]||R1(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function R1(i){return Tt(i)?()=>{const o=R1(Re(i));return o&&o()}:Ws(i)}function P1(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function yc(i){return function Hl(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(M1(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(Zr(),i)}const sa="__parameters__";function Lo(i,o,a){return Qr(()=>{const l=function a1(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return T.annotation=_,T;function T(M,j,Q){const oe=M.hasOwnProperty(sa)?M[sa]:Object.defineProperty(M,sa,{value:[]})[sa];for(;oe.length<=Q;)oe.push(null);return(oe[Q]=oe[Q]||[]).push(_),M}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class tr{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ii(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),Ii(l,o)):o!==i&&o.push(l)}return o}function go(i,o){i.forEach(a=>Array.isArray(a)?go(a,o):o(a))}function Cc(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function O1(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Ma(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}function E(i,o,a){let l=N(i,o);return l>=0?i[1|l]=a:(l=~l,function wu(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function C(i,o){const a=N(i,o);if(a>=0)return i[1|a]}function N(i,o){return function K(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(o===_)return f<<a;_>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const Js={},ti="__NG_DI_FLAG__",l1="ngTempTokenPath",sl=/\n/gm,ol="__source";let Fo;function F1(i){const o=Fo;return Fo=i,o}function gd(i,o=tn.Default){if(void 0===Fo)throw new Xe(-203,!1);return null===Fo?dr(i,void 0,o):Fo.get(i,o&tn.Optional?null:void 0,o)}function ui(i,o=tn.Default){return(function pr(){return or}()||gd)(Re(i),o)}function H2(i,o=tn.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),ui(i,o)}function jl(i){const o=[];for(let a=0;a<i.length;a++){const l=Re(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Xe(900,!1);let d,f=tn.Default;for(let _=0;_<l.length;_++){const T=l[_],M=U(T);"number"==typeof M?-1===M?d=T.token:f|=M:d=T}o.push(ui(d,f))}else o.push(ui(l))}return o}function R(i,o){return i[ti]=o,i.prototype[ti]=o,i}function U(i){return i[ti]}const et=R(Lo("Optional"),8),Wt=R(Lo("SkipSelf"),4);let yd,j2,$2;function p5(i){yd=i}function Wl(i){return function Du(){if(void 0===j2&&(j2=null,$e.trustedTypes))try{j2=$e.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return j2}()?.createHTML(i)||i}function ph(i){return function Su(){if(void 0===$2&&($2=null,$e.trustedTypes))try{$2=$e.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return $2}()?.createHTML(i)||i}class ll{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class G2 extends ll{getTypeName(){return"HTML"}}class v5 extends ll{getTypeName(){return"Style"}}class _d extends ll{getTypeName(){return"Script"}}class y5 extends ll{getTypeName(){return"URL"}}class vh extends ll{getTypeName(){return"ResourceURL"}}function V1(i){return i instanceof ll?i.changingThisBreaksApplicationSecurity:i}function wc(i,o){const a=function _5(i){return i instanceof ll&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function yh(i){return new G2(i)}function _h(i){return new v5(i)}function C5(i){return new _d(i)}function Ch(i){return new y5(i)}function b5(i){return new vh(i)}class S{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Wl(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class p{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Wl(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Wl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const _=a.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const A=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,se=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Be(i){return(i=String(i)).match(A)||i.match(se)?i:"unsafe:"+i}function Kt(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function Tn(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const ar=Kt("area,br,col,hr,img,wbr"),ai=Kt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ra=Kt("rp,rt"),Tu=Tn(ar,Tn(ai,Kt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tn(Ra,Kt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tn(Ra,ai)),W2=Kt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),q2=Kt("srcset"),bd=Tn(W2,q2,Kt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Kt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),wd=Kt("script,style,template");class Eh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!Tu.hasOwnProperty(a))return this.sanitizedSomething=!0,!wd.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),_=f.name,T=_.toLowerCase();if(!bd.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let M=f.value;W2[T]&&(M=Be(M)),q2[T]&&(i=M,M=(i=String(i)).split(",").map(o=>Be(o.trim())).join(", ")),this.buf.push(" ",_,'="',Dh(M),'"')}var i;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();Tu.hasOwnProperty(a)&&!ar.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(Dh(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Ih=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ed=/([^\#-~ |!])/g;function Dh(i){return i.replace(/&/g,"&amp;").replace(Ih,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ed,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sh;function Lp(i,o){let a=null;try{Sh=Sh||function bh(i){const o=new p(i);return function g(){try{return!!(new window.DOMParser).parseFromString(Wl(""),"text/html")}catch{return!1}}()?new S(o):o}(i);let l=o?String(o):"";a=Sh.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=a.innerHTML,a=Sh.getInertBodyElement(l)}while(l!==f);return Wl((new Eh).sanitizeChildren(I5(a)||a))}finally{if(a){const l=I5(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function I5(i){return"content"in i&&function e_(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var os=(()=>((os=os||{})[os.NONE=0]="NONE",os[os.HTML=1]="HTML",os[os.STYLE=2]="STYLE",os[os.SCRIPT=3]="SCRIPT",os[os.URL=4]="URL",os[os.RESOURCE_URL=5]="RESOURCE_URL",os))();function Fp(i){const o=Z2();return o?ph(o.sanitize(os.HTML,i)||""):wc(i,"HTML")?ph(V1(i)):Lp(function fh(){return void 0!==yd?yd:typeof document<"u"?document:void 0}(),ot(i))}function D5(i){const o=Z2();return o?o.sanitize(os.URL,i)||"":wc(i,"URL")?V1(i):Be(ot(i))}function Z2(){const i=wt();return i&&i[12]}const S5=new tr("ENVIRONMENT_INITIALIZER"),Vp=new tr("INJECTOR",-1),T5=new tr("INJECTOR_DEF_TYPES");class Hp{get(o,a=Js){if(a===Js){const l=new Error(`NullInjectorError: No provider for ${Ve(o)}!`);throw l.name="NullInjectorError",l}return a}}function a_(...i){return{\u0275providers:Up(0,i)}}function Up(i,...o){const a=[],l=new Set;let d;return go(o,f=>{const _=f;A5(_,a,[],l)&&(d||(d=[]),d.push(_))}),void 0!==d&&x5(d,a),a}function x5(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];go(d,f=>{o.push(f)})}}function A5(i,o,a,l){if(!(i=Re(i)))return!1;let d=null,f=ei(i);const _=!f&&xe(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const M=i.ngModule;if(f=ei(M),!f)return!1;d=M}const T=l.has(d);if(_){if(T)return!1;if(l.add(d),_.dependencies){const M="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const j of M)A5(j,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let j;l.add(d);try{go(f.imports,Q=>{A5(Q,o,a,l)&&(j||(j=[]),j.push(Q))})}finally{}void 0!==j&&x5(j,o)}if(!T){const j=Ws(d)||(()=>new d);o.push({provide:d,useFactory:j,deps:Qt},{provide:T5,useValue:d,multi:!0},{provide:S5,useValue:()=>ui(d),multi:!0})}const M=f.providers;null==M||T||go(M,Q=>{o.push(Q)})}}return d!==i&&void 0!==i.providers}const c_=Le({provide:String,useValue:Le});function M5(i){return null!==i&&"object"==typeof i&&c_ in i}function xu(i){return"function"==typeof i}const N5=new tr("Set Injector scope."),Th={},l_={};let k5;function xh(){return void 0===k5&&(k5=new Hp),k5}class Au{}class Gp extends Au{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,P5(o,_=>this.processProvider(_)),this.records.set(Vp,K2(void 0,this)),d.has("environment")&&this.records.set(Au,K2(void 0,this));const f=this.records.get(N5);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(T5.multi,Qt,tn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=F1(this),l=xn(void 0);try{return o()}finally{F1(a),xn(l)}}get(o,a=Js,l=tn.Default){this.assertNotDestroyed();const d=F1(this),f=xn(void 0);try{if(!(l&tn.SkipSelf)){let T=this.records.get(o);if(void 0===T){const M=function p_(i){return"function"==typeof i||"object"==typeof i&&i instanceof tr}(o)&&Tr(o);T=M&&this.injectableDefInScope(M)?K2(R5(o),Th):null,this.records.set(o,T)}if(null!=T)return this.hydrate(o,T)}return(l&tn.Self?xh():this.parent).get(o,a=l&tn.Optional&&a===Js?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[l1]=_[l1]||[]).unshift(Ve(o)),d)throw _;return function Y(i,o,a,l){const d=i[l1];throw o[ol]&&d.unshift(o[ol]),i.message=function fe(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Ve(o);if(Array.isArray(o))d=o.map(Ve).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let T=o[_];f.push(_+":"+("string"==typeof T?JSON.stringify(T):Ve(T)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(sl,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[l1]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{xn(f),F1(d)}}resolveInjectorInitializers(){const o=F1(this),a=xn(void 0);try{const l=this.get(S5.multi,Qt,tn.Self);for(const d of l)d()}finally{F1(o),xn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(Ve(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processProvider(o){let a=xu(o=Re(o))?o:Re(o&&o.provide);const l=function d_(i){return M5(i)?K2(void 0,i.useValue):K2(Wp(i),Th)}(o);if(xu(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=K2(void 0,Th,!0),d.factory=()=>jl(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Th&&(a.value=l_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function f_(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Re(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function R5(i){const o=Tr(i),a=null!==o?o.factory:Ws(i);if(null!==a)return a;if(i instanceof tr)throw new Xe(204,!1);if(i instanceof Function)return function u_(i){const o=i.length;if(o>0)throw Ma(o,"?"),new Xe(204,!1);const a=function Lr(i){const o=i&&(i[Yr]||i[yr]);if(o){const a=function fr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Xe(204,!1)}function Wp(i,o,a){let l;if(xu(i)){const d=Re(i);return Ws(d)||R5(d)}if(M5(i))l=()=>Re(i.useValue);else if(function jp(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...jl(i.deps||[]));else if(function Bp(i){return!(!i||!i.useExisting)}(i))l=()=>ui(Re(i.useExisting));else{const d=Re(i&&(i.useClass||i.provide));if(!function h_(i){return!!i.deps}(i))return Ws(d)||R5(d);l=()=>new d(...jl(i.deps))}return l}function K2(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function m_(i){return!!i.\u0275providers}function P5(i,o){for(const a of i)Array.isArray(a)?P5(a,o):m_(a)?P5(a.\u0275providers,o):o(a)}class qp{}class y_{resolveComponentFactory(o){throw function v_(i){const o=Error(`No component factory found for ${Ve(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Id=(()=>{class i{}return i.NULL=new y_,i})();function __(){return Y2(Zr(),wt())}function Y2(i,o){return new Dd(Li(i,o))}let Dd=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=__,i})();function C_(i){return i instanceof Dd?i.nativeElement:i}class b_{}let w_=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function re(){const i=wt(),a=li(Zr().index,i);return(Br(a)?a:i)[11]}(),i})(),Vo=(()=>{class i{}return i.\u0275prov=Qn({token:i,providedIn:"root",factory:()=>null}),i})();class u1{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const d1=new u1("14.1.3"),Sd={};function O5(i){return i.ngOriginalError}class Pa{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&O5(o);for(;a&&O5(a);)a=O5(a);return a||null}}const V5=new Map;let S_=0;const Mh="__ngContext__";function yo(i,o){Br(o)?(i[Mh]=o[20],function Xs(i){V5.set(i[20],i)}(o)):i[Mh]=o}function Q2(i){const o=i[Mh];return"number"==typeof o?function Pd(i){return V5.get(i)||null}(o):o||null}function Od(i){const o=Q2(i);return o?Br(o)?o:o.lView:null}const n9=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind($e))();function aa(i){return i instanceof Function?i():i}var h1=(()=>((h1=h1||{})[h1.Important=1]="Important",h1[h1.DashCase=2]="DashCase",h1))();function Fd(i,o){return undefined(i,o)}function X2(i){const o=i[3];return hi(o)?o[3]:o}function Ls(i){return a9(i[13])}function Nu(i){return a9(i[4])}function a9(i){for(;null!==i&&!hi(i);)i=i[4];return i}function e3(i,o,a,l,d){if(null!=l){let f,_=!1;hi(l)?f=l:Br(l)&&(_=!0,l=l[0]);const T=Gr(l);0===i&&null!==a?null==d?Fs(o,a,T):Si(o,a,T,d||null,!0):1===i&&null!==a?Si(o,a,T,d||null,!0):2===i?function Uh(i,o,a){const l=Vh(i,o);l&&function n6(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,T,_):3===i&&o.destroyNode(T),null!=f&&function m9(i,o,a,l,d){const f=a[7];f!==Gr(a)&&e3(o,i,l,f,d);for(let T=10;T<a.length;T++){const M=a[T];r3(M[1],M,i,o,l,f)}}(o,i,f,a,d)}}function Vd(i,o,a){return i.createElement(o,a)}function e6(i,o){const a=i[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,ct(d,-1)),a.splice(l,1)}function Ph(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&e6(d,l),o>0&&(i[a-1][4]=l[4]);const f=O1(i,10+o);!function Q5(i,o){r3(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Oh(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&r3(i,o,a,3,null,null),function c9(i){let o=i[13];if(!o)return Lh(i[1],i);for(;o;){let a=null;if(Br(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Br(o)&&Lh(o[1],o),o=o[3];null===o&&(o=i),Br(o)&&Lh(o[1],o),a=o&&o[4]}o=a}}(o)}}function Lh(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function t6(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof uc)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const T=d[f[_]],M=f[_+1];try{M.call(T)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function R_(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],T="function"==typeof _?_(o):Gr(o[_]),M=l[d=a[f+2]],j=a[f+3];"boolean"==typeof j?T.removeEventListener(a[f],M,j):j>=0?l[d=j]():l[d=-j].unsubscribe(),f+=2}else{const _=l[d=a[f+1]];a[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)(0,l[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&hi(o[3])){a!==o[3]&&e6(a,o);const l=o[19];null!==l&&l.detachView(i)}!function eo(i){V5.delete(i[20])}(o)}}function Fh(i,o,a){return function zh(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===le.None||d===le.Emulated)return null}return Li(l,a)}(i,o.parent,a)}function Si(i,o,a,l,d){i.insertBefore(o,a,l,d)}function Fs(i,o,a){i.appendChild(o,a)}function Hd(i,o,a,l,d){null!==l?Si(i,o,a,l,d):Fs(i,o,a)}function Vh(i,o){return i.parentNode(o)}function d9(i,o,a){return Hh(i,o,a)}let Hh=function h9(i,o,a){return 40&i.type?Li(i,a):null};function t3(i,o,a,l){const d=Fh(i,l,o),f=o[11],T=d9(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let M=0;M<a.length;M++)Hd(f,d,a[M],T,!1);else Hd(f,d,a,T,!1)}function Bd(i,o){if(null!==o){const a=o.type;if(3&a)return Li(o,i);if(4&a)return n3(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Bd(i,l);{const d=i[o.index];return hi(d)?n3(-1,d):Gr(d)}}if(32&a)return Fd(o,i)()||Gr(i[o.index]);{const l=p9(i,o);return null!==l?Array.isArray(l)?l[0]:Bd(X2(i[16]),l):Bd(i,o.next)}}return null}function p9(i,o){return null!==o?i[16][6].projection[o.projection]:null}function n3(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Bd(l,d)}return o[7]}function jd(i,o,a,l,d,f,_){for(;null!=a;){const T=l[a.index],M=a.type;if(_&&0===o&&(T&&yo(Gr(T),l),a.flags|=4),64!=(64&a.flags))if(8&M)jd(i,o,a.child,l,d,f,!1),e3(o,i,d,T,f);else if(32&M){const j=Fd(a,l);let Q;for(;Q=j();)e3(o,i,d,Q,f);e3(o,i,d,T,f)}else 16&M?i3(i,o,l,a,d,f):e3(o,i,d,T,f);a=_?a.projectionNext:a.next}}function r3(i,o,a,l,d,f){jd(a,l,i.firstChild,o,d,f,!1)}function i3(i,o,a,l,d,f){const _=a[16],M=_[6].projection[l.projection];if(Array.isArray(M))for(let j=0;j<M.length;j++)e3(o,i,d,M[j],f);else jd(i,o,M,_[3],d,f,!0)}function r6(i,o,a){i.setAttribute(o,"style",a)}function s3(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function v9(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const ku="ng-template";function O_(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==v9(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function y9(i){return 4===i.type&&i.value!==ku}function Ru(i,o,a){return o===(4!==i.type||a?i.value:ku)}function _9(i,o,a){let l=4;const d=i.attrs||[],f=function Uo(i){for(let o=0;o<i.length;o++)if(M1(i[o]))return o;return i.length}(d);let _=!1;for(let T=0;T<o.length;T++){const M=o[T];if("number"!=typeof M){if(!_)if(4&l){if(l=2|1&l,""!==M&&!Ru(i,M,a)||""===M&&1===o.length){if(ca(l))return!1;_=!0}}else{const j=8&l?M:o[++T];if(8&l&&null!==i.attrs){if(!O_(i.attrs,j,a)){if(ca(l))return!1;_=!0}continue}const oe=C9(8&l?"class":M,d,y9(i),a);if(-1===oe){if(ca(l))return!1;_=!0;continue}if(""!==j){let Ne;Ne=oe>f?"":d[oe+1].toLowerCase();const Ge=8&l?Ne:null;if(Ge&&-1!==v9(Ge,j,0)||2&l&&j!==Ne){if(ca(l))return!1;_=!0}}}}else{if(!_&&!ca(l)&&!ca(M))return!1;if(_&&ca(M))continue;_=!1,l=M|1&l}}return ca(l)||_}function ca(i){return 0==(1&i)}function C9(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let T=o[++d];for(;"string"==typeof T;)T=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function w9(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function o3(i,o,a=!1){for(let l=0;l<o.length;l++)if(_9(i,o[l],a))return!0;return!1}function $d(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function Gd(i,o){return i?":not("+o.trim()+")":o}function E9(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const T=i[++a];d+="["+_+(T.length>0?'="'+T+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!ca(_)&&(o+=Gd(f,d),d=""),l=_,f=f||!ca(l);a++}return""!==d&&(o+=Gd(f,d)),o}const rr={};function a3(i){Bh(Ln(),wt(),oi()+i,!1)}function Bh(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Wc(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Da(o,f,0,a)}Po(a)}function a6(i,o=null,a=null,l){const d=c6(i,o,a,l);return d.resolveInjectorInitializers(),d}function c6(i,o=null,a=null,l,d=new Set){const f=[a||Qt,a_(i)];return l=l||("object"==typeof i?void 0:Ve(i)),new Gp(f,o||xh(),l||null,d)}let Zl=(()=>{class i{static create(a,l){if(Array.isArray(a))return a6({name:""},l,a,"");{const d=a.name??"";return a6({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Js,i.NULL=new Hp,i.\u0275prov=Qn({token:i,providedIn:"any",factory:()=>ui(Vp)}),i.__NG_ELEMENT_ID__=-1,i})();function h3(i,o=tn.Default){const a=wt();return null===a?ui(i,o):i1(Zr(),a,Re(i),o)}function f3(){throw new Error("invalid")}function Zd(i,o){return i<<17|o<<2}function p1(i){return i>>17&32767}function f6(i){return 2|i}function fl(i){return(131068&i)>>2}function Xh(i,o){return-131069&i|o<<2}function ef(i){return 1|i}function uf(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];D1(d),_.contentQueries(2,o[f],f)}}}function Lu(i,o,a,l,d,f,_,T,M,j,Q){const oe=o.blueprint.slice();return oe[0]=d,oe[2]=76|l,(null!==Q||i&&1024&i[2])&&(oe[2]|=1024),Se(oe),oe[3]=oe[15]=i,oe[8]=a,oe[10]=_||i&&i[10],oe[11]=T||i&&i[11],oe[12]=M||i&&i[12]||null,oe[9]=j||i&&i[9]||null,oe[6]=f,oe[20]=function T_(){return S_++}(),oe[21]=Q,oe[16]=2==o.type?i[16]:oe,oe}function Fu(i,o,a,l,d){let f=i.data[o];if(null===f)f=function df(i,o,a,l,d){const f=Rs(),_=cc(),M=i.data[o]=function K_(i,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=M),null!==f&&(_?null==f.child&&null!==M.parent&&(f.child=M):null===f.next&&(f.next=M)),M}(i,o,a,l,d),function vn(){return Qe.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function fs(){const i=Qe.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return pi(f,!0),f}function m1(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function n4(i,o,a){Ia(o);try{const l=i.viewQuery;null!==l&&Yt(1,l,a);const d=i.template;null!==d&&I6(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&uf(i,o),i.staticViewQueries&&Yt(2,i.viewQuery,a);const f=i.components;null!==f&&function F9(i,o){for(let a=0;a<o.length;a++)$9(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,T1()}}function g3(i,o,a,l){const d=o[2];if(128!=(128&d)){Ia(o);try{Se(o),function P(i){return Qe.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&I6(i,o,a,2,l);const _=3==(3&d);if(_){const j=i.preOrderCheckHooks;null!==j&&Wc(o,j,null)}else{const j=i.preOrderHooks;null!==j&&Da(o,j,0,null),A1(o,0)}if(function X_(i){for(let o=Ls(i);null!==o;o=Nu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(512&d[2])&&ct(f,1),d[2]|=512}}}(o),function j9(i){for(let o=Ls(i);null!==o;o=Nu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];J(l)&&g3(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&uf(i,o),_){const j=i.contentCheckHooks;null!==j&&Wc(o,j)}else{const j=i.contentHooks;null!==j&&Da(o,j,1),A1(o,1)}!function L9(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Po(~d);else{const f=d,_=a[++l],T=a[++l];wi(_,f),T(2,o[f])}}}finally{Po(-1)}}(i,o);const T=i.components;null!==T&&function E6(i,o){for(let a=0;a<o.length;a++)iD(i,o[a])}(o,T);const M=i.viewQuery;if(null!==M&&Yt(2,M,l),_){const j=i.viewCheckHooks;null!==j&&Wc(o,j)}else{const j=i.viewHooks;null!==j&&Da(o,j,2),A1(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,ct(o[3],-1))}finally{T1()}}}function z9(i,o,a,l){const d=o[10],_=z(o);try{!_&&d.begin&&d.begin(),_&&n4(i,o,l),g3(i,o,a,l)}finally{!_&&d.end&&d.end()}}function I6(i,o,a,l,d){const f=oi(),_=2&l;try{Po(-1),_&&o.length>22&&Bh(i,o,22,!1),a(l,d)}finally{Po(f)}}function Bo(i,o,a){!hr()||(function cs(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ys(a,o),yo(l,o);const _=a.initialInputs;for(let T=d;T<f;T++){const M=i.data[T],j=Pi(M);j&&Vs(o,a,M);const Q=Oo(o,i,T,a);yo(Q,o),null!==_&&Q_(0,T-d,Q,M,0,_),j&&(li(a.index,o)[8]=Q)}}(i,o,a,Li(a,o)),128==(128&a.flags)&&function zu(i,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,_=function Qi(){return Qe.lFrame.currentDirectiveIndex}();try{Po(f);for(let T=l;T<d;T++){const M=i.data[T],j=o[T];Ps(T),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&pf(M,j)}}finally{Po(-1),Ps(_)}}(i,o,a))}function hf(i,o,a=Li){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],T=-1===_?a(o,i):i[_];i[d++]=T}}}function D6(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Ql(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Ql(i,o,a,l,d,f,_,T,M,j){const Q=22+l,oe=Q+d,Ne=function Z_(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:rr);return a}(Q,oe),Ge="function"==typeof j?j():j;return Ne[1]={type:i,blueprint:Ne,template:a,queries:null,viewQuery:T,declTNode:o,data:Ne.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:M,consts:Ge,incompleteFirstPass:!1}}function V9(i,o,a,l){const d=Xl(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&G9(i).push(l,d.length-1))}function T6(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function H9(i,o){const l=o.directiveEnd,d=i.data,f=o.attrs,_=[];let T=null,M=null;for(let j=o.directiveStart;j<l;j++){const Q=d[j],oe=Q.inputs,Ne=null===f||y9(o)?null:J_(oe,f);_.push(Ne),T=T6(oe,j,T),M=T6(Q.outputs,j,M)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=16),T.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=T,o.outputs=M}function Oa(i,o,a,l,d,f,_,T){const M=Li(o,a);let Q,j=o.inputs;!T&&null!=j&&(Q=j[l])?(Hu(i,a,Q,l,d),oo(o)&&x6(a,o.index)):3&o.type&&(l=function ff(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,f.setProperty(M,l,d))}function x6(i,o){const a=li(o,i);16&a[2]||(a[2]|=32)}function s4(i,o,a,l){let d=!1;if(hr()){const f=function _n(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];o3(a,_.selectors,!1)&&(d||(d=[]),pc(Ys(a,o),i,_.type),Pi(_)?(qn(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===l?null:{"":-1};if(null!==f){d=!0,pt(a,i.data.length,f.length);for(let Q=0;Q<f.length;Q++){const oe=f[Q];oe.providersResolver&&oe.providersResolver(oe)}let T=!1,M=!1,j=m1(i,o,f.length,null);for(let Q=0;Q<f.length;Q++){const oe=f[Q];a.mergedAttrs=na(a.mergedAttrs,oe.hostAttrs),Nt(i,a,o,j,oe),Xt(j,oe,_),null!==oe.contentQueries&&(a.flags|=8),(null!==oe.hostBindings||null!==oe.hostAttrs||0!==oe.hostVars)&&(a.flags|=128);const Ne=oe.type.prototype;!T&&(Ne.ngOnChanges||Ne.ngOnInit||Ne.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),T=!0),!M&&(Ne.ngOnChanges||Ne.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),M=!0),j++}H9(i,a)}_&&function Y_(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Xe(-301,!1);l.push(o[d],f)}}}(a,l,_)}return a.mergedAttrs=na(a.mergedAttrs,a.attrs),d}function U9(i,o,a,l,d,f){const _=f.hostBindings;if(_){let T=i.hostBindingOpCodes;null===T&&(T=i.hostBindingOpCodes=[]);const M=~o.index;(function Ot(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(T)!=M&&T.push(M),T.push(l,d,_)}}function pf(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function qn(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function Xt(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Pi(o)&&(a[""]=i)}}function pt(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function Nt(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Ws(d.type)),_=new uc(f,Pi(d),h3);i.blueprint[l]=_,a[l]=_,U9(i,o,0,l,m1(i,a,d.hostVars,rr),d)}function Vs(i,o,a){const l=Li(o,i),d=D6(a),f=i[10],_=pl(i,Lu(i,d,null,a.onPush?32:16,l,o,f,f.createRenderer(l,a),null,null,null));i[o.index]=_}function U1(i,o,a,l,d,f){const _=Li(i,o);!function A6(i,o,a,l,d,f,_){if(null==f)i.removeAttribute(o,d,a);else{const T=null==_?ot(f):_(f,l||"",d);i.setAttribute(o,d,T,a)}}(o[11],_,f,i.value,a,l,d)}function Q_(i,o,a,l,d,f){const _=f[o];if(null!==_){const T=l.setInput;for(let M=0;M<_.length;){const j=_[M++],Q=_[M++],oe=_[M++];null!==T?l.setInput(a,oe,j,Q):a[Q]=oe}}}function J_(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function B9(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function iD(i,o){const a=li(o,i);if(J(a)){const l=a[1];48&a[2]?g3(l,a,l.template,a[8]):a[5]>0&&M6(a)}}function M6(i){for(let l=Ls(i);null!==l;l=Nu(l))for(let d=10;d<l.length;d++){const f=l[d];if(J(f))if(512&f[2]){const _=f[1];g3(_,f,_.template,f[8])}else f[5]>0&&M6(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=li(a[l],i);J(d)&&d[5]>0&&M6(d)}}function $9(i,o){const a=li(o,i),l=a[1];(function ir(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),n4(l,a,a[8])}function pl(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function mf(i){for(;i;){i[2]|=32;const o=X2(i);if(bs(i)&&!o)return i;i=o}return null}function kr(i){!function Bn(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Od(a);if(null!==l){const d=l[1];z9(d,l,d.template,a)}}}(i[8])}function Yt(i,o,a){D1(0),o(i,a)}const k6=(()=>Promise.resolve(null))();function Xl(i){return i[7]||(i[7]=[])}function G9(i){return i.cleanup||(i.cleanup=[])}function W9(i,o){const a=i[9],l=a?a.get(Pa,null):null;l&&l.handleError(o)}function Hu(i,o,a,l,d){for(let f=0;f<a.length;){const _=a[f++],T=a[f++],M=o[_],j=i.data[_];null!==j.setInput?j.setInput(M,d,l,T):M[T]=d}}function a4(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const T=o[_];"number"==typeof T?f=T:1==f?d=We(d,T):2==f&&(l=We(l,T+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function bo(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(Gr(f)),hi(f))for(let T=10;T<f.length;T++){const M=f[T],j=M[1].firstChild;null!==j&&bo(M[1],M,j,l)}const _=a.type;if(8&_)bo(i,o,a.child,l);else if(32&_){const T=Fd(a,o);let M;for(;M=T();)l.push(M)}else if(16&_){const T=p9(o,a);if(Array.isArray(T))l.push(...T);else{const M=X2(o[16]);bo(M[1],M,T,l,!0)}}a=d?a.projectionNext:a.next}return l}class Uu{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return bo(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(hi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Ph(o,l),O1(a,l))}this._attachedToViewContainer=!1}Oh(this._lView[1],this._lView)}onDestroy(o){V9(this._lView[1],this._lView,null,o)}markForCheck(){mf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Vu(i,o,a){const l=o[10];l.begin&&l.begin();try{g3(i,o,i.template,a)}catch(d){throw W9(o,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function X5(i,o){r3(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Xe(902,!1);this._appRef=o}}class q9 extends Uu{constructor(o){super(o),this._view=o}detectChanges(){kr(this._view)}checkNoChanges(){}get context(){return null}}class gf extends Id{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=xe(o);return new eu(a,this.ngModule)}}function ml(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class tt{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Sd,l);return d!==Sd||a===Sd?d:this.parentInjector.get(o,a,l)}}class eu extends qp{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function i6(i){return i.map(E9).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ml(this.componentDef.inputs)}get outputs(){return ml(this.componentDef.outputs)}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof Au?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new tt(o,f):o,T=_.get(b_,null);if(null===T)throw new Xe(407,!1);const M=_.get(Vo,null),j=T.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",oe=l?function S6(i,o,a){return i.selectRootElement(o,a===le.ShadowDom)}(j,l,this.componentDef.encapsulation):Vd(T.createRenderer(null,this.componentDef),Q,function R6(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Q)),Ne=this.componentDef.onPush?288:272,Ge=function Z9(i,o){return{components:[],scheduler:i||n9,clean:k6,playerHandler:o||null,flags:0}}(),Et=Ql(0,null,null,1,0,null,null,null,null,null),Lt=Lu(null,Et,Ge,Ne,null,null,T,j,M,_,null);let Jt,mn;Ia(Lt);try{const jn=function eC(i,o,a,l,d,f){const _=a[1];a[22]=i;const M=Fu(_,22,2,"#host",null),j=M.mergedAttrs=o.hostAttrs;null!==j&&(a4(M,j,!0),null!==i&&(e1(d,i,j),null!==M.classes&&s3(d,i,M.classes),null!==M.styles&&r6(d,i,M.styles)));const Q=l.createRenderer(i,o),oe=Lu(a,D6(o),null,o.onPush?32:16,a[22],M,l,Q,f||null,null,null);return _.firstCreatePass&&(pc(Ys(M,a),_,o.type),qn(_,M),pt(M,a.length,1)),pl(a,oe),a[22]=oe}(oe,this.componentDef,Lt,T,j);if(oe)if(l)e1(j,oe,["ng-version",d1.full]);else{const{attrs:Mt,classes:Pn}=function I9(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!ca(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Mt&&e1(j,oe,Mt),Pn&&Pn.length>0&&s3(j,oe,Pn.join(" "))}if(mn=Yi(Et,22),void 0!==a){const Mt=mn.projection=[];for(let Pn=0;Pn<this.ngContentSelectors.length;Pn++){const Dr=a[Pn];Mt.push(null!=Dr?Array.from(Dr):null)}}Jt=function ju(i,o,a,l,d){const f=a[1],_=function Jl(i,o,a){const l=Zr();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Nt(i,l,o,m1(i,o,1,null),a),H9(i,l));const d=Oo(o,i,l.directiveStart,l);yo(d,o);const f=Li(l,o);return f&&yo(f,o),d}(f,a,o);if(l.components.push(_),i[8]=_,null!==d)for(const M of d)M(_,o);if(o.contentQueries){const M=Zr();o.contentQueries(1,_,M.directiveStart)}const T=Zr();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Po(T.index),U9(a[1],T,0,T.directiveStart,T.directiveEnd,o),pf(o,_)),_}(jn,this.componentDef,Lt,Ge,[P6]),n4(Et,Lt,null)}finally{T1()}return new c4(this.componentType,Jt,Y2(mn,Lt),Lt,mn)}}class c4 extends class g_{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new q9(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const f=this._rootLView;Hu(f[1],f,d,o,a),x6(f,this._tNode.index)}}get injector(){return new mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function P6(){const i=Zr();Xa(wt()[1],i)}function wo(i){let o=function K9(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(Pi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Xe(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=gl(i.inputs),_.declaredInputs=gl(i.declaredInputs),_.outputs=gl(i.outputs);const T=d.hostBindings;T&&vf(i,T);const M=d.viewQuery,j=d.contentQueries;if(M&&Q9(i,M),j&&Xi(i,j),Ue(i.inputs,d.inputs),Ue(i.declaredInputs,d.declaredInputs),Ue(i.outputs,d.outputs),Pi(d)&&d.data.animation){const Q=i.data;Q.animation=(Q.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const T=f[_];T&&T.ngInherit&&T(i),T===wo&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Y9(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=na(d.hostAttrs,a=na(a,d.hostAttrs))}}(l)}function gl(i){return i===Sn?{}:i===Qt?[]:i}function Q9(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Xi(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function vf(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let vl=null;function Ds(){if(!vl){const i=$e.Symbol;if(i&&i.iterator)vl=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(vl=l)}}}return vl}function Vi(i){return!!Ai(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ds()in i)}function Ai(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function g1(i,o,a){return i[o]=a}function ms(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Wu(i,o,a,l){const d=wt();return ms(d,X(),o)&&(Ln(),U1(Hr(),d,i,o,a,l)),Wu}function La(i,o,a,l){return ms(i,X(),a)?o+ot(a)+l:rr}function z6(i,o,a,l,d,f,_,T){const M=wt(),j=Ln(),Q=i+22,oe=j.firstCreatePass?function X9(i,o,a,l,d,f,_,T,M){const j=o.consts,Q=Fu(o,i,4,_||null,te(j,T));s4(o,a,Q,te(j,M)),Xa(o,Q);const oe=Q.tViews=Ql(2,Q,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,j);return null!==o.queries&&(o.queries.template(o,Q),oe.queries=o.queries.embeddedTView(Q)),Q}(Q,j,M,o,a,l,d,f,_):j.data[Q];pi(oe,!1);const Ne=M[11].createComment("");t3(j,M,Ne,oe),yo(Ne,M),pl(M,M[Q]=B9(Ne,M,Ne,oe)),Cs(oe)&&Bo(j,M,oe),null!=_&&hf(M,oe,T)}function V6(i){return si(function lo(){return Qe.lFrame.contextLView}(),22+i)}function ri(i,o,a){const l=wt();return ms(l,X(),o)&&Oa(Ln(),Hr(),l,i,o,l[11],a,!1),ri}function H6(i,o,a,l,d){const _=d?"class":"style";Hu(i,a,o.inputs[_],_,l)}function xc(i,o,a,l){const d=wt(),f=Ln(),_=22+i,T=d[11],M=d[_]=Vd(T,o,function Fl(){return Qe.lFrame.currentNamespace}()),j=f.firstCreatePass?function em(i,o,a,l,d,f,_){const T=o.consts,j=Fu(o,i,2,d,te(T,f));return s4(o,a,j,te(T,_)),null!==j.attrs&&a4(j,j.attrs,!1),null!==j.mergedAttrs&&a4(j,j.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,j),j}(_,f,d,0,o,a,l):f.data[_];pi(j,!0);const Q=j.mergedAttrs;null!==Q&&e1(T,M,Q);const oe=j.classes;null!==oe&&s3(T,M,oe);const Ne=j.styles;return null!==Ne&&r6(T,M,Ne),64!=(64&j.flags)&&t3(f,d,M,j),0===function gr(){return Qe.lFrame.elementDepthCount}()&&yo(M,d),function Er(){Qe.lFrame.elementDepthCount++}(),Cs(j)&&(Bo(f,d,j),function r4(i,o,a){if(Gi(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,j,d)),null!==l&&hf(d,j),xc}function Cf(){let i=Zr();cc()?ta():(i=i.parent,pi(i,!1));const o=i;!function Zn(){Qe.lFrame.elementDepthCount--}();const a=Ln();return a.firstCreatePass&&(Xa(a,i),Gi(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function zi(i){return 0!=(16&i.flags)}(o)&&H6(a,o,wt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zl(i){return 0!=(32&i.flags)}(o)&&H6(a,o,wt(),o.stylesWithoutHost,!1),Cf}function Ku(i,o,a,l){return xc(i,o,a,l),Cf(),Ku}function Hs(){return wt()}function B6(i){return!!i&&"function"==typeof i.then}function tm(i){return!!i&&"function"==typeof i.subscribe}const nm=tm;function Ef(i,o,a,l){const d=wt(),f=Ln(),_=Zr();return function im(i,o,a,l,d,f,_,T){const M=Cs(l),Q=i.firstCreatePass&&G9(i),oe=o[8],Ne=Xl(o);let Ge=!0;if(3&l.type||T){const Jt=Li(l,o),mn=T?T(Jt):Jt,jn=Ne.length,Mt=T?Dr=>T(Gr(Dr[l.index])):l.index;let Pn=null;if(!T&&M&&(Pn=function iC(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const T=o[7],M=d[f+2];return T.length>M?T[M]:null}"string"==typeof _&&(f+=2)}return null}(i,o,d,l.index)),null!==Pn)(Pn.__ngLastListenerFn__||Pn).__ngNextListenerFn__=f,Pn.__ngLastListenerFn__=f,Ge=!1;else{f=_l(l,o,oe,f,!1);const Dr=a.listen(mn,d,f);Ne.push(f,Dr),Q&&Q.push(d,Mt,jn,jn+1)}}else f=_l(l,o,oe,f,!1);const Et=l.outputs;let Lt;if(Ge&&null!==Et&&(Lt=Et[d])){const Jt=Lt.length;if(Jt)for(let mn=0;mn<Jt;mn+=2){const di=o[Lt[mn]][Lt[mn+1]].subscribe(f),v2=Ne.length;Ne.push(f,di),Q&&Q.push(d,l.index,v2,-(v2+1))}}}(f,d,d[11],_,i,o,0,l),Ef}function sm(i,o,a,l){try{return!1!==a(l)}catch(d){return W9(i,d),!1}}function _l(i,o,a,l,d){return function f(_){if(_===Function)return l;mf(2&i.flags?li(i.index,o):o);let M=sm(o,0,l,_),j=f.__ngNextListenerFn__;for(;j;)M=sm(o,0,j,_)&&M,j=j.__ngNextListenerFn__;return d&&!1===M&&(_.preventDefault(),_.returnValue=!1),M}}function Yu(i=1){return function Ol(i){return(Qe.lFrame.contextLView=function Qa(i,o){for(;i>0;)o=o[15],i--;return o}(i,Qe.lFrame.contextLView))[8]}(i)}function sC(i,o){let a=null;const l=function b9(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(i);for(let d=0;d<o.length;d++){const f=o[d];if("*"!==f){if(null===l?o3(i,f,!0):$d(l,f))return d}else a=d}return a}function j6(i){const o=wt()[16][6];if(!o.projection){const l=o.projection=Ma(i?i.length:1,null),d=l.slice();let f=o.child;for(;null!==f;){const _=i?sC(f,i):0;null!==_&&(d[_]?d[_].projectionNext=f:l[_]=f,d[_]=f),f=f.next}}}function $6(i,o=0,a){const l=wt(),d=Ln(),f=Fu(d,22+i,16,null,a||null);null===f.projection&&(f.projection=o),ta(),64!=(64&f.flags)&&function P_(i,o,a){i3(o[11],0,o,a,Fh(i,a,o),d9(a.parent||o[6],a,o))}(d,l,f)}function G1(i,o,a){return If(i,"",o,"",a),G1}function If(i,o,a,l,d){const f=wt(),_=La(f,o,a,l);return _!==rr&&Oa(Ln(),Hr(),f,i,_,f[11],d,!1),If}function Af(i,o,a,l,d){const f=i[a+1],_=null===o;let T=l?p1(f):fl(f),M=!1;for(;0!==T&&(!1===M||_);){const Q=i[T+1];am(i[T],o)&&(M=!0,i[T+1]=l?ef(Q):f6(Q)),T=l?p1(Q):fl(Q)}M&&(i[a+1]=l?f6(f):ef(f))}function am(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&N(i,o)>=0}function Nf(i,o){return function ua(i,o,a,l){const d=wt(),f=Ln(),_=function nt(i){const o=Qe.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function fm(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[oi()],_=function Q6(i,o){return o>=i.expandoStartIndex}(i,a);(function X6(i,o){return 0!=(i.flags&(o?16:32))})(f,l)&&null===o&&!_&&(o=!1),o=function h4(i,o,a,l){const d=function uo(i){const o=Qe.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=E3(a=W1(null,i,o,a,l),o.attrs,l),f=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=W1(d,i,o,a,l),null===f){let M=function cC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==fl(l))return i[p1(l)]}(i,o,l);void 0!==M&&Array.isArray(M)&&(M=W1(null,i,o,M[1],l),M=E3(M,o.attrs,l),function pm(i,o,a,l){i[p1(a?o.classBindings:o.styleBindings)]=l}(i,o,l,M))}else f=function w3(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=E3(l,i[f].hostAttrs,a);return E3(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function om(i,o,a,l,d,f){let _=f?o.classBindings:o.styleBindings,T=p1(_),M=fl(_);i[l]=a;let Q,j=!1;if(Array.isArray(a)){const oe=a;Q=oe[1],(null===Q||N(oe,Q)>0)&&(j=!0)}else Q=a;if(d)if(0!==M){const Ne=p1(i[T+1]);i[l+1]=Zd(Ne,T),0!==Ne&&(i[Ne+1]=Xh(i[Ne+1],l)),i[T+1]=function p3(i,o){return 131071&i|o<<17}(i[T+1],l)}else i[l+1]=Zd(T,0),0!==T&&(i[T+1]=Xh(i[T+1],l)),T=l;else i[l+1]=Zd(M,0),0===T?T=l:i[M+1]=Xh(i[M+1],l),M=l;j&&(i[l+1]=f6(i[l+1])),Af(i,Q,l,!0),Af(i,Q,l,!1),function W6(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&N(f,o)>=0&&(a[l+1]=ef(a[l+1]))}(o,Q,i,l,f),_=Zd(T,M),f?o.classBindings=_:o.styleBindings=_}(d,f,o,a,_,l)}}(f,i,_,l),o!==rr&&ms(d,_,o)&&function kf(i,o,a,l,d,f,_,T){if(!(3&o.type))return;const M=i.data,j=M[T+1];Hi(function R9(i){return 1==(1&i)}(j)?gm(M,o,a,d,fl(j),_):void 0)||(Hi(f)||function h6(i){return 2==(2&i)}(j)&&(f=gm(M,null,a,d,T,_)),function g9(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:h1.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=h1.Important),i.setStyle(a,l,d,f))}}(l,_,Ns(oi(),a),d,f))}(f,f.data[oi()],d,d[11],i,d[_+1]=function Or(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Ve(V1(i)))),i}(o,a),l,_)}(i,o,null,!0),Nf}function W1(i,o,a,l,d){let f=null;const _=a.directiveEnd;let T=a.directiveStylingLast;for(-1===T?T=a.directiveStart:T++;T<_&&(f=o[T],l=E3(l,f.hostAttrs,d),f!==i);)T++;return null!==i&&(a.directiveStylingLast=T),l}function E3(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),E(i,_,!!a||o[++f]))}return void 0===i?null:i}function gm(i,o,a,l,d,f){const _=null===o;let T;for(;d>0;){const M=i[d],j=Array.isArray(M),Q=j?M[1]:M,oe=null===Q;let Ne=a[d+1];Ne===rr&&(Ne=oe?Qt:void 0);let Ge=oe?C(Ne,l):Q===l?Ne:void 0;if(j&&!Hi(Ge)&&(Ge=C(M,l)),Hi(Ge)&&(T=Ge,_))return T;const Et=i[d+1];d=_?p1(Et):fl(Et)}if(null!==o){let M=f?o.residualClasses:o.residualStyles;null!=M&&(T=C(M,l))}return T}function Hi(i){return void 0!==i}function e8(i,o=""){const a=wt(),l=Ln(),d=i+22,f=l.firstCreatePass?Fu(l,d,1,o,null):l.data[d],_=a[d]=function Y5(i,o){return i.createText(o)}(a[11],o);t3(l,a,_,f),pi(f,!1)}function Ac(i){return Rf("",i,""),Ac}function Rf(i,o,a){const l=wt(),d=La(l,i,o,a);return d!==rr&&function Sc(i,o,a){const l=Ns(o,i);!function zd(i,o,a){i.setValue(o,a)}(i[11],l,a)}(l,oi(),d),Rf}function zf(i,o,a){const l=wt();return ms(l,X(),o)&&Oa(Ln(),Hr(),l,i,o,l[11],a,!0),zf}const ru=void 0;var gC=["en",[["a","p"],["AM","PM"],ru],[["AM","PM"],ru,ru],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ru,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ru,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ru,"{1} 'at' {0}",ru],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Mc={};function a8(i){const o=function yC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=l8(o);if(a)return a;const l=o.split("-")[0];if(a=l8(l),a)return a;if("en"===l)return gC;throw new Xe(701,!1)}function c8(i){return a8(i)[Vn.PluralCase]}function l8(i){return i in Mc||(Mc[i]=$e.ng&&$e.ng.common&&$e.ng.common.locales&&$e.ng.common.locales[i]),Mc[i]}var Vn=(()=>((Vn=Vn||{})[Vn.LocaleId=0]="LocaleId",Vn[Vn.DayPeriodsFormat=1]="DayPeriodsFormat",Vn[Vn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vn[Vn.DaysFormat=3]="DaysFormat",Vn[Vn.DaysStandalone=4]="DaysStandalone",Vn[Vn.MonthsFormat=5]="MonthsFormat",Vn[Vn.MonthsStandalone=6]="MonthsStandalone",Vn[Vn.Eras=7]="Eras",Vn[Vn.FirstDayOfWeek=8]="FirstDayOfWeek",Vn[Vn.WeekendRange=9]="WeekendRange",Vn[Vn.DateFormat=10]="DateFormat",Vn[Vn.TimeFormat=11]="TimeFormat",Vn[Vn.DateTimeFormat=12]="DateTimeFormat",Vn[Vn.NumberSymbols=13]="NumberSymbols",Vn[Vn.NumberFormats=14]="NumberFormats",Vn[Vn.CurrencyCode=15]="CurrencyCode",Vn[Vn.CurrencySymbol=16]="CurrencySymbol",Vn[Vn.CurrencyName=17]="CurrencyName",Vn[Vn.Currencies=18]="Currencies",Vn[Vn.Directionality=19]="Directionality",Vn[Vn.PluralCase=20]="PluralCase",Vn[Vn.ExtraData=21]="ExtraData",Vn))();const K1="en-US";let Sm=K1;function Pc(i,o,a,l,d){if(i=Re(i),Array.isArray(i))for(let f=0;f<i.length;f++)Pc(i[f],o,a,l,d);else{const f=Ln(),_=wt();let T=xu(i)?i:Re(i.provide),M=Wp(i);const j=Zr(),Q=1048575&j.providerIndexes,oe=j.directiveStart,Ne=j.providerIndexes>>20;if(xu(i)||!i.multi){const Ge=new uc(M,d,h3),Et=E8(T,o,d?Q:Q+Ne,oe);-1===Et?(pc(Ys(j,_),f,T),Kf(f,i,o.length),o.push(T),j.directiveStart++,j.directiveEnd++,d&&(j.providerIndexes+=1048576),a.push(Ge),_.push(Ge)):(a[Et]=Ge,_[Et]=Ge)}else{const Ge=E8(T,o,Q+Ne,oe),Et=E8(T,o,Q,Q+Ne),Lt=Ge>=0&&a[Ge],Jt=Et>=0&&a[Et];if(d&&!Jt||!d&&!Lt){pc(Ys(j,_),f,T);const mn=function Km(i,o,a,l,d){const f=new uc(i,a,h3);return f.multi=[],f.index=o,f.componentProviders=0,Zm(f,d,l&&!a),f}(d?LC:OC,a.length,d,l,M);!d&&Jt&&(a[Et].providerFactory=mn),Kf(f,i,o.length,0),o.push(T),j.directiveStart++,j.directiveEnd++,d&&(j.providerIndexes+=1048576),a.push(mn),_.push(mn)}else Kf(f,i,Ge>-1?Ge:Et,Zm(a[d?Et:Ge],M,!d&&l));!d&&l&&Jt&&a[Et].componentProviders++}}}function Kf(i,o,a,l){const d=xu(o),f=function $p(i){return!!i.useClass}(o);if(d||f){const M=(f?Re(o.useClass):o).prototype.ngOnDestroy;if(M){const j=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const Q=j.indexOf(a);-1===Q?j.push(a,[l,M]):j[Q+1].push(l,M)}else j.push(a,M)}}}function Zm(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function E8(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function OC(i,o,a,l){return O3(this.multi,[])}function LC(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,T=Oo(a,a[1],this.providerFactory.index,l);f=T.slice(0,_),O3(d,f);for(let M=_;M<T.length;M++)f.push(T[M])}else f=[],O3(d,f);return f}function O3(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Ym(i,o=[]){return a=>{a.providersResolver=(l,d)=>function qm(i,o,a){const l=Ln();if(l.firstCreatePass){const d=Pi(i);Pc(a,l.data,l.blueprint,d,!0),Pc(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class c2{}class Qm{}function Jm(i,o){return new F3(i,o??null)}class F3 extends c2{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gf(this);const l=ft(o);this._bootstrapComponents=aa(l.bootstrap),this._r3Injector=c6(o,a,[{provide:c2,useValue:this},{provide:Id,useValue:this.componentFactoryResolver}],Ve(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Yf extends Qm{constructor(o){super(),this.moduleType=o}create(o){return new F3(this.moduleType,o)}}class Xm extends c2{constructor(o,a,l){super(),this.componentFactoryResolver=new gf(this),this.instance=null;const d=new Gp([...o,{provide:c2,useValue:this},{provide:Id,useValue:this.componentFactoryResolver}],a||xh(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function I8(i,o,a=null){return new Xm(i,o,a).injector}function sg(i,o,a,l){return function l2(i,o,a,l,d,f){const _=o+a;return ms(i,_,d)?g1(i,_+1,f?l.call(f,d):l(d)):Oc(i,_+1)}(wt(),H(),i,o,a,l)}function Oc(i,o){const a=i[o];return a===rr?void 0:a}function Xf(i,o,a,l,d,f,_){const T=o+a;return function Gu(i,o,a,l){const d=ms(i,o,a);return ms(i,o+1,l)||d}(i,T,d,f)?g1(i,T+2,_?l.call(_,d,f):l(d,f)):Oc(i,T+2)}function O8(i,o){const a=Ln();let l;const d=i+22;a.firstCreatePass?(l=function $C(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=Ws(l.type)),_=xn(h3);try{const T=t1(!1),M=f();return t1(T),function no(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,wt(),d,M),M}finally{xn(_)}}function e0(i,o,a,l){const d=i+22,f=wt(),_=si(f,d);return function su(i,o){return i[1].data[o].pure}(f,d)?Xf(f,H(),o,_.transform,a,l,_):_.transform(a,l)}function z3(i){return o=>{setTimeout(i,void 0,o)}}const y1=class D4 extends v.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),_=l;if(o&&"object"==typeof o){const M=o;d=M.next?.bind(M),f=M.error?.bind(M),_=M.complete?.bind(M)}this.__isAsync&&(f=z3(f),d&&(d=z3(d)),_&&(_=z3(_)));const T=super.subscribe({next:d,error:f,complete:_});return o instanceof x.w0&&o.add(T),T}};function F8(){return this._results[Ds()]()}class S4{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ds(),l=S4.prototype;l[a]||(l[a]=F8)}get changes(){return this._changes||(this._changes=new y1)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Ii(o);(this._changesDetected=!function F2(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let V3=(()=>{class i{}return i.__NG_ELEMENT_ID__=qC,i})();const WC=V3,fg=class extends WC{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Lu(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),n4(l,d,o),new Uu(d)}};function qC(){return t0(Zr(),wt())}function t0(i,o){return 4&i.type?new fg(o,i,Y2(i,o)):null}let n0=(()=>{class i{}return i.__NG_ELEMENT_ID__=pg,i})();function pg(){return mg(Zr(),wt())}const r0=n0,H3=class extends r0{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Y2(this._hostTNode,this._hostLView)}get injector(){return new mo(this._hostTNode,this._hostLView)}get parentInjector(){const o=fc(this._hostTNode,this._hostLView);if(Kc(o)){const a=mi(o,this._hostLView),l=Ta(o);return new mo(a[1].data[l+8],a)}return new mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=s0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const _=o.createEmbeddedView(a||{},f);return this.insert(_,d),_}createComponent(o,a,l,d,f){const _=o&&!function _c(i){return"function"==typeof i}(o);let T;if(_)T=a;else{const oe=a||{};T=oe.index,l=oe.injector,d=oe.projectableNodes,f=oe.environmentInjector||oe.ngModuleRef}const M=_?o:new eu(xe(o)),j=l||this.parentInjector;if(!f&&null==M.ngModule){const Ne=(_?j:this.parentInjector).get(Au,null);Ne&&(f=Ne)}const Q=M.create(j,d,void 0,f);return this.insert(Q.hostView,T),Q}insert(o,a){const l=o._lView,d=l[1];if(function V(i){return hi(i[3])}(l)){const Q=this.indexOf(o);if(-1!==Q)this.detach(Q);else{const oe=l[3],Ne=new H3(oe,oe[6],oe[3]);Ne.detach(Ne.indexOf(o))}}const f=this._adjustIndex(a),_=this._lContainer;!function l9(i,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Cc(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function k_(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const T=o[19];null!==T&&T.insertView(i),o[2]|=64}(d,l,_,f);const T=n3(f,_),M=l[11],j=Vh(M,_[7]);return null!==j&&function J5(i,o,a,l,d,f){l[0]=d,l[6]=o,r3(i,l,a,1,d,f)}(d,_[6],M,l,j,T),o.attachToViewContainerRef(),Cc(o0(_),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=s0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Ph(this._lContainer,a);l&&(O1(o0(this._lContainer),a),Oh(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Ph(this._lContainer,a);return l&&null!=O1(o0(this._lContainer),a)?new Uu(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function s0(i){return i[8]}function o0(i){return i[8]||(i[8]=[])}function mg(i,o){let a;const l=o[i.index];if(hi(l))a=l;else{let d;if(8&i.type)d=Gr(l);else{const f=o[11];d=f.createComment("");const _=Li(i,o);Si(f,Vh(f,_),d,function u9(i,o){return i.nextSibling(o)}(f,_),!1)}o[i.index]=a=B9(l,o,d,i),pl(o,a)}return new H3(a,i,o)}class z8{constructor(o){this.queryList=o,this.matches=null}clone(){return new z8(this.queryList)}setDirty(){this.queryList.setDirty()}}class u2{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new u2(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==M4(o,a).matches&&this.queries[a].setDirty()}}class a0{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class ou{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new ou(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class T4{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new T4(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,c0(a,f)),this.matchTNodeWithReadOption(o,a,gc(a,o,f,!1,!1))}else l===V3?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,gc(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Dd||d===n0||d===V3&&4&a.type)this.addMatch(a.index,-2);else{const f=gc(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function c0(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function V8(i,o,a,l){return-1===a?function x4(i,o){return 11&i.type?Y2(i,o):4&i.type?t0(i,o):null}(o,i):-2===a?function gg(i,o,a){return a===Dd?Y2(o,i):a===V3?t0(o,i):a===n0?mg(o,i):void 0}(i,o,l):Oo(i,i[1],a,o)}function l0(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=i.data,_=a.matches,T=[];for(let M=0;M<_.length;M+=2){const j=_[M];T.push(j<0?null:V8(o,f[j],_[M+1],a.metadata.read))}d.matches=T}return d.matches}function A4(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=l0(i,o,d,a);for(let T=0;T<f.length;T+=2){const M=f[T];if(M>0)l.push(_[T/2]);else{const j=f[T+1],Q=o[-M];for(let oe=10;oe<Q.length;oe++){const Ne=Q[oe];Ne[17]===Ne[3]&&A4(Ne[1],Ne,j,l)}if(null!==Q[9]){const oe=Q[9];for(let Ne=0;Ne<oe.length;Ne++){const Ge=oe[Ne];A4(Ge[1],Ge,j,l)}}}}}return l}function wl(i){const o=wt(),a=Ln(),l=ho();D1(l+1);const d=M4(a,l);if(i.dirty&&z(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?A4(a,o,l,[]):l0(a,o,d,l);i.reset(f,C_),i.notifyOnChanges()}return!0}return!1}function yg(i,o,a,l){const d=Ln();if(d.firstCreatePass){const f=Zr();(function _g(i,o,a){null===i.queries&&(i.queries=new ou),i.queries.track(new T4(o,a))})(d,new a0(o,a,l),f.index),function H8(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function d0(i,o,a){const l=new S4(4==(4&a));V9(i,o,l,l.destroy),null===o[19]&&(o[19]=new u2),o[19].queries.push(new z8(l))}(d,wt(),a)}function u0(){return function YC(i,o){return i[19].queries[o].queryList}(wt(),ho())}function M4(i,o){return i.queries.getByIndex(o)}function h2(i){const o=xe(i)||Ee(i)||ve(i);return null!==o&&o.standalone}function v0(...i){}const Lg=new tr("Application Initializer");let B3=(()=>{class i{constructor(a){this.appInits=a,this.resolve=v0,this.reject=v0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(B6(f))a.push(f);else if(nm(f)){const _=new Promise((T,M)=>{f.subscribe({complete:T,error:M})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(ui(Lg,8))},i.\u0275prov=Qn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const y0=new tr("AppId",{providedIn:"root",factory:function _0(){return`${C0()}${C0()}${C0()}`}});function C0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const b0=new tr("Platform Initializer"),lb=new tr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),w0=new tr("appBootstrapListener");let ub=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const E0=new tr("LocaleId",{providedIn:"root",factory:()=>H2(E0,tn.Optional|tn.SkipSelf)||function X8(){return typeof $localize<"u"&&$localize.locale||K1}()}),db=new tr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let e7=(()=>{class i{compileModuleSync(a){return new Yf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=aa(ft(a).declarations).reduce((_,T)=>{const M=xe(T);return M&&_.push(new eu(M)),_},[]);return new hb(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const n7=(()=>Promise.resolve(0))();function r7(i){typeof Zone>"u"?n7.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Wo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new y1(!1),this.onMicrotaskEmpty=new y1(!1),this.onStable=new y1(!1),this.onError=new y1(!1),typeof Zone>"u")throw new Xe(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function i7(){let i=$e.requestAnimationFrame,o=$e.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function jg(i){const o=()=>{!function Bg(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call($e,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,a7(i),i.isCheckStableRunning=!0,o7(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),a7(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,T)=>{try{return D0(i),a.invokeTask(d,f,_,T)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),c7(i)}},onInvoke:(a,l,d,f,_,T,M)=>{try{return D0(i),a.invoke(d,f,_,T,M)}finally{i.shouldCoalesceRunChangeDetection&&o(),c7(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,a7(i),o7(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wo.isInAngularZone())throw new Xe(909,!1)}static assertNotInAngularZone(){if(Wo.isInAngularZone())throw new Xe(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,s7,v0,v0);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const s7={};function o7(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function a7(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function D0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function c7(i){i._nesting--,o7(i)}class S0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new y1,this.onMicrotaskEmpty=new y1,this.onStable=new y1,this.onError=new y1}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const $g=new tr(""),Gg=new tr("");let F4,pb=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,F4||(function qg(i){F4=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wo.assertNotInAngularZone(),r7(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())r7(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(ui(Wo),ui(Wg),ui(Gg))},i.\u0275prov=Qn({token:i,factory:i.\u0275fac}),i})(),Wg=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return F4?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),El=null;const T0=new tr("AllowMultipleToken"),z4=new tr("PlatformDestroyListeners");class A0{constructor(o,a){this.name=o,this.token=a}}function Jg(i,o,a=[]){const l=`Platform: ${o}`,d=new tr(l);return(f=[])=>{let _=u7();if(!_||_.injector.get(T0,!1)){const T=[...a,...f,{provide:d,useValue:!0}];i?i(T):function Yg(i){if(El&&!El.get(T0,!1))throw new Xe(400,!1);El=i;const o=i.get(d7);(function g2(i){const o=i.get(b0,null);o&&o.forEach(a=>a())})(i)}(function Xg(i=[],o){return Zl.create({name:o,providers:[{provide:N5,useValue:"platform"},{provide:z4,useValue:new Set([()=>El=null])},...i]})}(T,l))}return function mb(i){const o=u7();if(!o)throw new Xe(401,!1);return o}()}}function u7(){return El?.get(d7)??null}let d7=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function vb(i,o){let a;return a="noop"===i?new S0:("zone.js"===i?void 0:i)||new Wo(o),a}(l?.ngZone,function ev(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:Wo,useValue:d}];return d.run(()=>{const _=Zl.create({providers:f,parent:this.injector,name:a.moduleType.name}),T=a.create(_),M=T.injector.get(Pa,null);if(!M)throw new Xe(402,!1);return d.runOutsideAngular(()=>{const j=d.onError.subscribe({next:Q=>{M.handleError(Q)}});T.onDestroy(()=>{j3(this._modules,T),j.unsubscribe()})}),function tv(i,o,a){try{const l=a();return B6(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(M,d,()=>{const j=T.injector.get(B3);return j.runInitializers(),j.donePromise.then(()=>(function u8(i){zn(i,"Expected localeId to be defined"),"string"==typeof i&&(Sm=i.toLowerCase().replace(/_/g,"-"))}(T.injector.get(E0,K1)||K1),this._moduleDoBootstrap(T),T))})})}bootstrapModule(a,l=[]){const d=nv({},l);return function x0(i,o,a){const l=new Yf(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(V4);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Xe(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(z4,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(ui(Zl))},i.\u0275prov=Qn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function nv(i,o){return Array.isArray(o)?o.reduce(nv,i):{...i,...o}}let V4=(()=>{class i{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new q.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),_=new q.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Wo.assertNotInAngularZone(),r7(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const j=this._zone.onUnstable.subscribe(()=>{Wo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),j.unsubscribe()}});this.isStable=(0,De.T)(f,_.pipe((0,Pe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof qp;if(!this._injector.get(B3).done)throw!d&&h2(a),new Xe(405,false);let _;_=d?a:this._injector.get(Id).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const T=function Kg(i){return i.isBoundToModule}(_)?void 0:this._injector.get(c2),j=_.create(Zl.NULL,[],l||_.selector,T),Q=j.location.nativeElement,oe=j.injector.get($g,null);return oe?.registerApplication(Q),j.onDestroy(()=>{this.detachView(j.hostView),j3(this.components,j),oe?.unregisterApplication(Q)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new Xe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;j3(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(w0,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>j3(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Xe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(ui(Wo),ui(Au),ui(Pa))},i.\u0275prov=Qn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function j3(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let f7=!0,H4=!1;function Rr(){return H4=!0,f7}function iv(){if(H4)throw new Error("Cannot enable prod mode after platform setup.");f7=!1}let gi=(()=>{class i{}return i.__NG_ELEMENT_ID__=Do,i})();function Do(i){return function Lc(i,o,a){if(oo(i)&&!a){const l=li(i.index,o);return new Uu(l,l)}return 47&i.type?new Uu(o[16],o):null}(Zr(),wt(),16==(16&i))}class ov{constructor(){}supports(o){return Vi(o)}create(o){return new av(o)}}const Tb=(i,o)=>o;class av{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Tb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<cu(l,d,f)?a:l,T=cu(_,d,f),M=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const j=T-d,Q=M-d;if(j!=Q){for(let Ne=0;Ne<j;Ne++){const Ge=Ne<f.length?f[Ne]:f[Ne]=0,Et=Ge+Ne;Q<=Et&&Et<j&&(f[Ne]=Ge+1)}f[_.previousIndex]=Q-j}}T!==M&&o(_,T,M)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Vi(o))throw new Xe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let T=0;T<this.length;T++)f=o[T],_=this._trackByFn(T,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,T)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,T),l=!0),a=a._next}else d=0,function tu(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Ds()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,T=>{_=this._trackByFn(d,T),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,T,_,d)),Object.is(a.item,T)||this._addIdentityChange(a,T)):(a=this._mismatch(a,T,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new Il(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new ec),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ec),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Il{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ED{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class ec{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new ED,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cu(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class U4{constructor(){}supports(o){return o instanceof Map||Ai(o)}create(){return new xb}}class xb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Ai(o)))throw new Xe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new Ab(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Ab{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function g7(){return new P0([new ov])}let P0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||g7()),deps:[[i,new Wt,new et]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Xe(901,!1)}}return i.\u0275prov=Qn({token:i,providedIn:"root",factory:g7}),i})();function cv(){return new Dl([new U4])}let Dl=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||cv()),deps:[[i,new Wt,new et]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Xe(901,!1)}}return i.\u0275prov=Qn({token:i,providedIn:"root",factory:cv}),i})();const Nb=Jg(null,"core",[]);let kb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(ui(V4))},i.\u0275mod=kt({type:i}),i.\u0275inj=Dn({}),i})();function Rb(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},433:(Zt,Je,W)=>{W.d(Je,{Fj:()=>Ct,NI:()=>Pi,u:()=>Xo,cw:()=>Me,sg:()=>fi,u5:()=>Zr,JJ:()=>dt,JL:()=>ye,On:()=>Qo,UX:()=>Rs,kI:()=>ke,_Y:()=>Wa});var v=W(4650),x=W(6895),q=W(9751),De=W(4742),Pe=W(8421),Le=W(3269),Ue=W(5403),Ve=W(3268),We=W(1810),ge=W(8996),Re=W(4004);let Tt=(()=>{class H{constructor(P,X){this._renderer=P,this._elementRef=X,this.onChange=nt=>{},this.onTouched=()=>{}}setProperty(P,X){this._renderer.setProperty(this._elementRef.nativeElement,P,X)}registerOnTouched(P){this.onTouched=P}registerOnChange(P){this.onChange=P}setDisabledState(P){this.setProperty("disabled",P)}}return H.\u0275fac=function(P){return new(P||H)(v.Y36(v.Qsj),v.Y36(v.SBq))},H.\u0275dir=v.lG2({type:H}),H})(),mt=(()=>{class H extends Tt{}return H.\u0275fac=function(){let L;return function(X){return(L||(L=v.n5z(H)))(X||H)}}(),H.\u0275dir=v.lG2({type:H,features:[v.qOj]}),H})();const Xe=new v.OlP("NgValueAccessor"),Ye={provide:Xe,useExisting:(0,v.Gpc)(()=>Ct),multi:!0},jt=new v.OlP("CompositionEventMode");let Ct=(()=>{class H extends Tt{constructor(P,X,nt){super(P,X),this._compositionMode=nt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Bt(){const H=(0,x.q)()?(0,x.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(P){this.setProperty("value",P??"")}_handleInput(P){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(P)}_compositionStart(){this._composing=!0}_compositionEnd(P){this._composing=!1,this._compositionMode&&this.onChange(P)}}return H.\u0275fac=function(P){return new(P||H)(v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(jt,8))},H.\u0275dir=v.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(P,X){1&P&&v.NdJ("input",function(vn){return X._handleInput(vn.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(vn){return X._compositionEnd(vn.target.value)})},features:[v._Bn([Ye]),v.qOj]}),H})();function at(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}function rt(H){return null!=H&&"number"==typeof H.length}const Fe=new v.OlP("NgValidators"),je=new v.OlP("NgAsyncValidators"),Ze=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ke{static min(L){return function Oe(H){return L=>{if(at(L.value)||at(H))return null;const P=parseFloat(L.value);return!isNaN(P)&&P<H?{min:{min:H,actual:L.value}}:null}}(L)}static max(L){return function qe(H){return L=>{if(at(L.value)||at(H))return null;const P=parseFloat(L.value);return!isNaN(P)&&P>H?{max:{max:H,actual:L.value}}:null}}(L)}static required(L){return function He(H){return at(H.value)?{required:!0}:null}(L)}static requiredTrue(L){return function Dt(H){return!0===H.value?null:{required:!0}}(L)}static email(L){return function xt(H){return at(H.value)||Ze.test(H.value)?null:{email:!0}}(L)}static minLength(L){return function en(H){return L=>at(L.value)||!rt(L.value)?null:L.value.length<H?{minlength:{requiredLength:H,actualLength:L.value.length}}:null}(L)}static maxLength(L){return function Hn(H){return L=>rt(L.value)&&L.value.length>H?{maxlength:{requiredLength:H,actualLength:L.value.length}}:null}(L)}static pattern(L){return function zn(H){if(!H)return Pt;let L,P;return"string"==typeof H?(P="","^"!==H.charAt(0)&&(P+="^"),P+=H,"$"!==H.charAt(H.length-1)&&(P+="$"),L=new RegExp(P)):(P=H.toString(),L=H),X=>{if(at(X.value))return null;const nt=X.value;return L.test(nt)?null:{pattern:{requiredPattern:P,actualValue:nt}}}}(L)}static nullValidator(L){return null}static compose(L){return Tr(L)}static composeAsync(L){return Lr(L)}}function Pt(H){return null}function ln(H){return null!=H}function er(H){return(0,v.QGY)(H)?(0,ge.D)(H):H}function $n(H){let L={};return H.forEach(P=>{L=null!=P?{...L,...P}:L}),0===Object.keys(L).length?null:L}function Qn(H,L){return L.map(P=>P(H))}function Dn(H){return H.map(L=>function wn(H){return!H.validate}(L)?L:P=>L.validate(P))}function Tr(H){if(!H)return null;const L=H.filter(ln);return 0==L.length?null:function(P){return $n(Qn(P,L))}}function mr(H){return null!=H?Tr(Dn(H)):null}function Lr(H){if(!H)return null;const L=H.filter(ln);return 0==L.length?null:function(P){return function me(...H){const L=(0,Le.jO)(H),{args:P,keys:X}=(0,De.D)(H),nt=new q.y(vn=>{const{length:Pr}=P;if(!Pr)return void vn.complete();const wi=new Array(Pr);let Qi=Pr,Ps=Pr;for(let uo=0;uo<Pr;uo++){let ho=!1;(0,Pe.Xf)(P[uo]).subscribe((0,Ue.x)(vn,D1=>{ho||(ho=!0,Ps--),wi[uo]=D1},()=>Qi--,void 0,()=>{(!Qi||!ho)&&(Ps||vn.next(X?(0,We.n)(X,wi):wi),vn.complete())}))}});return L?nt.pipe((0,Ve.Z)(L)):nt}(Qn(P,L).map(er)).pipe((0,Re.U)($n))}}function fr(H){return null!=H?Lr(Dn(H)):null}function ei(H,L){return null===H?[L]:Array.isArray(H)?[...H,L]:[H,L]}function Yr(H){return H._rawValidators}function fn(H){return H._rawAsyncValidators}function yr(H){return H?Array.isArray(H)?H:[H]:[]}function Fr(H,L){return Array.isArray(H)?H.includes(L):H===L}function tn(H,L){const P=yr(L);return yr(H).forEach(nt=>{Fr(P,nt)||P.push(nt)}),P}function or(H,L){return yr(L).filter(P=>!Fr(H,P))}class pr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=mr(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=fr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L){this.control&&this.control.reset(L)}hasError(L,P){return!!this.control&&this.control.hasError(L,P)}getError(L,P){return this.control?this.control.getError(L,P):null}}class xn extends pr{get formDirective(){return null}get path(){return null}}class dr extends pr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $r{constructor(L){this._cd=L}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dt=(()=>{class H extends $r{constructor(P){super(P)}}return H.\u0275fac=function(P){return new(P||H)(v.Y36(dr,2))},H.\u0275dir=v.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(P,X){2&P&&v.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)},features:[v.qOj]}),H})(),ye=(()=>{class H extends $r{constructor(P){super(P)}}return H.\u0275fac=function(P){return new(P||H)(v.Y36(xn,10))},H.\u0275dir=v.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(P,X){2&P&&v.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)("ng-submitted",X.isSubmitted)},features:[v.qOj]}),H})();const hn="VALID",Gn="INVALID",Un="PENDING",Ar="DISABLED";function xe(H){return(Rt(H)?H.validators:H)||null}function Ee(H){return Array.isArray(H)?mr(H):H||null}function ve(H,L){return(Rt(L)?L.asyncValidators:H)||null}function ft(H){return Array.isArray(H)?fr(H):H||null}function Rt(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}class pn{constructor(L,P){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=L,this._rawAsyncValidators=P,this._composedValidatorFn=Ee(this._rawValidators),this._composedAsyncValidatorFn=ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(L){this._rawValidators=this._composedValidatorFn=L}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(L){this._rawAsyncValidators=this._composedAsyncValidatorFn=L}get parent(){return this._parent}get valid(){return this.status===hn}get invalid(){return this.status===Gn}get pending(){return this.status==Un}get disabled(){return this.status===Ar}get enabled(){return this.status!==Ar}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(L){this._rawValidators=L,this._composedValidatorFn=Ee(L)}setAsyncValidators(L){this._rawAsyncValidators=L,this._composedAsyncValidatorFn=ft(L)}addValidators(L){this.setValidators(tn(L,this._rawValidators))}addAsyncValidators(L){this.setAsyncValidators(tn(L,this._rawAsyncValidators))}removeValidators(L){this.setValidators(or(L,this._rawValidators))}removeAsyncValidators(L){this.setAsyncValidators(or(L,this._rawAsyncValidators))}hasValidator(L){return Fr(this._rawValidators,L)}hasAsyncValidator(L){return Fr(this._rawAsyncValidators,L)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(L={}){this.touched=!0,this._parent&&!L.onlySelf&&this._parent.markAsTouched(L)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(L=>L.markAllAsTouched())}markAsUntouched(L={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(P=>{P.markAsUntouched({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}markAsDirty(L={}){this.pristine=!1,this._parent&&!L.onlySelf&&this._parent.markAsDirty(L)}markAsPristine(L={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(P=>{P.markAsPristine({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}markAsPending(L={}){this.status=Un,!1!==L.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!L.onlySelf&&this._parent.markAsPending(L)}disable(L={}){const P=this._parentMarkedDirty(L.onlySelf);this.status=Ar,this.errors=null,this._forEachChild(X=>{X.disable({...L,onlySelf:!0})}),this._updateValue(),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...L,skipPristineCheck:P}),this._onDisabledChange.forEach(X=>X(!0))}enable(L={}){const P=this._parentMarkedDirty(L.onlySelf);this.status=hn,this._forEachChild(X=>{X.enable({...L,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent}),this._updateAncestors({...L,skipPristineCheck:P}),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(L){this._parent&&!L.onlySelf&&(this._parent.updateValueAndValidity(L),L.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(L){this._parent=L}getRawValue(){return this.value}updateValueAndValidity(L={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hn||this.status===Un)&&this._runAsyncValidator(L.emitEvent)),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.updateValueAndValidity(L)}_updateTreeValidity(L={emitEvent:!0}){this._forEachChild(P=>P._updateTreeValidity(L)),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ar:hn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(L){if(this.asyncValidator){this.status=Un,this._hasOwnPendingAsyncValidator=!0;const P=er(this.asyncValidator(this));this._asyncValidationSubscription=P.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:L})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(L,P={}){this.errors=L,this._updateControlsErrors(!1!==P.emitEvent)}get(L){let P=L;return null==P||(Array.isArray(P)||(P=P.split(".")),0===P.length)?null:P.reduce((X,nt)=>X&&X._find(nt),this)}getError(L,P){const X=P?this.get(P):this;return X&&X.errors?X.errors[L]:null}hasError(L,P){return!!this.getError(L,P)}get root(){let L=this;for(;L._parent;)L=L._parent;return L}_updateControlsErrors(L){this.status=this._calculateStatus(),L&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(L)}_initObservables(){this.valueChanges=new v.vpe,this.statusChanges=new v.vpe}_calculateStatus(){return this._allControlsDisabled()?Ar:this.errors?Gn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Un)?Un:this._anyControlsHaveStatus(Gn)?Gn:hn}_anyControlsHaveStatus(L){return this._anyControls(P=>P.status===L)}_anyControlsDirty(){return this._anyControls(L=>L.dirty)}_anyControlsTouched(){return this._anyControls(L=>L.touched)}_updatePristine(L={}){this.pristine=!this._anyControlsDirty(),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}_updateTouched(L={}){this.touched=this._anyControlsTouched(),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}_registerOnCollectionChange(L){this._onCollectionChange=L}_setUpdateStrategy(L){Rt(L)&&null!=L.updateOn&&(this._updateOn=L.updateOn)}_parentMarkedDirty(L){return!L&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(L){return null}}class Me extends pn{constructor(L,P,X){super(xe(P),ve(X,P)),this.controls=L,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(L,P){return this.controls[L]?this.controls[L]:(this.controls[L]=P,P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange),P)}addControl(L,P,X={}){this.registerControl(L,P),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(L,P={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}setControl(L,P,X={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],P&&this.registerControl(L,P),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(L){return this.controls.hasOwnProperty(L)&&this.controls[L].enabled}setValue(L,P={}){(function Vt(H,L,P){H._forEachChild((X,nt)=>{if(void 0===P[nt])throw new v.vHH(1002,"")})})(this,0,L),Object.keys(L).forEach(X=>{(function _t(H,L,P){const X=H.controls;if(!(L?Object.keys(X):X).length)throw new v.vHH(1e3,"");if(!X[P])throw new v.vHH(1001,"")})(this,!0,X),this.controls[X].setValue(L[X],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(L,P={}){null!=L&&(Object.keys(L).forEach(X=>{const nt=this.controls[X];nt&&nt.patchValue(L[X],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(L={},P={}){this._forEachChild((X,nt)=>{X.reset(L[nt],{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this._reduceChildren({},(L,P,X)=>(L[X]=P.getRawValue(),L))}_syncPendingControls(){let L=this._reduceChildren(!1,(P,X)=>!!X._syncPendingControls()||P);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){Object.keys(this.controls).forEach(P=>{const X=this.controls[P];X&&L(X,P)})}_setUpControls(){this._forEachChild(L=>{L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(L){for(const[P,X]of Object.entries(this.controls))if(this.contains(P)&&L(X))return!0;return!1}_reduceValue(){return this._reduceChildren({},(P,X,nt)=>((X.enabled||this.disabled)&&(P[nt]=X.value),P))}_reduceChildren(L,P){let X=L;return this._forEachChild((nt,vn)=>{X=P(X,nt,vn)}),X}_allControlsDisabled(){for(const L of Object.keys(this.controls))if(this.controls[L].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(L){return this.controls.hasOwnProperty(L)?this.controls[L]:null}}function gn(H,L){return[...L.path,H]}function Rn(H,L){_i(H,L),L.valueAccessor.writeValue(H.value),H.disabled&&L.valueAccessor.setDisabledState?.(!0),function ci(H,L){L.valueAccessor.registerOnChange(P=>{H._pendingValue=P,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&ns(H,L)})}(H,L),function ki(H,L){const P=(X,nt)=>{L.valueAccessor.writeValue(X),nt&&L.viewToModelUpdate(X)};H.registerOnChange(P),L._registerOnDestroy(()=>{H._unregisterOnChange(P)})}(H,L),function js(H,L){L.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&ns(H,L),"submit"!==H.updateOn&&H.markAsTouched()})}(H,L),function Mr(H,L){if(L.valueAccessor.setDisabledState){const P=X=>{L.valueAccessor.setDisabledState(X)};H.registerOnDisabledChange(P),L._registerOnDestroy(()=>{H._unregisterOnDisabledChange(P)})}}(H,L)}function cn(H,L,P=!0){const X=()=>{};L.valueAccessor&&(L.valueAccessor.registerOnChange(X),L.valueAccessor.registerOnTouched(X)),$i(H,L),H&&(L._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function zr(H,L){H.forEach(P=>{P.registerOnValidatorChange&&P.registerOnValidatorChange(L)})}function _i(H,L){const P=Yr(H);null!==L.validator?H.setValidators(ei(P,L.validator)):"function"==typeof P&&H.setValidators([P]);const X=fn(H);null!==L.asyncValidator?H.setAsyncValidators(ei(X,L.asyncValidator)):"function"==typeof X&&H.setAsyncValidators([X]);const nt=()=>H.updateValueAndValidity();zr(L._rawValidators,nt),zr(L._rawAsyncValidators,nt)}function $i(H,L){let P=!1;if(null!==H){if(null!==L.validator){const nt=Yr(H);if(Array.isArray(nt)&&nt.length>0){const vn=nt.filter(Pr=>Pr!==L.validator);vn.length!==nt.length&&(P=!0,H.setValidators(vn))}}if(null!==L.asyncValidator){const nt=fn(H);if(Array.isArray(nt)&&nt.length>0){const vn=nt.filter(Pr=>Pr!==L.asyncValidator);vn.length!==nt.length&&(P=!0,H.setAsyncValidators(vn))}}}const X=()=>{};return zr(L._rawValidators,X),zr(L._rawAsyncValidators,X),P}function ns(H,L){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),L.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function Ci(H,L){if(!H.hasOwnProperty("model"))return!1;const P=H.model;return!!P.isFirstChange()||!Object.is(L,P.currentValue)}function Ri(H,L){if(!L)return null;let P,X,nt;return Array.isArray(L),L.forEach(vn=>{vn.constructor===Ct?P=vn:function so(H){return Object.getPrototypeOf(H.constructor)===mt}(vn)?X=vn:nt=vn}),nt||X||P||null}function oo(H,L){const P=H.indexOf(L);P>-1&&H.splice(P,1)}function Cs(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}const Pi=class extends pn{constructor(L=null,P,X){super(xe(P),ve(X,P)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(L),this._setUpdateStrategy(P),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rt(P)&&(P.nonNullable||P.initialValueIsDefault)&&(this.defaultValue=Cs(L)?L.value:L)}setValue(L,P={}){this.value=this._pendingValue=L,this._onChange.length&&!1!==P.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==P.emitViewToModelChange)),this.updateValueAndValidity(P)}patchValue(L,P={}){this.setValue(L,P)}reset(L=this.defaultValue,P={}){this._applyFormState(L),this.markAsPristine(P),this.markAsUntouched(P),this.setValue(this.value,P),this._pendingChange=!1}_updateValue(){}_anyControls(L){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(L){this._onChange.push(L)}_unregisterOnChange(L){oo(this._onChange,L)}registerOnDisabledChange(L){this._onDisabledChange.push(L)}_unregisterOnDisabledChange(L){oo(this._onDisabledChange,L)}_forEachChild(L){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(L){Cs(L)?(this.value=this._pendingValue=L.value,L.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=L}},ws={provide:dr,useExisting:(0,v.Gpc)(()=>Qo)},E1=(()=>Promise.resolve(null))();let Qo=(()=>{class H extends dr{constructor(P,X,nt,vn,Pr){super(),this._changeDetectorRef=Pr,this.control=new Pi,this._registered=!1,this.update=new v.vpe,this._parent=P,this._setValidators(X),this._setAsyncValidators(nt),this.valueAccessor=Ri(0,vn)}ngOnChanges(P){if(this._checkForErrors(),!this._registered||"name"in P){if(this._registered&&(this._checkName(),this.formDirective)){const X=P.name.previousValue;this.formDirective.removeControl({name:X,path:this._getPath(X)})}this._setUpControl()}"isDisabled"in P&&this._updateDisabled(P),Ci(P,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(P){this.viewModel=P,this.update.emit(P)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(P){E1.then(()=>{this.control.setValue(P,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(P){const X=P.isDisabled.currentValue,nt=0!==X&&(0,v.D6c)(X);E1.then(()=>{nt&&!this.control.disabled?this.control.disable():!nt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(P){return this._parent?gn(P,this._parent):[P]}}return H.\u0275fac=function(P){return new(P||H)(v.Y36(xn,9),v.Y36(Fe,10),v.Y36(je,10),v.Y36(Xe,10),v.Y36(v.sBO,8))},H.\u0275dir=v.lG2({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[v._Bn([ws]),v.qOj,v.TTD]}),H})(),Wa=(()=>{class H{}return H.\u0275fac=function(P){return new(P||H)},H.\u0275dir=v.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})(),I1=(()=>{class H{}return H.\u0275fac=function(P){return new(P||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({}),H})();const Oi=new v.OlP("NgModelWithFormControlWarning"),Zi={provide:xn,useExisting:(0,v.Gpc)(()=>fi)};let fi=(()=>{class H extends xn{constructor(P,X){super(),this.validators=P,this.asyncValidators=X,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new v.vpe,this._setValidators(P),this._setAsyncValidators(X)}ngOnChanges(P){this._checkFormPresent(),P.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($i(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(P){const X=this.form.get(P.path);return Rn(X,P),X.updateValueAndValidity({emitEvent:!1}),this.directives.push(P),X}getControl(P){return this.form.get(P.path)}removeControl(P){cn(P.control||null,P,!1),function Xr(H,L){const P=H.indexOf(L);P>-1&&H.splice(P,1)}(this.directives,P)}addFormGroup(P){this._setUpFormContainer(P)}removeFormGroup(P){this._cleanUpFormContainer(P)}getFormGroup(P){return this.form.get(P.path)}addFormArray(P){this._setUpFormContainer(P)}removeFormArray(P){this._cleanUpFormContainer(P)}getFormArray(P){return this.form.get(P.path)}updateModel(P,X){this.form.get(P.path).setValue(X)}onSubmit(P){return this.submitted=!0,function _s(H,L){H._syncPendingControls(),L.forEach(P=>{const X=P.control;"submit"===X.updateOn&&X._pendingChange&&(P.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(P),!1}onReset(){this.resetForm()}resetForm(P){this.form.reset(P),this.submitted=!1}_updateDomValue(){this.directives.forEach(P=>{const X=P.control,nt=this.form.get(P.path);X!==nt&&(cn(X||null,P),(H=>H instanceof Pi)(nt)&&(Rn(nt,P),P.control=nt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(P){const X=this.form.get(P.path);(function Jr(H,L){_i(H,L)})(X,P),X.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(P){if(this.form){const X=this.form.get(P.path);X&&function $s(H,L){return $i(H,L)}(X,P)&&X.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_i(this.form,this),this._oldForm&&$i(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(P){return new(P||H)(v.Y36(Fe,10),v.Y36(je,10))},H.\u0275dir=v.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(P,X){1&P&&v.NdJ("submit",function(vn){return X.onSubmit(vn)})("reset",function(){return X.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[v._Bn([Zi]),v.qOj,v.TTD]}),H})();const Ms={provide:dr,useExisting:(0,v.Gpc)(()=>Xo)};let Xo=(()=>{class H extends dr{constructor(P,X,nt,vn,Pr){super(),this._ngModelWarningConfig=Pr,this._added=!1,this.update=new v.vpe,this._ngModelWarningSent=!1,this._parent=P,this._setValidators(X),this._setAsyncValidators(nt),this.valueAccessor=Ri(0,vn)}set isDisabled(P){}ngOnChanges(P){this._added||this._setUpControl(),Ci(P,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(P){this.viewModel=P,this.update.emit(P)}get path(){return gn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return H._ngModelWarningSentOnce=!1,H.\u0275fac=function(P){return new(P||H)(v.Y36(xn,13),v.Y36(Fe,10),v.Y36(je,10),v.Y36(Xe,10),v.Y36(Oi,8))},H.\u0275dir=v.lG2({type:H,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[v._Bn([Ms]),v.qOj,v.TTD]}),H})(),bi=(()=>{class H{}return H.\u0275fac=function(P){return new(P||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({imports:[I1]}),H})(),Zr=(()=>{class H{}return H.\u0275fac=function(P){return new(P||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({imports:[bi]}),H})(),Rs=(()=>{class H{static withConfig(P){return{ngModule:H,providers:[{provide:Oi,useValue:P.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(P){return new(P||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({imports:[bi]}),H})()},1481:(Zt,Je,W)=>{W.d(Je,{Dx:()=>ye,H7:()=>Rt,b2:()=>dr,q6:()=>tn});var v=W(6895),x=W(4650);class q extends v.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class De extends q{static makeCurrent(){(0,v.HT)(new De)}onAndCancel(be,ae,Ae){return be.addEventListener(ae,Ae,!1),()=>{be.removeEventListener(ae,Ae,!1)}}dispatchEvent(be,ae){be.dispatchEvent(ae)}remove(be){be.parentNode&&be.parentNode.removeChild(be)}createElement(be,ae){return(ae=ae||this.getDefaultDocument()).createElement(be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(be){return be.nodeType===Node.ELEMENT_NODE}isShadowRoot(be){return be instanceof DocumentFragment}getGlobalEventTarget(be,ae){return"window"===ae?window:"document"===ae?be:"body"===ae?be.body:null}getBaseHref(be){const ae=function Le(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==ae?null:function Ve(Me){Ue=Ue||document.createElement("a"),Ue.setAttribute("href",Me);const be=Ue.pathname;return"/"===be.charAt(0)?be:`/${be}`}(ae)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(be){return(0,v.Mx)(document.cookie,be)}}let Ue,Pe=null;const We=new x.OlP("TRANSITION_ID"),ge=[{provide:x.ip1,useFactory:function me(Me,be,ae){return()=>{ae.get(x.CZH).donePromise.then(()=>{const Ae=(0,v.q)(),ht=be.querySelectorAll(`style[ng-transition="${Me}"]`);for(let gn=0;gn<ht.length;gn++)Ae.remove(ht[gn])})}},deps:[We,v.K0,x.zs3],multi:!0}];let Tt=(()=>{class Me{build(){return new XMLHttpRequest}}return Me.\u0275fac=function(ae){return new(ae||Me)},Me.\u0275prov=x.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const mt=new x.OlP("EventManagerPlugins");let Xe=(()=>{class Me{constructor(ae,Ae){this._zone=Ae,this._eventNameToPlugin=new Map,ae.forEach(ht=>ht.manager=this),this._plugins=ae.slice().reverse()}addEventListener(ae,Ae,ht){return this._findPluginFor(Ae).addEventListener(ae,Ae,ht)}addGlobalEventListener(ae,Ae,ht){return this._findPluginFor(Ae).addGlobalEventListener(ae,Ae,ht)}getZone(){return this._zone}_findPluginFor(ae){const Ae=this._eventNameToPlugin.get(ae);if(Ae)return Ae;const ht=this._plugins;for(let gn=0;gn<ht.length;gn++){const Rn=ht[gn];if(Rn.supports(ae))return this._eventNameToPlugin.set(ae,Rn),Rn}throw new Error(`No event manager plugin found for event ${ae}`)}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(mt),x.LFG(x.R0b))},Me.\u0275prov=x.Yz7({token:Me,factory:Me.\u0275fac}),Me})();class Ut{constructor(be){this._doc=be}addGlobalEventListener(be,ae,Ae){const ht=(0,v.q)().getGlobalEventTarget(this._doc,be);if(!ht)throw new Error(`Unsupported event target ${ht} for event ${ae}`);return this.addEventListener(ht,ae,Ae)}}let ot=(()=>{class Me{constructor(){this._stylesSet=new Set}addStyles(ae){const Ae=new Set;ae.forEach(ht=>{this._stylesSet.has(ht)||(this._stylesSet.add(ht),Ae.add(ht))}),this.onStylesAdded(Ae)}onStylesAdded(ae){}getAllStyles(){return Array.from(this._stylesSet)}}return Me.\u0275fac=function(ae){return new(ae||Me)},Me.\u0275prov=x.Yz7({token:Me,factory:Me.\u0275fac}),Me})(),Ye=(()=>{class Me extends ot{constructor(ae){super(),this._doc=ae,this._hostNodes=new Map,this._hostNodes.set(ae.head,[])}_addStylesToHost(ae,Ae,ht){ae.forEach(gn=>{const Rn=this._doc.createElement("style");Rn.textContent=gn,ht.push(Ae.appendChild(Rn))})}addHost(ae){const Ae=[];this._addStylesToHost(this._stylesSet,ae,Ae),this._hostNodes.set(ae,Ae)}removeHost(ae){const Ae=this._hostNodes.get(ae);Ae&&Ae.forEach(Bt),this._hostNodes.delete(ae)}onStylesAdded(ae){this._hostNodes.forEach((Ae,ht)=>{this._addStylesToHost(ae,ht,Ae)})}ngOnDestroy(){this._hostNodes.forEach(ae=>ae.forEach(Bt))}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(v.K0))},Me.\u0275prov=x.Yz7({token:Me,factory:Me.\u0275fac}),Me})();function Bt(Me){(0,v.q)().remove(Me)}const jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ct=/%COMP%/g;function ke(Me,be,ae){for(let Ae=0;Ae<be.length;Ae++){let ht=be[Ae];Array.isArray(ht)?ke(Me,ht,ae):(ht=ht.replace(Ct,Me),ae.push(ht))}return ae}function Oe(Me){return be=>{if("__ngUnwrap__"===be)return Me;!1===Me(be)&&(be.preventDefault(),be.returnValue=!1)}}let He=(()=>{class Me{constructor(ae,Ae,ht){this.eventManager=ae,this.sharedStylesHost=Ae,this.appId=ht,this.rendererByCompId=new Map,this.defaultRenderer=new Dt(ae)}createRenderer(ae,Ae){if(!ae||!Ae)return this.defaultRenderer;switch(Ae.encapsulation){case x.ifc.Emulated:{let ht=this.rendererByCompId.get(Ae.id);return ht||(ht=new zn(this.eventManager,this.sharedStylesHost,Ae,this.appId),this.rendererByCompId.set(Ae.id,ht)),ht.applyToHost(ae),ht}case 1:case x.ifc.ShadowDom:return new Pt(this.eventManager,this.sharedStylesHost,ae,Ae);default:if(!this.rendererByCompId.has(Ae.id)){const ht=ke(Ae.id,Ae.styles,[]);this.sharedStylesHost.addStyles(ht),this.rendererByCompId.set(Ae.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(Xe),x.LFG(Ye),x.LFG(x.AFp))},Me.\u0275prov=x.Yz7({token:Me,factory:Me.\u0275fac}),Me})();class Dt{constructor(be){this.eventManager=be,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(be,ae){return ae?document.createElementNS(jt[ae]||ae,be):document.createElement(be)}createComment(be){return document.createComment(be)}createText(be){return document.createTextNode(be)}appendChild(be,ae){(Hn(be)?be.content:be).appendChild(ae)}insertBefore(be,ae,Ae){be&&(Hn(be)?be.content:be).insertBefore(ae,Ae)}removeChild(be,ae){be&&be.removeChild(ae)}selectRootElement(be,ae){let Ae="string"==typeof be?document.querySelector(be):be;if(!Ae)throw new Error(`The selector "${be}" did not match any elements`);return ae||(Ae.textContent=""),Ae}parentNode(be){return be.parentNode}nextSibling(be){return be.nextSibling}setAttribute(be,ae,Ae,ht){if(ht){ae=ht+":"+ae;const gn=jt[ht];gn?be.setAttributeNS(gn,ae,Ae):be.setAttribute(ae,Ae)}else be.setAttribute(ae,Ae)}removeAttribute(be,ae,Ae){if(Ae){const ht=jt[Ae];ht?be.removeAttributeNS(ht,ae):be.removeAttribute(`${Ae}:${ae}`)}else be.removeAttribute(ae)}addClass(be,ae){be.classList.add(ae)}removeClass(be,ae){be.classList.remove(ae)}setStyle(be,ae,Ae,ht){ht&(x.JOm.DashCase|x.JOm.Important)?be.style.setProperty(ae,Ae,ht&x.JOm.Important?"important":""):be.style[ae]=Ae}removeStyle(be,ae,Ae){Ae&x.JOm.DashCase?be.style.removeProperty(ae):be.style[ae]=""}setProperty(be,ae,Ae){be[ae]=Ae}setValue(be,ae){be.nodeValue=ae}listen(be,ae,Ae){return"string"==typeof be?this.eventManager.addGlobalEventListener(be,ae,Oe(Ae)):this.eventManager.addEventListener(be,ae,Oe(Ae))}}function Hn(Me){return"TEMPLATE"===Me.tagName&&void 0!==Me.content}class zn extends Dt{constructor(be,ae,Ae,ht){super(be),this.component=Ae;const gn=ke(ht+"-"+Ae.id,Ae.styles,[]);ae.addStyles(gn),this.contentAttr=function je(Me){return"_ngcontent-%COMP%".replace(Ct,Me)}(ht+"-"+Ae.id),this.hostAttr=function Ze(Me){return"_nghost-%COMP%".replace(Ct,Me)}(ht+"-"+Ae.id)}applyToHost(be){super.setAttribute(be,this.hostAttr,"")}createElement(be,ae){const Ae=super.createElement(be,ae);return super.setAttribute(Ae,this.contentAttr,""),Ae}}class Pt extends Dt{constructor(be,ae,Ae,ht){super(be),this.sharedStylesHost=ae,this.hostEl=Ae,this.shadowRoot=Ae.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const gn=ke(ht.id,ht.styles,[]);for(let Rn=0;Rn<gn.length;Rn++){const cn=document.createElement("style");cn.textContent=gn[Rn],this.shadowRoot.appendChild(cn)}}nodeOrShadowRoot(be){return be===this.hostEl?this.shadowRoot:be}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(be,ae){return super.appendChild(this.nodeOrShadowRoot(be),ae)}insertBefore(be,ae,Ae){return super.insertBefore(this.nodeOrShadowRoot(be),ae,Ae)}removeChild(be,ae){return super.removeChild(this.nodeOrShadowRoot(be),ae)}parentNode(be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(be)))}}let ln=(()=>{class Me extends Ut{constructor(ae){super(ae)}supports(ae){return!0}addEventListener(ae,Ae,ht){return ae.addEventListener(Ae,ht,!1),()=>this.removeEventListener(ae,Ae,ht)}removeEventListener(ae,Ae,ht){return ae.removeEventListener(Ae,ht)}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(v.K0))},Me.\u0275prov=x.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const er=["alt","control","meta","shift"],Qn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Dn={alt:Me=>Me.altKey,control:Me=>Me.ctrlKey,meta:Me=>Me.metaKey,shift:Me=>Me.shiftKey};let Tr=(()=>{class Me extends Ut{constructor(ae){super(ae)}supports(ae){return null!=Me.parseEventName(ae)}addEventListener(ae,Ae,ht){const gn=Me.parseEventName(Ae),Rn=Me.eventCallback(gn.fullKey,ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,v.q)().onAndCancel(ae,gn.domEventName,Rn))}static parseEventName(ae){const Ae=ae.toLowerCase().split("."),ht=Ae.shift();if(0===Ae.length||"keydown"!==ht&&"keyup"!==ht)return null;const gn=Me._normalizeKey(Ae.pop());let Rn="";if(er.forEach(zr=>{const Mr=Ae.indexOf(zr);Mr>-1&&(Ae.splice(Mr,1),Rn+=zr+".")}),Rn+=gn,0!=Ae.length||0===gn.length)return null;const cn={};return cn.domEventName=ht,cn.fullKey=Rn,cn}static getEventFullKey(ae){let Ae="",ht=function mr(Me){let be=Me.key;if(null==be){if(be=Me.keyIdentifier,null==be)return"Unidentified";be.startsWith("U+")&&(be=String.fromCharCode(parseInt(be.substring(2),16)),3===Me.location&&wn.hasOwnProperty(be)&&(be=wn[be]))}return Qn[be]||be}(ae);return ht=ht.toLowerCase()," "===ht?ht="space":"."===ht&&(ht="dot"),er.forEach(gn=>{gn!=ht&&(0,Dn[gn])(ae)&&(Ae+=gn+".")}),Ae+=ht,Ae}static eventCallback(ae,Ae,ht){return gn=>{Me.getEventFullKey(gn)===ae&&ht.runGuarded(()=>Ae(gn))}}static _normalizeKey(ae){return"esc"===ae?"escape":ae}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(v.K0))},Me.\u0275prov=x.Yz7({token:Me,factory:Me.\u0275fac}),Me})();const tn=(0,x.eFA)(x._c5,"browser",[{provide:x.Lbi,useValue:v.bD},{provide:x.g9A,useValue:function Yr(){De.makeCurrent()},multi:!0},{provide:v.K0,useFactory:function yr(){return(0,x.RDi)(document),document},deps:[]}]),or=new x.OlP(""),pr=[{provide:x.rWj,useClass:class Re{addToWindow(be){x.dqk.getAngularTestability=(Ae,ht=!0)=>{const gn=be.findTestabilityInTree(Ae,ht);if(null==gn)throw new Error("Could not find testability for element.");return gn},x.dqk.getAllAngularTestabilities=()=>be.getAllTestabilities(),x.dqk.getAllAngularRootElements=()=>be.getAllRootElements(),x.dqk.frameworkStabilizers||(x.dqk.frameworkStabilizers=[]),x.dqk.frameworkStabilizers.push(Ae=>{const ht=x.dqk.getAllAngularTestabilities();let gn=ht.length,Rn=!1;const cn=function(zr){Rn=Rn||zr,gn--,0==gn&&Ae(Rn)};ht.forEach(function(zr){zr.whenStable(cn)})})}findTestabilityInTree(be,ae,Ae){return null==ae?null:be.getTestability(ae)??(Ae?(0,v.q)().isShadowRoot(ae)?this.findTestabilityInTree(be,ae.host,!0):this.findTestabilityInTree(be,ae.parentElement,!0):null)}},deps:[]},{provide:x.lri,useClass:x.dDg,deps:[x.R0b,x.eoX,x.rWj]},{provide:x.dDg,useClass:x.dDg,deps:[x.R0b,x.eoX,x.rWj]}],xn=[{provide:x.zSh,useValue:"root"},{provide:x.qLn,useFactory:function fn(){return new x.qLn},deps:[]},{provide:mt,useClass:ln,multi:!0,deps:[v.K0,x.R0b,x.Lbi]},{provide:mt,useClass:Tr,multi:!0,deps:[v.K0]},{provide:He,useClass:He,deps:[Xe,Ye,x.AFp]},{provide:x.FYo,useExisting:He},{provide:ot,useExisting:Ye},{provide:Ye,useClass:Ye,deps:[v.K0]},{provide:Xe,useClass:Xe,deps:[mt,x.R0b]},{provide:v.JF,useClass:Tt,deps:[]},[]];let dr=(()=>{class Me{constructor(ae){}static withServerTransition(ae){return{ngModule:Me,providers:[{provide:x.AFp,useValue:ae.appId},{provide:We,useExisting:x.AFp},ge]}}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(or,12))},Me.\u0275mod=x.oAB({type:Me}),Me.\u0275inj=x.cJS({providers:[...xn,...pr],imports:[v.ez,x.hGG]}),Me})(),ye=(()=>{class Me{constructor(ae){this._doc=ae}getTitle(){return this._doc.title}setTitle(ae){this._doc.title=ae||""}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(v.K0))},Me.\u0275prov=x.Yz7({token:Me,factory:function(ae){let Ae=null;return Ae=ae?new ae:function dt(){return new ye((0,x.LFG)(v.K0))}(),Ae},providedIn:"root"}),Me})();typeof window<"u"&&window;let Rt=(()=>{class Me{}return Me.\u0275fac=function(ae){return new(ae||Me)},Me.\u0275prov=x.Yz7({token:Me,factory:function(ae){let Ae=null;return Ae=ae?new(ae||Me):x.LFG(Vt),Ae},providedIn:"root"}),Me})(),Vt=(()=>{class Me extends Rt{constructor(ae){super(),this._doc=ae}sanitize(ae,Ae){if(null==Ae)return null;switch(ae){case x.q3G.NONE:return Ae;case x.q3G.HTML:return(0,x.qzn)(Ae,"HTML")?(0,x.z3N)(Ae):(0,x.EiD)(this._doc,String(Ae)).toString();case x.q3G.STYLE:return(0,x.qzn)(Ae,"Style")?(0,x.z3N)(Ae):Ae;case x.q3G.SCRIPT:if((0,x.qzn)(Ae,"Script"))return(0,x.z3N)(Ae);throw new Error("unsafe value used in a script context");case x.q3G.URL:return(0,x.qzn)(Ae,"URL")?(0,x.z3N)(Ae):(0,x.mCW)(String(Ae));case x.q3G.RESOURCE_URL:if((0,x.qzn)(Ae,"ResourceURL"))return(0,x.z3N)(Ae);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ae} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ae){return(0,x.JVY)(ae)}bypassSecurityTrustStyle(ae){return(0,x.L6k)(ae)}bypassSecurityTrustScript(ae){return(0,x.eBb)(ae)}bypassSecurityTrustUrl(ae){return(0,x.LAX)(ae)}bypassSecurityTrustResourceUrl(ae){return(0,x.pB0)(ae)}}return Me.\u0275fac=function(ae){return new(ae||Me)(x.LFG(v.K0))},Me.\u0275prov=x.Yz7({token:Me,factory:function(ae){let Ae=null;return Ae=ae?new ae:function _t(Me){return new Vt(Me.get(v.K0))}(x.LFG(x.zs3)),Ae},providedIn:"root"}),Me})()},1202:(Zt,Je,W)=>{W.d(Je,{F0:()=>is,rH:()=>Qs,Bz:()=>md,lC:()=>si});var v=W(4650),x=W(7579);class q extends x.x{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const C=super._subscribe(E);return!C.closed&&E.next(this._value),C}getValue(){const{hasError:E,thrownError:C,_value:N}=this;if(E)throw C;return this._throwIfClosed(),N}next(E){super.next(this._value=E)}}var De=W(9751),Pe=W(4742),Le=W(8996),Ue=W(4671),Ve=W(3268),We=W(3269),me=W(1810),ge=W(5403),Re=W(9672);function Tt(...b){const E=(0,We.yG)(b),C=(0,We.jO)(b),{args:N,keys:F}=(0,Pe.D)(b);if(0===N.length)return(0,Le.D)([],E);const K=new De.y(function mt(b,E,C=Ue.y){return N=>{Xe(E,()=>{const{length:F}=b,K=new Array(F);let ce=F,we=F;for(let lt=0;lt<F;lt++)Xe(E,()=>{const $t=(0,Le.D)(b[lt],E);let Kn=!1;$t.subscribe((0,ge.x)(N,rn=>{K[lt]=rn,Kn||(Kn=!0,we--),we||N.next(C(K.slice()))},()=>{--ce||N.complete()}))},N)},N)}}(N,E,F?ce=>(0,me.n)(F,ce):Ue.y));return C?K.pipe((0,Ve.Z)(C)):K}function Xe(b,E,C){b?(0,Re.f)(C,b,E):E()}var Ut=W(8421);function ot(b){return new De.y(E=>{(0,Ut.Xf)(b()).subscribe(E)})}var Ye=W(576);function Bt(b,E){const C=(0,Ye.m)(b)?b:()=>b,N=F=>F.error(C());return new De.y(E?F=>E.schedule(N,0,F):N)}var jt=W(727),Ct=W(4482);function bt(){return(0,Ct.e)((b,E)=>{let C=null;b._refCount++;const N=(0,ge.x)(E,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(C=null);const F=b._connection,K=C;C=null,F&&(!K||F===K)&&F.unsubscribe(),E.unsubscribe()});b.subscribe(N),N.closed||(C=b.connect())})}class at extends De.y{constructor(E,C){super(),this.source=E,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,Ct.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new jt.w0;const C=this.getSubject();E.add(this.source.subscribe((0,ge.x)(C,void 0,()=>{this._teardown(),C.complete()},N=>{this._teardown(),C.error(N)},()=>this._teardown()))),E.closed&&(this._connection=null,E=jt.w0.EMPTY)}return E}refCount(){return bt()(this)}}var rt=W(9646),Fe=W(6805),je=W(7272),Ze=W(9635),ke=W(515),Oe=W(6895);function qe(b){return(0,Ct.e)((E,C)=>{let K,N=null,F=!1;N=E.subscribe((0,ge.x)(C,void 0,void 0,ce=>{K=(0,Ut.Xf)(b(ce,qe(b)(E))),N?(N.unsubscribe(),N=null,K.subscribe(C)):F=!0})),F&&(N.unsubscribe(),N=null,K.subscribe(C))})}var He=W(9300);function Dt(b){return b<=0?()=>ke.E:(0,Ct.e)((E,C)=>{let N=[];E.subscribe((0,ge.x)(C,F=>{N.push(F),b<N.length&&N.shift()},()=>{for(const F of N)C.next(F);C.complete()},void 0,()=>{N=null}))})}var xt=W(8068),en=W(6590);function Hn(b,E){const C=arguments.length>=2;return N=>N.pipe(b?(0,He.h)((F,K)=>b(F,K,N)):Ue.y,Dt(1),C?(0,en.d)(E):(0,xt.T)(()=>new Fe.K))}function Pt(b){return(0,Ct.e)((E,C)=>{try{E.subscribe(C)}finally{C.add(b)}})}var ln=W(4004),er=W(3900),$n=W(5698),Qn=W(8675),wn=W(5577),Dn=W(590),Tr=W(4351),mr=W(8505),Lr=W(5026),fr=W(9718),ei=W(8189),Yr=W(1481);const fn="primary";class yr{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const C=this.params[E];return Array.isArray(C)?C[0]:C}return null}getAll(E){if(this.has(E)){const C=this.params[E];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function Fr(b){return new yr(b)}function tn(b,E,C){const N=C.path.split("/");if(N.length>b.length||"full"===C.pathMatch&&(E.hasChildren()||N.length<b.length))return null;const F={};for(let K=0;K<N.length;K++){const ce=N[K],we=b[K];if(ce.startsWith(":"))F[ce.substring(1)]=we;else if(ce!==we.path)return null}return{consumed:b.slice(0,N.length),posParams:F}}function pr(b,E){const C=b?Object.keys(b):void 0,N=E?Object.keys(E):void 0;if(!C||!N||C.length!=N.length)return!1;let F;for(let K=0;K<C.length;K++)if(F=C[K],!xn(b[F],E[F]))return!1;return!0}function xn(b,E){if(Array.isArray(b)&&Array.isArray(E)){if(b.length!==E.length)return!1;const C=[...b].sort(),N=[...E].sort();return C.every((F,K)=>N[K]===F)}return b===E}function dr(b){return Array.prototype.concat.apply([],b)}function $r(b){return b.length>0?b[b.length-1]:null}function kn(b,E){for(const C in b)b.hasOwnProperty(C)&&E(b[C],C)}function dt(b){return(0,v.CqO)(b)?b:(0,v.QGY)(b)?(0,Le.D)(Promise.resolve(b)):(0,rt.of)(b)}const $e={exact:function Qt(b,E,C){if(!Ce(b.segments,E.segments)||!xr(b.segments,E.segments,C)||b.numberOfChildren!==E.numberOfChildren)return!1;for(const N in E.children)if(!b.children[N]||!Qt(b.children[N],E.children[N],C))return!1;return!0},subset:cr},vt={exact:function Sn(b,E){return pr(b,E)},subset:function dn(b,E){return Object.keys(E).length<=Object.keys(b).length&&Object.keys(E).every(C=>xn(b[C],E[C]))},ignored:()=>!0};function nn(b,E,C){return $e[C.paths](b.root,E.root,C.matrixParams)&&vt[C.queryParams](b.queryParams,E.queryParams)&&!("exact"===C.fragment&&b.fragment!==E.fragment)}function cr(b,E,C){return En(b,E,E.segments,C)}function En(b,E,C,N){if(b.segments.length>C.length){const F=b.segments.slice(0,C.length);return!(!Ce(F,C)||E.hasChildren()||!xr(F,C,N))}if(b.segments.length===C.length){if(!Ce(b.segments,C)||!xr(b.segments,C,N))return!1;for(const F in E.children)if(!b.children[F]||!cr(b.children[F],E.children[F],N))return!1;return!0}{const F=C.slice(0,b.segments.length),K=C.slice(b.segments.length);return!!(Ce(b.segments,F)&&xr(b.segments,F,N)&&b.children[fn])&&En(b.children[fn],E,K,N)}}function xr(b,E,C){return E.every((N,F)=>vt[C](b[F].parameters,N.parameters))}class on{constructor(E,C,N){this.root=E,this.queryParams=C,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fr(this.queryParams)),this._queryParamMap}toString(){return hn.serialize(this)}}class ue{constructor(E,C){this.segments=E,this.children=C,this.parent=null,kn(C,(N,F)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gn(this)}}class pe{constructor(E,C){this.path=E,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=Fr(this.parameters)),this._parameterMap}toString(){return _t(this)}}function Ce(b,E){return b.length===E.length&&b.every((C,N)=>C.path===E[N].path)}let gt=(()=>{class b{}return b.\u0275fac=function(C){return new(C||b)},b.\u0275prov=v.Yz7({token:b,factory:function(){return new kt},providedIn:"root"}),b})();class kt{parse(E){const C=new Rn(E);return new on(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(E){const C=`/${Un(E.root,!0)}`,N=function pn(b){const E=Object.keys(b).map(C=>{const N=b[C];return Array.isArray(N)?N.map(F=>`${xe(C)}=${xe(F)}`).join("&"):`${xe(C)}=${xe(N)}`}).filter(C=>!!C);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${C}${N}${"string"==typeof E.fragment?`#${function Ee(b){return encodeURI(b)}(E.fragment)}`:""}`}}const hn=new kt;function Gn(b){return b.segments.map(E=>_t(E)).join("/")}function Un(b,E){if(!b.hasChildren())return Gn(b);if(E){const C=b.children[fn]?Un(b.children[fn],!1):"",N=[];return kn(b.children,(F,K)=>{K!==fn&&N.push(`${K}:${Un(F,!1)}`)}),N.length>0?`${C}(${N.join("//")})`:C}{const C=function _e(b,E){let C=[];return kn(b.children,(N,F)=>{F===fn&&(C=C.concat(E(N,F)))}),kn(b.children,(N,F)=>{F!==fn&&(C=C.concat(E(N,F)))}),C}(b,(N,F)=>F===fn?[Un(b.children[fn],!1)]:[`${F}:${Un(N,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[fn]?`${Gn(b)}/${C[0]}`:`${Gn(b)}/(${C.join("//")})`}}function Ar(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xe(b){return Ar(b).replace(/%3B/gi,";")}function ve(b){return Ar(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ft(b){return decodeURIComponent(b)}function Rt(b){return ft(b.replace(/\+/g,"%20"))}function _t(b){return`${ve(b.path)}${function Vt(b){return Object.keys(b).map(E=>`;${ve(E)}=${ve(b[E])}`).join("")}(b.parameters)}`}const Me=/^[^\/()?;=#]+/;function be(b){const E=b.match(Me);return E?E[0]:""}const ae=/^[^=?&#]+/,ht=/^[^&#]+/;class Rn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(E.length>0||Object.keys(C).length>0)&&(N[fn]=new ue(E,C)),N}parseSegment(){const E=be(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new v.vHH(4009,!1);return this.capture(E),new pe(ft(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const C=be(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const F=be(this.remaining);F&&(N=F,this.capture(N))}E[ft(C)]=ft(N)}parseQueryParam(E){const C=function Ae(b){const E=b.match(ae);return E?E[0]:""}(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const ce=function gn(b){const E=b.match(ht);return E?E[0]:""}(this.remaining);ce&&(N=ce,this.capture(N))}const F=Rt(C),K=Rt(N);if(E.hasOwnProperty(F)){let ce=E[F];Array.isArray(ce)||(ce=[ce],E[F]=ce),ce.push(K)}else E[F]=K}parseParens(E){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=be(this.remaining),F=this.remaining[N.length];if("/"!==F&&")"!==F&&";"!==F)throw new v.vHH(4010,!1);let K;N.indexOf(":")>-1?(K=N.slice(0,N.indexOf(":")),this.capture(K),this.capture(":")):E&&(K=fn);const ce=this.parseChildren();C[K]=1===Object.keys(ce).length?ce[fn]:new ue([],ce),this.consumeOptional("//")}return C}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new v.vHH(4011,!1)}}function cn(b){return b.segments.length>0?new ue([],{[fn]:b}):b}function zr(b){const E={};for(const N of Object.keys(b.children)){const K=zr(b.children[N]);(K.segments.length>0||K.hasChildren())&&(E[N]=K)}return function Mr(b){if(1===b.numberOfChildren&&b.children[fn]){const E=b.children[fn];return new ue(b.segments.concat(E.segments),E.children)}return b}(new ue(b.segments,E))}function _i(b){return b instanceof on}function ki(b,E,C,N,F){if(0===C.length)return On(E.root,E.root,E.root,N,F);const K=function Zo(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new io(!0,0,b);let E=0,C=!1;const N=b.reduce((F,K,ce)=>{if("object"==typeof K&&null!=K){if(K.outlets){const we={};return kn(K.outlets,(lt,$t)=>{we[$t]="string"==typeof lt?lt.split("/"):lt}),[...F,{outlets:we}]}if(K.segmentPath)return[...F,K.segmentPath]}return"string"!=typeof K?[...F,K]:0===ce?(K.split("/").forEach((we,lt)=>{0==lt&&"."===we||(0==lt&&""===we?C=!0:".."===we?E++:""!=we&&F.push(we))}),F):[...F,K]},[]);return new io(C,E,N)}(C);return K.toRoot()?On(E.root,E.root,new ue([],{}),N,F):function ce(lt){const $t=function _s(b,E,C,N){if(b.isAbsolute)return new Ci(E.root,!0,0);if(-1===N)return new Ci(C,C===E.root,0);return function Ri(b,E,C){let N=b,F=E,K=C;for(;K>F;){if(K-=F,N=N.parent,!N)throw new v.vHH(4005,!1);F=N.segments.length}return new Ci(N,!1,F-K)}(C,N+(Jr(b.commands[0])?0:1),b.numberOfDoubleDots)}(K,E,b.snapshot?._urlSegment,lt),Kn=$t.processChildren?Br($t.segmentGroup,$t.index,K.commands):Ko($t.segmentGroup,$t.index,K.commands);return On(E.root,$t.segmentGroup,Kn,N,F)}(b.snapshot?._lastPathIndex)}function Jr(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function $s(b){return"object"==typeof b&&null!=b&&b.outlets}function On(b,E,C,N,F){let ce,K={};N&&kn(N,(lt,$t)=>{K[$t]=Array.isArray(lt)?lt.map(Kn=>`${Kn}`):`${lt}`}),ce=b===E?C:ya(b,E,C);const we=cn(zr(ce));return new on(we,K,F)}function ya(b,E,C){const N={};return kn(b.children,(F,K)=>{N[K]=F===E?C:ya(F,E,C)}),new ue(b.segments,N)}class io{constructor(E,C,N){if(this.isAbsolute=E,this.numberOfDoubleDots=C,this.commands=N,E&&N.length>0&&Jr(N[0]))throw new v.vHH(4003,!1);const F=N.find($s);if(F&&F!==$r(N))throw new v.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ci{constructor(E,C,N){this.segmentGroup=E,this.processChildren=C,this.index=N}}function Ko(b,E,C){if(b||(b=new ue([],{})),0===b.segments.length&&b.hasChildren())return Br(b,E,C);const N=function hi(b,E,C){let N=0,F=E;const K={match:!1,pathIndex:0,commandIndex:0};for(;F<b.segments.length;){if(N>=C.length)return K;const ce=b.segments[F],we=C[N];if($s(we))break;const lt=`${we}`,$t=N<C.length-1?C[N+1]:null;if(F>0&&void 0===lt)break;if(lt&&$t&&"object"==typeof $t&&void 0===$t.outlets){if(!Pi(lt,$t,ce))return K;N+=2}else{if(!Pi(lt,{},ce))return K;N++}F++}return{match:!0,pathIndex:F,commandIndex:N}}(b,E,C),F=C.slice(N.commandIndex);if(N.match&&N.pathIndex<b.segments.length){const K=new ue(b.segments.slice(0,N.pathIndex),{});return K.children[fn]=new ue(b.segments.slice(N.pathIndex),b.children),Br(K,0,F)}return N.match&&0===F.length?new ue(b.segments,{}):N.match&&!b.hasChildren()?Gi(b,E,C):N.match?Br(b,0,F):Gi(b,E,C)}function Br(b,E,C){if(0===C.length)return new ue(b.segments,{});{const N=function Xr(b){return $s(b[0])?b[0].outlets:{[fn]:b}}(C),F={};return kn(N,(K,ce)=>{"string"==typeof K&&(K=[K]),null!==K&&(F[ce]=Ko(b.children[ce],E,K))}),kn(b.children,(K,ce)=>{void 0===N[ce]&&(F[ce]=K)}),new ue(b.segments,F)}}function Gi(b,E,C){const N=b.segments.slice(0,E);let F=0;for(;F<C.length;){const K=C[F];if($s(K)){const lt=oo(K.outlets);return new ue(N,lt)}if(0===F&&Jr(C[0])){N.push(new pe(b.segments[E].path,Cs(C[0]))),F++;continue}const ce=$s(K)?K.outlets[fn]:`${K}`,we=F<C.length-1?C[F+1]:null;ce&&we&&Jr(we)?(N.push(new pe(ce,Cs(we))),F+=2):(N.push(new pe(ce,{})),F++)}return new ue(N,{})}function oo(b){const E={};return kn(b,(C,N)=>{"string"==typeof C&&(C=[C]),null!==C&&(E[N]=Gi(new ue([],{}),0,C))}),E}function Cs(b){const E={};return kn(b,(C,N)=>E[N]=`${C}`),E}function Pi(b,E,C){return b==C.path&&pr(E,C.parameters)}class bs{constructor(E,C){this.id=E,this.url=C}}class Yo extends bs{constructor(E,C,N="imperative",F=null){super(E,C),this.type=0,this.navigationTrigger=N,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hs extends bs{constructor(E,C,N){super(E,C),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _a extends bs{constructor(E,C,N,F){super(E,C),this.reason=N,this.code=F,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ga extends bs{constructor(E,C,N,F){super(E,C),this.error=N,this.target=F,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ca extends bs{constructor(E,C,N,F){super(E,C),this.urlAfterRedirects=N,this.state=F,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ao extends bs{constructor(E,C,N,F){super(E,C),this.urlAfterRedirects=N,this.state=F,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wi extends bs{constructor(E,C,N,F,K){super(E,C),this.urlAfterRedirects=N,this.state=F,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class w1 extends bs{constructor(E,C,N,F){super(E,C),this.urlAfterRedirects=N,this.state=F,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ws extends bs{constructor(E,C,N,F){super(E,C),this.urlAfterRedirects=N,this.state=F,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E1{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qo{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wa{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mo{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gs{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ba{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ac{constructor(E,C,N){this.routerEvent=E,this.position=C,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class No{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const C=this.pathFromRoot(E);return C.length>1?C[C.length-2]:null}children(E){const C=qi(E,this._root);return C?C.children.map(N=>N.value):[]}firstChild(E){const C=qi(E,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(E){const C=qa(E,this._root);return C.length<2?[]:C[C.length-2].children.map(F=>F.value).filter(F=>F!==E)}pathFromRoot(E){return qa(E,this._root).map(C=>C.value)}}function qi(b,E){if(b===E.value)return E;for(const C of E.children){const N=qi(b,C);if(N)return N}return null}function qa(b,E){if(b===E.value)return[E];for(const C of E.children){const N=qa(b,C);if(N.length)return N.unshift(E),N}return[]}class xs{constructor(E,C){this.value=E,this.children=C}toString(){return`TreeNode(${this.value})`}}function Oi(b){const E={};return b&&b.children.forEach(C=>E[C.value.outlet]=C),E}class Ws extends No{constructor(E,C){super(E),this.snapshot=C,Jo(this,E)}toString(){return this.snapshot.toString()}}function qs(b,E){const C=function Zi(b,E){const ce=new As([],{},{},"",{},fn,E,null,b.root,-1,{});return new Ks("",new xs(ce,[]))}(b,E),N=new q([new pe("",{})]),F=new q({}),K=new q({}),ce=new q({}),we=new q(""),lt=new fi(N,F,ce,we,K,fn,E,C.root);return lt.snapshot=C.root,new Ws(new xs(lt,[]),C)}class fi{constructor(E,C,N,F,K,ce,we,lt){this.url=E,this.params=C,this.queryParams=N,this.fragment=F,this.data=K,this.outlet=ce,this.component=we,this._futureSnapshot=lt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ln.U)(E=>Fr(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ln.U)(E=>Fr(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zs(b,E="emptyOnly"){const C=b.pathFromRoot;let N=0;if("always"!==E)for(N=C.length-1;N>=1;){const F=C[N],K=C[N-1];if(F.routeConfig&&""===F.routeConfig.path)N--;else{if(K.component)break;N--}}return function wa(b){return b.reduce((E,C)=>({params:{...E.params,...C.params},data:{...E.data,...C.data},resolve:{...C.data,...E.resolve,...C.routeConfig?.data,...C._resolvedData}}),{params:{},data:{},resolve:{}})}(C.slice(N))}class As{constructor(E,C,N,F,K,ce,we,lt,$t,Kn,rn,Ir){this.url=E,this.params=C,this.queryParams=N,this.fragment=F,this.data=K,this.outlet=ce,this.component=we,this.routeConfig=lt,this._urlSegment=$t,this._lastPathIndex=Kn,this._correctedLastPathIndex=Ir??Kn,this._resolve=rn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ks extends No{constructor(E,C){super(C),this.url=E,Jo(this,C)}toString(){return Ms(this._root)}}function Jo(b,E){E.value._routerState=b,E.children.forEach(C=>Jo(b,C))}function Ms(b){const E=b.children.length>0?` { ${b.children.map(Ms).join(", ")} } `:"";return`${b.value}${E}`}function Xo(b){if(b.snapshot){const E=b.snapshot,C=b._futureSnapshot;b.snapshot=C,pr(E.queryParams,C.queryParams)||b.queryParams.next(C.queryParams),E.fragment!==C.fragment&&b.fragment.next(C.fragment),pr(E.params,C.params)||b.params.next(C.params),function or(b,E){if(b.length!==E.length)return!1;for(let C=0;C<b.length;++C)if(!pr(b[C],E[C]))return!1;return!0}(E.url,C.url)||b.url.next(C.url),pr(E.data,C.data)||b.data.next(C.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Vr(b,E){const C=pr(b.params,E.params)&&function he(b,E){return Ce(b,E)&&b.every((C,N)=>pr(C.parameters,E[N].parameters))}(b.url,E.url);return C&&!(!b.parent!=!E.parent)&&(!b.parent||Vr(b.parent,E.parent))}function co(b,E,C){if(C&&b.shouldReuseRoute(E.value,C.value.snapshot)){const N=C.value;N._futureSnapshot=E.value;const F=function Es(b,E,C){return E.children.map(N=>{for(const F of C.children)if(b.shouldReuseRoute(N.value,F.value.snapshot))return co(b,N,F);return co(b,N)})}(b,E,C);return new xs(N,F)}{if(b.shouldAttach(E.value)){const K=b.retrieve(E.value);if(null!==K){const ce=K.route;return ce.value._futureSnapshot=E.value,ce.children=E.children.map(we=>co(b,we)),ce}}const N=function rs(b){return new fi(new q(b.url),new q(b.params),new q(b.queryParams),new q(b.fragment),new q(b.data),b.outlet,b.component,b)}(E.value),F=E.children.map(K=>co(b,K));return new xs(N,F)}}const ea="ngNavigationCancelingError";function Gr(b,E){const{redirectTo:C,navigationBehaviorOptions:N}=_i(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,F=ko(!1,0,E);return F.url=C,F.navigationBehaviorOptions=N,F}function ko(b,E,C){const N=new Error("NavigationCancelingError: "+(b||""));return N[ea]=!0,N.cancellationCode=E,C&&(N.url=C),N}function Za(b){return Ns(b)&&_i(b.url)}function Ns(b){return b&&b[ea]}class Li{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Fi,this.attachRef=null}}let Fi=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(C,N){const F=this.getOrCreateContext(C);F.outlet=N,this.contexts.set(C,F)}onChildOutletDestroyed(C){const N=this.getContext(C);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let N=this.getContext(C);return N||(N=new Li,this.contexts.set(C,N)),N}getContext(C){return this.contexts.get(C)||null}}return b.\u0275fac=function(C){return new(C||b)},b.\u0275prov=v.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Yi=!1;let si=(()=>{class b{constructor(C,N,F,K,ce){this.parentContexts=C,this.location=N,this.changeDetector=K,this.environmentInjector=ce,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.name=F||fn,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,Yi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,Yi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,Yi);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,N){this.activated=C,this._activatedRoute=N,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,N){if(this.isActivated)throw new v.vHH(4013,Yi);this._activatedRoute=C;const F=this.location,ce=C._futureSnapshot.component,we=this.parentContexts.getOrCreateContext(this.name).children,lt=new li(C,we,F.injector);if(N&&function z(b){return!!b.resolveComponentFactory}(N)){const $t=N.resolveComponentFactory(ce);this.activated=F.createComponent($t,F.length,lt)}else this.activated=F.createComponent(ce,{index:F.length,injector:lt,environmentInjector:N??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(C){return new(C||b)(v.Y36(Fi),v.Y36(v.s_b),v.$8M("name"),v.Y36(v.sBO),v.Y36(v.lqb))},b.\u0275dir=v.lG2({type:b,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),b})();class li{constructor(E,C,N){this.route=E,this.childContexts=C,this.parent=N}get(E,C){return E===fi?this.route:E===Fi?this.childContexts:this.parent.get(E,C)}}let J=(()=>{class b{}return b.\u0275fac=function(C){return new(C||b)},b.\u0275cmp=v.Xpm({type:b,selectors:[["ng-component"]],decls:1,vars:0,template:function(C,N){1&C&&v._UZ(0,"router-outlet")},dependencies:[si],encapsulation:2}),b})();function V(b,E){return b.providers&&!b._injector&&(b._injector=(0,v.MMx)(b.providers,E,`Route: ${b.path}`)),b._injector??E}function Zn(b){const E=b.children&&b.children.map(Zn),C=E?{...b,children:E}:{...b};return!C.component&&!C.loadComponent&&(E||C.loadChildren)&&C.outlet&&C.outlet!==fn&&(C.component=J),C}function hr(b){return b.outlet||fn}function vr(b,E){const C=b.filter(N=>hr(N)===E);return C.push(...b.filter(N=>hr(N)!==E)),C}function qr(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let E=b.parent;E;E=E.parent){const C=E.routeConfig;if(C?._loadedInjector)return C._loadedInjector;if(C?._injector)return C._injector}return null}class Ln{constructor(E,C,N,F){this.routeReuseStrategy=E,this.futureState=C,this.currState=N,this.forwardEvent=F}activate(E){const C=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,N,E),Xo(this.futureState.root),this.activateChildRoutes(C,N,E)}deactivateChildRoutes(E,C,N){const F=Oi(C);E.children.forEach(K=>{const ce=K.value.outlet;this.deactivateRoutes(K,F[ce],N),delete F[ce]}),kn(F,(K,ce)=>{this.deactivateRouteAndItsChildren(K,N)})}deactivateRoutes(E,C,N){const F=E.value,K=C?C.value:null;if(F===K)if(F.component){const ce=N.getContext(F.outlet);ce&&this.deactivateChildRoutes(E,C,ce.children)}else this.deactivateChildRoutes(E,C,N);else K&&this.deactivateRouteAndItsChildren(C,N)}deactivateRouteAndItsChildren(E,C){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,C):this.deactivateRouteAndOutlet(E,C)}detachAndStoreRouteSubtree(E,C){const N=C.getContext(E.value.outlet),F=N&&E.value.component?N.children:C,K=Oi(E);for(const ce of Object.keys(K))this.deactivateRouteAndItsChildren(K[ce],F);if(N&&N.outlet){const ce=N.outlet.detach(),we=N.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:ce,route:E,contexts:we})}}deactivateRouteAndOutlet(E,C){const N=C.getContext(E.value.outlet),F=N&&E.value.component?N.children:C,K=Oi(E);for(const ce of Object.keys(K))this.deactivateRouteAndItsChildren(K[ce],F);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(E,C,N){const F=Oi(C);E.children.forEach(K=>{this.activateRoutes(K,F[K.value.outlet],N),this.forwardEvent(new ba(K.value.snapshot))}),E.children.length&&this.forwardEvent(new Mo(E.value.snapshot))}activateRoutes(E,C,N){const F=E.value,K=C?C.value:null;if(Xo(F),F===K)if(F.component){const ce=N.getOrCreateContext(F.outlet);this.activateChildRoutes(E,C,ce.children)}else this.activateChildRoutes(E,C,N);else if(F.component){const ce=N.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const we=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),ce.children.onOutletReAttached(we.contexts),ce.attachRef=we.componentRef,ce.route=we.route.value,ce.outlet&&ce.outlet.attach(we.componentRef,we.route.value),Xo(we.route.value),this.activateChildRoutes(E,null,ce.children)}else{const we=qr(F.snapshot),lt=we?.get(v._Vd)??null;ce.attachRef=null,ce.route=F,ce.resolver=lt,ce.injector=we,ce.outlet&&ce.outlet.activateWith(F,ce.injector),this.activateChildRoutes(E,null,ce.children)}}else this.activateChildRoutes(E,null,N)}}class ks{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class bi{constructor(E,C){this.component=E,this.route=C}}function Zr(b,E,C){const N=b._root;return pi(N,E?E._root:null,C,[N.value])}function fs(b,E,C){return(qr(E)??C).get(b)}function pi(b,E,C,N,F={canDeactivateChecks:[],canActivateChecks:[]}){const K=Oi(E);return b.children.forEach(ce=>{(function cc(b,E,C,N,F={canDeactivateChecks:[],canActivateChecks:[]}){const K=b.value,ce=E?E.value:null,we=C?C.getContext(b.value.outlet):null;if(ce&&K.routeConfig===ce.routeConfig){const lt=function ta(b,E,C){if("function"==typeof C)return C(b,E);switch(C){case"pathParamsChange":return!Ce(b.url,E.url);case"pathParamsOrQueryParamsChange":return!Ce(b.url,E.url)||!pr(b.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vr(b,E)||!pr(b.queryParams,E.queryParams);default:return!Vr(b,E)}}(ce,K,K.routeConfig.runGuardsAndResolvers);lt?F.canActivateChecks.push(new ks(N)):(K.data=ce.data,K._resolvedData=ce._resolvedData),pi(b,E,K.component?we?we.children:null:C,N,F),lt&&we&&we.outlet&&we.outlet.isActivated&&F.canDeactivateChecks.push(new bi(we.outlet.component,ce))}else ce&&Ea(E,we,F),F.canActivateChecks.push(new ks(N)),pi(b,null,K.component?we?we.children:null:C,N,F)})(ce,K[ce.value.outlet],C,N.concat([ce.value]),F),delete K[ce.value.outlet]}),kn(K,(ce,we)=>Ea(ce,C.getContext(we),F)),F}function Ea(b,E,C){const N=Oi(b),F=b.value;kn(N,(K,ce)=>{Ea(K,F.component?E?E.children.getContext(ce):null:E,C)}),C.canDeactivateChecks.push(new bi(F.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,F))}function lo(b){return"function"==typeof b}function Pr(b){return b instanceof Fe.K||"EmptyError"===b?.name}const wi=Symbol("INITIAL_VALUE");function Qi(){return(0,er.w)(b=>Tt(b.map(E=>E.pipe((0,$n.q)(1),(0,Qn.O)(wi)))).pipe((0,ln.U)(E=>{for(const C of E)if(!0!==C){if(C===wi)return wi;if(!1===C||C instanceof on)return C}return!0}),(0,He.h)(E=>E!==wi),(0,$n.q)(1)))}function Gc(b){return(0,Ze.z)((0,mr.b)(E=>{if(_i(E))throw Gr(0,E)}),(0,ln.U)(E=>!0===E))}const T1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ol(b,E,C,N,F){const K=Qa(b,E,C);return K.matched?function Ya(b,E,C,N){const F=E.canMatch;if(!F||0===F.length)return(0,rt.of)(!0);const K=F.map(ce=>{const we=b.get(ce),lt=function X(b){return b&&lo(b.canMatch)}(we)?we.canMatch(E,C):we(E,C);return dt(lt)});return(0,rt.of)(K).pipe(Qi(),Gc())}(N=V(E,N),E,C).pipe((0,ln.U)(ce=>!0===ce?K:{...T1})):(0,rt.of)(K)}function Qa(b,E,C){if(""===E.path)return"full"===E.pathMatch&&(b.hasChildren()||C.length>0)?{...T1}:{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const F=(E.matcher||tn)(C,b,E);if(!F)return{...T1};const K={};kn(F.posParams,(we,lt)=>{K[lt]=we.path});const ce=F.consumed.length>0?{...K,...F.consumed[F.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:F.consumed,remainingSegments:C.slice(F.consumed.length),parameters:ce,positionalParamSegments:F.posParams??{}}}function oi(b,E,C,N,F="corrected"){if(C.length>0&&function Ll(b,E,C){return C.some(N=>x1(b,E,N)&&hr(N)!==fn)}(b,C,N)){const ce=new ue(E,function Hr(b,E,C,N){const F={};F[fn]=N,N._sourceSegment=b,N._segmentIndexShift=E.length;for(const K of C)if(""===K.path&&hr(K)!==fn){const ce=new ue([],{});ce._sourceSegment=b,ce._segmentIndexShift=E.length,F[hr(K)]=ce}return F}(b,E,N,new ue(C,b.children)));return ce._sourceSegment=b,ce._segmentIndexShift=E.length,{segmentGroup:ce,slicedSegments:[]}}if(0===C.length&&function _u(b,E,C){return C.some(N=>x1(b,E,N))}(b,C,N)){const ce=new ue(b.segments,function Po(b,E,C,N,F,K){const ce={};for(const we of N)if(x1(b,C,we)&&!F[hr(we)]){const lt=new ue([],{});lt._sourceSegment=b,lt._segmentIndexShift="legacy"===K?b.segments.length:E.length,ce[hr(we)]=lt}return{...F,...ce}}(b,E,C,N,b.children,F));return ce._sourceSegment=b,ce._segmentIndexShift=E.length,{segmentGroup:ce,slicedSegments:C}}const K=new ue(b.segments,b.children);return K._sourceSegment=b,K._segmentIndexShift=E.length,{segmentGroup:K,slicedSegments:C}}function x1(b,E,C){return(!(b.hasChildren()||E.length>0)||"full"!==C.pathMatch)&&""===C.path}function lc(b,E,C,N){return!!(hr(b)===N||N!==fn&&x1(E,C,b))&&("**"===b.path||Qa(E,b,C).matched)}function Fl(b,E,C){return 0===E.length&&!b.children[C]}const Ja=!1;class Xa{constructor(E){this.segmentGroup=E||null}}class Wc{constructor(E){this.urlTree=E}}function Da(b){return Bt(new Xa(b))}function A1(b){return Bt(new Wc(b))}class uc{constructor(E,C,N,F,K){this.injector=E,this.configLoader=C,this.urlSerializer=N,this.urlTree=F,this.config=K,this.allowRedirects=!0}apply(){const E=oi(this.urlTree.root,[],[],this.config).segmentGroup,C=new ue(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,C,fn).pipe((0,ln.U)(K=>this.createUrlTree(zr(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qe(K=>{if(K instanceof Wc)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof Xa?this.noMatchError(K):K}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,fn).pipe((0,ln.U)(F=>this.createUrlTree(zr(F),E.queryParams,E.fragment))).pipe(qe(F=>{throw F instanceof Xa?this.noMatchError(F):F}))}noMatchError(E){return new v.vHH(4002,Ja)}createUrlTree(E,C,N){const F=cn(E);return new on(F,C,N)}expandSegmentGroup(E,C,N,F){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(E,C,N).pipe((0,ln.U)(K=>new ue([],K))):this.expandSegment(E,N,C,N.segments,F,!0)}expandChildren(E,C,N){const F=[];for(const K of Object.keys(N.children))"primary"===K?F.unshift(K):F.push(K);return(0,Le.D)(F).pipe((0,Tr.b)(K=>{const ce=N.children[K],we=vr(C,K);return this.expandSegmentGroup(E,we,ce,K).pipe((0,ln.U)(lt=>({segment:lt,outlet:K})))}),(0,Lr.R)((K,ce)=>(K[ce.outlet]=ce.segment,K),{}),Hn())}expandSegment(E,C,N,F,K,ce){return(0,Le.D)(N).pipe((0,Tr.b)(we=>this.expandSegmentAgainstRoute(E,C,N,we,F,K,ce).pipe(qe($t=>{if($t instanceof Xa)return(0,rt.of)(null);throw $t}))),(0,Dn.P)(we=>!!we),qe((we,lt)=>{if(Pr(we))return Fl(C,F,K)?(0,rt.of)(new ue([],{})):Da(C);throw we}))}expandSegmentAgainstRoute(E,C,N,F,K,ce,we){return lc(F,C,K,ce)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(E,C,F,K,ce):we&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,C,N,F,K,ce):Da(C):Da(C)}expandSegmentAgainstRouteUsingRedirect(E,C,N,F,K,ce){return"**"===F.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,N,F,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(E,C,N,F,K,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,C,N,F){const K=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?A1(K):this.lineralizeSegments(N,K).pipe((0,wn.z)(ce=>{const we=new ue(ce,{});return this.expandSegment(E,we,C,ce,F,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,C,N,F,K,ce){const{matched:we,consumedSegments:lt,remainingSegments:$t,positionalParamSegments:Kn}=Qa(C,F,K);if(!we)return Da(C);const rn=this.applyRedirectCommands(lt,F.redirectTo,Kn);return F.redirectTo.startsWith("/")?A1(rn):this.lineralizeSegments(F,rn).pipe((0,wn.z)(Ir=>this.expandSegment(E,C,N,Ir.concat($t),ce,!1)))}matchSegmentAgainstRoute(E,C,N,F,K){return"**"===N.path?(E=V(N,E),N.loadChildren?(N._loadedRoutes?(0,rt.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(E,N)).pipe((0,ln.U)(we=>(N._loadedRoutes=we.routes,N._loadedInjector=we.injector,new ue(F,{})))):(0,rt.of)(new ue(F,{}))):Ol(C,N,F,E).pipe((0,er.w)(({matched:ce,consumedSegments:we,remainingSegments:lt})=>ce?this.getChildConfig(E=N._injector??E,N,F).pipe((0,wn.z)(Kn=>{const rn=Kn.injector??E,Ir=Kn.routes,{segmentGroup:Di,slicedSegments:vo}=oi(C,we,lt,Ir),Js=new ue(Di.segments,Di.children);if(0===vo.length&&Js.hasChildren())return this.expandChildren(rn,Ir,Js).pipe((0,ln.U)(sl=>new ue(we,sl)));if(0===Ir.length&&0===vo.length)return(0,rt.of)(new ue(we,{}));const ti=hr(N)===K;return this.expandSegment(rn,Js,Ir,vo,ti?fn:K,!0).pipe((0,ln.U)(L1=>new ue(we.concat(L1.segments),L1.children)))})):Da(C)))}getChildConfig(E,C,N){return C.children?(0,rt.of)({routes:C.children,injector:E}):C.loadChildren?void 0!==C._loadedRoutes?(0,rt.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):function Ka(b,E,C,N){const F=E.canLoad;if(void 0===F||0===F.length)return(0,rt.of)(!0);const K=F.map(ce=>{const we=b.get(ce),lt=function Ro(b){return b&&lo(b.canLoad)}(we)?we.canLoad(E,C):we(E,C);return dt(lt)});return(0,rt.of)(K).pipe(Qi(),Gc())}(E,C,N).pipe((0,wn.z)(F=>F?this.configLoader.loadChildren(E,C).pipe((0,mr.b)(K=>{C._loadedRoutes=K.routes,C._loadedInjector=K.injector})):function fd(b){return Bt(ko(Ja,3))}())):(0,rt.of)({routes:[],injector:E})}lineralizeSegments(E,C){let N=[],F=C.root;for(;;){if(N=N.concat(F.segments),0===F.numberOfChildren)return(0,rt.of)(N);if(F.numberOfChildren>1||!F.children[fn])return Bt(new v.vHH(4e3,Ja));F=F.children[fn]}}applyRedirectCommands(E,C,N){return this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),E,N)}applyRedirectCreateUrlTree(E,C,N,F){const K=this.createSegmentGroup(E,C.root,N,F);return new on(K,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(E,C){const N={};return kn(E,(F,K)=>{if("string"==typeof F&&F.startsWith(":")){const we=F.substring(1);N[K]=C[we]}else N[K]=F}),N}createSegmentGroup(E,C,N,F){const K=this.createSegments(E,C.segments,N,F);let ce={};return kn(C.children,(we,lt)=>{ce[lt]=this.createSegmentGroup(E,we,N,F)}),new ue(K,ce)}createSegments(E,C,N,F){return C.map(K=>K.path.startsWith(":")?this.findPosParam(E,K,F):this.findOrReturn(K,N))}findPosParam(E,C,N){const F=N[C.path.substring(1)];if(!F)throw new v.vHH(4001,Ja);return F}findOrReturn(E,C){let N=0;for(const F of C){if(F.path===E.path)return C.splice(N),F;N++}return E}}class Sa{}class zl{constructor(E,C,N,F,K,ce,we,lt){this.injector=E,this.rootComponentType=C,this.config=N,this.urlTree=F,this.url=K,this.paramsInheritanceStrategy=ce,this.relativeLinkResolution=we,this.urlSerializer=lt}recognize(){const E=oi(this.urlTree.root,[],[],this.config.filter(C=>void 0===C.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,fn).pipe((0,ln.U)(C=>{if(null===C)return null;const N=new As([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fn,this.rootComponentType,null,this.urlTree.root,-1,{}),F=new xs(N,C),K=new Ks(this.url,F);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(E){const C=E.value,N=Zs(C,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data),E.children.forEach(F=>this.inheritParamsAndData(F))}processSegmentGroup(E,C,N,F){return 0===N.segments.length&&N.hasChildren()?this.processChildren(E,C,N):this.processSegment(E,C,N,N.segments,F)}processChildren(E,C,N){return(0,Le.D)(Object.keys(N.children)).pipe((0,Tr.b)(F=>{const K=N.children[F],ce=vr(C,F);return this.processSegmentGroup(E,ce,K,F)}),(0,Lr.R)((F,K)=>F&&K?(F.push(...K),F):null),function zn(b,E=!1){return(0,Ct.e)((C,N)=>{let F=0;C.subscribe((0,ge.x)(N,K=>{const ce=b(K,F++);(ce||E)&&N.next(K),!ce&&N.complete()}))})}(F=>null!==F),(0,en.d)(null),Hn(),(0,ln.U)(F=>{if(null===F)return null;const K=M1(F);return function M2(b){b.sort((E,C)=>E.value.outlet===fn?-1:C.value.outlet===fn?1:E.value.outlet.localeCompare(C.value.outlet))}(K),K}))}processSegment(E,C,N,F,K){return(0,Le.D)(C).pipe((0,Tr.b)(ce=>this.processSegmentAgainstRoute(ce._injector??E,ce,N,F,K)),(0,Dn.P)(ce=>!!ce),qe(ce=>{if(Pr(ce))return Fl(N,F,K)?(0,rt.of)([]):(0,rt.of)(null);throw ce}))}processSegmentAgainstRoute(E,C,N,F,K){if(C.redirectTo||!lc(C,N,F,K))return(0,rt.of)(null);let ce;if("**"===C.path){const we=F.length>0?$r(F).parameters:{},lt=Zc(N)+F.length,$t=new As(F,we,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ta(C),hr(C),C.component??C._loadedComponent??null,C,na(N),lt,Cu(C),lt);ce=(0,rt.of)({snapshot:$t,consumedSegments:[],remainingSegments:[]})}else ce=Ol(N,C,F,E).pipe((0,ln.U)(({matched:we,consumedSegments:lt,remainingSegments:$t,parameters:Kn})=>{if(!we)return null;const rn=Zc(N)+lt.length;return{snapshot:new As(lt,Kn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ta(C),hr(C),C.component??C._loadedComponent??null,C,na(N),rn,Cu(C),rn),consumedSegments:lt,remainingSegments:$t}}));return ce.pipe((0,er.w)(we=>{if(null===we)return(0,rt.of)(null);const{snapshot:lt,consumedSegments:$t,remainingSegments:Kn}=we;E=C._injector??E;const rn=C._loadedInjector??E,Ir=function Vl(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(C),{segmentGroup:Di,slicedSegments:vo}=oi(N,$t,Kn,Ir.filter(ti=>void 0===ti.redirectTo),this.relativeLinkResolution);if(0===vo.length&&Di.hasChildren())return this.processChildren(rn,Ir,Di).pipe((0,ln.U)(ti=>null===ti?null:[new xs(lt,ti)]));if(0===Ir.length&&0===vo.length)return(0,rt.of)([new xs(lt,[])]);const Js=hr(C)===K;return this.processSegment(rn,Ir,Di,vo,Js?fn:K).pipe((0,ln.U)(ti=>null===ti?null:[new xs(lt,ti)]))}))}}function e1(b){const E=b.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function M1(b){const E=[],C=new Set;for(const N of b){if(!e1(N)){E.push(N);continue}const F=E.find(K=>N.value.routeConfig===K.value.routeConfig);void 0!==F?(F.children.push(...N.children),C.add(F)):E.push(N)}for(const N of C){const F=M1(N.children);E.push(new xs(N.value,F))}return E.filter(N=>!C.has(N))}function na(b){let E=b;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Zc(b){let E=b,C=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,C+=E._segmentIndexShift??0;return C-1}function Ta(b){return b.data||{}}function Cu(b){return b.resolve||{}}const hc=Symbol("RouteTitle");function _r(b){return"string"==typeof b.title||null===b.title}function Qc(b){return(0,er.w)(E=>{const C=b(E);return C?(0,Le.D)(C).pipe((0,ln.U)(()=>E)):(0,rt.of)(E)})}let Ys=(()=>{class b{buildTitle(C){let N,F=C.root;for(;void 0!==F;)N=this.getResolvedTitleForRoute(F)??N,F=F.children.find(K=>K.outlet===fn);return N}getResolvedTitleForRoute(C){return C.data[hc]}}return b.\u0275fac=function(C){return new(C||b)},b.\u0275prov=v.Yz7({token:b,factory:function(){return(0,v.f3M)(k1)},providedIn:"root"}),b})(),k1=(()=>{class b extends Ys{constructor(C){super(),this.title=C}updateTitle(C){const N=this.buildTitle(C);void 0!==N&&this.title.setTitle(N)}}return b.\u0275fac=function(C){return new(C||b)(v.LFG(Yr.Dx))},b.\u0275prov=v.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class fc{}class Hl extends class pc{shouldDetach(E){return!1}store(E,C){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,C){return E.routeConfig===C.routeConfig}}{}const xa=new v.OlP("",{providedIn:"root",factory:()=>({})}),ra=new v.OlP("ROUTES");let ia=(()=>{class b{constructor(C,N){this.injector=C,this.compiler=N,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return(0,rt.of)(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const N=dt(C.loadComponent()).pipe((0,mr.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=K}),Pt(()=>{this.componentLoaders.delete(C)})),F=new at(N,()=>new x.x).pipe(bt());return this.componentLoaders.set(C,F),F}loadChildren(C,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,rt.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const K=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,ln.U)(we=>{this.onLoadEndListener&&this.onLoadEndListener(N);let lt,$t,Kn=!1;Array.isArray(we)?$t=we:(lt=we.create(C).injector,$t=dr(lt.get(ra,[],v.XFs.Self|v.XFs.Optional)));return{routes:$t.map(Zn),injector:lt}}),Pt(()=>{this.childrenLoaders.delete(N)})),ce=new at(K,()=>new x.x).pipe(bt());return this.childrenLoaders.set(N,ce),ce}loadModuleFactoryOrRoutes(C){return dt(C()).pipe((0,wn.z)(N=>N instanceof v.YKP||Array.isArray(N)?(0,rt.of)(N):(0,Le.D)(this.compiler.compileModuleAsync(N))))}}return b.\u0275fac=function(C){return new(C||b)(v.LFG(v.zs3),v.LFG(v.Sil))},b.\u0275prov=v.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class gc{}class Oo{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,C){return E}}function o1(b){throw b}function Ul(b,E,C){return E.parse("/")}const mo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function R1(){const b=(0,v.f3M)(gt),E=(0,v.f3M)(Fi),C=(0,v.f3M)(Oe.Ye),N=(0,v.f3M)(v.zs3),F=(0,v.f3M)(v.Sil),K=(0,v.f3M)(ra,{optional:!0})??[],ce=(0,v.f3M)(xa,{optional:!0})??{},we=(0,v.f3M)(k1),lt=(0,v.f3M)(Ys,{optional:!0}),$t=(0,v.f3M)(gc,{optional:!0}),Kn=(0,v.f3M)(fc,{optional:!0}),rn=new is(null,b,E,C,N,F,dr(K));return $t&&(rn.urlHandlingStrategy=$t),Kn&&(rn.routeReuseStrategy=Kn),rn.titleStrategy=lt??we,function Jc(b,E){b.errorHandler&&(E.errorHandler=b.errorHandler),b.malformedUriErrorHandler&&(E.malformedUriErrorHandler=b.malformedUriErrorHandler),b.onSameUrlNavigation&&(E.onSameUrlNavigation=b.onSameUrlNavigation),b.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=b.paramsInheritanceStrategy),b.relativeLinkResolution&&(E.relativeLinkResolution=b.relativeLinkResolution),b.urlUpdateStrategy&&(E.urlUpdateStrategy=b.urlUpdateStrategy),b.canceledNavigationResolution&&(E.canceledNavigationResolution=b.canceledNavigationResolution)}(ce,rn),rn}let is=(()=>{class b{constructor(C,N,F,K,ce,we,lt){this.rootComponentType=C,this.urlSerializer=N,this.rootContexts=F,this.location=K,this.config=lt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new x.x,this.errorHandler=o1,this.malformedUriErrorHandler=Ul,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,rt.of)(void 0),this.urlHandlingStrategy=new Oo,this.routeReuseStrategy=new Hl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ce.get(ia),this.configLoader.onLoadEndListener=Ir=>this.triggerEvent(new Qo(Ir)),this.configLoader.onLoadStartListener=Ir=>this.triggerEvent(new E1(Ir)),this.ngModule=ce.get(v.h0i),this.console=ce.get(v.c2e);const rn=ce.get(v.R0b);this.isNgZoneEnabled=rn instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(lt),this.currentUrlTree=function le(){return new on(new ue([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qs(this.currentUrlTree,this.rootComponentType),this.transitions=new q({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(C){const N=this.events;return C.pipe((0,He.h)(F=>0!==F.id),(0,ln.U)(F=>({...F,extractedUrl:this.urlHandlingStrategy.extract(F.rawUrl)})),(0,er.w)(F=>{let K=!1,ce=!1;return(0,rt.of)(F).pipe((0,mr.b)(we=>{this.currentNavigation={id:we.id,initialUrl:we.rawUrl,extractedUrl:we.extractedUrl,trigger:we.source,extras:we.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,er.w)(we=>{const lt=this.browserUrlTree.toString(),$t=!this.navigated||we.extractedUrl.toString()!==lt||lt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||$t)&&this.urlHandlingStrategy.shouldProcessUrl(we.rawUrl))return yc(we.source)&&(this.browserUrlTree=we.extractedUrl),(0,rt.of)(we).pipe((0,er.w)(rn=>{const Ir=this.transitions.getValue();return N.next(new Yo(rn.id,this.serializeUrl(rn.extractedUrl),rn.source,rn.restoredState)),Ir!==this.transitions.getValue()?ke.E:Promise.resolve(rn)}),function qc(b,E,C,N){return(0,er.w)(F=>function fo(b,E,C,N,F){return new uc(b,E,C,N,F).apply()}(b,E,C,F.extractedUrl,N).pipe((0,ln.U)(K=>({...F,urlAfterRedirects:K}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mr.b)(rn=>{this.currentNavigation={...this.currentNavigation,finalUrl:rn.urlAfterRedirects},F.urlAfterRedirects=rn.urlAfterRedirects}),function mi(b,E,C,N,F,K){return(0,wn.z)(ce=>function zi(b,E,C,N,F,K,ce="emptyOnly",we="legacy"){return new zl(b,E,C,N,F,ce,we,K).recognize().pipe((0,er.w)(lt=>null===lt?function dc(b){return new De.y(E=>E.error(b))}(new Sa):(0,rt.of)(lt)))}(b,E,C,ce.urlAfterRedirects,N.serialize(ce.urlAfterRedirects),N,F,K).pipe((0,ln.U)(we=>({...ce,targetSnapshot:we}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mr.b)(rn=>{if(F.targetSnapshot=rn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const Di=this.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);this.setBrowserUrl(Di,rn)}this.browserUrlTree=rn.urlAfterRedirects}const Ir=new Ca(rn.id,this.serializeUrl(rn.extractedUrl),this.serializeUrl(rn.urlAfterRedirects),rn.targetSnapshot);N.next(Ir)}));if($t&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ir,extractedUrl:Di,source:vo,restoredState:Js,extras:ti}=we,l1=new Yo(Ir,this.serializeUrl(Di),vo,Js);N.next(l1);const L1=qs(Di,this.rootComponentType).snapshot;return F={...we,targetSnapshot:L1,urlAfterRedirects:Di,extras:{...ti,skipLocationChange:!1,replaceUrl:!1}},(0,rt.of)(F)}return this.rawUrlTree=we.rawUrl,we.resolve(null),ke.E}),(0,mr.b)(we=>{const lt=new ao(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot);this.triggerEvent(lt)}),(0,ln.U)(we=>F={...we,guards:Zr(we.targetSnapshot,we.currentSnapshot,this.rootContexts)}),function Ps(b,E){return(0,wn.z)(C=>{const{targetSnapshot:N,currentSnapshot:F,guards:{canActivateChecks:K,canDeactivateChecks:ce}}=C;return 0===ce.length&&0===K.length?(0,rt.of)({...C,guardsResult:!0}):function uo(b,E,C,N){return(0,Le.D)(b).pipe((0,wn.z)(F=>function $c(b,E,C,N,F){const K=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,rt.of)(!0);const ce=K.map(we=>{const lt=fs(we,E,F);return dt(function P(b){return b&&lo(b.canDeactivate)}(lt)?lt.canDeactivate(b,E,C,N):lt(b,E,C,N)).pipe((0,Dn.P)())});return(0,rt.of)(ce).pipe(Qi())}(F.component,F.route,C,E,N)),(0,Dn.P)(F=>!0!==F,!0))}(ce,N,F,b).pipe((0,wn.z)(we=>we&&function yu(b){return"boolean"==typeof b}(we)?function ho(b,E,C,N){return(0,Le.D)(E).pipe((0,Tr.b)(F=>(0,je.z)(function S1(b,E){return null!==b&&E&&E(new Wa(b)),(0,rt.of)(!0)}(F.route.parent,N),function D1(b,E){return null!==b&&E&&E(new Gs(b)),(0,rt.of)(!0)}(F.route,N),function Ia(b,E,C){const N=E[E.length-1],K=E.slice(0,E.length-1).reverse().map(ce=>function Rs(b){const E=b.routeConfig?b.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:b,guards:E}:null}(ce)).filter(ce=>null!==ce).map(ce=>ot(()=>{const we=ce.guards.map(lt=>{const $t=fs(lt,ce.node,C);return dt(function L(b){return b&&lo(b.canActivateChild)}($t)?$t.canActivateChild(N,b):$t(N,b)).pipe((0,Dn.P)())});return(0,rt.of)(we).pipe(Qi())}));return(0,rt.of)(K).pipe(Qi())}(b,F.path,C),function Pl(b,E,C){const N=E.routeConfig?E.routeConfig.canActivate:null;if(!N||0===N.length)return(0,rt.of)(!0);const F=N.map(K=>ot(()=>{const ce=fs(K,E,C);return dt(function H(b){return b&&lo(b.canActivate)}(ce)?ce.canActivate(E,b):ce(E,b)).pipe((0,Dn.P)())}));return(0,rt.of)(F).pipe(Qi())}(b,F.route,C))),(0,Dn.P)(F=>!0!==F,!0))}(N,K,b,E):(0,rt.of)(we)),(0,ln.U)(we=>({...C,guardsResult:we})))})}(this.ngModule.injector,we=>this.triggerEvent(we)),(0,mr.b)(we=>{if(F.guardsResult=we.guardsResult,_i(we.guardsResult))throw Gr(0,we.guardsResult);const lt=new Wi(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot,!!we.guardsResult);this.triggerEvent(lt)}),(0,He.h)(we=>!!we.guardsResult||(this.restoreHistory(we),this.cancelNavigationTransition(we,"",3),!1)),Qc(we=>{if(we.guards.canActivateChecks.length)return(0,rt.of)(we).pipe((0,mr.b)(lt=>{const $t=new w1(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot);this.triggerEvent($t)}),(0,er.w)(lt=>{let $t=!1;return(0,rt.of)(lt).pipe(function t1(b,E){return(0,wn.z)(C=>{const{targetSnapshot:N,guards:{canActivateChecks:F}}=C;if(!F.length)return(0,rt.of)(C);let K=0;return(0,Le.D)(F).pipe((0,Tr.b)(ce=>function N2(b,E,C,N){const F=b.routeConfig,K=b._resolve;return void 0!==F?.title&&!_r(F)&&(K[hc]=F.title),function Yc(b,E,C,N){const F=function n1(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===F.length)return(0,rt.of)({});const K={};return(0,Le.D)(F).pipe((0,wn.z)(ce=>function bu(b,E,C,N){const F=fs(b,E,N);return dt(F.resolve?F.resolve(E,C):F(E,C))}(b[ce],E,C,N).pipe((0,Dn.P)(),(0,mr.b)(we=>{K[ce]=we}))),Dt(1),(0,fr.h)(K),qe(ce=>Pr(ce)?ke.E:Bt(ce)))}(K,b,E,N).pipe((0,ln.U)(ce=>(b._resolvedData=ce,b.data=Zs(b,C).resolve,F&&_r(F)&&(b.data[hc]=F.title),null)))}(ce.route,N,b,E)),(0,mr.b)(()=>K++),Dt(1),(0,wn.z)(ce=>K===F.length?(0,rt.of)(C):ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mr.b)({next:()=>$t=!0,complete:()=>{$t||(this.restoreHistory(lt),this.cancelNavigationTransition(lt,"",2))}}))}),(0,mr.b)(lt=>{const $t=new ws(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot);this.triggerEvent($t)}))}),Qc(we=>{const lt=$t=>{const Kn=[];$t.routeConfig?.loadComponent&&!$t.routeConfig._loadedComponent&&Kn.push(this.configLoader.loadComponent($t.routeConfig).pipe((0,mr.b)(rn=>{$t.component=rn}),(0,ln.U)(()=>{})));for(const rn of $t.children)Kn.push(...lt(rn));return Kn};return Tt(lt(we.targetSnapshot.root)).pipe((0,en.d)(),(0,$n.q)(1))}),Qc(()=>this.afterPreactivation()),(0,ln.U)(we=>{const lt=function Ki(b,E,C){const N=co(b,E._root,C?C._root:void 0);return new Ws(N,E)}(this.routeReuseStrategy,we.targetSnapshot,we.currentRouterState);return F={...we,targetRouterState:lt}}),(0,mr.b)(we=>{this.currentUrlTree=we.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(we.urlAfterRedirects,we.rawUrl),this.routerState=we.targetRouterState,"deferred"===this.urlUpdateStrategy&&(we.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,we),this.browserUrlTree=we.urlAfterRedirects)}),((b,E,C)=>(0,ln.U)(N=>(new Ln(E,N.targetRouterState,N.currentRouterState,C).activate(b),N)))(this.rootContexts,this.routeReuseStrategy,we=>this.triggerEvent(we)),(0,mr.b)({next(){K=!0},complete(){K=!0}}),Pt(()=>{K||ce||this.cancelNavigationTransition(F,"",1),this.currentNavigation?.id===F.id&&(this.currentNavigation=null)}),qe(we=>{if(ce=!0,Ns(we)){Za(we)||(this.navigated=!0,this.restoreHistory(F,!0));const lt=new _a(F.id,this.serializeUrl(F.extractedUrl),we.message,we.cancellationCode);if(N.next(lt),Za(we)){const $t=this.urlHandlingStrategy.merge(we.url,this.rawUrlTree),Kn={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||yc(F.source)};this.scheduleNavigation($t,"imperative",null,Kn,{resolve:F.resolve,reject:F.reject,promise:F.promise})}else F.resolve(!1)}else{this.restoreHistory(F,!0);const lt=new Ga(F.id,this.serializeUrl(F.extractedUrl),we,F.targetSnapshot??void 0);N.next(lt);try{F.resolve(this.errorHandler(we))}catch($t){F.reject($t)}}return ke.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}setTransition(C){this.transitions.next({...this.transitions.value,...C})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const N="popstate"===C.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{const F={replaceUrl:!0},K=C.state?.navigationId?C.state:null;if(K){const we={...K};delete we.navigationId,delete we.\u0275routerPageId,0!==Object.keys(we).length&&(F.state=we)}const ce=this.parseUrl(C.url);this.scheduleNavigation(ce,N,K,F)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){this.config=C.map(Zn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,N={}){const{relativeTo:F,queryParams:K,fragment:ce,queryParamsHandling:we,preserveFragment:lt}=N,$t=F||this.routerState.root,Kn=lt?this.currentUrlTree.fragment:ce;let rn=null;switch(we){case"merge":rn={...this.currentUrlTree.queryParams,...K};break;case"preserve":rn=this.currentUrlTree.queryParams;break;default:rn=K||null}return null!==rn&&(rn=this.removeEmptyProps(rn)),ki($t,this.currentUrlTree,C,rn,Kn??null)}navigateByUrl(C,N={skipLocationChange:!1}){const F=_i(C)?C:this.parseUrl(C),K=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(K,"imperative",null,N)}navigate(C,N={skipLocationChange:!1}){return function P1(b){for(let E=0;E<b.length;E++){if(null==b[E])throw new v.vHH(4008,false)}}(C),this.navigateByUrl(this.createUrlTree(C,N),N)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let N;try{N=this.urlSerializer.parse(C)}catch(F){N=this.malformedUriErrorHandler(F,this.urlSerializer,C)}return N}isActive(C,N){let F;if(F=!0===N?{...mo}:!1===N?{...vc}:N,_i(C))return nn(this.currentUrlTree,C,F);const K=this.parseUrl(C);return nn(this.currentUrlTree,K,F)}removeEmptyProps(C){return Object.keys(C).reduce((N,F)=>{const K=C[F];return null!=K&&(N[F]=K),N},{})}processNavigations(){this.navigations.subscribe(C=>{this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new hs(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,N,F,K,ce){if(this.disposed)return Promise.resolve(!1);let we,lt,$t;ce?(we=ce.resolve,lt=ce.reject,$t=ce.promise):$t=new Promise((Ir,Di)=>{we=Ir,lt=Di});const Kn=++this.navigationId;let rn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(F=this.location.getState()),rn=F&&F.\u0275routerPageId?F.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):rn=0,this.setTransition({id:Kn,targetPageId:rn,source:N,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:K,resolve:we,reject:lt,promise:$t,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),$t.catch(Ir=>Promise.reject(Ir))}setBrowserUrl(C,N){const F=this.urlSerializer.serialize(C),K={...N.extras.state,...this.generateNgRouterState(N.id,N.targetPageId)};this.location.isCurrentPathEqualTo(F)||N.extras.replaceUrl?this.location.replaceState(F,"",K):this.location.go(F,"",K)}restoreHistory(C,N=!1){if("computed"===this.canceledNavigationResolution){const F=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===F?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===F&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(F)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,N,F){const K=new _a(C.id,this.serializeUrl(C.extractedUrl),N,F);this.triggerEvent(K),C.resolve(!1)}generateNgRouterState(C,N){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:N}:{navigationId:C}}}return b.\u0275fac=function(C){v.$Z()},b.\u0275prov=v.Yz7({token:b,factory:function(){return R1()},providedIn:"root"}),b})();function yc(b){return"imperative"!==b}let Qs=(()=>{class b{constructor(C,N,F,K,ce){this.router=C,this.route=N,this.tabIndexAttribute=F,this.renderer=K,this.el=ce,this.commands=null,this.onChanges=new x.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(C){if(null!=this.tabIndexAttribute)return;const N=this.renderer,F=this.el.nativeElement;null!==C?N.setAttribute(F,"tabindex",C):N.removeAttribute(F,"tabindex")}ngOnChanges(C){this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const C={skipLocationChange:(0,v.D6c)(this.skipLocationChange),replaceUrl:(0,v.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,C),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,v.D6c)(this.preserveFragment)})}}return b.\u0275fac=function(C){return new(C||b)(v.Y36(is),v.Y36(fi),v.$8M("tabindex"),v.Y36(v.Qsj),v.Y36(v.SBq))},b.\u0275dir=v.lG2({type:b,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(C,N){1&C&&v.NdJ("click",function(){return N.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[v.TTD]}),b})();class a1{}let el=(()=>{class b{constructor(C,N,F,K,ce){this.router=C,this.injector=F,this.preloadingStrategy=K,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,He.h)(C=>C instanceof hs),(0,Tr.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,N){const F=[];for(const K of N){K.providers&&!K._injector&&(K._injector=(0,v.MMx)(K.providers,C,`Route: ${K.path}`));const ce=K._injector??C,we=K._loadedInjector??ce;K.loadChildren&&!K._loadedRoutes&&void 0===K.canLoad||K.loadComponent&&!K._loadedComponent?F.push(this.preloadConfig(ce,K)):(K.children||K._loadedRoutes)&&F.push(this.processRoutes(we,K.children??K._loadedRoutes))}return(0,Le.D)(F).pipe((0,ei.J)())}preloadConfig(C,N){return this.preloadingStrategy.preload(N,()=>{let F;F=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(C,N):(0,rt.of)(null);const K=F.pipe((0,wn.z)(ce=>null===ce?(0,rt.of)(void 0):(N._loadedRoutes=ce.routes,N._loadedInjector=ce.injector,this.processRoutes(ce.injector??C,ce.routes))));if(N.loadComponent&&!N._loadedComponent){const ce=this.loader.loadComponent(N);return(0,Le.D)([K,ce]).pipe((0,ei.J)())}return K})}}return b.\u0275fac=function(C){return new(C||b)(v.LFG(is),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(a1),v.LFG(ia))},b.\u0275prov=v.Yz7({token:b,factory:b.\u0275fac}),b})();const tr=new v.OlP("");let Bl=(()=>{class b{constructor(C,N,F={}){this.router=C,this.viewportScroller=N,this.options=F,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},F.scrollPositionRestoration=F.scrollPositionRestoration||"disabled",F.anchorScrolling=F.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Yo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof hs&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof ac&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,N){this.router.triggerEvent(new ac(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return b.\u0275fac=function(C){v.$Z()},b.\u0275prov=v.Yz7({token:b,factory:b.\u0275fac}),b})();const tl=new v.OlP("ROUTER_FORROOT_GUARD"),R2=new v.OlP(""),P2=[Oe.Ye,{provide:gt,useClass:kt},{provide:is,useFactory:R1},Fi,{provide:fi,useFactory:function O2(b){return b.routerState.root},deps:[is]},ia];function Aa(){return new v.PXZ("Router",is)}let md=(()=>{class b{constructor(C){}static forRoot(C,N){return{ngModule:b,providers:[P2,[],rl(C),{provide:tl,useFactory:_c,deps:[[is,new v.FiY,new v.tp0]]},{provide:xa,useValue:N||{}},N?.useHash?{provide:Oe.S$,useClass:Oe.Do}:{provide:Oe.S$,useClass:Oe.b0},{provide:tr,useFactory:()=>{const b=(0,v.f3M)(is),E=(0,v.f3M)(Oe.EM),C=(0,v.f3M)(xa);return C.scrollOffset&&E.setOffset(C.scrollOffset),new Bl(b,E,C)}},N?.preloadingStrategy?Eu(N.preloadingStrategy):[],{provide:v.PXZ,multi:!0,useFactory:Aa},N?.initialNavigation?go(N):[],[{provide:Ii,useFactory:F2},{provide:v.tb,multi:!0,useExisting:Ii}]]}}static forChild(C){return{ngModule:b,providers:[rl(C)]}}}return b.\u0275fac=function(C){return new(C||b)(v.LFG(tl,8))},b.\u0275mod=v.oAB({type:b}),b.\u0275inj=v.cJS({}),b})();function _c(b){return"guarded"}function rl(b){return[{provide:ra,multi:!0,useValue:b}]}function F2(){const b=(0,v.f3M)(v.zs3);return E=>{const C=b.get(v.z2F);if(E!==C.components[0])return;const N=b.get(is),F=b.get(O1);1===b.get(Na)&&N.initialNavigation(),b.get(R2,null,v.XFs.Optional)?.setUpPreloading(),b.get(tr,null,v.XFs.Optional)?.init(),N.resetRootComponentType(C.componentTypes[0]),F.next(),F.complete()}}const Ii=new v.OlP("");function go(b){return["disabled"===b.initialNavigation?[{provide:v.ip1,multi:!0,useFactory:()=>{const b=(0,v.f3M)(is);return()=>{b.setUpLocationChangeListener()}}},{provide:Na,useValue:2}]:[],"enabledBlocking"===b.initialNavigation?[{provide:Na,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:b=>{const E=b.get(Oe.V_,Promise.resolve(null));let C=!1;return()=>E.then(()=>new Promise(F=>{const K=b.get(is),ce=b.get(O1);(function N(F){b.get(is).events.pipe((0,He.h)(ce=>ce instanceof hs||ce instanceof _a||ce instanceof Ga),(0,ln.U)(ce=>ce instanceof hs||ce instanceof _a&&(0===ce.code||1===ce.code)&&null),(0,He.h)(ce=>null!==ce),(0,$n.q)(1)).subscribe(()=>{F()})})(()=>{F(!0),C=!0}),K.afterPreactivation=()=>(F(!0),C||ce.closed?(0,rt.of)(void 0):ce),K.initialNavigation()}))}}]:[]]}const O1=new v.OlP("",{factory:()=>new x.x}),Na=new v.OlP("",{providedIn:"root",factory:()=>1});function Eu(b){return[el,{provide:R2,useExisting:el},{provide:a1,useExisting:b}]}},3942:(Zt,Je,W)=>{W.d(Je,{Z:()=>Xe});var v=W(2090),x=W(4859),q=W(9681),De=W(1877);class Pe{constructor(ot,Ye){this._delegate=ot,this.firebase=Ye,(0,q._addComponent)(ot,new x.wA("app-compat",()=>this,"PUBLIC")),this.container=ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this._delegate.automaticDataCollectionEnabled=ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ot=>{this._delegate.checkDestroyed(),ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(ot,Ye=q._DEFAULT_ENTRY_NAME){var Bt;this._delegate.checkDestroyed();const jt=this._delegate.container.getProvider(ot);return!jt.isInitialized()&&"EXPLICIT"===(null===(Bt=jt.getComponent())||void 0===Bt?void 0:Bt.instantiationMode)&&jt.initialize(),jt.getImmediate({identifier:Ye})}_removeServiceInstance(ot,Ye=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ot).clearInstance(Ye)}_addComponent(ot){(0,q._addComponent)(this._delegate,ot)}_addOrOverwriteComponent(ot){(0,q._addOrOverwriteComponent)(this._delegate,ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ue=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),me=function We(){const Ut=function Ve(Ut){const ot={},Ye={__esModule:!0,initializeApp:function Ct(Fe,je={}){const Ze=q.initializeApp(Fe,je);if((0,v.r3)(ot,Ze.name))return ot[Ze.name];const ke=new Ut(Ze,Ye);return ot[Ze.name]=ke,ke},app:jt,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function at(Fe){const je=Fe.name,Ze=je.replace("-compat","");if(q._registerComponent(Fe)&&"PUBLIC"===Fe.type){const ke=(Oe=jt())=>{if("function"!=typeof Oe[Ze])throw Ue.create("invalid-app-argument",{appName:je});return Oe[Ze]()};void 0!==Fe.serviceProps&&(0,v.ZB)(ke,Fe.serviceProps),Ye[Ze]=ke,Ut.prototype[Ze]=function(...Oe){return this._getService.bind(this,je).apply(this,Fe.multipleInstances?Oe:[])}}return"PUBLIC"===Fe.type?Ye[Ze]:null},removeApp:function Bt(Fe){delete ot[Fe]},useAsService:function rt(Fe,je){return"serverAuth"===je?null:je},modularAPIs:q}};function jt(Fe){if(!(0,v.r3)(ot,Fe=Fe||q._DEFAULT_ENTRY_NAME))throw Ue.create("no-app",{appName:Fe});return ot[Fe]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function bt(){return Object.keys(ot).map(Fe=>ot[Fe])}}),jt.App=Ut,Ye}(Pe);return Ut.INTERNAL=Object.assign(Object.assign({},Ut.INTERNAL),{createFirebaseNamespace:We,extendNamespace:function ot(Ye){(0,v.ZB)(Ut,Ye)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),Ut}(),ge=new De.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ut=self.firebase.SDK_VERSION;Ut&&Ut.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=me;!function mt(Ut){(0,q.registerVersion)("@firebase/app-compat","0.1.33",Ut)}()},9681:(Zt,Je,W)=>{W.r(Je),W.d(Je,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>Yr,_DEFAULT_ENTRY_NAME:()=>zn,_addComponent:()=>$n,_addOrOverwriteComponent:()=>Qn,_apps:()=>ln,_clearComponents:()=>mr,_components:()=>er,_getProvider:()=>Dn,_registerComponent:()=>wn,_removeServiceInstance:()=>Tr,deleteApp:()=>tn,getApp:()=>yr,getApps:()=>Fr,initializeApp:()=>fn,onLog:()=>xn,registerVersion:()=>pr,setLogLevel:()=>dr});var v=W(5861),x=W(4859),q=W(1877),De=W(2090),Pe=W(8766);class Le{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(_e=>{if(function Ue(he){return"VERSION"===he.getComponent()?.type}(_e)){const gt=_e.getImmediate();return`${gt.library}/${gt.version}`}return null}).filter(_e=>_e).join(" ")}}const Ve="@firebase/app",me=new q.Yd("@firebase/app"),zn="[DEFAULT]",Pt={[Ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,er=new Map;function $n(he,Ce){try{he.container.addComponent(Ce)}catch(_e){me.debug(`Component ${Ce.name} failed to register with FirebaseApp ${he.name}`,_e)}}function Qn(he,Ce){he.container.addOrOverwriteComponent(Ce)}function wn(he){const Ce=he.name;if(er.has(Ce))return me.debug(`There were multiple attempts to register component ${Ce}.`),!1;er.set(Ce,he);for(const _e of ln.values())$n(_e,he);return!0}function Dn(he,Ce){const _e=he.container.getProvider("heartbeat").getImmediate({optional:!0});return _e&&_e.triggerHeartbeat(),he.container.getProvider(Ce)}function Tr(he,Ce,_e=zn){Dn(he,Ce).clearInstance(_e)}function mr(){er.clear()}const fr=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ei{constructor(Ce,_e,gt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},_e),this._name=_e.name,this._automaticDataCollectionEnabled=_e.automaticDataCollectionEnabled,this._container=gt,this.container.addComponent(new x.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const Yr="9.9.4";function fn(he,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const _e=Object.assign({name:zn,automaticDataCollectionEnabled:!1},Ce),gt=_e.name;if("string"!=typeof gt||!gt)throw fr.create("bad-app-name",{appName:String(gt)});const kt=ln.get(gt);if(kt){if((0,De.vZ)(he,kt.options)&&(0,De.vZ)(_e,kt.config))return kt;throw fr.create("duplicate-app",{appName:gt})}const hn=new x.H0(gt);for(const Un of er.values())hn.addComponent(Un);const Gn=new ei(he,_e,hn);return ln.set(gt,Gn),Gn}function yr(he=zn){const Ce=ln.get(he);if(!Ce)throw fr.create("no-app",{appName:he});return Ce}function Fr(){return Array.from(ln.values())}function tn(he){return or.apply(this,arguments)}function or(){return(or=(0,v.Z)(function*(he){const Ce=he.name;ln.has(Ce)&&(ln.delete(Ce),yield Promise.all(he.container.getProviders().map(_e=>_e.delete())),he.isDeleted=!0)})).apply(this,arguments)}function pr(he,Ce,_e){var gt;let kt=null!==(gt=Pt[he])&&void 0!==gt?gt:he;_e&&(kt+=`-${_e}`);const hn=kt.match(/\s|\//),Gn=Ce.match(/\s|\//);if(hn||Gn){const Un=[`Unable to register library "${kt}" with version "${Ce}":`];return hn&&Un.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),hn&&Gn&&Un.push("and"),Gn&&Un.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void me.warn(Un.join(" "))}wn(new x.wA(`${kt}-version`,()=>({library:kt,version:Ce}),"VERSION"))}function xn(he,Ce){if(null!==he&&"function"!=typeof he)throw fr.create("invalid-log-argument");(0,q.Am)(he,Ce)}function dr(he){(0,q.Ub)(he)}const kn="firebase-heartbeat-store";let dt=null;function ye(){return dt||(dt=(0,Pe.X3)("firebase-heartbeat-database",1,{upgrade:(he,Ce)=>{0===Ce&&he.createObjectStore(kn)}}).catch(he=>{throw fr.create("idb-open",{originalErrorMessage:he.message})})),dt}function $e(){return($e=(0,v.Z)(function*(he){var Ce;try{return(yield ye()).transaction(kn).objectStore(kn).get(Sn(he))}catch(_e){if(_e instanceof De.ZR)me.warn(_e.message);else{const gt=fr.create("idb-get",{originalErrorMessage:null===(Ce=_e)||void 0===Ce?void 0:Ce.message});me.warn(gt.message)}}})).apply(this,arguments)}function vt(he,Ce){return nn.apply(this,arguments)}function nn(){return(nn=(0,v.Z)(function*(he,Ce){var _e;try{const kt=(yield ye()).transaction(kn,"readwrite");return yield kt.objectStore(kn).put(Ce,Sn(he)),kt.done}catch(gt){if(gt instanceof De.ZR)me.warn(gt.message);else{const kt=fr.create("idb-set",{originalErrorMessage:null===(_e=gt)||void 0===_e?void 0:_e.message});me.warn(kt.message)}}})).apply(this,arguments)}function Sn(he){return`${he.name}!${he.options.appId}`}class cr{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const _e=this.container.getProvider("app").getImmediate();this._storage=new on(_e),this._heartbeatsCachePromise=this._storage.read().then(gt=>(this._heartbeatsCache=gt,gt))}triggerHeartbeat(){var Ce=this;return(0,v.Z)(function*(){const gt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=En();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==kt&&!Ce._heartbeatsCache.heartbeats.some(hn=>hn.date===kt))return Ce._heartbeatsCache.heartbeats.push({date:kt,agent:gt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(hn=>{const Gn=new Date(hn.date).valueOf();return Date.now()-Gn<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,v.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const _e=En(),{heartbeatsToSend:gt,unsentEntries:kt}=function xr(he,Ce=1024){const _e=[];let gt=he.slice();for(const kt of he){const hn=_e.find(Gn=>Gn.agent===kt.agent);if(hn){if(hn.dates.push(kt.date),ue(_e)>Ce){hn.dates.pop();break}}else if(_e.push({agent:kt.agent,dates:[kt.date]}),ue(_e)>Ce){_e.pop();break}gt=gt.slice(1)}return{heartbeatsToSend:_e,unsentEntries:gt}}(Ce._heartbeatsCache.heartbeats),hn=(0,De.L)(JSON.stringify({version:2,heartbeats:gt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=_e,kt.length>0?(Ce._heartbeatsCache.heartbeats=kt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),hn})()}}function En(){return(new Date).toISOString().substring(0,10)}class on{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,De.hl)()&&(0,De.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,v.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function le(he){return $e.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var _e=this;return(0,v.Z)(function*(){var gt;if(yield _e._canUseIndexedDBPromise){const hn=yield _e.read();return vt(_e.app,{lastSentHeartbeatDate:null!==(gt=Ce.lastSentHeartbeatDate)&&void 0!==gt?gt:hn.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var _e=this;return(0,v.Z)(function*(){var gt;if(yield _e._canUseIndexedDBPromise){const hn=yield _e.read();return vt(_e.app,{lastSentHeartbeatDate:null!==(gt=Ce.lastSentHeartbeatDate)&&void 0!==gt?gt:hn.lastSentHeartbeatDate,heartbeats:[...hn.heartbeats,...Ce.heartbeats]})}})()}}function ue(he){return(0,De.L)(JSON.stringify({version:2,heartbeats:he})).length}!function pe(he){wn(new x.wA("platform-logger",Ce=>new Le(Ce),"PRIVATE")),wn(new x.wA("heartbeat",Ce=>new cr(Ce),"PRIVATE")),pr(Ve,"0.7.32",he),pr(Ve,"0.7.32","esm2017"),pr("fire-js","")}("")},4859:(Zt,Je,W)=>{W.d(Je,{H0:()=>Ve,wA:()=>q,zt:()=>Pe});var v=W(5861),x=W(2090);class q{constructor(me,ge,Re){this.name=me,this.instanceFactory=ge,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(me){return this.instantiationMode=me,this}setMultipleInstances(me){return this.multipleInstances=me,this}setServiceProps(me){return this.serviceProps=me,this}setInstanceCreatedCallback(me){return this.onInstanceCreated=me,this}}const De="[DEFAULT]";class Pe{constructor(me,ge){this.name=me,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(me){const ge=this.normalizeInstanceIdentifier(me);if(!this.instancesDeferred.has(ge)){const Re=new x.BH;if(this.instancesDeferred.set(ge,Re),this.isInitialized(ge)||this.shouldAutoInitialize())try{const Tt=this.getOrInitializeService({instanceIdentifier:ge});Tt&&Re.resolve(Tt)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(me){var ge;const Re=this.normalizeInstanceIdentifier(me?.identifier),Tt=null!==(ge=me?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(Tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(mt){if(Tt)return null;throw mt}}getComponent(){return this.component}setComponent(me){if(me.name!==this.name)throw Error(`Mismatching Component ${me.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=me,this.shouldAutoInitialize()){if(function Ue(We){return"EAGER"===We.instantiationMode}(me))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(const[ge,Re]of this.instancesDeferred.entries()){const Tt=this.normalizeInstanceIdentifier(ge);try{const mt=this.getOrInitializeService({instanceIdentifier:Tt});Re.resolve(mt)}catch{}}}}clearInstance(me=De){this.instancesDeferred.delete(me),this.instancesOptions.delete(me),this.instances.delete(me)}delete(){var me=this;return(0,v.Z)(function*(){const ge=Array.from(me.instances.values());yield Promise.all([...ge.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...ge.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(me=De){return this.instances.has(me)}getOptions(me=De){return this.instancesOptions.get(me)||{}}initialize(me={}){const{options:ge={}}=me,Re=this.normalizeInstanceIdentifier(me.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tt=this.getOrInitializeService({instanceIdentifier:Re,options:ge});for(const[mt,Xe]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(mt)&&Xe.resolve(Tt);return Tt}onInit(me,ge){var Re;const Tt=this.normalizeInstanceIdentifier(ge),mt=null!==(Re=this.onInitCallbacks.get(Tt))&&void 0!==Re?Re:new Set;mt.add(me),this.onInitCallbacks.set(Tt,mt);const Xe=this.instances.get(Tt);return Xe&&me(Xe,Tt),()=>{mt.delete(me)}}invokeOnInitCallbacks(me,ge){const Re=this.onInitCallbacks.get(ge);if(Re)for(const Tt of Re)try{Tt(me,ge)}catch{}}getOrInitializeService({instanceIdentifier:me,options:ge={}}){let Re=this.instances.get(me);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:(We=me,We===De?void 0:We),options:ge}),this.instances.set(me,Re),this.instancesOptions.set(me,ge),this.invokeOnInitCallbacks(Re,me),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,me,Re)}catch{}var We;return Re||null}normalizeInstanceIdentifier(me=De){return this.component?this.component.multipleInstances?me:De:me}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ve{constructor(me){this.name=me,this.providers=new Map}addComponent(me){const ge=this.getProvider(me.name);if(ge.isComponentSet())throw new Error(`Component ${me.name} has already been registered with ${this.name}`);ge.setComponent(me)}addOrOverwriteComponent(me){this.getProvider(me.name).isComponentSet()&&this.providers.delete(me.name),this.addComponent(me)}getProvider(me){if(this.providers.has(me))return this.providers.get(me);const ge=new Pe(me,this);return this.providers.set(me,ge),ge}getProviders(){return Array.from(this.providers.values())}}},1877:(Zt,Je,W)=>{W.d(Je,{Am:()=>We,Ub:()=>Ve,Yd:()=>Ue,in:()=>x});const v=[];var x=(()=>{return(me=x||(x={}))[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",x;var me})();const q={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},De=x.INFO,Pe={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},Le=(me,ge,...Re)=>{if(ge<me.logLevel)return;const Tt=(new Date).toISOString(),mt=Pe[ge];if(!mt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[mt](`[${Tt}]  ${me.name}:`,...Re)};class Ue{constructor(ge){this.name=ge,this._logLevel=De,this._logHandler=Le,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in x))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?q[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...ge),this._logHandler(this,x.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...ge),this._logHandler(this,x.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,x.INFO,...ge),this._logHandler(this,x.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,x.WARN,...ge),this._logHandler(this,x.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...ge),this._logHandler(this,x.ERROR,...ge)}}function Ve(me){v.forEach(ge=>{ge.setLogLevel(me)})}function We(me,ge){for(const Re of v){let Tt=null;ge&&ge.level&&(Tt=q[ge.level]),Re.userLogHandler=null===me?null:(mt,Xe,...Ut)=>{const ot=Ut.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch{return null}}).filter(Ye=>Ye).join(" ");Xe>=(Tt??mt.logLevel)&&me({level:x[Xe].toLowerCase(),message:ot,args:Ut,type:mt.name})}}}},8766:(Zt,Je,W)=>{W.d(Je,{Lj:()=>Ct,X3:()=>jt});var v=W(5861);let q,De;const Ue=new WeakMap,Ve=new WeakMap,We=new WeakMap,me=new WeakMap,ge=new WeakMap;let mt={get(je,Ze,ke){if(je instanceof IDBTransaction){if("done"===Ze)return Ve.get(je);if("objectStoreNames"===Ze)return je.objectStoreNames||We.get(je);if("store"===Ze)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return Ye(je[Ze])},set:(je,Ze,ke)=>(je[Ze]=ke,!0),has:(je,Ze)=>je instanceof IDBTransaction&&("done"===Ze||"store"===Ze)||Ze in je};function ot(je){return"function"==typeof je?function Ut(je){return je!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Le(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(je)?function(...Ze){return je.apply(Bt(this),Ze),Ye(Ue.get(this))}:function(...Ze){return Ye(je.apply(Bt(this),Ze))}:function(Ze,...ke){const Oe=je.call(Bt(this),Ze,...ke);return We.set(Oe,Ze.sort?Ze.sort():[Ze]),Ye(Oe)}}(je):(je instanceof IDBTransaction&&function Tt(je){if(Ve.has(je))return;const Ze=new Promise((ke,Oe)=>{const qe=()=>{je.removeEventListener("complete",He),je.removeEventListener("error",Dt),je.removeEventListener("abort",Dt)},He=()=>{ke(),qe()},Dt=()=>{Oe(je.error||new DOMException("AbortError","AbortError")),qe()};je.addEventListener("complete",He),je.addEventListener("error",Dt),je.addEventListener("abort",Dt)});Ve.set(je,Ze)}(je),((je,Ze)=>Ze.some(ke=>je instanceof ke))(je,function Pe(){return q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(je,mt):je)}function Ye(je){if(je instanceof IDBRequest)return function Re(je){const Ze=new Promise((ke,Oe)=>{const qe=()=>{je.removeEventListener("success",He),je.removeEventListener("error",Dt)},He=()=>{ke(Ye(je.result)),qe()},Dt=()=>{Oe(je.error),qe()};je.addEventListener("success",He),je.addEventListener("error",Dt)});return Ze.then(ke=>{ke instanceof IDBCursor&&Ue.set(ke,je)}).catch(()=>{}),ge.set(Ze,je),Ze}(je);if(me.has(je))return me.get(je);const Ze=ot(je);return Ze!==je&&(me.set(je,Ze),ge.set(Ze,je)),Ze}const Bt=je=>ge.get(je);function jt(je,Ze,{blocked:ke,upgrade:Oe,blocking:qe,terminated:He}={}){const Dt=indexedDB.open(je,Ze),xt=Ye(Dt);return Oe&&Dt.addEventListener("upgradeneeded",en=>{Oe(Ye(Dt.result),en.oldVersion,en.newVersion,Ye(Dt.transaction))}),ke&&Dt.addEventListener("blocked",()=>ke()),xt.then(en=>{He&&en.addEventListener("close",()=>He()),qe&&en.addEventListener("versionchange",()=>qe())}).catch(()=>{}),xt}function Ct(je,{blocked:Ze}={}){const ke=indexedDB.deleteDatabase(je);return Ze&&ke.addEventListener("blocked",()=>Ze()),Ye(ke).then(()=>{})}const bt=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],rt=new Map;function Fe(je,Ze){if(!(je instanceof IDBDatabase)||Ze in je||"string"!=typeof Ze)return;if(rt.get(Ze))return rt.get(Ze);const ke=Ze.replace(/FromIndex$/,""),Oe=Ze!==ke,qe=at.includes(ke);if(!(ke in(Oe?IDBIndex:IDBObjectStore).prototype)||!qe&&!bt.includes(ke))return;const He=function(){var Dt=(0,v.Z)(function*(xt,...en){const Hn=this.transaction(xt,qe?"readwrite":"readonly");let zn=Hn.store;return Oe&&(zn=zn.index(en.shift())),(yield Promise.all([zn[ke](...en),qe&&Hn.done]))[0]});return function(en){return Dt.apply(this,arguments)}}();return rt.set(Ze,He),He}!function Xe(je){mt=je(mt)}(je=>({...je,get:(Ze,ke,Oe)=>Fe(Ze,ke)||je.get(Ze,ke,Oe),has:(Ze,ke)=>!!Fe(Ze,ke)||je.has(Ze,ke)}))},5861:(Zt,Je,W)=>{function v(q,De,Pe,Le,Ue,Ve,We){try{var me=q[Ve](We),ge=me.value}catch(Re){return void Pe(Re)}me.done?De(ge):Promise.resolve(ge).then(Le,Ue)}function x(q){return function(){var De=this,Pe=arguments;return new Promise(function(Le,Ue){var Ve=q.apply(De,Pe);function We(ge){v(Ve,Le,Ue,We,me,"next",ge)}function me(ge){v(Ve,Le,Ue,We,me,"throw",ge)}We(void 0)})}}W.d(Je,{Z:()=>x})}},Zt=>{Zt(Zt.s=3180)}]);